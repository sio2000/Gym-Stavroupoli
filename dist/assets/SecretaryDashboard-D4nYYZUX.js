const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/membershipApi-D4OFDNqq.js","assets/index-eB7Silf9.js","assets/index-BmsBxK4-.css","assets/jsQR-DY6PGUYO.js"])))=>i.map(i=>d[i]);
import{d as ea,j as v,v as Dt,X as Rt,h as rr,U as Er,b as wi,T as ta,p as wr,u as ra,r as ae,z as te,s as lt,E as na,Q as Lr,F as kr,q as hr,e as Bn,C as ia,G as Fn,_ as vr}from"./index-eB7Silf9.js";import{getDurationLabel as Kr,formatPrice as Jr,getMembershipRequests as jr,approveMembershipRequest as aa,rejectMembershipRequest as oa}from"./membershipApi-D4OFDNqq.js";import{s as sa,m as ca,e as fa,f as Ln}from"./programApprovalApi-BTq21d-y.js";import{S as qr}from"./search-gHwigFga.js";import{R as Ur}from"./refresh-cw-CXKUojyS.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=ea("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),la=({installmentRequests:r,installmentLoading:e,installmentSearchTerm:t,setInstallmentSearchTerm:n,selectedRequestOptions:i,handleRequestOptionChange:a,updateInstallmentAmounts:o,deleteInstallmentRequest:s,loadInstallmentRequests:c,handleApproveRequest:f,handleRejectRequest:u,loading:l})=>{const h=()=>r.filter(d=>{var y,m;return t===""||`${((y=d.user)==null?void 0:y.firstName)||""} ${((m=d.user)==null?void 0:m.lastName)||""}`.toLowerCase().includes(t.toLowerCase())});return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Δόσεις Ultimate"}),v.jsx("p",{className:"text-gray-600 mt-1",children:"Διαχείριση δόσεων για πακέτα Ultimate"})]}),v.jsxs("button",{onClick:c,disabled:e,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[e?v.jsx(Dt,{className:"h-4 w-4 animate-spin"}):v.jsx(qr,{className:"h-4 w-4"}),v.jsx("span",{children:"Ανανέωση"})]})]}),v.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsx("div",{className:"flex-1",children:v.jsxs("div",{className:"relative",children:[v.jsx(qr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),v.jsx("input",{type:"text",placeholder:"Αναζήτηση με όνομα χρήστη...",value:t,onChange:d=>n(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})}),t&&v.jsx("button",{onClick:()=>n(""),className:"px-3 py-2 text-gray-500 hover:text-gray-700 transition-colors",children:v.jsx(Rt,{className:"h-4 w-4"})})]})}),e?v.jsxs("div",{className:"flex items-center justify-center py-12",children:[v.jsx(Dt,{className:"h-8 w-8 animate-spin text-blue-600"}),v.jsx("span",{className:"ml-2 text-gray-600",children:"Φόρτωση αιτημάτων δόσεων..."})]}):h().length===0?v.jsxs("div",{className:"text-center py-12",children:[v.jsx(rr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),v.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t?"Δεν βρέθηκαν αποτελέσματα":"Δεν υπάρχουν αιτήματα δόσεων"}),v.jsx("p",{className:"text-gray-600",children:t?"Δοκιμάστε διαφορετικό όνομα για την αναζήτηση.":"Όταν οι χρήστες επιλέξουν δόσεις για το πακέτο Ultimate, θα εμφανίζονται εδώ."})]}):v.jsx("div",{className:"grid gap-6",children:h().map(d=>{var x,y,m,_,w,C,A,S,I,O,P,U,F,de,$;return v.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[v.jsx("div",{className:"p-6",children:v.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[v.jsxs("div",{className:"flex items-start space-x-4",children:[v.jsxs("div",{className:"relative",children:[(x=d.user)!=null&&x.profile_photo?v.jsxs("div",{className:"w-12 h-12 rounded-xl overflow-hidden shadow-lg border-2 border-white",children:[v.jsx("img",{src:d.user.profile_photo,alt:`${(y=d.user)==null?void 0:y.first_name} ${(m=d.user)==null?void 0:m.last_name}`,className:"w-full h-full object-cover",onError:G=>{G.currentTarget.style.display="none";const be=G.currentTarget.nextElementSibling;be&&(be.style.display="flex")}}),v.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center hidden",children:v.jsx(Er,{className:"h-6 w-6 text-white"})})]}):v.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:v.jsx(Er,{className:"h-6 w-6 text-white"})}),d.status==="pending"&&v.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full border-2 border-white"})]}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-1",children:[(_=d.user)==null?void 0:_.first_name," ",(w=d.user)==null?void 0:w.last_name]}),v.jsxs("p",{className:"text-sm text-slate-600 mb-2 flex items-center",children:[v.jsx("span",{className:"w-2 h-2 bg-slate-300 rounded-full mr-2"}),(C=d.user)==null?void 0:C.email]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Ultimate Package"}),v.jsx("span",{className:"text-sm text-slate-500",children:"•"}),v.jsx("span",{className:"text-sm text-slate-600",children:Kr(d.duration_type)})]})]})]}),v.jsxs("div",{className:"flex items-center space-x-6",children:[v.jsxs("div",{className:"text-right",children:[v.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:Jr(d.requested_price)}),v.jsxs("div",{className:"text-sm text-slate-500 flex items-center",children:[v.jsx(wi,{className:"h-4 w-4 mr-1"}),new Date(d.created_at).toLocaleDateString("el-GR")]})]}),v.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[d.status==="pending"&&v.jsxs("div",{className:"flex space-x-2",children:[v.jsxs("button",{onClick:()=>f(d.id),disabled:l,className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[v.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),v.jsx("span",{children:"Εγκρίνω"})]}),v.jsxs("button",{onClick:()=>u(d.id),disabled:l,className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[v.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),v.jsx("span",{children:"Απορρίπτω"})]})]}),d.status==="approved"&&v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),v.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"Εγκεκριμένο"})]}),d.status==="rejected"&&v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),v.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-semibold",children:"Απορριφθέν"})]}),v.jsxs("button",{onClick:()=>{window.confirm("Είστε σίγουροι ότι θέλετε να διαγράψετε αυτό το αίτημα δόσεων; Αυτή η ενέργεια δεν μπορεί να αναιρεθεί.")&&s(d.id)},className:"px-3 py-1 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium flex items-center space-x-1",children:[v.jsx(ta,{className:"h-3 w-3"}),v.jsx("span",{children:"Διαγραφή"})]})]})]})]})}),v.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[v.jsxs("h4",{className:"text-lg font-semibold text-orange-800 mb-4 flex items-center",children:[v.jsx("span",{className:"text-2xl mr-2",children:"💳"}),"Διαχείριση Δόσεων"]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"1η Δόση"}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("input",{type:"number",value:((A=i[d.id])==null?void 0:A.installment1Amount)||d.installment_1_amount||"",onChange:G=>a(d.id,"installment1Amount",G.target.value),placeholder:"Ποσό",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),v.jsxs("select",{value:((S=i[d.id])==null?void 0:S.installment1PaymentMethod)||d.installment_1_payment_method||"cash",onChange:G=>a(d.id,"installment1PaymentMethod",G.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[v.jsx("option",{value:"cash",children:"💰 Μετρητά"}),v.jsx("option",{value:"pos",children:"💳 POS"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"📅 Ημερομηνία Πληρωμής"}),v.jsx("input",{type:"date",value:((I=i[d.id])==null?void 0:I.installment1DueDate)||d.installment_1_due_date||"",onChange:G=>a(d.id,"installment1DueDate",G.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"2η Δόση"}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("input",{type:"number",value:((O=i[d.id])==null?void 0:O.installment2Amount)||d.installment_2_amount||"",onChange:G=>a(d.id,"installment2Amount",G.target.value),placeholder:"Ποσό",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),v.jsxs("select",{value:((P=i[d.id])==null?void 0:P.installment2PaymentMethod)||d.installment_2_payment_method||"cash",onChange:G=>a(d.id,"installment2PaymentMethod",G.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[v.jsx("option",{value:"cash",children:"💰 Μετρητά"}),v.jsx("option",{value:"pos",children:"💳 POS"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"📅 Ημερομηνία Πληρωμής"}),v.jsx("input",{type:"date",value:((U=i[d.id])==null?void 0:U.installment2DueDate)||d.installment_2_due_date||"",onChange:G=>a(d.id,"installment2DueDate",G.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"3η Δόση"}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("input",{type:"number",value:((F=i[d.id])==null?void 0:F.installment3Amount)||d.installment_3_amount||"",onChange:G=>a(d.id,"installment3Amount",G.target.value),placeholder:"Ποσό",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),v.jsxs("select",{value:((de=i[d.id])==null?void 0:de.installment3PaymentMethod)||d.installment_3_payment_method||"cash",onChange:G=>a(d.id,"installment3PaymentMethod",G.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[v.jsx("option",{value:"cash",children:"💰 Μετρητά"}),v.jsx("option",{value:"pos",children:"💳 POS"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"📅 Ημερομηνία Πληρωμής"}),v.jsx("input",{type:"date",value:(($=i[d.id])==null?void 0:$.installment3DueDate)||d.installment_3_due_date||"",onChange:G=>a(d.id,"installment3DueDate",G.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]})]})]})]}),v.jsx("div",{className:"mt-6 flex justify-end",children:v.jsxs("button",{onClick:()=>{var rt,Vt,fr,ct,nt,ur,Ht,bt,M;const G=parseFloat(((rt=i[d.id])==null?void 0:rt.installment1Amount)||d.installment_1_amount||"0"),be=parseFloat(((Vt=i[d.id])==null?void 0:Vt.installment2Amount)||d.installment_2_amount||"0"),Je=parseFloat(((fr=i[d.id])==null?void 0:fr.installment3Amount)||d.installment_3_amount||"0"),gt=((ct=i[d.id])==null?void 0:ct.installment1PaymentMethod)||d.installment_1_payment_method||"cash",yt=((nt=i[d.id])==null?void 0:nt.installment2PaymentMethod)||d.installment_2_payment_method||"cash",st=((ur=i[d.id])==null?void 0:ur.installment3PaymentMethod)||d.installment_3_payment_method||"cash",Mr=((Ht=i[d.id])==null?void 0:Ht.installment1DueDate)||d.installment_1_due_date,Ut=((bt=i[d.id])==null?void 0:bt.installment2DueDate)||d.installment_2_due_date,cr=((M=i[d.id])==null?void 0:M.installment3DueDate)||d.installment_3_due_date;o(d.id,G,be,Je,gt,yt,st,Mr,Ut,cr)},className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center space-x-2",children:[v.jsx(wr,{className:"h-4 w-4"}),v.jsx("span",{children:"Αποθήκευση Δόσεων & Ημερομηνιών"})]})})]})]},d.id)})})]})};function da(r,e){var t=Object.setPrototypeOf;t?t(r,e):r.__proto__=e}function ha(r,e){e===void 0&&(e=r.constructor);var t=Error.captureStackTrace;t&&t(r,e)}var va=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pa=function(r){va(e,r);function e(t,n){var i=this.constructor,a=r.call(this,t,n)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),da(a,i.prototype),ha(a),a}return e}(Error),xa=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ke=function(r){xa(e,r);function e(t){t===void 0&&(t=void 0);var n=r.call(this,t)||this;return n.message=t,n}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(pa),ga=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ae=function(r){ga(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Ke),ya=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),j=function(r){ya(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Ke),_i=function(){function r(e){if(this.binarizer=e,e===null)throw new j("Binarizer must be non-null.")}return r.prototype.getWidth=function(){return this.binarizer.getWidth()},r.prototype.getHeight=function(){return this.binarizer.getHeight()},r.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},r.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},r.prototype.crop=function(e,t,n,i){var a=this.binarizer.getLuminanceSource().crop(e,t,n,i);return new r(this.binarizer.createBinarizer(a))},r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},r.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(e))},r.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(e))},r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},r}(),ma=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ee=function(r){ma(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Ke),wa=function(){function r(e){this.source=e}return r.prototype.getLuminanceSource=function(){return this.source},r.prototype.getWidth=function(){return this.source.getWidth()},r.prototype.getHeight=function(){return this.source.getHeight()},r}(),ve=function(){function r(){}return r.arraycopy=function(e,t,n,i,a){for(;a--;)n[i++]=e[t++]},r.currentTimeMillis=function(){return Date.now()},r}(),_a=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fn=function(r){_a(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Ke),Aa=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),kn=function(r){Aa(e,r);function e(t,n){t===void 0&&(t=void 0),n===void 0&&(n=void 0);var i=r.call(this,n)||this;return i.index=t,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e}(fn),Ca=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pe=function(){function r(){}return r.fill=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n]=t},r.fillWithin=function(e,t,n,i){r.rangeCheck(e.length,t,n);for(var a=t;a<n;a++)e[a]=i},r.rangeCheck=function(e,t,n){if(t>n)throw new j("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new kn(t);if(n>e)throw new kn(n)},r.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},r.create=function(e,t,n){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(n)})},r.createInt32Array=function(e,t,n){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(n)})},r.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0},r.hashCode=function(e){var t,n;if(e===null)return 0;var i=1;try{for(var a=Ca(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=31*i+s}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},r.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},r.copyOf=function(e,t){return e.slice(0,t)},r.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},r.copyOfRange=function(e,t,n){var i=n-t,a=new Int32Array(i);return ve.arraycopy(e,t,a,0,i),a},r.binarySearch=function(e,t,n){n===void 0&&(n=r.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,s=n(t,e[o]);if(s>0)i=o+1;else if(s<0)a=o-1;else return o}return-i-1},r.numberComparator=function(e,t){return e-t},r}(),Y=function(){function r(){}return r.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)},r.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},r.toHexString=function(e){return e.toString(16)},r.toBinaryString=function(e){return String(parseInt(String(e),2))},r.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},r.truncDivision=function(e,t){return Math.trunc(e/t)},r.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r.MIN_VALUE_32_BITS=-2147483648,r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r}(),ke=function(){function r(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=r.makeArray(e):this.bits=t)}return r.prototype.getSize=function(){return this.size},r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},r.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=r.makeArray(e);ve.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},r.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},r.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},r.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},r.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),a=n[i];a&=~((1<<(e&31))-1);for(var o=n.length;a===0;){if(++i===o)return t;a=n[i]}var s=i*32+Y.numberOfTrailingZeros(a);return s>t?t:s},r.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),a=~n[i];a&=~((1<<(e&31))-1);for(var o=n.length;a===0;){if(++i===o)return t;a=~n[i]}var s=i*32+Y.numberOfTrailingZeros(a);return s>t?t:s},r.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},r.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new j;if(t!==e){t--;for(var n=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,o=n;o<=i;o++){var s=o>n?0:e&31,c=o<i?31:t&31,f=(2<<c)-(1<<s);a[o]|=f}}},r.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},r.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new j;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),o=this.bits,s=i;s<=a;s++){var c=s>i?0:e&31,f=s<a?31:t&31,u=(2<<f)-(1<<c)&4294967295;if((o[s]&u)!==(n?u:0))return!1}return!0},r.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},r.prototype.appendBits=function(e,t){if(t<0||t>32)throw new j("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)},r.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},r.prototype.xor=function(e){if(this.size!==e.size)throw new j("Sizes don't match");for(var t=this.bits,n=0,i=t.length;n<i;n++)t[n]^=e.bits[n]},r.prototype.toBytes=function(e,t,n,i){for(var a=0;a<i;a++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;t[n+a]=o}},r.prototype.getBitArray=function(){return this.bits},r.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,i=this.bits,a=0;a<n;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-a]=o}if(this.size!==n*32){for(var s=n*32-this.size,c=e[0]>>>s,a=1;a<n;a++){var f=e[a];c|=f<<32-s,e[a-1]=c,c=f>>>s}e[n-1]=c}this.bits=e},r.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.size===t.size&&Pe.equals(this.bits,t.bits)},r.prototype.hashCode=function(){return 31*this.size+Pe.hashCode(this.bits)},r.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e},r.prototype.clone=function(){return new r(this.size,this.bits.slice())},r.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},r}(),ce;(function(r){r[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",r[r.ASSUME_GS1=8]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(ce||(ce={}));var Ea=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),R=function(r){Ea(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Ke),ba=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oe;(function(r){r[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR"})(oe||(oe={}));var De=function(){function r(e,t,n){for(var i,a,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,r.VALUE_IDENTIFIER_TO_ECI.set(e,this),r.NAME_TO_ECI.set(n,this);for(var c=this.values,f=0,u=c.length;f!==u;f++){var l=c[f];r.VALUES_TO_ECI.set(l,this)}try{for(var h=ba(o),d=h.next();!d.done;d=h.next()){var x=d.value;r.NAME_TO_ECI.set(x,this)}}catch(y){i={error:y}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}return r.prototype.getValueIdentifier=function(){return this.valueIdentifier},r.prototype.getName=function(){return this.name},r.prototype.getValue=function(){return this.values[0]},r.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new R("incorect value");var t=r.VALUES_TO_ECI.get(e);if(t===void 0)throw new R("incorect value");return t},r.getCharacterSetECIByName=function(e){var t=r.NAME_TO_ECI.get(e);if(t===void 0)throw new R("incorect value");return t},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.getName()===t.getName()},r.VALUE_IDENTIFIER_TO_ECI=new Map,r.VALUES_TO_ECI=new Map,r.NAME_TO_ECI=new Map,r.Cp437=new r(oe.Cp437,Int32Array.from([0,2]),"Cp437"),r.ISO8859_1=new r(oe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),r.ISO8859_2=new r(oe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),r.ISO8859_3=new r(oe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),r.ISO8859_4=new r(oe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),r.ISO8859_5=new r(oe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),r.ISO8859_6=new r(oe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),r.ISO8859_7=new r(oe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),r.ISO8859_8=new r(oe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),r.ISO8859_9=new r(oe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),r.ISO8859_10=new r(oe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),r.ISO8859_11=new r(oe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),r.ISO8859_13=new r(oe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),r.ISO8859_14=new r(oe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),r.ISO8859_15=new r(oe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),r.ISO8859_16=new r(oe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),r.SJIS=new r(oe.SJIS,20,"SJIS","Shift_JIS"),r.Cp1250=new r(oe.Cp1250,21,"Cp1250","windows-1250"),r.Cp1251=new r(oe.Cp1251,22,"Cp1251","windows-1251"),r.Cp1252=new r(oe.Cp1252,23,"Cp1252","windows-1252"),r.Cp1256=new r(oe.Cp1256,24,"Cp1256","windows-1256"),r.UnicodeBigUnmarked=new r(oe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),r.UTF8=new r(oe.UTF8,26,"UTF8","UTF-8"),r.ASCII=new r(oe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),r.Big5=new r(oe.Big5,28,"Big5"),r.GB18030=new r(oe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),r.EUC_KR=new r(oe.EUC_KR,30,"EUC_KR","EUC-KR"),r}(),Sa=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_r=function(r){Sa(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Ke),tt=function(){function r(){}return r.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},r.shouldDecodeOnFallback=function(e){return!r.isBrowser()&&e==="ISO-8859-1"},r.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},r.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},r.encodingName=function(e){return typeof e=="string"?e:e.getName()},r.encodingCharacterSet=function(e){return e instanceof De?e:De.getCharacterSetECIByName(e)},r.decodeFallback=function(e,t){var n=this.encodingCharacterSet(t);if(r.isDecodeFallbackSupported(n)){for(var i="",a=0,o=e.length;a<o;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(n.equals(De.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new _r("Encoding "+this.encodingName(t)+" not supported by fallback.")},r.isDecodeFallbackSupported=function(e){return e.equals(De.UTF8)||e.equals(De.ISO8859_1)||e.equals(De.ASCII)},r.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),n=t.split(""),i=[],a=0;a<n.length;a++)i.push(n[a].charCodeAt(0));return new Uint8Array(i)},r}(),K=function(){function r(){}return r.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var n=t?t.getName():this.ISO88591;return tt.decode(new Uint8Array([e]),n)},r.guessEncoding=function(e,t){if(t!=null&&t.get(ce.CHARACTER_SET)!==void 0)return t.get(ce.CHARACTER_SET).toString();for(var n=e.length,i=!0,a=!0,o=!0,s=0,c=0,f=0,u=0,l=0,h=0,d=0,x=0,y=0,m=0,_=0,w=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,C=0;C<n&&(i||a||o);C++){var A=e[C]&255;o&&(s>0?A&128?s--:o=!1:A&128&&(A&64?(s++,A&32?(s++,A&16?(s++,A&8?o=!1:u++):f++):c++):o=!1)),i&&(A>127&&A<160?i=!1:A>159&&(A<192||A===215||A===247)&&_++),a&&(l>0?A<64||A===127||A>252?a=!1:l--:A===128||A===160||A>239?a=!1:A>160&&A<224?(h++,x=0,d++,d>y&&(y=d)):A>127?(l++,d=0,x++,x>m&&(m=x)):(d=0,x=0))}return o&&s>0&&(o=!1),a&&l>0&&(a=!1),o&&(w||c+f+u>0)?r.UTF8:a&&(r.ASSUME_SHIFT_JIS||y>=3||m>=3)?r.SHIFT_JIS:i&&a?y===2&&h===2||_*10>=n?r.SHIFT_JIS:r.ISO88591:i?r.ISO88591:a?r.SHIFT_JIS:o?r.UTF8:r.PLATFORM_DEFAULT_ENCODING},r.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=-1;function a(s,c,f,u,l,h){if(s==="%%")return"%";if(t[++i]!==void 0){s=u?parseInt(u.substr(1)):void 0;var d=l?parseInt(l.substr(1)):void 0,x;switch(h){case"s":x=t[i];break;case"c":x=t[i][0];break;case"f":x=parseFloat(t[i]).toFixed(s);break;case"p":x=parseFloat(t[i]).toPrecision(s);break;case"e":x=parseFloat(t[i]).toExponential(s);break;case"x":x=parseInt(t[i]).toString(d||16);break;case"d":x=parseFloat(parseInt(t[i],d||10).toPrecision(s)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(d);for(var y=parseInt(f),m=f&&f[0]+""=="0"?"0":" ";x.length<y;)x=c!==void 0?x+m:m+x;return x}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},r.getBytes=function(e,t){return tt.encode(e,t)},r.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},r.getCharAt=function(e){return String.fromCharCode(e)},r.SHIFT_JIS=De.SJIS.getName(),r.GB2312="GB2312",r.ISO88591=De.ISO8859_1.getName(),r.EUC_JP="EUC_JP",r.UTF8=De.UTF8.getName(),r.PLATFORM_DEFAULT_ENCODING=r.UTF8,r.ASSUME_SHIFT_JIS=!1,r}(),z=function(){function r(e){e===void 0&&(e=""),this.value=e}return r.prototype.enableDecoding=function(e){return this.encoding=e,this},r.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=K.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},r.prototype.appendChars=function(e,t,n){for(var i=t;t<t+n;i++)this.append(e[i]);return this},r.prototype.length=function(){return this.value.length},r.prototype.charAt=function(e){return this.value.charAt(e)},r.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},r.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},r.prototype.substring=function(e,t){return this.value.substring(e,t)},r.prototype.setLengthToZero=function(){this.value=""},r.prototype.toString=function(){return this.value},r.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},r}(),ut=function(){function r(e,t,n,i){if(this.width=e,this.height=t,this.rowSize=n,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new j("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return r.parseFromBooleanArray=function(e){for(var t=e.length,n=e[0].length,i=new r(n,t),a=0;a<t;a++)for(var o=e[a],s=0;s<n;s++)o[s]&&i.set(s,a);return i},r.parseFromString=function(e,t,n){if(e===null)throw new j("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,s=-1,c=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new j("row lengths do not match");o=a,c++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,i[a]=!0,a++;else if(e.substring(f,f+n.length)===n)f+=n.length,i[a]=!1,a++;else throw new j("illegal character encountered: "+e.substring(f));if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new j("row lengths do not match");c++}for(var u=new r(s,c),l=0;l<a;l++)i[l]&&u.set(Math.floor(l%s),Math.floor(l/s));return u},r.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},r.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},r.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},r.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},r.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new j("input matrix dimensions do not match");for(var t=new ke(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var s=a*n,c=e.getRow(a,t).getBitArray(),f=0;f<n;f++)i[s+f]^=c[f]},r.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},r.prototype.setRegion=function(e,t,n,i){if(t<0||e<0)throw new j("Left and top must be nonnegative");if(i<1||n<1)throw new j("Height and width must be at least 1");var a=e+n,o=t+i;if(o>this.height||a>this.width)throw new j("The region must fit inside the matrix");for(var s=this.rowSize,c=this.bits,f=t;f<o;f++)for(var u=f*s,l=e;l<a;l++)c[u+Math.floor(l/32)]|=1<<(l&31)&4294967295},r.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new ke(this.width):t.clear();for(var n=this.rowSize,i=this.bits,a=e*n,o=0;o<n;o++)t.setBulk(o*32,i[a+o]);return t},r.prototype.setRow=function(e,t){ve.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},r.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new ke(e),i=new ke(e),a=0,o=Math.floor((t+1)/2);a<o;a++)n=this.getRow(a,n),i=this.getRow(t-1-a,i),n.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,n)},r.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,i=this.bits,a=e,o=t,s=-1,c=-1,f=0;f<t;f++)for(var u=0;u<n;u++){var l=i[f*n+u];if(l!==0){if(f<o&&(o=f),f>c&&(c=f),u*32<a){for(var h=0;!(l<<31-h&4294967295);)h++;u*32+h<a&&(a=u*32+h)}if(u*32+31>s){for(var h=31;!(l>>>h);)h--;u*32+h>s&&(s=u*32+h)}}}return s<a||c<o?null:Int32Array.from([a,o,s-a+1,c-o+1])},r.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;for(var i=n/e,a=n%e*32,o=t[n],s=0;!(o<<31-s&4294967295);)s++;return a+=s,Int32Array.from([a,i])},r.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&t[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),a=Math.floor(n%e)*32,o=t[n],s=31;!(o>>>s);)s--;return a+=s,Int32Array.from([a,i])},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRowSize=function(){return this.rowSize},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Pe.equals(this.bits,t.bits)},r.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Pe.hashCode(this.bits),e},r.prototype.toString=function(e,t,n){return e===void 0&&(e="X "),t===void 0&&(t="  "),n===void 0&&(n=`
`),this.buildToString(e,t,n)},r.prototype.buildToString=function(e,t,n){for(var i=new z,a=0,o=this.height;a<o;a++){for(var s=0,c=this.width;s<c;s++)i.append(this.get(s,a)?e:t);i.append(n)}return i.toString()},r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())},r}(),Ia=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),b=function(r){Ia(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Ke),Na=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Oa=function(r){Na(e,r);function e(t){var n=r.call(this,t)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(t,n){var i=this.getLuminanceSource(),a=i.getWidth();n==null||n.getSize()<a?n=new ke(a):n.clear(),this.initArrays(a);for(var o=i.getRow(t,this.luminances),s=this.buckets,c=0;c<a;c++)s[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(s);if(a<3)for(var c=0;c<a;c++)(o[c]&255)<f&&n.set(c);else for(var u=o[0]&255,l=o[1]&255,c=1;c<a-1;c++){var h=o[c+1]&255;(l*4-u-h)/2<f&&n.set(c),u=l,l=h}return n},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight(),a=new ut(n,i);this.initArrays(n);for(var o=this.buckets,s=1;s<5;s++)for(var c=Math.floor(i*s/5),f=t.getRow(c,this.luminances),u=Math.floor(n*4/5),l=Math.floor(n/5);l<u;l++){var h=f[l]&255;o[h>>e.LUMINANCE_SHIFT]++}for(var d=e.estimateBlackPoint(o),x=t.getMatrix(),s=0;s<i;s++)for(var y=s*n,l=0;l<n;l++){var h=x[y+l]&255;h<d&&a.set(l,s)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(t){for(var n=t.length,i=0,a=0,o=0,s=0;s<n;s++)t[s]>o&&(a=s,o=t[s]),t[s]>i&&(i=t[s]);for(var c=0,f=0,s=0;s<n;s++){var u=s-a,l=t[s]*u*u;l>f&&(c=s,f=l)}if(a>c){var h=a;a=c,c=h}if(c-a<=n/16)throw new b;for(var d=c-1,x=-1,s=c-1;s>a;s--){var y=s-a,l=y*y*(c-s)*(i-t[s]);l>x&&(d=s,x=l)}return d<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(wa),Ta=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ai=function(r){Ta(e,r);function e(t){var n=r.call(this,t)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&o++;var s=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&s++;var c=e.calculateBlackPoints(a,o,s,n,i),f=new ut(n,i);e.calculateThresholdForBlock(a,o,s,n,i,c,f),this.matrix=f}else this.matrix=r.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,n,i,a,o,s,c){for(var f=o-e.BLOCK_SIZE,u=a-e.BLOCK_SIZE,l=0;l<i;l++){var h=l<<e.BLOCK_SIZE_POWER;h>f&&(h=f);for(var d=e.cap(l,2,i-3),x=0;x<n;x++){var y=x<<e.BLOCK_SIZE_POWER;y>u&&(y=u);for(var m=e.cap(x,2,n-3),_=0,w=-2;w<=2;w++){var C=s[d+w];_+=C[m-2]+C[m-1]+C[m]+C[m+1]+C[m+2]}var A=_/25;e.thresholdBlock(t,y,h,A,a,c)}}},e.cap=function(t,n,i){return t<n?n:t>i?i:t},e.thresholdBlock=function(t,n,i,a,o,s){for(var c=0,f=i*o+n;c<e.BLOCK_SIZE;c++,f+=o)for(var u=0;u<e.BLOCK_SIZE;u++)(t[f+u]&255)<=a&&s.set(n+u,i+c)},e.calculateBlackPoints=function(t,n,i,a,o){for(var s=o-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,f=new Array(i),u=0;u<i;u++){f[u]=new Int32Array(n);var l=u<<e.BLOCK_SIZE_POWER;l>s&&(l=s);for(var h=0;h<n;h++){var d=h<<e.BLOCK_SIZE_POWER;d>c&&(d=c);for(var x=0,y=255,m=0,_=0,w=l*a+d;_<e.BLOCK_SIZE;_++,w+=a){for(var C=0;C<e.BLOCK_SIZE;C++){var A=t[w+C]&255;x+=A,A<y&&(y=A),A>m&&(m=A)}if(m-y>e.MIN_DYNAMIC_RANGE)for(_++,w+=a;_<e.BLOCK_SIZE;_++,w+=a)for(var C=0;C<e.BLOCK_SIZE;C++)x+=t[w+C]&255}var S=x>>e.BLOCK_SIZE_POWER*2;if(m-y<=e.MIN_DYNAMIC_RANGE&&(S=y/2,u>0&&h>0)){var I=(f[u-1][h]+2*f[u][h-1]+f[u-1][h-1])/4;y<I&&(S=I)}f[u][h]=S}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(Oa),or=function(){function r(e,t){this.width=e,this.height=t}return r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.isCropSupported=function(){return!1},r.prototype.crop=function(e,t,n,i){throw new _r("This luminance source does not support cropping.")},r.prototype.isRotateSupported=function(){return!1},r.prototype.rotateCounterClockwise=function(){throw new _r("This luminance source does not support rotation by 90 degrees.")},r.prototype.rotateCounterClockwise45=function(){throw new _r("This luminance source does not support rotation by 45 degrees.")},r.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new z,n=0;n<this.height;n++){for(var i=this.getRow(n,e),a=0;a<this.width;a++){var o=i[a]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()},r}(),Ra=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rr=function(r){Ra(e,r);function e(t){var n=r.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return e.prototype.getRow=function(t,n){for(var i=this.delegate.getRow(t,n),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),a=0;a<n;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,n,i,a){return new e(this.delegate.crop(t,n,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(or),Da=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pa=function(r){Da(e,r);function e(t,n){n===void 0&&(n=!1);var i=r.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,n),i}return e.makeBufferFromCanvasImageData=function(t,n){n===void 0&&(n=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,n)},e.toGrayscaleBuffer=function(t,n,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,c=0,f=t.length;s<f;s+=4,c++){var u=void 0,l=t[s+3];if(l===0)u=255;else{var h=t[s],d=t[s+1],x=t[s+2];u=306*h+601*d+117*x+512>>10}o[c]=u}else for(var s=0,c=0,y=t.length;s<y;s+=4,c++){var u=void 0,l=t[s+3];if(l===0)u=255;else{var h=t[s],d=t[s+1],x=t[s+2];u=306*h+601*d+117*x+512>>10}o[c]=255-u}return o},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new j("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return n===null?n=this.buffer.slice(a,a+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(a,a+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,a){return r.prototype.crop.call(this,t,n,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement(),i=n.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*s),f=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*s);return n.width=c,n.height=f,i.translate(c/2,f/2),i.rotate(a),i.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new Rr(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(or),Ma=function(){function r(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},r}(),We=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{f(n.next(u))}catch(l){o(l)}}function c(u){try{f(n.throw(u))}catch(l){o(l)}}function f(u){u.done?a(u.value):i(u.value).then(s,c)}f((n=n.apply(r,e||[])).next())})},ze=function(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(u){return c([f,u])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(u){f=[6,u],i=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Ba=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kt=function(){function r(e,t,n){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),r.prototype.listVideoInputDevices=function(){return We(this,void 0,void 0,function(){var e,t,n,i,a,o,s,c,f,u,l,h;return ze(this,function(d){switch(d.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=d.sent(),t=[];try{for(n=Ba(e),i=n.next();!i.done;i=n.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(s=a.deviceId||a.id,c=a.label||"Video device "+(t.length+1),f=a.groupId,u={deviceId:s,label:c,kind:o,groupId:f},t.push(u))}catch(x){l={error:x}}finally{try{i&&!i.done&&(h=n.return)&&h.call(n)}finally{if(l)throw l.error}}return[2,t]}})})},r.prototype.getVideoInputDevices=function(){return We(this,void 0,void 0,function(){var e;return ze(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(n){return new Ma(n.deviceId,n.label)})]}})})},r.prototype.findDeviceById=function(e){return We(this,void 0,void 0,function(){var t;return ze(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},r.prototype.decodeFromInputVideoDevice=function(e,t){return We(this,void 0,void 0,function(){return ze(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return We(this,void 0,void 0,function(){var n,i;return ze(this,function(a){switch(a.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return We(this,void 0,void 0,function(){var n;return ze(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return We(this,void 0,void 0,function(){var n,i;return ze(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=a.sent(),[4,this.decodeOnce(n)];case 2:return i=a.sent(),[2,i]}})})},r.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return We(this,void 0,void 0,function(){return ze(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,i.sent()]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return We(this,void 0,void 0,function(){var i,a;return ze(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,n)];case 1:return[2,o.sent()]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return We(this,void 0,void 0,function(){var i;return ze(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,n)];case 2:return[2,a.sent()]}})})},r.prototype.decodeFromStream=function(e,t,n){return We(this,void 0,void 0,function(){var i;return ze(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,a.sent()]}})})},r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},r.prototype.attachStreamToVideo=function(e,t){return We(this,void 0,void 0,function(){var n;return ze(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},r.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,i){return t.playVideoOnLoad(e,function(){return n()})})},r.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},r.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},r.prototype.tryPlayVideo=function(e){return We(this,void 0,void 0,function(){return ze(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},r.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new Ae("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new Ae("element with id '"+e+"' must be an "+t+" element");return n},r.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Ae("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},r.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Ae("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},r.prototype.decodeFromVideoContinuously=function(e,t,n){if(e===void 0&&t===void 0)throw new Ae("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},r.prototype.decodeFromImageElement=function(e){if(!e)throw new Ae("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n},r.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},r.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},r.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Ae("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},r.prototype.decodeFromImageUrl=function(e){if(!e)throw new Ae("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},r.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Ae("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},r.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Ae("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,t);return n.src=e,i},r.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",t.imageLoadedListener)})},r.prototype._decodeOnLoadVideo=function(e){return We(this,void 0,void 0,function(){return ze(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},r.prototype._decodeOnLoadVideoContinuously=function(e,t){return We(this,void 0,void 0,function(){return ze(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},r.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},r.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.prototype.decodeOnce=function(e,t,n){var i=this;t===void 0&&(t=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var a=function(o,s){if(i._stopAsyncDecode){s(new b("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);o(c)}catch(h){var f=t&&h instanceof b,u=h instanceof Ee||h instanceof R,l=u&&n;if(f||l)return setTimeout(a,i._timeBetweenDecodingAttempts,o,s);s(h)}};return new Promise(function(o,s){return a(o,s)})},r.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var a=n.decode(e);t(a,null),setTimeout(i,n.timeBetweenScansMillis)}catch(c){t(null,c);var o=c instanceof Ee||c instanceof R,s=c instanceof b;(o||s)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},r.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},r.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new Pa(n,t),a=new Ai(i);return new _i(a)},r.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},r.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},r.prototype.drawFrameOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.drawImageOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},r.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=i+"px",t.width=n,t.height=i,t},r.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},r.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},r.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},r.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},r.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},r.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},r}(),Xe=function(){function r(e,t,n,i,a,o){n===void 0&&(n=t==null?0:8*t.length),o===void 0&&(o=ve.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=ve.currentTimeMillis():this.timestamp=o}return r.prototype.getText=function(){return this.text},r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.getBarcodeFormat=function(){return this.format},r.prototype.getResultMetadata=function(){return this.resultMetadata},r.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},r.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},r.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(t.length+e.length);ve.arraycopy(t,0,n,0,t.length),ve.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.toString=function(){return this.text},r}(),L;(function(r){r[r.AZTEC=0]="AZTEC",r[r.CODABAR=1]="CODABAR",r[r.CODE_39=2]="CODE_39",r[r.CODE_93=3]="CODE_93",r[r.CODE_128=4]="CODE_128",r[r.DATA_MATRIX=5]="DATA_MATRIX",r[r.EAN_8=6]="EAN_8",r[r.EAN_13=7]="EAN_13",r[r.ITF=8]="ITF",r[r.MAXICODE=9]="MAXICODE",r[r.PDF_417=10]="PDF_417",r[r.QR_CODE=11]="QR_CODE",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(L||(L={}));var en;(function(r){r[r.OTHER=0]="OTHER",r[r.ORIENTATION=1]="ORIENTATION",r[r.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",r[r.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",r[r.ISSUE_NUMBER=4]="ISSUE_NUMBER",r[r.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",r[r.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",r[r.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",r[r.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",r[r.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",r[r.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(en||(en={}));const He=en;var Dr=function(){function r(e,t,n,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.setNumBits=function(e){this.numBits=e},r.prototype.getText=function(){return this.text},r.prototype.getByteSegments=function(){return this.byteSegments},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getErrorsCorrected=function(){return this.errorsCorrected},r.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},r.prototype.getErasures=function(){return this.erasures},r.prototype.setErasures=function(e){this.erasures=e},r.prototype.getOther=function(){return this.other},r.prototype.setOther=function(e){this.other=e},r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},r}(),nr=function(){function r(){}return r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new j;return this.logTable[e]},r.addOrSubtract=function(e,t){return e^t},r}(),pt=function(){function r(e,t){if(t.length===0)throw new j;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),ve.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,n;if(e===1){n=0;for(var i=0,a=t.length;i!==a;i++){var o=t[i];n=nr.addOrSubtract(n,o)}return n}n=t[0];for(var s=t.length,c=this.field,i=1;i<s;i++)n=nr.addOrSubtract(c.multiply(e,n),t[i]);return n},r.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new j("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var a=new Int32Array(n.length),o=n.length-t.length;ve.arraycopy(n,0,a,0,o);for(var s=o;s<n.length;s++)a[s]=nr.addOrSubtract(t[s-o],n[s]);return new r(this.field,a)},r.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new j("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,n=t.length,i=e.coefficients,a=i.length,o=new Int32Array(n+a-1),s=this.field,c=0;c<n;c++)for(var f=t[c],u=0;u<a;u++)o[c+u]=nr.addOrSubtract(o[c+u],s.multiply(f,i[u]));return new r(s,o)},r.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,n=this.field,i=new Int32Array(t),a=this.coefficients,o=0;o<t;o++)i[o]=n.multiply(a[o],e);return new r(n,i)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new j;if(t===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,a=new Int32Array(i+e),o=this.field,s=0;s<i;s++)a[s]=o.multiply(n[s],t);return new r(o,a)},r.prototype.divide=function(e){if(!this.field.equals(e.field))throw new j("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new j("Divide by 0");for(var t=this.field,n=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),o),f=e.multiplyByMonomial(s,c),u=t.buildMonomial(s,c);n=n.addOrSubtract(u),i=i.addOrSubtract(f)}return[n,i]},r.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},r}(),Fa=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ci=function(r){Fa(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Ke),La=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qe=function(r){La(e,r);function e(t,n,i){var a=r.call(this)||this;a.primitive=t,a.size=n,a.generatorBase=i;for(var o=new Int32Array(n),s=1,c=0;c<n;c++)o[c]=s,s*=2,s>=n&&(s^=t,s&=n-1);a.expTable=o;for(var f=new Int32Array(n),c=0;c<n-1;c++)f[o[c]]=c;return a.logTable=f,a.zero=new pt(a,Int32Array.from([0])),a.one=new pt(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new j;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new pt(this,i)},e.prototype.inverse=function(t){if(t===0)throw new Ci;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,n){return t===0||n===0?0:this.expTable[(this.logTable[t]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Y.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(nr),ka=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pr=function(r){ka(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Ke),ja=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sr=function(r){ja(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Ke),Pr=function(){function r(e){this.field=e}return r.prototype.decode=function(e,t){for(var n=this.field,i=new pt(n,e),a=new Int32Array(t),o=!0,s=0;s<t;s++){var c=i.evaluateAt(n.exp(s+n.getGeneratorBase()));a[a.length-1-s]=c,c!==0&&(o=!1)}if(!o)for(var f=new pt(n,a),u=this.runEuclideanAlgorithm(n.buildMonomial(t,1),f,t),l=u[0],h=u[1],d=this.findErrorLocations(l),x=this.findErrorMagnitudes(h,d),s=0;s<d.length;s++){var y=e.length-1-n.log(d[s]);if(y<0)throw new pr("Bad error location");e[y]=Qe.addOrSubtract(e[y],x[s])}},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,o=e,s=t,c=a.getZero(),f=a.getOne();s.getDegree()>=(n/2|0);){var u=o,l=c;if(o=s,c=f,o.isZero())throw new pr("r_{i-1} was zero");s=u;for(var h=a.getZero(),d=o.getCoefficient(o.getDegree()),x=a.inverse(d);s.getDegree()>=o.getDegree()&&!s.isZero();){var y=s.getDegree()-o.getDegree(),m=a.multiply(s.getCoefficient(s.getDegree()),x);h=h.addOrSubtract(a.buildMonomial(y,m)),s=s.addOrSubtract(o.multiplyByMonomial(y,m))}if(f=h.multiply(c).addOrSubtract(l),s.getDegree()>=o.getDegree())throw new sr("Division algorithm failed to reduce polynomial?")}var _=f.getCoefficient(0);if(_===0)throw new pr("sigmaTilde(0) was zero");var w=a.inverse(_),C=f.multiplyScalar(w),A=s.multiplyScalar(w);return[C,A]},r.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),i=0,a=this.field,o=1;o<a.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(n[i]=a.inverse(o),i++);if(i!==t)throw new pr("Error locator degree does not match number of roots");return n},r.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,i=new Int32Array(n),a=this.field,o=0;o<n;o++){for(var s=a.inverse(t[o]),c=1,f=0;f<n;f++)if(o!==f){var u=a.multiply(t[f],s),l=u&1?u&-2:u|1;c=a.multiply(c,l)}i[o]=a.multiply(e.evaluateAt(s),a.inverse(c)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],s))}return i},r}(),Ue;(function(r){r[r.UPPER=0]="UPPER",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.DIGIT=3]="DIGIT",r[r.PUNCT=4]="PUNCT",r[r.BINARY=5]="BINARY"})(Ue||(Ue={}));var jn=function(){function r(){}return r.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),n=this.extractBits(t),i=this.correctBits(n),a=r.convertBoolArrayToByteArray(i),o=r.getEncodedData(i),s=new Dr(a,o,null,null);return s.setNumBits(i.length),s},r.highLevelDecode=function(e){return this.getEncodedData(e)},r.getEncodedData=function(e){for(var t=e.length,n=Ue.UPPER,i=Ue.UPPER,a="",o=0;o<t;)if(i===Ue.BINARY){if(t-o<5)break;var s=r.readCode(e,o,5);if(o+=5,s===0){if(t-o<11)break;s=r.readCode(e,o,11)+31,o+=11}for(var c=0;c<s;c++){if(t-o<8){o=t;break}var f=r.readCode(e,o,8);a+=K.castAsNonUtf8Char(f),o+=8}i=n}else{var u=i===Ue.DIGIT?4:5;if(t-o<u)break;var f=r.readCode(e,o,u);o+=u;var l=r.getCharacter(i,f);l.startsWith("CTRL_")?(n=i,i=r.getTable(l.charAt(5)),l.charAt(6)==="L"&&(n=i)):(a+=l,i=n)}return a},r.getTable=function(e){switch(e){case"L":return Ue.LOWER;case"P":return Ue.PUNCT;case"M":return Ue.MIXED;case"D":return Ue.DIGIT;case"B":return Ue.BINARY;case"U":default:return Ue.UPPER}},r.getCharacter=function(e,t){switch(e){case Ue.UPPER:return r.UPPER_TABLE[t];case Ue.LOWER:return r.LOWER_TABLE[t];case Ue.MIXED:return r.MIXED_TABLE[t];case Ue.PUNCT:return r.PUNCT_TABLE[t];case Ue.DIGIT:return r.DIGIT_TABLE[t];default:throw new sr("Bad table")}},r.prototype.correctBits=function(e){var t,n;this.ddata.getNbLayers()<=2?(n=6,t=Qe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=Qe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=Qe.AZTEC_DATA_10):(n=12,t=Qe.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/n;if(a<i)throw new R;for(var o=e.length%n,s=new Int32Array(a),c=0;c<a;c++,o+=n)s[c]=r.readCode(e,o,n);try{var f=new Pr(t);f.decode(s,a-i)}catch(m){throw new R(m)}for(var u=(1<<n)-1,l=0,c=0;c<i;c++){var h=s[c];if(h===0||h===u)throw new R;(h===1||h===u-1)&&l++}for(var d=new Array(i*n-l),x=0,c=0;c<i;c++){var h=s[c];if(h===1||h===u-1)d.fill(h>1,x,x+n-1),x+=n-1;else for(var y=n-1;y>=0;--y)d[x++]=(h&1<<y)!==0}return d},r.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(t?11:14)+n*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(n,t));if(t)for(var s=0;s<a.length;s++)a[s]=s;else for(var c=i+1+2*Y.truncDivision(Y.truncDivision(i,2)-1,15),f=i/2,u=Y.truncDivision(c,2),s=0;s<f;s++){var l=s+Y.truncDivision(s,15);a[f-s-1]=u-l-1,a[f+s]=u+l+1}for(var s=0,h=0;s<n;s++){for(var d=(n-s)*4+(t?9:12),x=s*2,y=i-1-x,m=0;m<d;m++)for(var _=m*2,w=0;w<2;w++)o[h+_+w]=e.get(a[x+w],a[x+m]),o[h+2*d+_+w]=e.get(a[x+m],a[y-w]),o[h+4*d+_+w]=e.get(a[y-w],a[y-m]),o[h+6*d+_+w]=e.get(a[y-m],a[x+w]);h+=d*8}return o},r.readCode=function(e,t,n){for(var i=0,a=t;a<t+n;a++)i<<=1,e[a]&&(i|=1);return i},r.readByte=function(e,t){var n=e.length-t;return n>=8?r.readCode(e,t,8):r.readCode(e,t,n)<<8-n},r.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),n=0;n<t.length;n++)t[n]=r.readByte(e,8*n);return t},r.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],r.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],r.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],r.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],r.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],r}(),ee=function(){function r(){}return r.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},r.distance=function(e,t,n,i){var a=e-n,o=t-i;return Math.sqrt(a*a+o*o)},r.sum=function(e){for(var t=0,n=0,i=e.length;n!==i;n++){var a=e[n];t+=a}return t},r}(),tn=function(){function r(){}return r.floatToIntBits=function(e){return e},r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r}(),B=function(){function r(e,t){this.x=e,this.y=t}return r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.equals=function(e){if(e instanceof r){var t=e;return this.x===t.x&&this.y===t.y}return!1},r.prototype.hashCode=function(){return 31*tn.floatToIntBits(this.x)+tn.floatToIntBits(this.y)},r.prototype.toString=function(){return"("+this.x+","+this.y+")"},r.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,s;if(n>=t&&n>=i?(o=e[0],a=e[1],s=e[2]):i>=n&&i>=t?(o=e[1],a=e[0],s=e[2]):(o=e[2],a=e[0],s=e[1]),this.crossProductZ(a,o,s)<0){var c=a;a=s,s=c}e[0]=a,e[1]=o,e[2]=s},r.distance=function(e,t){return ee.distance(e.x,e.y,t.x,t.y)},r.crossProductZ=function(e,t,n){var i=t.x,a=t.y;return(n.x-i)*(e.y-a)-(n.y-a)*(e.x-i)},r}(),un=function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r}(),Ua=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Va=function(r){Ua(e,r);function e(t,n,i,a,o){var s=r.call(this,t,n)||this;return s.compact=i,s.nbDatablocks=a,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(un),rn=function(){function r(e,t,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=r.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new b}return r.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,i=this.downInit,a=!1,o=!0,s=!1,c=!1,f=!1,u=!1,l=!1,h=this.width,d=this.height;o;){o=!1;for(var x=!0;(x||!c)&&t<h;)x=this.containsBlackPoint(n,i,t,!1),x?(t++,o=!0,c=!0):c||t++;if(t>=h){a=!0;break}for(var y=!0;(y||!f)&&i<d;)y=this.containsBlackPoint(e,t,i,!0),y?(i++,o=!0,f=!0):f||i++;if(i>=d){a=!0;break}for(var m=!0;(m||!u)&&e>=0;)m=this.containsBlackPoint(n,i,e,!1),m?(e--,o=!0,u=!0):u||e--;if(e<0){a=!0;break}for(var _=!0;(_||!l)&&n>=0;)_=this.containsBlackPoint(e,t,n,!0),_?(n--,o=!0,l=!0):l||n--;if(n<0){a=!0;break}o&&(s=!0)}if(!a&&s){for(var w=t-e,C=null,A=1;C===null&&A<w;A++)C=this.getBlackPointOnSegment(e,i-A,e+A,i);if(C==null)throw new b;for(var S=null,A=1;S===null&&A<w;A++)S=this.getBlackPointOnSegment(e,n+A,e+A,n);if(S==null)throw new b;for(var I=null,A=1;I===null&&A<w;A++)I=this.getBlackPointOnSegment(t,n+A,t-A,n);if(I==null)throw new b;for(var O=null,A=1;O===null&&A<w;A++)O=this.getBlackPointOnSegment(t,i-A,t-A,i);if(O==null)throw new b;return this.centerEdges(O,C,I,S)}else throw new b},r.prototype.getBlackPointOnSegment=function(e,t,n,i){for(var a=ee.round(ee.distance(e,t,n,i)),o=(n-e)/a,s=(i-t)/a,c=this.image,f=0;f<a;f++){var u=ee.round(e+f*o),l=ee.round(t+f*s);if(c.get(u,l))return new B(u,l)}return null},r.prototype.centerEdges=function(e,t,n,i){var a=e.getX(),o=e.getY(),s=t.getX(),c=t.getY(),f=n.getX(),u=n.getY(),l=i.getX(),h=i.getY(),d=r.CORR;return a<this.width/2?[new B(l-d,h+d),new B(s+d,c+d),new B(f-d,u-d),new B(a+d,o-d)]:[new B(l+d,h+d),new B(s+d,c-d),new B(f-d,u+d),new B(a-d,o-d)]},r.prototype.containsBlackPoint=function(e,t,n,i){var a=this.image;if(i){for(var o=e;o<=t;o++)if(a.get(o,n))return!0}else for(var s=e;s<=t;s++)if(a.get(n,s))return!0;return!1},r.INIT_SIZE=10,r.CORR=1,r}(),Un=function(){function r(){}return r.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<t.length&&a;o+=2){var s=Math.floor(t[o]),c=Math.floor(t[o+1]);if(s<-1||s>n||c<-1||c>i)throw new b;a=!1,s===-1?(t[o]=0,a=!0):s===n&&(t[o]=n-1,a=!0),c===-1?(t[o+1]=0,a=!0):c===i&&(t[o+1]=i-1,a=!0)}a=!0;for(var o=t.length-2;o>=0&&a;o-=2){var s=Math.floor(t[o]),c=Math.floor(t[o+1]);if(s<-1||s>n||c<-1||c>i)throw new b;a=!1,s===-1?(t[o]=0,a=!0):s===n&&(t[o]=n-1,a=!0),c===-1?(t[o+1]=0,a=!0):c===i&&(t[o+1]=i-1,a=!0)}},r}(),Ei=function(){function r(e,t,n,i,a,o,s,c,f){this.a11=e,this.a21=t,this.a31=n,this.a12=i,this.a22=a,this.a32=o,this.a13=s,this.a23=c,this.a33=f}return r.quadrilateralToQuadrilateral=function(e,t,n,i,a,o,s,c,f,u,l,h,d,x,y,m){var _=r.quadrilateralToSquare(e,t,n,i,a,o,s,c),w=r.squareToQuadrilateral(f,u,l,h,d,x,y,m);return w.times(_)},r.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,u=this.a32,l=this.a33,h=0;h<t;h+=2){var d=e[h],x=e[h+1],y=a*d+c*x+l;e[h]=(n*d+o*x+f)/y,e[h+1]=(i*d+s*x+u)/y}},r.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,u=this.a32,l=this.a33,h=e.length,d=0;d<h;d++){var x=e[d],y=t[d],m=a*x+c*y+l;e[d]=(n*x+o*y+f)/m,t[d]=(i*x+s*y+u)/m}},r.squareToQuadrilateral=function(e,t,n,i,a,o,s,c){var f=e-n+a-s,u=t-i+o-c;if(f===0&&u===0)return new r(n-e,a-n,e,i-t,o-i,t,0,0,1);var l=n-a,h=s-a,d=i-o,x=c-o,y=l*x-h*d,m=(f*x-h*u)/y,_=(l*u-f*d)/y;return new r(n-e+m*n,s-e+_*s,e,i-t+m*i,c-t+_*c,t,m,_,1)},r.quadrilateralToSquare=function(e,t,n,i,a,o,s,c){return r.squareToQuadrilateral(e,t,n,i,a,o,s,c).buildAdjoint()},r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},r.prototype.times=function(e){return new r(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},r}(),Ha=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ga=function(r){Ha(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,n,i,a,o,s,c,f,u,l,h,d,x,y,m,_,w,C,A){var S=Ei.quadrilateralToQuadrilateral(a,o,s,c,f,u,l,h,d,x,y,m,_,w,C,A);return this.sampleGridWithTransform(t,n,i,S)},e.prototype.sampleGridWithTransform=function(t,n,i,a){if(n<=0||i<=0)throw new b;for(var o=new ut(n,i),s=new Float32Array(2*n),c=0;c<i;c++){for(var f=s.length,u=c+.5,l=0;l<f;l+=2)s[l]=l/2+.5,s[l+1]=u;a.transformPoints(s),Un.checkAndNudgePoints(t,s);try{for(var l=0;l<f;l+=2)t.get(Math.floor(s[l]),Math.floor(s[l+1]))&&o.set(l/2,c)}catch{throw new b}}return o},e}(Un),ln=function(){function r(){}return r.setGridSampler=function(e){r.gridSampler=e},r.getInstance=function(){return r.gridSampler},r.gridSampler=new Ga,r}(),Ze=function(){function r(e,t){this.x=e,this.y=t}return r.prototype.toResultPoint=function(){return new B(this.getX(),this.getY())},r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r}(),Xa=function(){function r(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return r.prototype.detect=function(){return this.detectMirror(!1)},r.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new Va(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},r.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new b;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var i=0,a=0;a<4;a++){var o=n[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},r.prototype.getRotation=function(e,t){var n=0;e.forEach(function(a,o,s){var c=(a>>t-2<<1)+(a&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(Y.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new b},r.prototype.getCorrectedParameterData=function(e,t){var n,i;t?(n=7,i=2):(n=10,i=4);for(var a=n-i,o=new Int32Array(n),s=n-1;s>=0;--s)o[s]=e&15,e>>=4;try{var c=new Pr(Qe.AZTEC_PARAM);c.decode(o,a)}catch{throw new b}for(var f=0,s=0;s<i;s++)f=(f<<4)+o[s];return f},r.prototype.getBullsEyeCorners=function(e){var t=e,n=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(t,o,1,-1),c=this.getFirstDifferent(n,o,1,1),f=this.getFirstDifferent(i,o,-1,1),u=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var l=this.distancePoint(u,s)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(l<.75||l>1.25||!this.isWhiteOrBlackRectangle(s,c,f,u))break}t=s,n=c,i=f,a=u,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new b;this.compact=this.nbCenterLayers===5;var h=new B(t.getX()+.5,t.getY()-.5),d=new B(n.getX()+.5,n.getY()+.5),x=new B(i.getX()-.5,i.getY()+.5),y=new B(a.getX()-.5,a.getY()-.5);return this.expandSquare([h,d,x,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},r.prototype.getMatrixCenter=function(){var e,t,n,i;try{var a=new rn(this.image).detect();e=a[0],t=a[1],n=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new Ze(o+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ze(o+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Ze(o-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Ze(o-7,s-7),!1,-1,-1).toResultPoint()}var c=ee.round((e.getX()+i.getX()+t.getX()+n.getX())/4),f=ee.round((e.getY()+i.getY()+t.getY()+n.getY())/4);try{var a=new rn(this.image,15,c,f).detect();e=a[0],t=a[1],n=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Ze(c+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ze(c+7,f+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Ze(c-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Ze(c-7,f-7),!1,-1,-1).toResultPoint()}return c=ee.round((e.getX()+i.getX()+t.getX()+n.getX())/4),f=ee.round((e.getY()+i.getY()+t.getY()+n.getY())/4),new Ze(c,f)},r.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},r.prototype.sampleGrid=function(e,t,n,i,a){var o=ln.getInstance(),s=this.getDimension(),c=s/2-this.nbCenterLayers,f=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,c,c,f,c,f,f,c,f,t.getX(),t.getY(),n.getX(),n.getY(),i.getX(),i.getY(),a.getX(),a.getY())},r.prototype.sampleLine=function(e,t,n){for(var i=0,a=this.distanceResultPoint(e,t),o=a/n,s=e.getX(),c=e.getY(),f=o*(t.getX()-e.getX())/a,u=o*(t.getY()-e.getY())/a,l=0;l<n;l++)this.image.get(ee.round(s+l*f),ee.round(c+l*u))&&(i|=1<<n-l-1);return i},r.prototype.isWhiteOrBlackRectangle=function(e,t,n,i){var a=3;e=new Ze(e.getX()-a,e.getY()+a),t=new Ze(t.getX()-a,t.getY()-a),n=new Ze(n.getX()+a,n.getY()-a),i=new Ze(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var s=this.getColor(e,t);return s!==o||(s=this.getColor(t,n),s!==o)?!1:(s=this.getColor(n,i),s===o)},r.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),i=(t.getX()-e.getX())/n,a=(t.getY()-e.getY())/n,o=0,s=e.getX(),c=e.getY(),f=this.image.get(e.getX(),e.getY()),u=Math.ceil(n),l=0;l<u;l++)s+=i,c+=a,this.image.get(ee.round(s),ee.round(c))!==f&&o++;var h=o/n;return h>.1&&h<.9?0:h<=.1===f?1:-1},r.prototype.getFirstDifferent=function(e,t,n,i){for(var a=e.getX()+n,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=n,o+=i;for(a-=n,o-=i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=n;for(a-=n;this.isValid(a,o)&&this.image.get(a,o)===t;)o+=i;return o-=i,new Ze(a,o)},r.prototype.expandSquare=function(e,t,n){var i=n/(2*t),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,f=new B(s+i*a,c+i*o),u=new B(s-i*a,c-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var l=new B(s+i*a,c+i*o),h=new B(s-i*a,c-i*o),d=[f,l,u,h];return d},r.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},r.prototype.isValidPoint=function(e){var t=ee.round(e.getX()),n=ee.round(e.getY());return this.isValid(t,n)},r.prototype.distancePoint=function(e,t){return ee.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.distanceResultPoint=function(e,t){return ee.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Y.truncDivision(this.nbLayers-4,8)+1)+15},r}(),br=function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=null,i=new Xa(e.getBlackMatrix()),a=null,o=null;try{var s=i.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(t,a),o=new jn().decode(s)}catch(l){n=l}if(o==null)try{var s=i.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(t,a),o=new jn().decode(s)}catch(l){throw n??l}var c=new Xe(o.getText(),o.getRawBytes(),o.getNumBits(),a,L.AZTEC,ve.currentTimeMillis()),f=o.getByteSegments();f!=null&&c.putMetadata(He.BYTE_SEGMENTS,f);var u=o.getECLevel();return u!=null&&c.putMetadata(He.ERROR_CORRECTION_LEVEL,u),c},r.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var n=e.get(ce.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach(function(i,a,o){n.foundPossibleResultPoint(i)})}},r.prototype.reset=function(){},r}(),Wa=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){Wa(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new br,t)||this}return e})(kt);var Me=function(){function r(){}return r.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var n=t&&t.get(ce.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),o=a.getResultMetadata(),s=270;o!==null&&o.get(He.ORIENTATION)===!0&&(s=s+o.get(He.ORIENTATION)%360),a.putMetadata(He.ORIENTATION,s);var c=a.getResultPoints();if(c!==null)for(var f=i.getHeight(),u=0;u<c.length;u++)c[u]=new B(f-c[u].getY()-1,c[u].getX());return a}else throw new b}},r.prototype.reset=function(){},r.prototype.doDecode=function(e,t){var n=e.getWidth(),i=e.getHeight(),a=new ke(n),o=t&&t.get(ce.TRY_HARDER)===!0,s=Math.max(1,i>>(o?8:5)),c;o?c=i:c=15;for(var f=Math.trunc(i/2),u=0;u<c;u++){var l=Math.trunc((u+1)/2),h=(u&1)===0,d=f+s*(h?l:-l);if(d<0||d>=i)break;try{a=e.getBlackRow(d,a)}catch{continue}for(var x=function(w){if(w===1&&(a.reverse(),t&&t.get(ce.NEED_RESULT_POINT_CALLBACK)===!0)){var C=new Map;t.forEach(function(I,O){return C.set(O,I)}),C.delete(ce.NEED_RESULT_POINT_CALLBACK),t=C}try{var A=y.decodeRow(d,a,t);if(w===1){A.putMetadata(He.ORIENTATION,180);var S=A.getResultPoints();S!==null&&(S[0]=new B(n-S[0].getX()-1,S[0].getY()),S[1]=new B(n-S[1].getX()-1,S[1].getY()))}return{value:A}}catch{}},y=this,m=0;m<2;m++){var _=x(m);if(typeof _=="object")return _.value}}throw new b},r.recordPattern=function(e,t,n){for(var i=n.length,a=0;a<i;a++)n[a]=0;var o=e.getSize();if(t>=o)throw new b;for(var s=!e.get(t),c=0,f=t;f<o;){if(e.get(f)!==s)n[c]++;else{if(++c===i)break;n[c]=1,s=!s}f++}if(!(c===i||c===i-1&&f===o))throw new b},r.recordPatternInReverse=function(e,t,n){for(var i=n.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new b;r.recordPattern(e,t+1,n)},r.patternMatchVariance=function(e,t,n){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=t[s];if(a<o)return Number.POSITIVE_INFINITY;var c=a/o;n*=c;for(var f=0,u=0;u<i;u++){var l=e[u],h=t[u]*c,d=l>h?l-h:h-l;if(d>n)return Number.POSITIVE_INFINITY;f+=d}return f/a},r}(),za=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vn=function(r){za(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var n=t.getSize(),i=t.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),s=i,c=!1,f=6,u=i;u<n;u++)if(t.get(u)!==c)o[a]++;else{if(a===f-1){for(var l=e.MAX_AVG_VARIANCE,h=-1,d=e.CODE_START_A;d<=e.CODE_START_C;d++){var x=Me.patternMatchVariance(o,e.CODE_PATTERNS[d],e.MAX_INDIVIDUAL_VARIANCE);x<l&&(l=x,h=d)}if(h>=0&&t.isRange(Math.max(0,s-(u-s)/2),s,!1))return Int32Array.from([s,u,h]);s+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,c=!c}throw new b},e.decodeCode=function(t,n,i){Me.recordPattern(t,i,n);for(var a=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var c=e.CODE_PATTERNS[s],f=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,o=s)}if(o>=0)return o;throw new b},e.prototype.decodeRow=function(t,n,i){var a=i&&i.get(ce.ASSUME_GS1)===!0,o=e.findStartPattern(n),s=o[2],c=0,f=new Uint8Array(20);f[c++]=s;var u;switch(s){case e.CODE_START_A:u=e.CODE_CODE_A;break;case e.CODE_START_B:u=e.CODE_CODE_B;break;case e.CODE_START_C:u=e.CODE_CODE_C;break;default:throw new R}for(var l=!1,h=!1,d="",x=o[0],y=o[1],m=Int32Array.from([0,0,0,0,0,0]),_=0,w=0,C=s,A=0,S=!0,I=!1,O=!1;!l;){var P=h;switch(h=!1,_=w,w=e.decodeCode(n,m,y),f[c++]=w,w!==e.CODE_STOP&&(S=!0),w!==e.CODE_STOP&&(A++,C+=A*w),x=y,y+=m.reduce(function(yt,st){return yt+st},0),w){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new R}switch(u){case e.CODE_CODE_A:if(w<64)O===I?d+=String.fromCharCode(32+w):d+=String.fromCharCode(32+w+128),O=!1;else if(w<96)O===I?d+=String.fromCharCode(w-64):d+=String.fromCharCode(w+64),O=!1;else switch(w!==e.CODE_STOP&&(S=!1),w){case e.CODE_FNC_1:a&&(d.length===0?d+="]C1":d+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!I&&O?(I=!0,O=!1):I&&O?(I=!1,O=!1):O=!0;break;case e.CODE_SHIFT:h=!0,u=e.CODE_CODE_B;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:l=!0;break}break;case e.CODE_CODE_B:if(w<96)O===I?d+=String.fromCharCode(32+w):d+=String.fromCharCode(32+w+128),O=!1;else switch(w!==e.CODE_STOP&&(S=!1),w){case e.CODE_FNC_1:a&&(d.length===0?d+="]C1":d+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!I&&O?(I=!0,O=!1):I&&O?(I=!1,O=!1):O=!0;break;case e.CODE_SHIFT:h=!0,u=e.CODE_CODE_A;break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:l=!0;break}break;case e.CODE_CODE_C:if(w<100)w<10&&(d+="0"),d+=w;else switch(w!==e.CODE_STOP&&(S=!1),w){case e.CODE_FNC_1:a&&(d.length===0?d+="]C1":d+="");break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_STOP:l=!0;break}break}P&&(u=u===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var U=y-x;if(y=n.getNextUnset(y),!n.isRange(y,Math.min(n.getSize(),y+(y-x)/2),!1))throw new b;if(C-=A*_,C%103!==_)throw new Ee;var F=d.length;if(F===0)throw new b;F>0&&S&&(u===e.CODE_CODE_C?d=d.substring(0,F-2):d=d.substring(0,F-1));for(var de=(o[1]+o[0])/2,$=x+U/2,G=f.length,be=new Uint8Array(G),Je=0;Je<G;Je++)be[Je]=f[Je];var gt=[new B(de,t),new B($,t)];return new Xe(d,be,0,gt,L.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Me),$a=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hn=function(r){$a(e,r);function e(t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=r.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,n,i){var a,o,s,c,f=this.counters;f.fill(0),this.decodeRowResult="";var u=e.findAsteriskPattern(n,f),l=n.getNextSet(u[1]),h=n.getSize(),d,x;do{e.recordPattern(n,l,f);var y=e.toNarrowWidePattern(f);if(y<0)throw new b;d=e.patternToChar(y),this.decodeRowResult+=d,x=l;try{for(var m=(a=void 0,Vr(f)),_=m.next();!_.done;_=m.next()){var w=_.value;l+=w}}catch(G){a={error:G}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}l=n.getNextSet(l)}while(d!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C=0;try{for(var A=Vr(f),S=A.next();!S.done;S=A.next()){var w=S.value;C+=w}}catch(G){s={error:G}}finally{try{S&&!S.done&&(c=A.return)&&c.call(A)}finally{if(s)throw s.error}}var I=l-x-C;if(l!==h&&I*2<C)throw new b;if(this.usingCheckDigit){for(var O=this.decodeRowResult.length-1,P=0,U=0;U<O;U++)P+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(U));if(this.decodeRowResult.charAt(O)!==e.ALPHABET_STRING.charAt(P%43))throw new Ee;this.decodeRowResult=this.decodeRowResult.substring(0,O)}if(this.decodeRowResult.length===0)throw new b;var F;this.extendedMode?F=e.decodeExtended(this.decodeRowResult):F=this.decodeRowResult;var de=(u[1]+u[0])/2,$=x+C/2;return new Xe(F,null,0,[new B(de,t),new B($,t)],L.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,n){for(var i=t.getSize(),a=t.getNextSet(0),o=0,s=a,c=!1,f=n.length,u=a;u<i;u++)if(t.get(u)!==c)n[o]++;else{if(o===f-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((u-s)/2)),s,!1))return[s,u];s+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,c=!c}throw new b},e.toNarrowWidePattern=function(t){var n,i,a=t.length,o=0,s;do{var c=2147483647;try{for(var f=(n=void 0,Vr(t)),u=f.next();!u.done;u=f.next()){var l=u.value;l<c&&l>o&&(c=l)}}catch(y){n={error:y}}finally{try{u&&!u.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}o=c,s=0;for(var h=0,d=0,x=0;x<a;x++){var l=t[x];l>o&&(d|=1<<a-1-x,s++,h+=l)}if(s===3){for(var x=0;x<a&&s>0;x++){var l=t[x];if(l>o&&(s--,l*2>=h))return-1}return d}}while(s>3);return-1},e.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);if(t===e.ASTERISK_ENCODING)return"*";throw new b},e.decodeExtended=function(t){for(var n=t.length,i="",a=0;a<n;a++){var o=t.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=t.charAt(a+1),c="\0";switch(o){case"+":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new R;break;case"$":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new R;break;case"%":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s==="X"||s==="Y"||s==="Z")c="";else throw new R;break;case"/":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new R;break}i+=c,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Me),Ya=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gn=function(r){Ya(e,r);function e(){var t=r.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,n,i){var a,o,s,c,f=this.findAsteriskPattern(n),u=n.getNextSet(f[1]),l=n.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var d,x;do{e.recordPattern(n,u,h);var y=this.toPattern(h);if(y<0)throw new b;d=this.patternToChar(y),this.decodeRowResult+=d,x=u;try{for(var m=(a=void 0,Hr(h)),_=m.next();!_.done;_=m.next()){var w=_.value;u+=w}}catch(U){a={error:U}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}u=n.getNextSet(u)}while(d!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C=0;try{for(var A=Hr(h),S=A.next();!S.done;S=A.next()){var w=S.value;C+=w}}catch(U){s={error:U}}finally{try{S&&!S.done&&(c=A.return)&&c.call(A)}finally{if(s)throw s.error}}if(u===l||!n.get(u))throw new b;if(this.decodeRowResult.length<2)throw new b;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var I=this.decodeExtended(this.decodeRowResult),O=(f[1]+f[0])/2,P=x+C/2;return new Xe(I,null,0,[new B(O,t),new B(P,t)],L.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var n=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,s=!1,c=a.length,f=0,u=i;u<n;u++)if(t.get(u)!==s)a[f]++;else{if(f===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,u]);o+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,s=!s}throw new b},e.prototype.toPattern=function(t){var n,i,a=0;try{for(var o=Hr(t),s=o.next();!s.done;s=o.next()){var c=s.value;a+=c}}catch(x){n={error:x}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}for(var f=0,u=t.length,l=0;l<u;l++){var h=Math.round(t[l]*9/a);if(h<1||h>4)return-1;if(l&1)f<<=h;else for(var d=0;d<h;d++)f=f<<1|1}return f},e.prototype.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);throw new b},e.prototype.decodeExtended=function(t){for(var n=t.length,i="",a=0;a<n;a++){var o=t.charAt(a);if(o>="a"&&o<="d"){if(a>=n-1)throw new R;var s=t.charAt(a+1),c="\0";switch(o){case"d":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new R;break;case"a":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new R;break;case"b":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s>="X"&&s<="Z")c="";else throw new R;break;case"c":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new R;break}i+=c,a++}else i+=o}return i},e.prototype.checkChecksums=function(t){var n=t.length;this.checkOneChecksum(t,n-2,20),this.checkOneChecksum(t,n-1,15)},e.prototype.checkOneChecksum=function(t,n,i){for(var a=1,o=0,s=n-1;s>=0;s--)o+=a*e.ALPHABET_STRING.indexOf(t.charAt(s)),++a>i&&(a=1);if(t.charAt(n)!==e.ALPHABET_STRING[o%47])throw new Ee},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Me),Za=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qa=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xn=function(r){Za(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,n,i){var a,o,s=this.decodeStart(n),c=this.decodeEnd(n),f=new z;e.decodeMiddle(n,s[1],c[0],f);var u=f.toString(),l=null;i!=null&&(l=i.get(ce.ALLOWED_LENGTHS)),l==null&&(l=e.DEFAULT_ALLOWED_LENGTHS);var h=u.length,d=!1,x=0;try{for(var y=Qa(l),m=y.next();!m.done;m=y.next()){var _=m.value;if(h===_){d=!0;break}_>x&&(x=_)}}catch(A){a={error:A}}finally{try{m&&!m.done&&(o=y.return)&&o.call(y)}finally{if(a)throw a.error}}if(!d&&h>x&&(d=!0),!d)throw new R;var w=[new B(s[1],t),new B(c[0],t)],C=new Xe(u,null,0,w,L.ITF,new Date().getTime());return C},e.decodeMiddle=function(t,n,i,a){var o=new Int32Array(10),s=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),s.fill(0),c.fill(0);n<i;){Me.recordPattern(t,n,o);for(var f=0;f<5;f++){var u=2*f;s[f]=o[u],c[f]=o[u+1]}var l=e.decodeDigit(s);a.append(l.toString()),l=this.decodeDigit(c),a.append(l.toString()),o.forEach(function(h){n+=h})}},e.prototype.decodeStart=function(t){var n=e.skipWhiteSpace(t),i=e.findGuardPattern(t,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var a=n-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new b},e.skipWhiteSpace=function(t){var n=t.getSize(),i=t.getNextSet(0);if(i===n)throw new b;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var n=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof b&&(i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,n,i){var a=i.length,o=new Int32Array(a),s=t.getSize(),c=!1,f=0,u=n;o.fill(0);for(var l=n;l<s;l++)if(t.get(l)!==c)o[f]++;else{if(f===a-1){if(Me.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[u,l];u+=o[0]+o[1],ve.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,c=!c}throw new b},e.decodeDigit=function(t){for(var n=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var s=e.PATTERNS[o],c=Me.patternMatchVariance(t,s,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,i=o):c===n&&(i=-1)}if(i>=0)return i%10;throw new b},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Me),Ka=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Lt=function(r){Ka(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var n=!1,i,a=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,o);var s=i[0];a=i[1];var c=s-(a-s);c>=0&&(n=t.isRange(c,s,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,a=n-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new R;i+=o}i*=3;for(var a=n-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new R;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,n,i,a){return this.findGuardPattern(t,n,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,n,i,a,o){var s=t.getSize();n=i?t.getNextUnset(n):t.getNextSet(n);for(var c=0,f=n,u=a.length,l=i,h=n;h<s;h++)if(t.get(h)!==l)o[c]++;else{if(c===u-1){if(Me.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,h]);f+=o[0]+o[1];for(var d=o.slice(2,o.length),x=0;x<c-1;x++)o[x]=d[x];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,l=!l}throw new b},e.decodeDigit=function(t,n,i,a){this.recordPattern(t,i,n);for(var o=this.MAX_AVG_VARIANCE,s=-1,c=a.length,f=0;f<c;f++){var u=a[f],l=Me.patternMatchVariance(n,u,e.MAX_INDIVIDUAL_VARIANCE);l<o&&(o=l,s=f)}if(s>=0)return s;throw new b},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Me),Ja=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qa=function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,n,i),o=i.toString(),s=r.parseExtensionString(o),c=[new B((n[0]+n[1])/2,e),new B(a,e)],f=new Xe(o,null,0,c,L.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},r.prototype.decodeMiddle=function(e,t,n){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=t[1],f=0,u=0;u<5&&c<s;u++){var l=Lt.decodeDigit(e,o,c,Lt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+l%10);try{for(var h=(i=void 0,Ja(o)),d=h.next();!d.done;d=h.next()){var x=d.value;c+=x}}catch(m){i={error:m}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}l>=10&&(f|=1<<4-u),u!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new b;var y=this.determineCheckDigit(f);if(r.extensionChecksum(n.toString())!==y)throw new b;return c},r.extensionChecksum=function(e){for(var t=e.length,n=0,i=t-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=t-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},r.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new b},r.parseExtensionString=function(e){if(e.length!==5)return null;var t=r.parseExtension5String(e);return t==null?null:new Map([[He.SUGGESTED_PRICE,t]])},r.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),a=n%100,o=a<10?"0"+a:a.toString();return t+i+"."+o},r}(),eo=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},to=function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,n,i),o=i.toString(),s=r.parseExtensionString(o),c=[new B((n[0]+n[1])/2,e),new B(a,e)],f=new Xe(o,null,0,c,L.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},r.prototype.decodeMiddle=function(e,t,n){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=t[1],f=0,u=0;u<2&&c<s;u++){var l=Lt.decodeDigit(e,o,c,Lt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+l%10);try{for(var h=(i=void 0,eo(o)),d=h.next();!d.done;d=h.next()){var x=d.value;c+=x}}catch(y){i={error:y}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}l>=10&&(f|=1<<1-u),u!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new b;if(parseInt(n.toString())%4!==f)throw new b;return c},r.parseExtensionString=function(e){return e.length!==2?null:new Map([[He.ISSUE_NUMBER,parseInt(e)]])},r}(),ro=function(){function r(){}return r.decodeRow=function(e,t,n){var i=Lt.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new qa;return a.decodeRow(e,t,i)}catch{var o=new to;return o.decodeRow(e,t,i)}},r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),r}(),no=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Re=function(r){no(e,r);function e(){var t=r.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[n]=a}return t}return e.prototype.decodeRow=function(t,n,i){var a=e.findStartGuardPattern(n),o=i==null?null:i.get(ce.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new B((a[0]+a[1])/2,t);o.foundPossibleResultPoint(s)}var c=this.decodeMiddle(n,a,this.decodeRowStringBuffer),f=c.rowOffset,u=c.resultString;if(o!=null){var l=new B(f,t);o.foundPossibleResultPoint(l)}var h=e.decodeEnd(n,f);if(o!=null){var d=new B((h[0]+h[1])/2,t);o.foundPossibleResultPoint(d)}var x=h[1],y=x+(x-h[0]);if(y>=n.getSize()||!n.isRange(x,y,!1))throw new b;var m=u.toString();if(m.length<8)throw new R;if(!e.checkChecksum(m))throw new Ee;var _=(a[1]+a[0])/2,w=(h[1]+h[0])/2,C=this.getBarcodeFormat(),A=[new B(_,t),new B(w,t)],S=new Xe(m,null,0,A,C,new Date().getTime()),I=0;try{var O=ro.decodeRow(t,n,h[1]);S.putMetadata(He.UPC_EAN_EXTENSION,O.getText()),S.putAllMetadata(O.getResultMetadata()),S.addResultPoints(O.getResultPoints()),I=O.getText().length}catch{}var P=i==null?null:i.get(ce.ALLOWED_EAN_EXTENSIONS);if(P!=null){var U=!1;for(var F in P)if(I.toString()===F){U=!0;break}if(!U)throw new b}return C===L.EAN_13||L.UPC_A,S},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,a=n-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new R;i+=o}i*=3;for(var a=n-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new R;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Lt),io=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nn=function(r){io(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var a,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var u=t.getSize(),l=n[1],h=0,d=0;d<6&&l<u;d++){var x=Re.decodeDigit(t,f,l,Re.L_AND_G_PATTERNS);i+=String.fromCharCode(48+x%10);try{for(var y=(a=void 0,Wn(f)),m=y.next();!m.done;m=y.next()){var _=m.value;l+=_}}catch(S){a={error:S}}finally{try{m&&!m.done&&(o=y.return)&&o.call(y)}finally{if(a)throw a.error}}x>=10&&(h|=1<<5-d)}i=e.determineFirstDigit(i,h);var w=Re.findGuardPattern(t,l,!0,Re.MIDDLE_PATTERN,new Int32Array(Re.MIDDLE_PATTERN.length).fill(0));l=w[1];for(var d=0;d<6&&l<u;d++){var x=Re.decodeDigit(t,f,l,Re.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var C=(s=void 0,Wn(f)),A=C.next();!A.done;A=C.next()){var _=A.value;l+=_}}catch(O){s={error:O}}finally{try{A&&!A.done&&(c=C.return)&&c.call(C)}finally{if(s)throw s.error}}}return{rowOffset:l,resultString:i}},e.prototype.getBarcodeFormat=function(){return L.EAN_13},e.determineFirstDigit=function(t,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new b},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Re),ao=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$n=function(r){ao(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var a,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var u=t.getSize(),l=n[1],h=0;h<4&&l<u;h++){var d=Re.decodeDigit(t,f,l,Re.L_PATTERNS);i+=String.fromCharCode(48+d);try{for(var x=(a=void 0,zn(f)),y=x.next();!y.done;y=x.next()){var m=y.value;l+=m}}catch(A){a={error:A}}finally{try{y&&!y.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}}var _=Re.findGuardPattern(t,l,!0,Re.MIDDLE_PATTERN,new Int32Array(Re.MIDDLE_PATTERN.length).fill(0));l=_[1];for(var h=0;h<4&&l<u;h++){var d=Re.decodeDigit(t,f,l,Re.L_PATTERNS);i+=String.fromCharCode(48+d);try{for(var w=(s=void 0,zn(f)),C=w.next();!C.done;C=w.next()){var m=C.value;l+=m}}catch(I){s={error:I}}finally{try{C&&!C.done&&(c=w.return)&&c.call(w)}finally{if(s)throw s.error}}}return{rowOffset:l,resultString:i}},e.prototype.getBarcodeFormat=function(){return L.EAN_8},e}(Re),oo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yn=function(r){oo(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ean13Reader=new nn,t}return e.prototype.getBarcodeFormat=function(){return L.UPC_A},e.prototype.decode=function(t,n){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,n,i))},e.prototype.decodeMiddle=function(t,n,i){return this.ean13Reader.decodeMiddle(t,n,i)},e.prototype.maybeReturnResult=function(t){var n=t.getText();if(n.charAt(0)==="0"){var i=new Xe(n.substring(1),null,null,t.getResultPoints(),L.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new b},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Re),so=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),co=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zn=function(r){so(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,n,i){var a,o,s=this.decodeMiddleCounters.map(function(m){return m});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=t.getSize(),f=n[1],u=0,l=0;l<6&&f<c;l++){var h=e.decodeDigit(t,s,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+h%10);try{for(var d=(a=void 0,co(s)),x=d.next();!x.done;x=d.next()){var y=x.value;f+=y}}catch(m){a={error:m}}finally{try{x&&!x.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}h>=10&&(u|=1<<5-l)}return e.determineNumSysAndCheckDigit(new z(i),u),f},e.prototype.decodeEnd=function(t,n){return e.findGuardPatternWithoutCounters(t,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Re.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,n){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw b.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return L.UPC_E},e.convertUPCEtoUPCA=function(t){var n=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new z;i.append(t.charAt(0));var a=n[5];switch(a){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(a),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Re),fo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gr=function(r){fo(e,r);function e(t){var n=r.call(this)||this,i=t==null?null:t.get(ce.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(L.EAN_13)>-1&&a.push(new nn),i.indexOf(L.UPC_A)>-1&&a.push(new Yn),i.indexOf(L.EAN_8)>-1&&a.push(new $n),i.indexOf(L.UPC_E)>-1&&a.push(new Zn)),a.length===0&&(a.push(new nn),a.push(new Yn),a.push(new $n),a.push(new Zn)),n.readers=a,n}return e.prototype.decodeRow=function(t,n,i){var a,o;try{for(var s=Qn(this.readers),c=s.next();!c.done;c=s.next()){var f=c.value;try{var u=f.decodeRow(t,n,i),l=u.getBarcodeFormat()===L.EAN_13&&u.getText().charAt(0)==="0",h=i==null?null:i.get(ce.POSSIBLE_FORMATS),d=h==null||h.includes(L.UPC_A);if(l&&d){var x=u.getRawBytes(),y=new Xe(u.getText().substring(1),x,x?x.length:null,u.getResultPoints(),L.UPC_A);return y.putAllMetadata(u.getResultMetadata()),y}return u}catch{}}}catch(m){a={error:m}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}throw new b},e.prototype.reset=function(){var t,n;try{for(var i=Qn(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e}(Me),uo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lo=function(r){uo(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,n,i){var a=this.getValidRowData(n);if(!a)throw new b;var o=this.codaBarDecodeRow(a.row);if(!o)throw new b;return new Xe(o,null,0,[new B(a.left,t),new B(a.right,t)],L.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var n=t.toArray(),i=n.indexOf(!0);if(i===-1)return null;var a=n.lastIndexOf(!0);if(a<=i)return null;n=n.slice(i,a+1);for(var o=[],s=n[0],c=1,f=1;f<n.length;f++)n[f]===s?c++:(s=n[f],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var n=[],i=Math.ceil(t.reduce(function(c,f){return(c+f)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),o=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(t){var n=/^[A-D].{1,}[A-D]$/;return n.test(t)},e}(Me),ho=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vo=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},At=function(r){ho(e,r);function e(){var t=r.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,n){for(var i=0;i<n.length;i++)if(Me.patternMatchVariance(t,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new b},e.count=function(t){return ee.sum(new Int32Array(t))},e.increment=function(t,n){for(var i=0,a=n[0],o=1;o<t.length;o++)n[o]>a&&(a=n[o],i=o);t[i]++},e.decrement=function(t,n){for(var i=0,a=n[0],o=1;o<t.length;o++)n[o]<a&&(a=n[o],i=o);t[i]--},e.isFinderPattern=function(t){var n,i,a=t[0]+t[1],o=a+t[2]+t[3],s=a/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var u=vo(t),l=u.next();!l.done;l=u.next()){var h=l.value;h>f&&(f=h),h<c&&(c=h)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return f<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Me),Sr=function(){function r(e,t){this.value=e,this.checksumPortion=t}return r.prototype.getValue=function(){return this.value},r.prototype.getChecksumPortion=function(){return this.checksumPortion},r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},r.prototype.hashCode=function(){return this.value^this.checksumPortion},r}(),bi=function(){function r(e,t,n,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new B(n,a)),this.resultPoints.push(new B(i,a))}return r.prototype.getValue=function(){return this.value},r.prototype.getStartEnd=function(){return this.startEnd},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.hashCode=function(){return this.value},r}(),po=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pt=function(){function r(){}return r.getRSSvalue=function(e,t,n){var i,a,o=0;try{for(var s=po(e),c=s.next();!c.done;c=s.next()){var f=c.value;o+=f}}catch(w){i={error:w}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var u=0,l=0,h=e.length,d=0;d<h-1;d++){var x=void 0;for(x=1,l|=1<<d;x<e[d];x++,l&=~(1<<d)){var y=r.combins(o-x-1,h-d-2);if(n&&l===0&&o-x-(h-d-1)>=h-d-1&&(y-=r.combins(o-x-(h-d),h-d-2)),h-d-1>1){for(var m=0,_=o-x-(h-d-2);_>t;_--)m+=r.combins(o-x-_-1,h-d-3);y-=m*(h-1-d)}else o-x>t&&y--;u+=y}o-=x}return u},r.combins=function(e,t){var n,i;e-t>t?(i=t,n=e-t):(i=e-t,n=t);for(var a=1,o=1,s=e;s>n;s--)a*=s,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},r}(),xo=function(){function r(){}return r.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var n=12*t,i=new ke(n),a=0,o=e[0],s=o.getRightChar().getValue(),c=11;c>=0;--c)s&1<<c&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var f=e[c],u=f.getLeftChar().getValue(),l=11;l>=0;--l)u&1<<l&&i.set(a),a++;if(f.getRightChar()!==null)for(var h=f.getRightChar().getValue(),l=11;l>=0;--l)h&1<<l&&i.set(a),a++}return i},r}(),wt=function(){function r(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return r.prototype.getDecodedInformation=function(){return this.decodedInformation},r.prototype.isFinished=function(){return this.finished},r}(),dn=function(){function r(e){this.newPosition=e}return r.prototype.getNewPosition=function(){return this.newPosition},r}(),go=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),it=function(r){go(e,r);function e(t,n){var i=r.call(this,t)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(dn),yo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_t=function(r){yo(e,r);function e(t,n,i){var a=r.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=n,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(dn),mo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Tt=function(r){mo(e,r);function e(t,n,i){var a=r.call(this,t)||this;if(n<0||n>10||i<0||i>10)throw new R;return a.firstDigit=n,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(dn),xr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wo=function(){function r(){}return r.parseFieldsInGeneralPurpose=function(e){var t,n,i,a,o,s,c,f;if(!e)return null;if(e.length<2)throw new b;var u=e.substring(0,2);try{for(var l=xr(r.TWO_DIGIT_DATA_LENGTH),h=l.next();!h.done;h=l.next()){var d=h.value;if(d[0]===u)return d[1]===r.VARIABLE_LENGTH?r.processVariableAI(2,d[2],e):r.processFixedAI(2,d[1],e)}}catch(I){t={error:I}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}if(e.length<3)throw new b;var x=e.substring(0,3);try{for(var y=xr(r.THREE_DIGIT_DATA_LENGTH),m=y.next();!m.done;m=y.next()){var d=m.value;if(d[0]===x)return d[1]===r.VARIABLE_LENGTH?r.processVariableAI(3,d[2],e):r.processFixedAI(3,d[1],e)}}catch(I){i={error:I}}finally{try{m&&!m.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}try{for(var _=xr(r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),w=_.next();!w.done;w=_.next()){var d=w.value;if(d[0]===x)return d[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,d[2],e):r.processFixedAI(4,d[1],e)}}catch(I){o={error:I}}finally{try{w&&!w.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}if(e.length<4)throw new b;var C=e.substring(0,4);try{for(var A=xr(r.FOUR_DIGIT_DATA_LENGTH),S=A.next();!S.done;S=A.next()){var d=S.value;if(d[0]===C)return d[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,d[2],e):r.processFixedAI(4,d[1],e)}}catch(I){c={error:I}}finally{try{S&&!S.done&&(f=A.return)&&f.call(A)}finally{if(c)throw c.error}}throw new b},r.processFixedAI=function(e,t,n){if(n.length<e)throw new b;var i=n.substring(0,e);if(n.length<e+t)throw new b;var a=n.substring(e,e+t),o=n.substring(e+t),s="("+i+")"+a,c=r.parseFieldsInGeneralPurpose(o);return c==null?s:s+c},r.processVariableAI=function(e,t,n){var i=n.substring(0,e),a;n.length<e+t?a=n.length:a=e+t;var o=n.substring(e,a),s=n.substring(a),c="("+i+")"+o,f=r.parseFieldsInGeneralPurpose(s);return f==null?c:c+f},r.VARIABLE_LENGTH=[],r.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",r.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",r.VARIABLE_LENGTH,20],["22",r.VARIABLE_LENGTH,29],["30",r.VARIABLE_LENGTH,8],["37",r.VARIABLE_LENGTH,8],["90",r.VARIABLE_LENGTH,30],["91",r.VARIABLE_LENGTH,30],["92",r.VARIABLE_LENGTH,30],["93",r.VARIABLE_LENGTH,30],["94",r.VARIABLE_LENGTH,30],["95",r.VARIABLE_LENGTH,30],["96",r.VARIABLE_LENGTH,30],["97",r.VARIABLE_LENGTH,3],["98",r.VARIABLE_LENGTH,30],["99",r.VARIABLE_LENGTH,30]],r.THREE_DIGIT_DATA_LENGTH=[["240",r.VARIABLE_LENGTH,30],["241",r.VARIABLE_LENGTH,30],["242",r.VARIABLE_LENGTH,6],["250",r.VARIABLE_LENGTH,30],["251",r.VARIABLE_LENGTH,30],["253",r.VARIABLE_LENGTH,17],["254",r.VARIABLE_LENGTH,20],["400",r.VARIABLE_LENGTH,30],["401",r.VARIABLE_LENGTH,30],["402",17],["403",r.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",r.VARIABLE_LENGTH,20],["421",r.VARIABLE_LENGTH,15],["422",3],["423",r.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",r.VARIABLE_LENGTH,15],["391",r.VARIABLE_LENGTH,18],["392",r.VARIABLE_LENGTH,15],["393",r.VARIABLE_LENGTH,18],["703",r.VARIABLE_LENGTH,30]],r.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",r.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",r.VARIABLE_LENGTH,20],["8003",r.VARIABLE_LENGTH,30],["8004",r.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",r.VARIABLE_LENGTH,30],["8008",r.VARIABLE_LENGTH,12],["8018",18],["8020",r.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",r.VARIABLE_LENGTH,70],["8200",r.VARIABLE_LENGTH,70]],r}(),Ar=function(){function r(e){this.buffer=new z,this.information=e}return r.prototype.decodeAllCodes=function(e,t){var n=t,i=null;do{var a=this.decodeGeneralPurposeField(n,i),o=wo.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,n===a.getNewPosition())break;n=a.getNewPosition()}while(!0);return e.toString()},r.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},r.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Tt(this.information.getSize(),Tt.FNC1,Tt.FNC1):new Tt(this.information.getSize(),t-1,Tt.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,a=(n-8)%11;return new Tt(e+7,i,a)},r.prototype.extractNumericValueFromBitArray=function(e,t){return r.extractNumericValueFromBitArray(this.information,e,t)},r.extractNumericValueFromBitArray=function(e,t,n){for(var i=0,a=0;a<n;++a)e.get(t+a)&&(i|=1<<n-a-1);return i},r.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new _t(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new _t(this.current.getPosition(),this.buffer.toString())},r.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},r.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new _t(this.current.getPosition(),this.buffer.toString()):t=new _t(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new wt(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new _t(this.current.getPosition(),this.buffer.toString());return new wt(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new wt(!1)},r.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new _t(this.current.getPosition(),this.buffer.toString());return new wt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new wt(!1)},r.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new _t(this.current.getPosition(),this.buffer.toString());return new wt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new wt(!1)},r.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},r.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new it(e+5,it.FNC1);if(t>=5&&t<15)return new it(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new it(e+7,""+(n+1));if(n>=90&&n<116)return new it(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new R}return new it(e+8,a)},r.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},r.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new it(e+5,it.FNC1);if(t>=5&&t<15)return new it(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new it(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new sr("Decoding invalid alphanumeric value: "+n)}return new it(e+6,i)},r.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},r.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},r.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},r}(),Si=function(){function r(e){this.information=e,this.generalDecoder=new Ar(e)}return r.prototype.getInformation=function(){return this.information},r.prototype.getGeneralDecoder=function(){return this.generalDecoder},r}(),_o=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),at=function(r){_o(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,n){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,n,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*a,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,n){for(var i=0,a=0;a<13;a++){var o=t.charAt(a+n).charCodeAt(0)-48;i+=a&1?o:3*o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(Si),Ao=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Co=function(r){Ao(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new z;t.append("(01)");var n=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(at),Eo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bo=function(r){Eo(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new z;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Si),So=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Cr=function(r){So(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,n,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(t,a);for(var o=this.checkWeight(a),s=1e5,c=0;c<5;++c)o/s===0&&t.append("0"),s/=10;t.append(o)},e}(at),Io=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ii=function(r){Io(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Cr.GTIN_SIZE+e.WEIGHT_SIZE)throw new b;var t=new z;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Cr.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Cr),No=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Oo=function(r){No(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(Ii),To=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ro=function(r){To(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){n<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(Ii),Do=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Po=function(r){Do(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+at.GTIN_SIZE)throw new b;var t=new z;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+at.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+at.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(at),Mo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bo=function(r){Mo(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+at.GTIN_SIZE)throw new b;var t=new z;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+at.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+at.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+at.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(at),Fo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),dt=function(r){Fo(e,r);function e(t,n,i){var a=r.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=n,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new b;var t=new z;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var s=i;s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Cr);function Lo(r){try{if(r.get(1))return new Co(r);if(!r.get(2))return new bo(r);var e=Ar.extractNumericValueFromBitArray(r,1,4);switch(e){case 4:return new Oo(r);case 5:return new Ro(r)}var t=Ar.extractNumericValueFromBitArray(r,1,5);switch(t){case 12:return new Po(r);case 13:return new Bo(r)}var n=Ar.extractNumericValueFromBitArray(r,1,7);switch(n){case 56:return new dt(r,"310","11");case 57:return new dt(r,"320","11");case 58:return new dt(r,"310","13");case 59:return new dt(r,"320","13");case 60:return new dt(r,"310","15");case 61:return new dt(r,"320","15");case 62:return new dt(r,"310","17");case 63:return new dt(r,"320","17")}}catch(i){throw console.log(i),new sr("unknown decoder: "+r)}}var Kn=function(){function r(e,t,n,i){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=i}return r.prototype.mayBeLast=function(){return this.maybeLast},r.prototype.getLeftChar=function(){return this.leftchar},r.prototype.getRightChar=function(){return this.rightchar},r.prototype.getFinderPattern=function(){return this.finderpattern},r.prototype.mustBeLast=function(){return this.rightchar==null},r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},r.equals=function(e,t){return e instanceof r?r.equalsOrNull(e.leftchar,t.leftchar)&&r.equalsOrNull(e.rightchar,t.rightchar)&&r.equalsOrNull(e.finderpattern,t.finderpattern):!1},r.equalsOrNull=function(e,t){return e===null?t===null:r.equals(e,t)},r.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},r}(),ko=function(){function r(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return r.prototype.getPairs=function(){return this.pairs},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.isReversed=function(){return this.wasReversed},r.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},r.prototype.toString=function(){return"{ "+this.pairs+" }"},r.prototype.equals=function(e,t){return e instanceof r?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},r.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var n;return e.forEach(function(i,a){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},r}(),jo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ht=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uo=function(r){jo(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,t))}catch(s){if(s instanceof b){if(!this.pairs.length)throw new b;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new b},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(t,n){for(var i,a,o=n;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var c=(i=void 0,ht(t)),f=c.next();!f.done;f=c.next()){var u=f.value;this.pairs.push(u.getPairs())}}catch(h){i={error:h}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var l=new Array(t);l.push(s);try{return this.checkRows(l,o+1)}catch(h){console.log(h)}}}throw new b},e.isValidSequence=function(t){var n,i;try{for(var a=ht(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var s=o.value;if(!(t.length>s.length)){for(var c=!0,f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!==s[f]){c=!1;break}if(c)return!0}}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(t,n){for(var i=0,a=!1,o=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>t){o=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new ko(this.pairs,t,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,n){var i,a,o,s,c,f;try{for(var u=ht(n),l=u.next();!l.done;l=u.next()){var h=l.value;if(h.getPairs().length!==t.length){var d=!0;try{for(var x=(o=void 0,ht(h.getPairs())),y=x.next();!y.done;y=x.next()){var m=y.value,_=!1;try{for(var w=(c=void 0,ht(t)),C=w.next();!C.done;C=w.next()){var A=C.value;if(Kn.equals(m,A)){_=!0;break}}}catch(S){c={error:S}}finally{try{C&&!C.done&&(f=w.return)&&f.call(w)}finally{if(c)throw c.error}}_||(d=!1)}}catch(S){o={error:S}}finally{try{y&&!y.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}}}}catch(S){i={error:S}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,n){var i,a,o,s,c,f;try{for(var u=ht(n),l=u.next();!l.done;l=u.next()){var h=l.value,d=!0;try{for(var x=(o=void 0,ht(t)),y=x.next();!y.done;y=x.next()){var m=y.value,_=!1;try{for(var w=(c=void 0,ht(h.getPairs())),C=w.next();!C.done;C=w.next()){var A=C.value;if(m.equals(A)){_=!0;break}}}catch(S){c={error:S}}finally{try{C&&!C.done&&(f=w.return)&&f.call(w)}finally{if(c)throw c.error}}if(!_){d=!1;break}}}catch(S){o={error:S}}finally{try{y&&!y.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}if(d)return!0}}catch(S){i={error:S}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var n=xo.buildBitArray(t),i=Lo(n),a=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),s=t[t.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],s[0],s[1]];return new Xe(a,null,null,c,L.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),n=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var c=this.pairs.get(s);a+=c.getLeftChar().getChecksumPortion(),o++;var f=c.getRightChar();f!=null&&(a+=f.getChecksumPortion(),o++)}a%=211;var u=211*(o-4)+a;return u===n.getValue()},e.getNextSecondBar=function(t,n){var i;return t.get(n)?(i=t.getNextUnset(n),i=t.getNextSet(i)):(i=t.getNextSet(n),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,n,i){var a=n.length%2===0;this.startFromEven&&(a=!a);var o,s=!0,c=-1;do this.findNextPair(t,n,c),o=this.parseFoundFinderPattern(t,i,a),o===null?c=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var f=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new b;var u;try{u=this.decodeDataCharacter(t,o,a,!1)}catch(l){u=null,console.log(l)}return new Kn(f,u,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,n,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=t.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(n))s=0;else{var c=n[n.length-1];s=c.getFinderPattern().getStartEnd()[1]}var f=n.length%2!==0;this.startFromEven&&(f=!f);for(var u=!1;s<o&&(u=!t.get(s),!!u);)s++;for(var l=0,h=s,d=s;d<o;d++)if(t.get(d)!==u)a[l]++;else{if(l===3){if(f&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=h,this.startEnd[1]=d;return}f&&e.reverseCounters(a),h+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,l--}else l++;a[l]=1,u=!u}throw new b},e.reverseCounters=function(t){for(var n=t.length,i=0;i<n/2;++i){var a=t[i];t[i]=t[n-i-1],t[n-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,n,i){var a,o,s;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,a=this.startEnd[0]-c,o=c,s=this.startEnd[1]}else o=this.startEnd[0],s=t.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var f=this.getDecodeFinderCounters();ve.arraycopy(f,0,f,1,f.length-1),f[0]=a;var u;try{u=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new bi(u,[o,s],o,s,n)},e.prototype.decodeDataCharacter=function(t,n,i,a){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(a)e.recordPatternInReverse(t,n.getStartEnd()[0],o);else{e.recordPattern(t,n.getStartEnd()[1],o);for(var c=0,f=o.length-1;c<f;c++,f--){var u=o[c];o[c]=o[f],o[f]=u}}var l=17,h=ee.sum(new Int32Array(o))/l,d=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-d)/d>.3)throw new b;for(var x=this.getOddCounts(),y=this.getEvenCounts(),m=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var w=1*o[c]/h,C=w+.5;if(C<1){if(w<.3)throw new b;C=1}else if(C>8){if(w>8.7)throw new b;C=8}var A=c/2;c&1?(y[A]=C,_[A]=w-C):(x[A]=C,m[A]=w-C)}this.adjustOddEvenCounts(l);for(var S=4*n.getValue()+(i?0:2)+(a?0:1)-1,I=0,O=0,c=x.length-1;c>=0;c--){if(e.isNotA1left(n,i,a)){var P=e.WEIGHTS[S][2*c];O+=x[c]*P}I+=x[c]}for(var U=0,c=y.length-1;c>=0;c--)if(e.isNotA1left(n,i,a)){var P=e.WEIGHTS[S][2*c+1];U+=y[c]*P}var F=O+U;if(I&1||I>13||I<4)throw new b;var de=(13-I)/2,$=e.SYMBOL_WIDEST[de],G=9-$,be=Pt.getRSSvalue(x,$,!0),Je=Pt.getRSSvalue(y,G,!1),gt=e.EVEN_TOTAL_SUBSET[de],yt=e.GSUM[de],st=be*gt+Je+yt;return new Sr(st,F)},e.isNotA1left=function(t,n,i){return!(t.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(t){var n=ee.sum(new Int32Array(this.getOddCounts())),i=ee.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;n>13?o=!0:n<4&&(a=!0);var s=!1,c=!1;i>13?c=!0:i<4&&(s=!0);var f=n+i-t,u=(n&1)===1,l=(i&1)===0;if(f===1)if(u){if(l)throw new b;o=!0}else{if(!l)throw new b;c=!0}else if(f===-1)if(u){if(l)throw new b;a=!0}else{if(!l)throw new b;s=!0}else if(f===0){if(u){if(!l)throw new b;n<i?(a=!0,c=!0):(o=!0,s=!0)}else if(l)throw new b}else throw new b;if(a){if(o)throw new b;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(c)throw new b;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(At),Vo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ho=function(r){Vo(e,r);function e(t,n,i){var a=r.call(this,t,n)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Sr),Go=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jn=function(r){Go(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,n,i){var a,o,s,c,f=this.decodePair(n,!1,t,i);e.addOrTally(this.possibleLeftPairs,f),n.reverse();var u=this.decodePair(n,!0,t,i);e.addOrTally(this.possibleRightPairs,u),n.reverse();try{for(var l=Xr(this.possibleLeftPairs),h=l.next();!h.done;h=l.next()){var d=h.value;if(d.getCount()>1)try{for(var x=(s=void 0,Xr(this.possibleRightPairs)),y=x.next();!y.done;y=x.next()){var m=y.value;if(m.getCount()>1&&e.checkChecksum(d,m))return e.constructResult(d,m)}}catch(_){s={error:_}}finally{try{y&&!y.done&&(c=x.return)&&c.call(x)}finally{if(s)throw s.error}}}}catch(_){a={error:_}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}throw new b},e.addOrTally=function(t,n){var i,a;if(n!=null){var o=!1;try{for(var s=Xr(t),c=s.next();!c.done;c=s.next()){var f=c.value;if(f.getValue()===n.getValue()){f.incrementCount(),o=!0;break}}}catch(u){i={error:u}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}o||t.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,n){for(var i=4537077*t.getValue()+n.getValue(),a=new String(i).toString(),o=new z,s=13-a.length;s>0;s--)o.append("0");o.append(a);for(var c=0,s=0;s<13;s++){var f=o.charAt(s).charCodeAt(0)-48;c+=s&1?f:3*f}c=10-c%10,c===10&&(c=0),o.append(c.toString());var u=t.getFinderPattern().getResultPoints(),l=n.getFinderPattern().getResultPoints();return new Xe(o.toString(),null,0,[u[0],u[1],l[0],l[1]],L.RSS_14,new Date().getTime())},e.checkChecksum=function(t,n){var i=(t.getChecksumPortion()+16*n.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+n.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,n,i,a){try{var o=this.findFinderPattern(t,n),s=this.parseFoundFinderPattern(t,i,n,o),c=a==null?null:a.get(ce.NEED_RESULT_POINT_CALLBACK);if(c!=null){var f=(o[0]+o[1])/2;n&&(f=t.getSize()-1-f),c.foundPossibleResultPoint(new B(f,i))}var u=this.decodeDataCharacter(t,s,!0),l=this.decodeDataCharacter(t,s,!1);return new Ho(1597*u.getValue()+l.getValue(),u.getChecksumPortion()+4*l.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(t,n,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)Me.recordPatternInReverse(t,n.getStartEnd()[0],a);else{Me.recordPattern(t,n.getStartEnd()[1]+1,a);for(var s=0,c=a.length-1;s<c;s++,c--){var f=a[s];a[s]=a[c],a[c]=f}}for(var u=i?16:15,l=ee.sum(new Int32Array(a))/u,h=this.getOddCounts(),d=this.getEvenCounts(),x=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var m=a[s]/l,_=Math.floor(m+.5);_<1?_=1:_>8&&(_=8);var w=Math.floor(s/2);s&1?(d[w]=_,y[w]=m-_):(h[w]=_,x[w]=m-_)}this.adjustOddEvenCounts(i,u);for(var C=0,A=0,s=h.length-1;s>=0;s--)A*=9,A+=h[s],C+=h[s];for(var S=0,I=0,s=d.length-1;s>=0;s--)S*=9,S+=d[s],I+=d[s];var O=A+3*S;if(i){if(C&1||C>12||C<4)throw new b;var P=(12-C)/2,U=e.OUTSIDE_ODD_WIDEST[P],F=9-U,de=Pt.getRSSvalue(h,U,!1),$=Pt.getRSSvalue(d,F,!0),G=e.OUTSIDE_EVEN_TOTAL_SUBSET[P],be=e.OUTSIDE_GSUM[P];return new Sr(de*G+$+be,O)}else{if(I&1||I>10||I<4)throw new b;var P=(10-I)/2,U=e.INSIDE_ODD_WIDEST[P],F=9-U,de=Pt.getRSSvalue(h,U,!0),$=Pt.getRSSvalue(d,F,!1),Je=e.INSIDE_ODD_TOTAL_SUBSET[P],be=e.INSIDE_GSUM[P];return new Sr($*Je+de+be,O)}},e.prototype.findFinderPattern=function(t,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),o=!1,s=0;s<a&&(o=!t.get(s),n!==o);)s++;for(var c=0,f=s,u=s;u<a;u++)if(t.get(u)!==o)i[c]++;else{if(c===3){if(At.isFinderPattern(i))return[f,u];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,o=!o}throw new b},e.prototype.parseFoundFinderPattern=function(t,n,i,a){for(var o=t.get(a[0]),s=a[0]-1;s>=0&&o!==t.get(s);)s--;s++;var c=a[0]-s,f=this.getDecodeFinderCounters(),u=new Int32Array(f.length);ve.arraycopy(f,0,u,1,f.length-1),u[0]=c;var l=this.parseFinderValue(u,e.FINDER_PATTERNS),h=s,d=a[1];return i&&(h=t.getSize()-1-h,d=t.getSize()-1-d),new bi(l,[s,a[1]],h,d,n)},e.prototype.adjustOddEvenCounts=function(t,n){var i=ee.sum(new Int32Array(this.getOddCounts())),a=ee.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,c=!1,f=!1;t?(i>12?s=!0:i<4&&(o=!0),a>12?f=!0:a<4&&(c=!0)):(i>11?s=!0:i<5&&(o=!0),a>10?f=!0:a<4&&(c=!0));var u=i+a-n,l=(i&1)===(t?1:0),h=(a&1)===1;if(u===1)if(l){if(h)throw new b;s=!0}else{if(!h)throw new b;f=!0}else if(u===-1)if(l){if(h)throw new b;o=!0}else{if(!h)throw new b;c=!0}else if(u===0){if(l){if(!h)throw new b;i<a?(o=!0,f=!0):(s=!0,c=!0)}else if(h)throw new b}else throw new b;if(o){if(s)throw new b;At.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&At.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new b;At.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&At.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(At),Xo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mt=function(r){Xo(e,r);function e(t){var n=r.call(this)||this;n.readers=[];var i=t?t.get(ce.POSSIBLE_FORMATS):null,a=t&&t.get(ce.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(ce.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(L.EAN_13)||i.includes(L.UPC_A)||i.includes(L.EAN_8)||i.includes(L.UPC_E))&&n.readers.push(new Gr(t)),i.includes(L.CODE_39)&&n.readers.push(new Hn(a,o)),i.includes(L.CODE_93)&&n.readers.push(new Gn),i.includes(L.CODE_128)&&n.readers.push(new Vn),i.includes(L.ITF)&&n.readers.push(new Xn),i.includes(L.CODABAR)&&n.readers.push(new lo),i.includes(L.RSS_14)&&n.readers.push(new Jn),i.includes(L.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new Uo))),n.readers.length===0&&(n.readers.push(new Gr(t)),n.readers.push(new Hn),n.readers.push(new Gn),n.readers.push(new Gr(t)),n.readers.push(new Vn),n.readers.push(new Xn),n.readers.push(new Jn)),n}return e.prototype.decodeRow=function(t,n,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,n,i)}catch{}throw new b},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Me),Wo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){Wo(e,r);function e(t,n){return t===void 0&&(t=500),r.call(this,new Mt(n),t,n)||this}return e})(kt);var qn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ie=function(){function r(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return r.prototype.getECCodewords=function(){return this.ecCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r}(),re=function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r}(),zo=function(){function r(e,t,n,i,a,o){var s,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var f=0,u=o.getECCodewords(),l=o.getECBlocks();try{for(var h=qn(l),d=h.next();!d.done;d=h.next()){var x=d.value;f+=x.getCount()*(x.getDataCodewords()+u)}}catch(y){s={error:y}}finally{try{d&&!d.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}this.totalCodewords=f}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r.getVersionForDimensions=function(e,t){var n,i;if(e&1||t&1)throw new R;try{for(var a=qn(r.VERSIONS),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===t)return s}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}throw new R},r.prototype.toString=function(){return""+this.versionNumber},r.buildVersions=function(){return[new r(1,10,10,8,8,new ie(5,new re(1,3))),new r(2,12,12,10,10,new ie(7,new re(1,5))),new r(3,14,14,12,12,new ie(10,new re(1,8))),new r(4,16,16,14,14,new ie(12,new re(1,12))),new r(5,18,18,16,16,new ie(14,new re(1,18))),new r(6,20,20,18,18,new ie(18,new re(1,22))),new r(7,22,22,20,20,new ie(20,new re(1,30))),new r(8,24,24,22,22,new ie(24,new re(1,36))),new r(9,26,26,24,24,new ie(28,new re(1,44))),new r(10,32,32,14,14,new ie(36,new re(1,62))),new r(11,36,36,16,16,new ie(42,new re(1,86))),new r(12,40,40,18,18,new ie(48,new re(1,114))),new r(13,44,44,20,20,new ie(56,new re(1,144))),new r(14,48,48,22,22,new ie(68,new re(1,174))),new r(15,52,52,24,24,new ie(42,new re(2,102))),new r(16,64,64,14,14,new ie(56,new re(2,140))),new r(17,72,72,16,16,new ie(36,new re(4,92))),new r(18,80,80,18,18,new ie(48,new re(4,114))),new r(19,88,88,20,20,new ie(56,new re(4,144))),new r(20,96,96,22,22,new ie(68,new re(4,174))),new r(21,104,104,24,24,new ie(56,new re(6,136))),new r(22,120,120,18,18,new ie(68,new re(6,175))),new r(23,132,132,20,20,new ie(62,new re(8,163))),new r(24,144,144,22,22,new ie(62,new re(8,156),new re(2,155))),new r(25,8,18,6,16,new ie(7,new re(1,5))),new r(26,8,32,6,14,new ie(11,new re(1,10))),new r(27,12,26,10,24,new ie(14,new re(1,16))),new r(28,12,36,10,16,new ie(18,new re(1,22))),new r(29,16,36,14,16,new ie(24,new re(1,32))),new r(30,16,48,14,22,new ie(28,new re(1,49)))]},r.VERSIONS=r.buildVersions(),r}(),$o=function(){function r(e){var t=e.getHeight();if(t<8||t>144||t&1)throw new R;this.version=r.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ut(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return r.prototype.getVersion=function(){return this.version},r.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return zo.getVersionForDimensions(t,n)},r.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,c=!1,f=!1,u=!1;do if(n===a&&i===0&&!s)e[t++]=this.readCorner1(a,o)&255,n-=2,i+=2,s=!0;else if(n===a-2&&i===0&&o&3&&!c)e[t++]=this.readCorner2(a,o)&255,n-=2,i+=2,c=!0;else if(n===a+4&&i===2&&!(o&7)&&!f)e[t++]=this.readCorner3(a,o)&255,n-=2,i+=2,f=!0;else if(n===a-2&&i===0&&(o&7)===4&&!u)e[t++]=this.readCorner4(a,o)&255,n-=2,i+=2,u=!0;else{do n<a&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,a,o)&255),n-=2,i+=2;while(n>=0&&i<o);n+=1,i+=3;do n>=0&&i<o&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,a,o)&255),n+=2,i-=2;while(n<a&&i>=0);n+=3,i+=1}while(n<a||i<o);if(t!==this.version.getTotalCodewords())throw new R;return e},r.prototype.readModule=function(e,t,n,i){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},r.prototype.readUtah=function(e,t,n,i){var a=0;return this.readModule(e-2,t-2,n,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,n,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,t,n,i)&&(a|=1),a<<=1,this.readModule(e,t-2,n,i)&&(a|=1),a<<=1,this.readModule(e,t-1,n,i)&&(a|=1),a<<=1,this.readModule(e,t,n,i)&&(a|=1),a},r.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new j("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=t/i|0,s=n/a|0,c=o*i,f=s*a,u=new ut(f,c),l=0;l<o;++l)for(var h=l*i,d=0;d<s;++d)for(var x=d*a,y=0;y<i;++y)for(var m=l*(i+2)+1+y,_=h+y,w=0;w<a;++w){var C=d*(a+2)+1+w;if(e.get(C,m)){var A=x+w;u.set(A,_)}}return u},r}(),ei=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yo=function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t){var n,i,a,o,s=t.getECBlocks(),c=0,f=s.getECBlocks();try{for(var u=ei(f),l=u.next();!l.done;l=u.next()){var h=l.value;c+=h.getCount()}}catch(be){n={error:be}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}var d=new Array(c),x=0;try{for(var y=ei(f),m=y.next();!m.done;m=y.next())for(var h=m.value,_=0;_<h.getCount();_++){var w=h.getDataCodewords(),C=s.getECCodewords()+w;d[x++]=new r(w,new Uint8Array(C))}}catch(be){a={error:be}}finally{try{m&&!m.done&&(o=y.return)&&o.call(y)}finally{if(a)throw a.error}}for(var A=d[0].codewords.length,S=A-s.getECCodewords(),I=S-1,O=0,_=0;_<I;_++)for(var P=0;P<x;P++)d[P].codewords[_]=e[O++];for(var U=t.getVersionNumber()===24,F=U?8:x,P=0;P<F;P++)d[P].codewords[S-1]=e[O++];for(var de=d[0].codewords.length,_=S;_<de;_++)for(var P=0;P<x;P++){var $=U?(P+8)%x:P,G=U&&$>7?_-1:_;d[$].codewords[G]=e[O++]}if(O!==e.length)throw new j;return d},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r}(),Ni=function(){function r(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return r.prototype.getBitOffset=function(){return this.bitOffset},r.prototype.getByteOffset=function(){return this.byteOffset},r.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new j(""+e);var t=0,n=this.bitOffset,i=this.byteOffset,a=this.bytes;if(n>0){var o=8-n,s=e<o?e:o,c=o-s,f=255>>8-s<<c;t=(a[i]&f)>>c,e-=s,n+=s,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,f=255>>c<<c;t=t<<e|(a[i]&f)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=i,t},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r}(),Oe;(function(r){r[r.PAD_ENCODE=0]="PAD_ENCODE",r[r.ASCII_ENCODE=1]="ASCII_ENCODE",r[r.C40_ENCODE=2]="C40_ENCODE",r[r.TEXT_ENCODE=3]="TEXT_ENCODE",r[r.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",r[r.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",r[r.BASE256_ENCODE=6]="BASE256_ENCODE"})(Oe||(Oe={}));var Zo=function(){function r(){}return r.decode=function(e){var t=new Ni(e),n=new z,i=new z,a=new Array,o=Oe.ASCII_ENCODE;do if(o===Oe.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,i);else{switch(o){case Oe.C40_ENCODE:this.decodeC40Segment(t,n);break;case Oe.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case Oe.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case Oe.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case Oe.BASE256_ENCODE:this.decodeBase256Segment(t,n,a);break;default:throw new R}o=Oe.ASCII_ENCODE}while(o!==Oe.PAD_ENCODE&&t.available()>0);return i.length()>0&&n.append(i.toString()),new Dr(e,n.toString(),a.length===0?null:a,null)},r.decodeAsciiSegment=function(e,t,n){var i=!1;do{var a=e.readBits(8);if(a===0)throw new R;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Oe.ASCII_ENCODE;if(a===129)return Oe.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&t.append("0"),t.append(""+o)}else switch(a){case 230:return Oe.C40_ENCODE;case 231:return Oe.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return Oe.ANSIX12_ENCODE;case 239:return Oe.TEXT_ENCODE;case 240:return Oe.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new R;break}}while(e.available()>0);return Oe.ASCII_ENCODE},r.decodeC40Segment=function(e,t){var n=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var c=i[s];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[c];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else throw new R;break;case 1:n?(t.append(String.fromCharCode(c+128)),n=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[c];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:n=!0;break;default:throw new R}a=0;break;case 3:n?(t.append(String.fromCharCode(c+224)),n=!1):t.append(String.fromCharCode(c+96)),a=0;break;default:throw new R}}}while(e.available()>0)},r.decodeTextSegment=function(e,t){var n=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var c=i[s];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[c];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else throw new R;break;case 1:n?(t.append(String.fromCharCode(c+128)),n=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[c];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:n=!0;break;default:throw new R}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[c];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f),a=0}else throw new R;break;default:throw new R}}}while(e.available()>0)},r.decodeAnsiX12Segment=function(e,t){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var a=0;a<3;a++){var o=n[a];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new R;break}}}while(e.available()>0)},r.parseTwoBytes=function(e,t,n){var i=(e<<8)+t-1,a=Math.floor(i/1600);n[0]=a,i-=a*1600,a=Math.floor(i/40),n[1]=a,n[2]=i-a*40},r.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}i&32||(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},r.decodeBase256Segment=function(e,t,n){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new R;for(var s=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new R;s[c]=this.unrandomize255State(e.readBits(8),i++)}n.push(s);try{t.append(tt.decode(s,K.ISO88591))}catch(f){throw new sr("Platform does not support required encoding: "+f.message)}},r.unrandomize255State=function(e,t){var n=149*t%255+1,i=e-n;return i>=0?i:i+256},r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r.TEXT_SHIFT2_SET_CHARS=r.C40_SHIFT2_SET_CHARS,r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],r}(),Qo=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ko=function(){function r(){this.rsDecoder=new Pr(Qe.DATA_MATRIX_FIELD_256)}return r.prototype.decode=function(e){var t,n,i=new $o(e),a=i.getVersion(),o=i.readCodewords(),s=Yo.getDataBlocks(o,a),c=0;try{for(var f=Qo(s),u=f.next();!u.done;u=f.next()){var l=u.value;c+=l.getNumDataCodewords()}}catch(C){t={error:C}}finally{try{u&&!u.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}for(var h=new Uint8Array(c),d=s.length,x=0;x<d;x++){var y=s[x],m=y.getCodewords(),_=y.getNumDataCodewords();this.correctErrors(m,_);for(var w=0;w<_;w++)h[w*d+x]=m[w]}return Zo.decode(h)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Ee}for(var i=0;i<t;i++)e[i]=n[i]},r}(),Jo=function(){function r(e){this.image=e,this.rectangleDetector=new rn(this.image)}return r.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new b;t=this.shiftToModuleCenter(t);var n=t[0],i=t[1],a=t[2],o=t[3],s=this.transitionsBetween(n,o)+1,c=this.transitionsBetween(a,o)+1;(s&1)===1&&(s+=1),(c&1)===1&&(c+=1),4*s<7*c&&4*c<7*s&&(s=c=Math.max(s,c));var f=r.sampleGrid(this.image,n,i,a,o,s,c);return new un(f,[n,i,a,o])},r.shiftPoint=function(e,t,n){var i=(t.getX()-e.getX())/(n+1),a=(t.getY()-e.getY())/(n+1);return new B(e.getX()+i,e.getY()+a)},r.moveAway=function(e,t,n){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<n?a-=1:a+=1,new B(i,a)},r.prototype.detectSolid1=function(e){var t=e[0],n=e[1],i=e[3],a=e[2],o=this.transitionsBetween(t,n),s=this.transitionsBetween(n,i),c=this.transitionsBetween(i,a),f=this.transitionsBetween(a,t),u=o,l=[a,t,n,i];return u>s&&(u=s,l[0]=t,l[1]=n,l[2]=i,l[3]=a),u>c&&(u=c,l[0]=n,l[1]=i,l[2]=a,l[3]=t),u>f&&(l[0]=i,l[1]=a,l[2]=t,l[3]=n),l},r.prototype.detectSolid2=function(e){var t=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),s=r.shiftPoint(n,i,(o+1)*4),c=r.shiftPoint(i,n,(o+1)*4),f=this.transitionsBetween(s,t),u=this.transitionsBetween(c,a);return f<u?(e[0]=t,e[1]=n,e[2]=i,e[3]=a):(e[0]=n,e[1]=i,e[2]=a,e[3]=t),e},r.prototype.correctTopRight=function(e){var t=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),s=this.transitionsBetween(n,a),c=r.shiftPoint(t,n,(s+1)*4),f=r.shiftPoint(i,n,(o+1)*4);o=this.transitionsBetween(c,a),s=this.transitionsBetween(f,a);var u=new B(a.getX()+(i.getX()-n.getX())/(o+1),a.getY()+(i.getY()-n.getY())/(o+1)),l=new B(a.getX()+(t.getX()-n.getX())/(s+1),a.getY()+(t.getY()-n.getY())/(s+1));if(!this.isValid(u))return this.isValid(l)?l:null;if(!this.isValid(l))return u;var h=this.transitionsBetween(c,u)+this.transitionsBetween(f,u),d=this.transitionsBetween(c,l)+this.transitionsBetween(f,l);return h>d?u:l},r.prototype.shiftToModuleCenter=function(e){var t=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a)+1,s=this.transitionsBetween(i,a)+1,c=r.shiftPoint(t,n,s*4),f=r.shiftPoint(i,n,o*4);o=this.transitionsBetween(c,a)+1,s=this.transitionsBetween(f,a)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var u=(t.getX()+n.getX()+i.getX()+a.getX())/4,l=(t.getY()+n.getY()+i.getY()+a.getY())/4;t=r.moveAway(t,u,l),n=r.moveAway(n,u,l),i=r.moveAway(i,u,l),a=r.moveAway(a,u,l);var h,d;return c=r.shiftPoint(t,n,s*4),c=r.shiftPoint(c,a,o*4),h=r.shiftPoint(n,t,s*4),h=r.shiftPoint(h,i,o*4),f=r.shiftPoint(i,a,s*4),f=r.shiftPoint(f,n,o*4),d=r.shiftPoint(a,i,s*4),d=r.shiftPoint(d,t,o*4),[c,h,f,d]},r.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},r.sampleGrid=function(e,t,n,i,a,o,s){var c=ln.getInstance();return c.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),n.getX(),n.getY())},r.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-i)>Math.abs(a-n);if(s){var c=n;n=i,i=c,c=a,a=o,o=c}for(var f=Math.abs(a-n),u=Math.abs(o-i),l=-f/2,h=i<o?1:-1,d=n<a?1:-1,x=0,y=this.image.get(s?i:n,s?n:i),m=n,_=i;m!==a;m+=d){var w=this.image.get(s?_:m,s?m:_);if(w!==y&&(x++,y=w),l+=u,l>0){if(_===o)break;_+=h,l-=f}}return x},r}(),Ir=function(){function r(){this.decoder=new Ko}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n,i;if(t!=null&&t.has(ce.PURE_BARCODE)){var a=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(a),i=r.NO_POINTS}else{var o=new Jo(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),i=o.getPoints()}var s=n.getRawBytes(),c=new Xe(n.getText(),s,8*s.length,i,L.DATA_MATRIX,ve.currentTimeMillis()),f=n.getByteSegments();f!=null&&c.putMetadata(He.BYTE_SEGMENTS,f);var u=n.getECLevel();return u!=null&&c.putMetadata(He.ERROR_CORRECTION_LEVEL,u),c},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new b;var i=this.moduleSize(t,e),a=t[1],o=n[1],s=t[0],c=n[0],f=(c-s+1)/i,u=(o-a+1)/i;if(f<=0||u<=0)throw new b;var l=i/2;a+=l,s+=l;for(var h=new ut(f,u),d=0;d<u;d++)for(var x=a+d*i,y=0;y<f;y++)e.get(s+y*i,x)&&h.set(y,d);return h},r.moduleSize=function(e,t){for(var n=t.getWidth(),i=e[0],a=e[1];i<n&&t.get(i,a);)i++;if(i===n)throw new b;var o=i-e[0];if(o===0)throw new b;return o},r.NO_POINTS=[],r}(),qo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){qo(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Ir,t)||this}return e})(kt);var Bt;(function(r){r[r.L=0]="L",r[r.M=1]="M",r[r.Q=2]="Q",r[r.H=3]="H"})(Bt||(Bt={}));var es=function(){function r(e,t,n){this.value=e,this.stringValue=t,this.bits=n,r.FOR_BITS.set(n,this),r.FOR_VALUE.set(e,this)}return r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.fromString=function(e){switch(e){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new Ae(e+"not available")}},r.prototype.toString=function(){return this.stringValue},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.forBits=function(e){if(e<0||e>=r.FOR_BITS.size)throw new j;return r.FOR_BITS.get(e)},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.L=new r(Bt.L,"L",1),r.M=new r(Bt.M,"M",0),r.Q=new r(Bt.Q,"Q",3),r.H=new r(Bt.H,"H",2),r}(),ts=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oi=function(){function r(e){this.errorCorrectionLevel=es.forBits(e>>3&3),this.dataMask=e&7}return r.numBitsDiffering=function(e,t){return Y.bitCount(e^t)},r.decodeFormatInformation=function(e,t){var n=r.doDecodeFormatInformation(e,t);return n!==null?n:r.doDecodeFormatInformation(e^r.FORMAT_INFO_MASK_QR,t^r.FORMAT_INFO_MASK_QR)},r.doDecodeFormatInformation=function(e,t){var n,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=ts(r.FORMAT_INFO_DECODE_LOOKUP),c=s.next();!c.done;c=s.next()){var f=c.value,u=f[0];if(u===e||u===t)return new r(f[1]);var l=r.numBitsDiffering(e,u);l<a&&(o=f[1],a=l),e!==t&&(l=r.numBitsDiffering(t,u),l<a&&(o=f[1],a=l))}}catch(h){n={error:h}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a<=3?new r(o):null},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getDataMask=function(){return this.dataMask},r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},r.FORMAT_INFO_MASK_QR=21522,r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],r}(),rs=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},E=function(){function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},r.prototype.getNumBlocks=function(){var e,t,n=0,i=this.ecBlocks;try{for(var a=rs(i),o=a.next();!o.done;o=a.next()){var s=o.value;n+=s.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return n},r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},r.prototype.getECBlocks=function(){return this.ecBlocks},r}(),g=function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r}(),ns=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Et=function(){function r(e,t){for(var n,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var s=0,c=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();try{for(var u=ns(f),l=u.next();!l.done;l=u.next()){var h=l.value;s+=h.getCount()*(h.getDataCodewords()+c)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}this.totalCodewords=s}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},r.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},r.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new R;try{return this.getVersionForNumber((e-17)/4)}catch{throw new R}},r.getVersionForNumber=function(e){if(e<1||e>40)throw new j;return r.VERSIONS[e-1]},r.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,n=0,i=0;i<r.VERSION_DECODE_INFO.length;i++){var a=r.VERSION_DECODE_INFO[i];if(a===e)return r.getVersionForNumber(i+7);var o=Oi.numBitsDiffering(e,a);o<t&&(n=i+7,t=o)}return t<=3?r.getVersionForNumber(n):null},r.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new ut(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<n;o++)i===0&&(o===0||o===n-1)||i===n-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},r.prototype.toString=function(){return""+this.versionNumber},r.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),r.VERSIONS=[new r(1,new Int32Array(0),new E(7,new g(1,19)),new E(10,new g(1,16)),new E(13,new g(1,13)),new E(17,new g(1,9))),new r(2,Int32Array.from([6,18]),new E(10,new g(1,34)),new E(16,new g(1,28)),new E(22,new g(1,22)),new E(28,new g(1,16))),new r(3,Int32Array.from([6,22]),new E(15,new g(1,55)),new E(26,new g(1,44)),new E(18,new g(2,17)),new E(22,new g(2,13))),new r(4,Int32Array.from([6,26]),new E(20,new g(1,80)),new E(18,new g(2,32)),new E(26,new g(2,24)),new E(16,new g(4,9))),new r(5,Int32Array.from([6,30]),new E(26,new g(1,108)),new E(24,new g(2,43)),new E(18,new g(2,15),new g(2,16)),new E(22,new g(2,11),new g(2,12))),new r(6,Int32Array.from([6,34]),new E(18,new g(2,68)),new E(16,new g(4,27)),new E(24,new g(4,19)),new E(28,new g(4,15))),new r(7,Int32Array.from([6,22,38]),new E(20,new g(2,78)),new E(18,new g(4,31)),new E(18,new g(2,14),new g(4,15)),new E(26,new g(4,13),new g(1,14))),new r(8,Int32Array.from([6,24,42]),new E(24,new g(2,97)),new E(22,new g(2,38),new g(2,39)),new E(22,new g(4,18),new g(2,19)),new E(26,new g(4,14),new g(2,15))),new r(9,Int32Array.from([6,26,46]),new E(30,new g(2,116)),new E(22,new g(3,36),new g(2,37)),new E(20,new g(4,16),new g(4,17)),new E(24,new g(4,12),new g(4,13))),new r(10,Int32Array.from([6,28,50]),new E(18,new g(2,68),new g(2,69)),new E(26,new g(4,43),new g(1,44)),new E(24,new g(6,19),new g(2,20)),new E(28,new g(6,15),new g(2,16))),new r(11,Int32Array.from([6,30,54]),new E(20,new g(4,81)),new E(30,new g(1,50),new g(4,51)),new E(28,new g(4,22),new g(4,23)),new E(24,new g(3,12),new g(8,13))),new r(12,Int32Array.from([6,32,58]),new E(24,new g(2,92),new g(2,93)),new E(22,new g(6,36),new g(2,37)),new E(26,new g(4,20),new g(6,21)),new E(28,new g(7,14),new g(4,15))),new r(13,Int32Array.from([6,34,62]),new E(26,new g(4,107)),new E(22,new g(8,37),new g(1,38)),new E(24,new g(8,20),new g(4,21)),new E(22,new g(12,11),new g(4,12))),new r(14,Int32Array.from([6,26,46,66]),new E(30,new g(3,115),new g(1,116)),new E(24,new g(4,40),new g(5,41)),new E(20,new g(11,16),new g(5,17)),new E(24,new g(11,12),new g(5,13))),new r(15,Int32Array.from([6,26,48,70]),new E(22,new g(5,87),new g(1,88)),new E(24,new g(5,41),new g(5,42)),new E(30,new g(5,24),new g(7,25)),new E(24,new g(11,12),new g(7,13))),new r(16,Int32Array.from([6,26,50,74]),new E(24,new g(5,98),new g(1,99)),new E(28,new g(7,45),new g(3,46)),new E(24,new g(15,19),new g(2,20)),new E(30,new g(3,15),new g(13,16))),new r(17,Int32Array.from([6,30,54,78]),new E(28,new g(1,107),new g(5,108)),new E(28,new g(10,46),new g(1,47)),new E(28,new g(1,22),new g(15,23)),new E(28,new g(2,14),new g(17,15))),new r(18,Int32Array.from([6,30,56,82]),new E(30,new g(5,120),new g(1,121)),new E(26,new g(9,43),new g(4,44)),new E(28,new g(17,22),new g(1,23)),new E(28,new g(2,14),new g(19,15))),new r(19,Int32Array.from([6,30,58,86]),new E(28,new g(3,113),new g(4,114)),new E(26,new g(3,44),new g(11,45)),new E(26,new g(17,21),new g(4,22)),new E(26,new g(9,13),new g(16,14))),new r(20,Int32Array.from([6,34,62,90]),new E(28,new g(3,107),new g(5,108)),new E(26,new g(3,41),new g(13,42)),new E(30,new g(15,24),new g(5,25)),new E(28,new g(15,15),new g(10,16))),new r(21,Int32Array.from([6,28,50,72,94]),new E(28,new g(4,116),new g(4,117)),new E(26,new g(17,42)),new E(28,new g(17,22),new g(6,23)),new E(30,new g(19,16),new g(6,17))),new r(22,Int32Array.from([6,26,50,74,98]),new E(28,new g(2,111),new g(7,112)),new E(28,new g(17,46)),new E(30,new g(7,24),new g(16,25)),new E(24,new g(34,13))),new r(23,Int32Array.from([6,30,54,78,102]),new E(30,new g(4,121),new g(5,122)),new E(28,new g(4,47),new g(14,48)),new E(30,new g(11,24),new g(14,25)),new E(30,new g(16,15),new g(14,16))),new r(24,Int32Array.from([6,28,54,80,106]),new E(30,new g(6,117),new g(4,118)),new E(28,new g(6,45),new g(14,46)),new E(30,new g(11,24),new g(16,25)),new E(30,new g(30,16),new g(2,17))),new r(25,Int32Array.from([6,32,58,84,110]),new E(26,new g(8,106),new g(4,107)),new E(28,new g(8,47),new g(13,48)),new E(30,new g(7,24),new g(22,25)),new E(30,new g(22,15),new g(13,16))),new r(26,Int32Array.from([6,30,58,86,114]),new E(28,new g(10,114),new g(2,115)),new E(28,new g(19,46),new g(4,47)),new E(28,new g(28,22),new g(6,23)),new E(30,new g(33,16),new g(4,17))),new r(27,Int32Array.from([6,34,62,90,118]),new E(30,new g(8,122),new g(4,123)),new E(28,new g(22,45),new g(3,46)),new E(30,new g(8,23),new g(26,24)),new E(30,new g(12,15),new g(28,16))),new r(28,Int32Array.from([6,26,50,74,98,122]),new E(30,new g(3,117),new g(10,118)),new E(28,new g(3,45),new g(23,46)),new E(30,new g(4,24),new g(31,25)),new E(30,new g(11,15),new g(31,16))),new r(29,Int32Array.from([6,30,54,78,102,126]),new E(30,new g(7,116),new g(7,117)),new E(28,new g(21,45),new g(7,46)),new E(30,new g(1,23),new g(37,24)),new E(30,new g(19,15),new g(26,16))),new r(30,Int32Array.from([6,26,52,78,104,130]),new E(30,new g(5,115),new g(10,116)),new E(28,new g(19,47),new g(10,48)),new E(30,new g(15,24),new g(25,25)),new E(30,new g(23,15),new g(25,16))),new r(31,Int32Array.from([6,30,56,82,108,134]),new E(30,new g(13,115),new g(3,116)),new E(28,new g(2,46),new g(29,47)),new E(30,new g(42,24),new g(1,25)),new E(30,new g(23,15),new g(28,16))),new r(32,Int32Array.from([6,34,60,86,112,138]),new E(30,new g(17,115)),new E(28,new g(10,46),new g(23,47)),new E(30,new g(10,24),new g(35,25)),new E(30,new g(19,15),new g(35,16))),new r(33,Int32Array.from([6,30,58,86,114,142]),new E(30,new g(17,115),new g(1,116)),new E(28,new g(14,46),new g(21,47)),new E(30,new g(29,24),new g(19,25)),new E(30,new g(11,15),new g(46,16))),new r(34,Int32Array.from([6,34,62,90,118,146]),new E(30,new g(13,115),new g(6,116)),new E(28,new g(14,46),new g(23,47)),new E(30,new g(44,24),new g(7,25)),new E(30,new g(59,16),new g(1,17))),new r(35,Int32Array.from([6,30,54,78,102,126,150]),new E(30,new g(12,121),new g(7,122)),new E(28,new g(12,47),new g(26,48)),new E(30,new g(39,24),new g(14,25)),new E(30,new g(22,15),new g(41,16))),new r(36,Int32Array.from([6,24,50,76,102,128,154]),new E(30,new g(6,121),new g(14,122)),new E(28,new g(6,47),new g(34,48)),new E(30,new g(46,24),new g(10,25)),new E(30,new g(2,15),new g(64,16))),new r(37,Int32Array.from([6,28,54,80,106,132,158]),new E(30,new g(17,122),new g(4,123)),new E(28,new g(29,46),new g(14,47)),new E(30,new g(49,24),new g(10,25)),new E(30,new g(24,15),new g(46,16))),new r(38,Int32Array.from([6,32,58,84,110,136,162]),new E(30,new g(4,122),new g(18,123)),new E(28,new g(13,46),new g(32,47)),new E(30,new g(48,24),new g(14,25)),new E(30,new g(42,15),new g(32,16))),new r(39,Int32Array.from([6,26,54,82,110,138,166]),new E(30,new g(20,117),new g(4,118)),new E(28,new g(40,47),new g(7,48)),new E(30,new g(43,24),new g(22,25)),new E(30,new g(10,15),new g(67,16))),new r(40,Int32Array.from([6,30,58,86,114,142,170]),new E(30,new g(19,118),new g(6,119)),new E(28,new g(18,47),new g(31,48)),new E(30,new g(34,24),new g(34,25)),new E(30,new g(20,15),new g(61,16)))],r}(),Fe;(function(r){r[r.DATA_MASK_000=0]="DATA_MASK_000",r[r.DATA_MASK_001=1]="DATA_MASK_001",r[r.DATA_MASK_010=2]="DATA_MASK_010",r[r.DATA_MASK_011=3]="DATA_MASK_011",r[r.DATA_MASK_100=4]="DATA_MASK_100",r[r.DATA_MASK_101=5]="DATA_MASK_101",r[r.DATA_MASK_110=6]="DATA_MASK_110",r[r.DATA_MASK_111=7]="DATA_MASK_111"})(Fe||(Fe={}));var ti=function(){function r(e,t){this.value=e,this.isMasked=t}return r.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var i=0;i<t;i++)this.isMasked(n,i)&&e.flip(i,n)},r.values=new Map([[Fe.DATA_MASK_000,new r(Fe.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Fe.DATA_MASK_001,new r(Fe.DATA_MASK_001,function(e,t){return(e&1)===0})],[Fe.DATA_MASK_010,new r(Fe.DATA_MASK_010,function(e,t){return t%3===0})],[Fe.DATA_MASK_011,new r(Fe.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Fe.DATA_MASK_100,new r(Fe.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Fe.DATA_MASK_101,new r(Fe.DATA_MASK_101,function(e,t){return e*t%6===0})],[Fe.DATA_MASK_110,new r(Fe.DATA_MASK_110,function(e,t){return e*t%6<3})],[Fe.DATA_MASK_111,new r(Fe.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),r}(),is=function(){function r(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new R;this.bitMatrix=e}return r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,n=i-1;n>=o;n--)a=this.copyBit(8,n,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=Oi.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new R},r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Et.getVersionForNumber(t);for(var n=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)n=this.copyBit(o,a,n);var s=Et.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)n=this.copyBit(o,a,n);if(s=Et.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new R},r.prototype.copyBit=function(e,t,n){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?n<<1|1:n<<1},r.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=ti.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),o=!0,s=new Uint8Array(t.getTotalCodewords()),c=0,f=0,u=0,l=i-1;l>0;l-=2){l===6&&l--;for(var h=0;h<i;h++)for(var d=o?i-1-h:h,x=0;x<2;x++)a.get(l-x,d)||(u++,f<<=1,this.bitMatrix.get(l-x,d)&&(f|=1),u===8&&(s[c++]=f,u=0,f=0));o=!o}if(c!==t.getTotalCodewords())throw new R;return s},r.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=ti.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},r.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},r.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},r}(),ri=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},as=function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t,n){var i,a,o,s;if(e.length!==t.getTotalCodewords())throw new j;var c=t.getECBlocksForLevel(n),f=0,u=c.getECBlocks();try{for(var l=ri(u),h=l.next();!h.done;h=l.next()){var d=h.value;f+=d.getCount()}}catch(G){i={error:G}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}var x=new Array(f),y=0;try{for(var m=ri(u),_=m.next();!_.done;_=m.next())for(var d=_.value,w=0;w<d.getCount();w++){var C=d.getDataCodewords(),A=c.getECCodewordsPerBlock()+C;x[y++]=new r(C,new Uint8Array(A))}}catch(G){o={error:G}}finally{try{_&&!_.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}for(var S=x[0].codewords.length,I=x.length-1;I>=0;){var O=x[I].codewords.length;if(O===S)break;I--}I++;for(var P=S-c.getECCodewordsPerBlock(),U=0,w=0;w<P;w++)for(var F=0;F<y;F++)x[F].codewords[w]=e[U++];for(var F=I;F<y;F++)x[F].codewords[P]=e[U++];for(var de=x[0].codewords.length,w=P;w<de;w++)for(var F=0;F<y;F++){var $=F<I?w:w+1;x[F].codewords[$]=e[U++]}return x},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r}(),qe;(function(r){r[r.TERMINATOR=0]="TERMINATOR",r[r.NUMERIC=1]="NUMERIC",r[r.ALPHANUMERIC=2]="ALPHANUMERIC",r[r.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",r[r.BYTE=4]="BYTE",r[r.ECI=5]="ECI",r[r.KANJI=6]="KANJI",r[r.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",r[r.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",r[r.HANZI=9]="HANZI"})(qe||(qe={}));var xe=function(){function r(e,t,n,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=i,r.FOR_BITS.set(i,this),r.FOR_VALUE.set(e,this)}return r.forBits=function(e){var t=r.FOR_BITS.get(e);if(t===void 0)throw new j;return t},r.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]},r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.toString=function(){return this.stringValue},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.TERMINATOR=new r(qe.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),r.NUMERIC=new r(qe.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),r.ALPHANUMERIC=new r(qe.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),r.STRUCTURED_APPEND=new r(qe.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),r.BYTE=new r(qe.BYTE,"BYTE",Int32Array.from([8,16,16]),4),r.ECI=new r(qe.ECI,"ECI",Int32Array.from([0,0,0]),7),r.KANJI=new r(qe.KANJI,"KANJI",Int32Array.from([8,10,12]),8),r.FNC1_FIRST_POSITION=new r(qe.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),r.FNC1_SECOND_POSITION=new r(qe.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),r.HANZI=new r(qe.HANZI,"HANZI",Int32Array.from([8,10,12]),13),r}(),os=function(){function r(){}return r.decode=function(e,t,n,i){var a=new Ni(e),o=new z,s=new Array,c=-1,f=-1;try{var u=null,l=!1,h=void 0;do{if(a.available()<4)h=xe.TERMINATOR;else{var d=a.readBits(4);h=xe.forBits(d)}switch(h){case xe.TERMINATOR:break;case xe.FNC1_FIRST_POSITION:case xe.FNC1_SECOND_POSITION:l=!0;break;case xe.STRUCTURED_APPEND:if(a.available()<16)throw new R;c=a.readBits(8),f=a.readBits(8);break;case xe.ECI:var x=r.parseECIValue(a);if(u=De.getCharacterSetECIByValue(x),u===null)throw new R;break;case xe.HANZI:var y=a.readBits(4),m=a.readBits(h.getCharacterCountBits(t));y===r.GB2312_SUBSET&&r.decodeHanziSegment(a,o,m);break;default:var _=a.readBits(h.getCharacterCountBits(t));switch(h){case xe.NUMERIC:r.decodeNumericSegment(a,o,_);break;case xe.ALPHANUMERIC:r.decodeAlphanumericSegment(a,o,_,l);break;case xe.BYTE:r.decodeByteSegment(a,o,_,u,s,i);break;case xe.KANJI:r.decodeKanjiSegment(a,o,_);break;default:throw new R}break}}while(h!==xe.TERMINATOR)}catch{throw new R}return new Dr(e,o.toString(),s.length===0?null:s,n===null?null:n.toString(),c,f)},r.decodeHanziSegment=function(e,t,n){if(n*13>e.available())throw new R;for(var i=new Uint8Array(2*n),a=0;n>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,i[a]=s>>8&255,i[a+1]=s&255,a+=2,n--}try{t.append(tt.decode(i,K.GB2312))}catch(c){throw new R(c)}},r.decodeKanjiSegment=function(e,t,n){if(n*13>e.available())throw new R;for(var i=new Uint8Array(2*n),a=0;n>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,i[a]=s>>8,i[a+1]=s,a+=2,n--}try{t.append(tt.decode(i,K.SHIFT_JIS))}catch(c){throw new R(c)}},r.decodeByteSegment=function(e,t,n,i,a,o){if(8*n>e.available())throw new R;for(var s=new Uint8Array(n),c=0;c<n;c++)s[c]=e.readBits(8);var f;i===null?f=K.guessEncoding(s,o):f=i.getName();try{t.append(tt.decode(s,f))}catch(u){throw new R(u)}a.push(s)},r.toAlphaNumericChar=function(e){if(e>=r.ALPHANUMERIC_CHARS.length)throw new R;return r.ALPHANUMERIC_CHARS[e]},r.decodeAlphanumericSegment=function(e,t,n,i){for(var a=t.length();n>1;){if(e.available()<11)throw new R;var o=e.readBits(11);t.append(r.toAlphaNumericChar(Math.floor(o/45))),t.append(r.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new R;t.append(r.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=a;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))},r.decodeNumericSegment=function(e,t,n){for(;n>=3;){if(e.available()<10)throw new R;var i=e.readBits(10);if(i>=1e3)throw new R;t.append(r.toAlphaNumericChar(Math.floor(i/100))),t.append(r.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(r.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new R;var a=e.readBits(7);if(a>=100)throw new R;t.append(r.toAlphaNumericChar(Math.floor(a/10))),t.append(r.toAlphaNumericChar(a%10))}else if(n===1){if(e.available()<4)throw new R;var o=e.readBits(4);if(o>=10)throw new R;t.append(r.toAlphaNumericChar(o))}},r.parseECIValue=function(e){var t=e.readBits(8);if(!(t&128))return t&127;if((t&192)===128){var n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new R},r.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.GB2312_SUBSET=1,r}(),Ti=function(){function r(e){this.mirrored=e}return r.prototype.isMirrored=function(){return this.mirrored},r.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},r}(),ni=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ss=function(){function r(){this.rsDecoder=new Pr(Qe.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(ut.parseFromBooleanArray(e),t)},r.prototype.decodeBitMatrix=function(e,t){var n=new is(e),i=null;try{return this.decodeBitMatrixParser(n,t)}catch(o){i=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var a=this.decodeBitMatrixParser(n,t);return a.setOther(new Ti(!0)),a}catch(o){throw i!==null?i:o}},r.prototype.decodeBitMatrixParser=function(e,t){var n,i,a,o,s=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),u=as.getDataBlocks(f,s,c),l=0;try{for(var h=ni(u),d=h.next();!d.done;d=h.next()){var x=d.value;l+=x.getNumDataCodewords()}}catch(I){n={error:I}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}var y=new Uint8Array(l),m=0;try{for(var _=ni(u),w=_.next();!w.done;w=_.next()){var x=w.value,C=x.getCodewords(),A=x.getNumDataCodewords();this.correctErrors(C,A);for(var S=0;S<A;S++)y[m++]=C[S]}}catch(I){a={error:I}}finally{try{w&&!w.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}return os.decode(y,s,c,t)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Ee}for(var i=0;i<t;i++)e[i]=n[i]},r}(),cs=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fs=function(r){cs(e,r);function e(t,n,i){var a=r.call(this,t,n)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var a=(this.getX()+n)/2,o=(this.getY()+t)/2,s=(this.estimatedModuleSize+i)/2;return new e(a,o,s)},e}(B),us=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ls=function(){function r(e,t,n,i,a,o,s){this.image=e,this.startX=t,this.startY=n,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return r.prototype.find=function(){for(var e=this.startX,t=this.height,n=this.width,i=e+n,a=this.startY+t/2,o=new Int32Array(3),s=this.image,c=0;c<t;c++){var f=a+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var u=e;u<i&&!s.get(u,f);)u++;for(var l=0;u<i;){if(s.get(u,f))if(l===1)o[1]++;else if(l===2){if(this.foundPatternCross(o)){var h=this.handlePossibleCenter(o,f,u);if(h!==null)return h}o[0]=o[2],o[1]=1,o[2]=0,l=1}else o[++l]++;else l===1&&l++,o[l]++;u++}if(this.foundPatternCross(o)){var h=this.handlePossibleCenter(o,f,i);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new b},r.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},r.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=n)return!1;return!0},r.prototype.crossCheckVertical=function(e,t,n,i){var a=this.image,o=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var c=e;c>=0&&a.get(t,c)&&s[1]<=n;)s[1]++,c--;if(c<0||s[1]>n)return NaN;for(;c>=0&&!a.get(t,c)&&s[0]<=n;)s[0]++,c--;if(s[0]>n)return NaN;for(c=e+1;c<o&&a.get(t,c)&&s[1]<=n;)s[1]++,c++;if(c===o||s[1]>n)return NaN;for(;c<o&&!a.get(t,c)&&s[2]<=n;)s[2]++,c++;if(s[2]>n)return NaN;var f=s[0]+s[1]+s[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(s)?r.centerFromEnd(s,c):NaN},r.prototype.handlePossibleCenter=function(e,t,n){var i,a,o=e[0]+e[1]+e[2],s=r.centerFromEnd(e,n),c=this.crossCheckVertical(t,s,2*e[1],o);if(!isNaN(c)){var f=(e[0]+e[1]+e[2])/3;try{for(var u=us(this.possibleCenters),l=u.next();!l.done;l=u.next()){var h=l.value;if(h.aboutEquals(f,c,s))return h.combineEstimate(c,s,f)}}catch(x){i={error:x}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}var d=new fs(s,c,f);this.possibleCenters.push(d),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(d)}return null},r}(),ds=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),hs=function(r){ds(e,r);function e(t,n,i,a){var o=r.call(this,t,n)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var a=this.count+1,o=(this.count*this.getX()+n)/a,s=(this.count*this.getY()+t)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(o,s,c,a)},e}(B),vs=function(){function r(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r}(),qt=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ps=function(){function r(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return r.prototype.getImage=function(){return this.image},r.prototype.getPossibleCenters=function(){return this.possibleCenters},r.prototype.find=function(e){var t=e!=null&&e.get(ce.TRY_HARDER)!==void 0,n=e!=null&&e.get(ce.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),s=Math.floor(3*a/(4*r.MAX_MODULES));(s<r.MIN_SKIP||t)&&(s=r.MIN_SKIP);for(var c=!1,f=new Int32Array(5),u=s-1;u<a&&!c;u+=s){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var l=0,h=0;h<o;h++)if(i.get(h,u))(l&1)===1&&l++,f[l]++;else if(l&1)f[l]++;else if(l===4)if(r.foundPatternCross(f)){var d=this.handlePossibleCenter(f,u,h,n);if(d===!0)if(s=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>f[2]&&(u+=x-f[2]-s,h=o-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,l=3;continue}l=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,l=3;else f[++l]++;if(r.foundPatternCross(f)){var d=this.handlePossibleCenter(f,u,o,n);d===!0&&(s=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var y=this.selectBestPatterns();return B.orderBestPatterns(y),new vs(y)},r.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},r.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},r.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},r.prototype.crossCheckDiagonal=function(e,t,n,i){for(var a=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&t>=o&&s.get(t-o,e-o);)a[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!s.get(t-o,e-o)&&a[1]<=n;)a[1]++,o++;if(e<o||t<o||a[1]>n)return!1;for(;e>=o&&t>=o&&s.get(t-o,e-o)&&a[0]<=n;)a[0]++,o++;if(a[0]>n)return!1;var c=s.getHeight(),f=s.getWidth();for(o=1;e+o<c&&t+o<f&&s.get(t+o,e+o);)a[2]++,o++;if(e+o>=c||t+o>=f)return!1;for(;e+o<c&&t+o<f&&!s.get(t+o,e+o)&&a[3]<n;)a[3]++,o++;if(e+o>=c||t+o>=f||a[3]>=n)return!1;for(;e+o<c&&t+o<f&&s.get(t+o,e+o)&&a[4]<n;)a[4]++,o++;if(a[4]>=n)return!1;var u=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(u-i)<2*i&&r.foundPatternCross(a)},r.prototype.crossCheckVertical=function(e,t,n,i){for(var a=this.image,o=a.getHeight(),s=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(t,c);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(t,c)&&s[1]<=n;)s[1]++,c--;if(c<0||s[1]>n)return NaN;for(;c>=0&&a.get(t,c)&&s[0]<=n;)s[0]++,c--;if(s[0]>n)return NaN;for(c=e+1;c<o&&a.get(t,c);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(t,c)&&s[3]<n;)s[3]++,c++;if(c===o||s[3]>=n)return NaN;for(;c<o&&a.get(t,c)&&s[4]<n;)s[4]++,c++;if(s[4]>=n)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=2*i?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,c):NaN},r.prototype.crossCheckHorizontal=function(e,t,n,i){for(var a=this.image,o=a.getWidth(),s=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,t);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,t)&&s[1]<=n;)s[1]++,c--;if(c<0||s[1]>n)return NaN;for(;c>=0&&a.get(c,t)&&s[0]<=n;)s[0]++,c--;if(s[0]>n)return NaN;for(c=e+1;c<o&&a.get(c,t);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(c,t)&&s[3]<n;)s[3]++,c++;if(c===o||s[3]>=n)return NaN;for(;c<o&&a.get(c,t)&&s[4]<n;)s[4]++,c++;if(s[4]>=n)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=i?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,c):NaN},r.prototype.handlePossibleCenter=function(e,t,n,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=r.centerFromEnd(e,n),s=this.crossCheckVertical(t,Math.floor(o),e[2],a);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],a)))){for(var c=a/7,f=!1,u=this.possibleCenters,l=0,h=u.length;l<h;l++){var d=u[l];if(d.aboutEquals(c,s,o)){u[l]=d.combineEstimate(s,o,c),f=!0;break}}if(!f){var x=new hs(o,s,c);u.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},r.prototype.findRowSkip=function(){var e,t,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var a=qt(this.possibleCenters),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.getCount()>=r.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},r.prototype.haveMultiplyConfirmedCenters=function(){var e,t,n,i,a=0,o=0,s=this.possibleCenters.length;try{for(var c=qt(this.possibleCenters),f=c.next();!f.done;f=c.next()){var u=f.value;u.getCount()>=r.CENTER_QUORUM&&(a++,o+=u.getEstimatedModuleSize())}}catch(y){e={error:y}}finally{try{f&&!f.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var l=o/s,h=0;try{for(var d=qt(this.possibleCenters),x=d.next();!x.done;x=d.next()){var u=x.value;h+=Math.abs(u.getEstimatedModuleSize()-l)}}catch(y){n={error:y}}finally{try{x&&!x.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return h<=.05*o},r.prototype.selectBestPatterns=function(){var e,t,n,i,a=this.possibleCenters.length;if(a<3)throw new b;var o=this.possibleCenters,s;if(a>3){var c=0,f=0;try{for(var u=qt(this.possibleCenters),l=u.next();!l.done;l=u.next()){var h=l.value,d=h.getEstimatedModuleSize();c+=d,f+=d*d}}catch(S){e={error:S}}finally{try{l&&!l.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}s=c/a;var x=Math.sqrt(f/a-s*s);o.sort(function(S,I){var O=Math.abs(I.getEstimatedModuleSize()-s),P=Math.abs(S.getEstimatedModuleSize()-s);return O<P?-1:O>P?1:0});for(var y=Math.max(.2*s,x),m=0;m<o.length&&o.length>3;m++){var _=o[m];Math.abs(_.getEstimatedModuleSize()-s)>y&&(o.splice(m,1),m--)}}if(o.length>3){var c=0;try{for(var w=qt(o),C=w.next();!C.done;C=w.next()){var A=C.value;c+=A.getEstimatedModuleSize()}}catch(I){n={error:I}}finally{try{C&&!C.done&&(i=w.return)&&i.call(w)}finally{if(n)throw n.error}}s=c/o.length,o.sort(function(I,O){if(O.getCount()===I.getCount()){var P=Math.abs(O.getEstimatedModuleSize()-s),U=Math.abs(I.getEstimatedModuleSize()-s);return P<U?1:P>U?-1:0}else return O.getCount()-I.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},r.CENTER_QUORUM=2,r.MIN_SKIP=3,r.MAX_MODULES=57,r}(),xs=function(){function r(e){this.image=e}return r.prototype.getImage=function(){return this.image},r.prototype.getResultPointCallback=function(){return this.resultPointCallback},r.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(ce.NEED_RESULT_POINT_CALLBACK);var t=new ps(this.image,this.resultPointCallback),n=t.find(e);return this.processFinderPatternInfo(n)},r.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,n,i);if(a<1)throw new b("No pattern found in proccess finder.");var o=r.computeDimension(t,n,i,a),s=Et.getProvisionalVersionForDimension(o),c=s.getDimensionForVersion()-7,f=null;if(s.getAlignmentPatternCenters().length>0)for(var u=n.getX()-t.getX()+i.getX(),l=n.getY()-t.getY()+i.getY(),h=1-3/c,d=Math.floor(t.getX()+h*(u-t.getX())),x=Math.floor(t.getY()+h*(l-t.getY())),y=4;y<=16;y<<=1)try{f=this.findAlignmentInRegion(a,d,x,y);break}catch(C){if(!(C instanceof b))throw C}var m=r.createTransform(t,n,i,f,o),_=r.sampleGrid(this.image,m,o),w;return f===null?w=[i,t,n]:w=[i,t,n,f],new un(_,w)},r.createTransform=function(e,t,n,i,a){var o=a-3.5,s,c,f,u;return i!==null?(s=i.getX(),c=i.getY(),f=o-3,u=f):(s=t.getX()-e.getX()+n.getX(),c=t.getY()-e.getY()+n.getY(),f=o,u=o),Ei.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,f,u,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,c,n.getX(),n.getY())},r.sampleGrid=function(e,t,n){var i=ln.getInstance();return i.sampleGridWithTransform(e,n,n,t)},r.computeDimension=function(e,t,n,i){var a=ee.round(B.distance(e,t)/i),o=ee.round(B.distance(e,n)/i),s=Math.floor((a+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new b("Dimensions could be not found.")}return s},r.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},r.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,n,i),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*o);return o=1,c<0?(o=t/(t-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,t,s,c),a-1},r.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,i){var a=Math.abs(i-t)>Math.abs(n-e);if(a){var o=e;e=t,t=o,o=n,n=i,i=o}for(var s=Math.abs(n-e),c=Math.abs(i-t),f=-s/2,u=e<n?1:-1,l=t<i?1:-1,h=0,d=n+u,x=e,y=t;x!==d;x+=u){var m=a?y:x,_=a?x:y;if(h===1===this.image.get(m,_)){if(h===2)return ee.distance(x,y,e,t);h++}if(f+=c,f>0){if(y===i)break;y+=l,f-=s}}return h===2?ee.distance(n+u,i,e,t):NaN},r.prototype.findAlignmentInRegion=function(e,t,n,i){var a=Math.floor(i*e),o=Math.max(0,t-a),s=Math.min(this.image.getWidth()-1,t+a);if(s-o<e*3)throw new b("Alignment top exceeds estimated module size.");var c=Math.max(0,n-a),f=Math.min(this.image.getHeight()-1,n+a);if(f-c<e*3)throw new b("Alignment bottom exceeds estimated module size.");var u=new ls(this.image,o,c,s-o,f-c,e,this.resultPointCallback);return u.find()},r}(),Nr=function(){function r(){this.decoder=new ss}return r.prototype.getDecoder=function(){return this.decoder},r.prototype.decode=function(e,t){var n,i;if(t!=null&&t.get(ce.PURE_BARCODE)!==void 0){var a=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,t),i=r.NO_POINTS}else{var o=new xs(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}n.getOther()instanceof Ti&&n.getOther().applyMirroredCorrection(i);var s=new Xe(n.getText(),n.getRawBytes(),void 0,i,L.QR_CODE,void 0),c=n.getByteSegments();c!==null&&s.putMetadata(He.BYTE_SEGMENTS,c);var f=n.getECLevel();return f!==null&&s.putMetadata(He.ERROR_CORRECTION_LEVEL,f),n.hasStructuredAppend()&&(s.putMetadata(He.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(He.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new b;var i=this.moduleSize(t,e),a=t[1],o=n[1],s=t[0],c=n[0];if(s>=c||a>=o)throw new b;if(o-a!==c-s&&(c=s+(o-a),c>=e.getWidth()))throw new b;var f=Math.round((c-s+1)/i),u=Math.round((o-a+1)/i);if(f<=0||u<=0)throw new b;if(u!==f)throw new b;var l=Math.floor(i/2);a+=l,s+=l;var h=s+Math.floor((f-1)*i)-c;if(h>0){if(h>l)throw new b;s-=h}var d=a+Math.floor((u-1)*i)-o;if(d>0){if(d>l)throw new b;a-=d}for(var x=new ut(f,u),y=0;y<u;y++)for(var m=a+Math.floor(y*i),_=0;_<f;_++)e.get(s+Math.floor(_*i),m)&&x.set(_,y);return x},r.moduleSize=function(e,t){for(var n=t.getHeight(),i=t.getWidth(),a=e[0],o=e[1],s=!0,c=0;a<i&&o<n;){if(s!==t.get(a,o)){if(++c===5)break;s=!s}a++,o++}if(a===i||o===n)throw new b;return(a-e[0])/7},r.NO_POINTS=new Array,r}(),gs=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J=function(){function r(){}return r.prototype.PDF417Common=function(){},r.getBitCountSum=function(e){return ee.sum(e)},r.toIntArray=function(e){var t,n;if(e==null||!e.length)return r.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=gs(e),s=o.next();!s.done;s=o.next()){var c=s.value;i[a++]=c}}catch(f){t={error:f}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},r.getCodeword=function(e){var t=Pe.binarySearch(r.SYMBOL_TABLE,e&262143);return t<0?-1:(r.CODEWORD_TABLE[t]-1)%r.NUMBER_OF_CODEWORDS},r.NUMBER_OF_CODEWORDS=929,r.MAX_CODEWORDS_IN_BARCODE=r.NUMBER_OF_CODEWORDS-1,r.MIN_ROWS_IN_BARCODE=3,r.MAX_ROWS_IN_BARCODE=90,r.MODULES_IN_CODEWORD=17,r.MODULES_IN_STOP_PATTERN=18,r.BARS_IN_MODULE=8,r.EMPTY_INT_ARRAY=new Int32Array([]),r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),r}(),ys=function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r}(),ms=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ws=function(){function r(){}return r.detectMultiple=function(e,t,n){var i=e.getBlackMatrix(),a=r.detect(n,i);return a.length||(i=i.clone(),i.rotate180(),a=r.detect(n,i)),new ys(i,a)},r.detect=function(e,t){for(var n,i,a=new Array,o=0,s=0,c=!1;o<t.getHeight();){var f=r.findVertices(t,o,s);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,s=0;try{for(var u=(n=void 0,ms(a)),l=u.next();!l.done;l=u.next()){var h=l.value;h[1]!=null&&(o=Math.trunc(Math.max(o,h[1].getY()))),h[3]!=null&&(o=Math.max(o,Math.trunc(h[3].getY())))}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}o+=r.ROW_STEP;continue}if(c=!0,a.push(f),!e)break;f[2]!=null?(s=Math.trunc(f[2].getX()),o=Math.trunc(f[2].getY())):(s=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY()))}return a},r.findVertices=function(e,t,n){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return r.copyToResult(o,r.findRowsWithPattern(e,i,a,t,n,r.START_PATTERN),r.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),r.copyToResult(o,r.findRowsWithPattern(e,i,a,t,n,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN),o},r.copyToResult=function(e,t,n){for(var i=0;i<n.length;i++)e[n[i]]=t[i]},r.findRowsWithPattern=function(e,t,n,i,a,o){for(var s=new Array(4),c=!1,f=new Int32Array(o.length);i<t;i+=r.ROW_STEP){var u=r.findGuardPattern(e,a,i,n,!1,o,f);if(u!=null){for(;i>0;){var l=r.findGuardPattern(e,a,--i,n,!1,o,f);if(l!=null)u=l;else{i++;break}}s[0]=new B(u[0],i),s[1]=new B(u[1],i),c=!0;break}}var h=i+1;if(c){for(var d=0,l=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);h<t;h++){var u=r.findGuardPattern(e,l[0],h,n,!1,o,f);if(u!=null&&Math.abs(l[0]-u[0])<r.MAX_PATTERN_DRIFT&&Math.abs(l[1]-u[1])<r.MAX_PATTERN_DRIFT)l=u,d=0;else{if(d>r.SKIPPED_ROW_COUNT_MAX)break;d++}}h-=d+1,s[2]=new B(l[0],h),s[3]=new B(l[1],h)}return h-i<r.BARCODE_MIN_HEIGHT&&Pe.fill(s,null),s},r.findGuardPattern=function(e,t,n,i,a,o,s){Pe.fillWithin(s,0,s.length,0);for(var c=t,f=0;e.get(c,n)&&c>0&&f++<r.MAX_PIXEL_DRIFT;)c--;for(var u=c,l=0,h=o.length,d=a;u<i;u++){var x=e.get(u,n);if(x!==d)s[l]++;else{if(l===h-1){if(r.patternMatchVariance(s,o,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE)return new Int32Array([c,u]);c+=s[0]+s[1],ve.arraycopy(s,2,s,0,l-1),s[l-1]=0,s[l]=0,l--}else l++;s[l]=1,d=!d}}return l===h-1&&r.patternMatchVariance(s,o,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE?new Int32Array([c,u-1]):null},r.patternMatchVariance=function(e,t,n){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=t[s];if(a<o)return 1/0;var c=a/o;n*=c;for(var f=0,u=0;u<i;u++){var l=e[u],h=t[u]*c,d=l>h?l-h:h-l;if(d>n)return 1/0;f+=d}return f/a},r.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),r.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),r.MAX_AVG_VARIANCE=.42,r.MAX_INDIVIDUAL_VARIANCE=.8,r.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),r.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),r.MAX_PIXEL_DRIFT=3,r.MAX_PATTERN_DRIFT=5,r.SKIPPED_ROW_COUNT_MAX=25,r.ROW_STEP=5,r.BARCODE_MIN_HEIGHT=10,r}(),_s=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ct=function(){function r(e,t){if(t.length===0)throw new j;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),ve.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){var t,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=_s(this.coefficients),o=a.next();!o.done;o=a.next()){var s=o.value;i=this.field.add(i,s)}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],f=this.coefficients.length,u=1;u<f;u++)c=this.field.add(this.field.multiply(e,c),this.coefficients[u]);return c},r.prototype.add=function(e){if(!this.field.equals(e.field))throw new j("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var a=new Int32Array(n.length),o=n.length-t.length;ve.arraycopy(n,0,a,0,o);for(var s=o;s<n.length;s++)a[s]=this.field.add(t[s-o],n[s]);return new r(this.field,a)},r.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new j("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},r.prototype.multiply=function(e){return e instanceof r?this.multiplyOther(e):this.multiplyScalar(e)},r.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new j("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new r(this.field,new Int32Array([0]));for(var t=this.coefficients,n=t.length,i=e.coefficients,a=i.length,o=new Int32Array(n+a-1),s=0;s<n;s++)for(var c=t[s],f=0;f<a;f++)o[s+f]=this.field.add(o[s+f],this.field.multiply(c,i[f]));return new r(this.field,o)},r.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new r(this.field,t)},r.prototype.multiplyScalar=function(e){if(e===0)return new r(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,n=new Int32Array(t),i=0;i<t;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new r(this.field,n)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new j;if(t===0)return new r(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),a=0;a<n;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new r(this.field,i)},r.prototype.toString=function(){for(var e=new z,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},r}(),As=function(){function r(){}return r.prototype.add=function(e,t){return(e+t)%this.modulus},r.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new j;return this.logTable[e]},r.prototype.inverse=function(e){if(e===0)throw new Ci;return this.expTable[this.modulus-this.logTable[e]-1]},r.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},r.prototype.getSize=function(){return this.modulus},r.prototype.equals=function(e){return e===this},r}(),Cs=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Es=function(r){Cs(e,r);function e(t,n){var i=r.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,o=0;o<t;o++)i.expTable[o]=a,a=a*n%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Ct(i,new Int32Array([0])),i.one=new Ct(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new j;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new Ct(this,i)},e.PDF417_GF=new e(J.NUMBER_OF_CODEWORDS,3),e}(As),bs=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ss=function(){function r(){this.field=Es.PDF417_GF}return r.prototype.decode=function(e,t,n){for(var i,a,o=new Ct(this.field,e),s=new Int32Array(t),c=!1,f=t;f>0;f--){var u=o.evaluateAt(this.field.exp(f));s[t-f]=u,u!==0&&(c=!0)}if(!c)return 0;var l=this.field.getOne();if(n!=null)try{for(var h=bs(n),d=h.next();!d.done;d=h.next()){var x=d.value,y=this.field.exp(e.length-1-x),m=new Ct(this.field,new Int32Array([this.field.subtract(0,y),1]));l=l.multiply(m)}}catch(P){i={error:P}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}for(var _=new Ct(this.field,s),w=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),_,t),C=w[0],A=w[1],S=this.findErrorLocations(C),I=this.findErrorMagnitudes(A,C,S),f=0;f<S.length;f++){var O=e.length-1-this.field.log(S[f]);if(O<0)throw Ee.getChecksumInstance();e[O]=this.field.subtract(e[O],I[f])}return S.length},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,o=t,s=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(n/2);){var f=a,u=s;if(a=o,s=c,a.isZero())throw Ee.getChecksumInstance();o=f;for(var l=this.field.getZero(),h=a.getCoefficient(a.getDegree()),d=this.field.inverse(h);o.getDegree()>=a.getDegree()&&!o.isZero();){var x=o.getDegree()-a.getDegree(),y=this.field.multiply(o.getCoefficient(o.getDegree()),d);l=l.add(this.field.buildMonomial(x,y)),o=o.subtract(a.multiplyByMonomial(x,y))}c=l.multiply(s).subtract(u).negative()}var m=c.getCoefficient(0);if(m===0)throw Ee.getChecksumInstance();var _=this.field.inverse(m),w=c.multiply(_),C=o.multiply(_);return[w,C]},r.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(n[i]=this.field.inverse(a),i++);if(i!==t)throw Ee.getChecksumInstance();return n},r.prototype.findErrorMagnitudes=function(e,t,n){for(var i=t.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var s=new Ct(this.field,a),c=n.length,f=new Int32Array(c),o=0;o<c;o++){var u=this.field.inverse(n[o]),l=this.field.subtract(0,e.evaluateAt(u)),h=this.field.inverse(s.evaluateAt(u));f[o]=this.field.multiply(l,h)}return f},r}(),an=function(){function r(e,t,n,i,a){e instanceof r?this.constructor_2(e):this.constructor_1(e,t,n,i,a)}return r.prototype.constructor_1=function(e,t,n,i,a){var o=t==null||n==null,s=i==null||a==null;if(o&&s)throw new b;o?(t=new B(0,i.getY()),n=new B(0,a.getY())):s&&(i=new B(e.getWidth()-1,t.getY()),a=new B(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))},r.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},r.merge=function(e,t){return e==null?t:t==null?e:new r(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},r.prototype.addMissingRows=function(e,t,n){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,f=Math.trunc(c.getY()-e);f<0&&(f=0);var u=new B(c.getX(),f);n?i=u:o=u}if(t>0){var l=n?this.bottomLeft:this.bottomRight,h=Math.trunc(l.getY()+t);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var d=new B(l.getX(),h);n?a=d:s=d}return new r(this.image,i,a,o,s)},r.prototype.getMinX=function(){return this.minX},r.prototype.getMaxX=function(){return this.maxX},r.prototype.getMinY=function(){return this.minY},r.prototype.getMaxY=function(){return this.maxY},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getBottomRight=function(){return this.bottomRight},r}(),Is=function(){function r(e,t,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return r.prototype.getColumnCount=function(){return this.columnCount},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getRowCount=function(){return this.rowCount},r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},r}(),hn=function(){function r(){this.buffer=""}return r.form=function(e,t){var n=-1;function i(o,s,c,f,u,l){if(o==="%%")return"%";if(t[++n]!==void 0){o=f?parseInt(f.substr(1)):void 0;var h=u?parseInt(u.substr(1)):void 0,d;switch(l){case"s":d=t[n];break;case"c":d=t[n][0];break;case"f":d=parseFloat(t[n]).toFixed(o);break;case"p":d=parseFloat(t[n]).toPrecision(o);break;case"e":d=parseFloat(t[n]).toExponential(o);break;case"x":d=parseInt(t[n]).toString(h||16);break;case"d":d=parseFloat(parseInt(t[n],h||10).toPrecision(o)).toFixed(0);break}d=typeof d=="object"?JSON.stringify(d):(+d).toString(h);for(var x=parseInt(c),y=c&&c[0]+""=="0"?"0":" ";d.length<x;)d=s!==void 0?d+y:y+d;return d}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},r.prototype.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.buffer+=r.form(e,t)},r.prototype.toString=function(){return this.buffer},r}(),Ns=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ri=function(){function r(e){this.boundingBox=new an(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return r.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var n=1;n<r.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},r.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},r.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},r.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.getCodewords=function(){return this.codewords},r.prototype.toString=function(){var e,t,n=new hn,i=0;try{for(var a=Ns(this.codewords),o=a.next();!o.done;o=a.next()){var s=o.value;if(s==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return n.toString()},r.MAX_NEARBY_DISTANCE=5,r}(),Os=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ts=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a},ir=function(){function r(){this.values=new Map}return r.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},r.prototype.getValue=function(){var e,t,n=-1,i=new Array,a=function(l,h){var d={getKey:function(){return l},getValue:function(){return h}};d.getValue()>n?(n=d.getValue(),i=[],i.push(d.getKey())):d.getValue()===n&&i.push(d.getKey())};try{for(var o=Os(this.values.entries()),s=o.next();!s.done;s=o.next()){var c=Ts(s.value,2),f=c[0],u=c[1];a(f,u)}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return J.toIntArray(i)},r.prototype.getConfidence=function(e){return this.values.get(e)},r}(),Rs=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ii=function(r){Rs(e,r);function e(t,n){var i=r.call(this,t)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var t,n;try{for(var i=Wr(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=-1,u=1,l=0,h=s;h<c;h++)if(n[h]!=null){var d=n[h],x=d.getRowNumber()-f;if(x===0)l++;else if(x===1)u=Math.max(u,l),l=1,f=d.getRowNumber();else if(x<0||d.getRowNumber()>=t.getRowCount()||x>h)n[h]=null;else{var y=void 0;u>2?y=(u-2)*x:y=x;for(var m=y>=h,_=1;_<=y&&!m;_++)m=n[h-_]!=null;m?n[h]=null:(f=d.getRowNumber(),l=1)}}},e.prototype.getRowHeights=function(){var t,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=Wr(this.getCodewords()),s=o.next();!s.done;s=o.next()){var c=s.value;if(c!=null){var f=c.getRowNumber();if(f>=a.length)continue;a[f]++}}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),f=-1,u=o;u<s;u++)if(c[u]!=null){var l=c[u];l.setRowNumberAsRowIndicatorColumn();var h=l.getRowNumber()-f;h===0||(h===1?f=l.getRowNumber():l.getRowNumber()>=t.getRowCount()?c[u]=null:f=l.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,n,i=this.getCodewords(),a=new ir,o=new ir,s=new ir,c=new ir;try{for(var f=Wr(i),u=f.next();!u.done;u=f.next()){var l=u.value;if(l!=null){l.setRowNumberAsRowIndicatorColumn();var h=l.getValue()%30,d=l.getRowNumber();switch(this._isLeft||(d+=2),d%3){case 0:o.setValue(h*3+1);break;case 1:c.setValue(h/3),s.setValue(h%3);break;case 2:a.setValue(h+1);break}}}}catch(y){t={error:y}}finally{try{u&&!u.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}if(a.getValue().length===0||o.getValue().length===0||s.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<J.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>J.MAX_ROWS_IN_BARCODE)return null;var x=new Is(a.getValue()[0],o.getValue()[0],s.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,x),x},e.prototype.removeIncorrectCodewords=function(t,n){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var o=a.getValue()%30,s=a.getRowNumber();if(s>n.getRowCount()){t[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==n.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+r.prototype.toString.call(this)},e}(Ri),Ds=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ps=function(){function r(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=J.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},r.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},r.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,n));return e},r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},r.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[n];a!=null&&(a.setRowNumber(e[n].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(a=r.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(a=r.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},r.adjustRowNumberIfValid=function(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},r.prototype.adjustRowNumbers=function(e,t,n){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=n[t],s=this.detectionResultColumns[e-1].getCodewords(),c=s;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=s[t],f[3]=c[t],t>0&&(f[0]=n[t-1],f[4]=s[t-1],f[5]=c[t-1]),t>1&&(f[8]=n[t-2],f[10]=s[t-2],f[11]=c[t-2]),t<n.length-1&&(f[1]=n[t+1],f[6]=s[t+1],f[7]=c[t+1]),t<n.length-2&&(f[9]=n[t+2],f[12]=s[t+2],f[13]=c[t+2]);try{for(var u=Ds(f),l=u.next();!l.done;l=u.next()){var h=l.value;if(r.adjustRowNumber(o,h))return}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}}},r.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},r.prototype.setBoundingBox=function(e){this.boundingBox=e},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},r.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},r.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new hn,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[n];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},r}(),Ms=function(){function r(e,t,n,i){this.rowNumber=r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},r.prototype.isValidRowNumber=function(e){return e!==r.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},r.prototype.getWidth=function(){return this.endX-this.startX},r.prototype.getStartX=function(){return this.startX},r.prototype.getEndX=function(){return this.endX},r.prototype.getBucket=function(){return this.bucket},r.prototype.getValue=function(){return this.value},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.setRowNumber=function(e){this.rowNumber=e},r.prototype.toString=function(){return this.rowNumber+"|"+this.value},r.BARCODE_ROW_UNKNOWN=-1,r}(),Bs=function(){function r(){}return r.initialize=function(){for(var e=0;e<J.SYMBOL_TABLE.length;e++)for(var t=J.SYMBOL_TABLE[e],n=t&1,i=0;i<J.BARS_IN_MODULE;i++){for(var a=0;(t&1)===n;)a+=1,t>>=1;n=t&1,r.RATIOS_TABLE[e]||(r.RATIOS_TABLE[e]=new Array(J.BARS_IN_MODULE)),r.RATIOS_TABLE[e][J.BARS_IN_MODULE-i-1]=Math.fround(a/J.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},r.getDecodedValue=function(e){var t=r.getDecodedCodewordValue(r.sampleBitCounts(e));return t!==-1?t:r.getClosestDecodedValue(e)},r.sampleBitCounts=function(e){for(var t=ee.sum(e),n=new Int32Array(J.BARS_IN_MODULE),i=0,a=0,o=0;o<J.MODULES_IN_CODEWORD;o++){var s=t/(2*J.MODULES_IN_CODEWORD)+o*t/J.MODULES_IN_CODEWORD;a+e[i]<=s&&(a+=e[i],i++),n[i]++}return n},r.getDecodedCodewordValue=function(e){var t=r.getBitValue(e);return J.getCodeword(t)===-1?-1:t},r.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},r.getClosestDecodedValue=function(e){var t=ee.sum(e),n=new Array(J.BARS_IN_MODULE);if(t>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/t);var a=tn.MAX_VALUE,o=-1;this.bSymbolTableReady||r.initialize();for(var s=0;s<r.RATIOS_TABLE.length;s++){for(var c=0,f=r.RATIOS_TABLE[s],u=0;u<J.BARS_IN_MODULE;u++){var l=Math.fround(f[u]-n[u]);if(c+=Math.fround(l*l),c>=a)break}c<a&&(a=c,o=J.SYMBOL_TABLE[s])}return o},r.bSymbolTableReady=!1,r.RATIOS_TABLE=new Array(J.SYMBOL_TABLE.length).map(function(e){return new Array(J.BARS_IN_MODULE)}),r}(),Fs=function(){function r(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return r.prototype.getSegmentIndex=function(){return this.segmentIndex},r.prototype.setSegmentIndex=function(e){this.segmentIndex=e},r.prototype.getFileId=function(){return this.fileId},r.prototype.setFileId=function(e){this.fileId=e},r.prototype.getOptionalData=function(){return this.optionalData},r.prototype.setOptionalData=function(e){this.optionalData=e},r.prototype.isLastSegment=function(){return this.lastSegment},r.prototype.setLastSegment=function(e){this.lastSegment=e},r.prototype.getSegmentCount=function(){return this.segmentCount},r.prototype.setSegmentCount=function(e){this.segmentCount=e},r.prototype.getSender=function(){return this.sender||null},r.prototype.setSender=function(e){this.sender=e},r.prototype.getAddressee=function(){return this.addressee||null},r.prototype.setAddressee=function(e){this.addressee=e},r.prototype.getFileName=function(){return this.fileName},r.prototype.setFileName=function(e){this.fileName=e},r.prototype.getFileSize=function(){return this.fileSize},r.prototype.setFileSize=function(e){this.fileSize=e},r.prototype.getChecksum=function(){return this.checksum},r.prototype.setChecksum=function(e){this.checksum=e},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.setTimestamp=function(e){this.timestamp=e},r}(),ai=function(){function r(){}return r.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r}(),Ls=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ks=function(r){Ls(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Ke),js=function(){function r(){}return r.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},r.prototype.writeBytesOffset=function(e,t,n){if(e==null)throw new ks;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new fn;if(n===0)return;for(var i=0;i<n;i++)this.write(e[t+i])},r.prototype.flush=function(){},r.prototype.close=function(){},r}(),Us=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vs=function(r){Us(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Ke),Hs=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gs=function(r){Hs(e,r);function e(t){t===void 0&&(t=32);var n=r.call(this)||this;if(n.count=0,t<0)throw new j("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var n=this.buf.length,i=n<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new Vs;i=Y.MAX_VALUE}this.buf=Pe.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,n,i){if(n<0||n>t.length||i<0||n+i-t.length>0)throw new fn;this.ensureCapacity(this.count+i),ve.arraycopy(t,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Pe.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(js),le;(function(r){r[r.ALPHA=0]="ALPHA",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.PUNCT=3]="PUNCT",r[r.ALPHA_SHIFT=4]="ALPHA_SHIFT",r[r.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(le||(le={}));function Di(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var gr;function vt(r){if(typeof gr>"u"&&(gr=Di()),gr===null)throw new Error("BigInt is not supported!");return gr(r)}function Xs(){var r=[];r[0]=vt(1);var e=vt(900);r[1]=e;for(var t=2;t<16;t++)r[t]=r[t-1]*e;return r}var Ws=function(){function r(){}return r.decode=function(e,t){var n=new z(""),i=De.ISO8859_1;n.enableDecoding(i);for(var a=1,o=e[a++],s=new Fs;a<e[0];){switch(o){case r.TEXT_COMPACTION_MODE_LATCH:a=r.textCompaction(e,a,n);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:a=r.byteCompaction(o,e,i,a,n);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:a=r.numericCompaction(e,a,n);break;case r.ECI_CHARSET:De.getCharacterSetECIByValue(e[a++]);break;case r.ECI_GENERAL_PURPOSE:a+=2;break;case r.ECI_USER_DEFINED:a++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=r.decodeMacroBlock(e,a,s);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new R;default:a--,a=r.textCompaction(e,a,n);break}if(a<e.length)o=e[a++];else throw R.getFormatInstance()}if(n.length()===0)throw R.getFormatInstance();var c=new Dr(null,n.toString(),null,t);return c.setOther(s),c},r.decodeMacroBlock=function(e,t,n){if(t+r.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw R.getFormatInstance();for(var i=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<r.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];n.setSegmentIndex(Y.parseInt(r.decodeBase900toBase10(i,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new z;t=r.textCompaction(e,t,o),n.setFileId(o.toString());var s=-1;for(e[t]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new z;t=r.textCompaction(e,t+1,c),n.setFileName(c.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new z;t=r.textCompaction(e,t+1,f),n.setSender(f.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var u=new z;t=r.textCompaction(e,t+1,u),n.setAddressee(u.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var l=new z;t=r.numericCompaction(e,t+1,l),n.setSegmentCount(Y.parseInt(l.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new z;t=r.numericCompaction(e,t+1,h),n.setTimestamp(ai.parseLong(h.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var d=new z;t=r.numericCompaction(e,t+1,d),n.setChecksum(Y.parseInt(d.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new z;t=r.numericCompaction(e,t+1,x),n.setFileSize(ai.parseLong(x.toString()));break;default:throw R.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw R.getFormatInstance()}if(s!==-1){var y=t-s;n.isLastSegment()&&y--,n.setOptionalData(Pe.copyOfRange(e,s,s+y))}return t},r.textCompaction=function(e,t,n){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),o=0,s=!1;t<e[0]&&!s;){var c=e[t++];if(c<r.TEXT_COMPACTION_MODE_LATCH)i[o]=c/30,i[o+1]=c%30,o+=2;else switch(c){case r.TEXT_COMPACTION_MODE_LATCH:i[o++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],a[o]=c,o++;break}}return r.decodeTextCompaction(i,a,o,n),t},r.decodeTextCompaction=function(e,t,n,i){for(var a=le.ALPHA,o=le.ALPHA,s=0;s<n;){var c=e[s],f="";switch(a){case le.ALPHA:if(c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case r.LL:a=le.LOWER;break;case r.ML:a=le.MIXED;break;case r.PS:o=a,a=le.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=le.ALPHA;break}break;case le.LOWER:if(c<26)f=String.fromCharCode(97+c);else switch(c){case 26:f=" ";break;case r.AS:o=a,a=le.ALPHA_SHIFT;break;case r.ML:a=le.MIXED;break;case r.PS:o=a,a=le.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=le.ALPHA;break}break;case le.MIXED:if(c<r.PL)f=r.MIXED_CHARS[c];else switch(c){case r.PL:a=le.PUNCT;break;case 26:f=" ";break;case r.LL:a=le.LOWER;break;case r.AL:a=le.ALPHA;break;case r.PS:o=a,a=le.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=le.ALPHA;break}break;case le.PUNCT:if(c<r.PAL)f=r.PUNCT_CHARS[c];else switch(c){case r.PAL:a=le.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=le.ALPHA;break}break;case le.ALPHA_SHIFT:if(a=o,c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:a=le.ALPHA;break}break;case le.PUNCT_SHIFT:if(a=o,c<r.PAL)f=r.PUNCT_CHARS[c];else switch(c){case r.PAL:a=le.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=le.ALPHA;break}break}f!==""&&i.append(f),s++}},r.byteCompaction=function(e,t,n,i,a){var o=new Gs,s=0,c=0,f=!1;switch(e){case r.BYTE_COMPACTION_MODE_LATCH:for(var u=new Int32Array(6),l=t[i++];i<t[0]&&!f;)switch(u[s++]=l,c=900*c+l,l=t[i++],l){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(s%5===0&&s>0){for(var h=0;h<6;++h)o.write(Number(vt(c)>>vt(8*(5-h))));c=0,s=0}break}i===t[0]&&l<r.TEXT_COMPACTION_MODE_LATCH&&(u[s++]=l);for(var d=0;d<s;d++)o.write(u[d]);break;case r.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!f;){var x=t[i++];if(x<r.TEXT_COMPACTION_MODE_LATCH)s++,c=900*c+x;else switch(x){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(s%5===0&&s>0){for(var h=0;h<6;++h)o.write(Number(vt(c)>>vt(8*(5-h))));c=0,s=0}}break}return a.append(tt.decode(o.toByteArray(),n)),i},r.numericCompaction=function(e,t,n){for(var i=0,a=!1,o=new Int32Array(r.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var s=e[t++];if(t===e[0]&&(a=!0),s<r.TEXT_COMPACTION_MODE_LATCH)o[i]=s,i++;else switch(s){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%r.MAX_NUMERIC_CODEWORDS===0||s===r.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(n.append(r.decodeBase900toBase10(o,i)),i=0)}return t},r.decodeBase900toBase10=function(e,t){for(var n=vt(0),i=0;i<t;i++)n+=r.EXP900[t-i-1]*vt(e[i]);var a=n.toString();if(a.charAt(0)!=="1")throw new R;return a.substring(1)},r.TEXT_COMPACTION_MODE_LATCH=900,r.BYTE_COMPACTION_MODE_LATCH=901,r.NUMERIC_COMPACTION_MODE_LATCH=902,r.BYTE_COMPACTION_MODE_LATCH_6=924,r.ECI_USER_DEFINED=925,r.ECI_GENERAL_PURPOSE=926,r.ECI_CHARSET=927,r.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,r.MACRO_PDF417_TERMINATOR=922,r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,r.MAX_NUMERIC_CODEWORDS=15,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,r.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,r.PL=25,r.LL=27,r.AS=27,r.ML=28,r.AL=28,r.PS=29,r.PAL=29,r.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,r.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",r.EXP900=Di()?Xs():[],r.NUMBER_OF_SEQUENCE_CODEWORDS=2,r}(),er=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zs=function(){function r(){}return r.decode=function(e,t,n,i,a,o,s){for(var c=new an(e,t,n,i,a),f=null,u=null,l,h=!0;;h=!1){if(t!=null&&(f=r.getRowIndicatorColumn(e,c,t,!0,o,s)),i!=null&&(u=r.getRowIndicatorColumn(e,c,i,!1,o,s)),l=r.merge(f,u),l==null)throw b.getNotFoundInstance();var d=l.getBoundingBox();if(h&&d!=null&&(d.getMinY()<c.getMinY()||d.getMaxY()>c.getMaxY()))c=d;else break}l.setBoundingBox(c);var x=l.getBarcodeColumnCount()+1;l.setDetectionResultColumn(0,f),l.setDetectionResultColumn(x,u);for(var y=f!=null,m=1;m<=x;m++){var _=y?m:x-m;if(l.getDetectionResultColumn(_)===void 0){var w=void 0;_===0||_===x?w=new ii(c,_===0):w=new Ri(c),l.setDetectionResultColumn(_,w);for(var C=-1,A=C,S=c.getMinY();S<=c.getMaxY();S++){if(C=r.getStartColumn(l,_,S,y),C<0||C>c.getMaxX()){if(A===-1)continue;C=A}var I=r.detectCodeword(e,c.getMinX(),c.getMaxX(),y,C,S,o,s);I!=null&&(w.setCodeword(S,I),A=C,o=Math.min(o,I.getWidth()),s=Math.max(s,I.getWidth()))}}}return r.createDecoderResult(l)},r.merge=function(e,t){if(e==null&&t==null)return null;var n=r.getBarcodeMetadata(e,t);if(n==null)return null;var i=an.merge(r.adjustBoundingBox(e),r.adjustBoundingBox(t));return new Ps(n,i)},r.adjustBoundingBox=function(e){var t,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=r.getMax(i),o=0;try{for(var s=er(i),c=s.next();!c.done;c=s.next()){var f=c.value;if(o+=a-f,f>0)break}}catch(d){t={error:d}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}for(var u=e.getCodewords(),l=0;o>0&&u[l]==null;l++)o--;for(var h=0,l=i.length-1;l>=0&&(h+=a-i[l],!(i[l]>0));l--);for(var l=u.length-1;h>0&&u[l]==null;l--)h--;return e.getBoundingBox().addMissingRows(o,h,e.isLeft())},r.getMax=function(e){var t,n,i=-1;try{for(var a=er(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=Math.max(i,s)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},r.getBarcodeMetadata=function(e,t){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},r.getRowIndicatorColumn=function(e,t,n,i,a,o){for(var s=new ii(t,i),c=0;c<2;c++)for(var f=c===0?1:-1,u=Math.trunc(Math.trunc(n.getX())),l=Math.trunc(Math.trunc(n.getY()));l<=t.getMaxY()&&l>=t.getMinY();l+=f){var h=r.detectCodeword(e,0,e.getWidth(),i,u,l,a,o);h!=null&&(s.setCodeword(l,h),i?u=h.getStartX():u=h.getEndX())}return s},r.adjustCodewordCount=function(e,t){var n=t[0][1],i=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-r.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>J.MAX_CODEWORDS_IN_BARCODE)throw b.getNotFoundInstance();n.setValue(a)}else i[0]!==a&&n.setValue(a)},r.createDecoderResult=function(e){var t=r.createBarcodeMatrix(e);r.adjustCodewordCount(e,t);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var c=0;c<e.getBarcodeColumnCount();c++){var f=t[s][c+1].getValue(),u=s*e.getBarcodeColumnCount()+c;f.length===0?n.push(u):f.length===1?i[u]=f[0]:(o.push(u),a.push(f))}for(var l=new Array(a.length),h=0;h<l.length;h++)l[h]=a[h];return r.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,J.toIntArray(n),J.toIntArray(o),l)},r.createDecoderResultFromAmbiguousValues=function(e,t,n,i,a){for(var o=new Int32Array(i.length),s=100;s-- >0;){for(var c=0;c<o.length;c++)t[i[c]]=a[c][o[c]];try{return r.decodeCodewords(t,e,n)}catch(u){var f=u instanceof Ee;if(!f)throw u}if(o.length===0)throw Ee.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<a[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw Ee.getChecksumInstance()}throw Ee.getChecksumInstance()},r.createBarcodeMatrix=function(e){for(var t,n,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var c=0;c<o[s].length;c++)o[s][c]=new ir;var f=0;try{for(var u=er(e.getDetectionResultColumns()),l=u.next();!l.done;l=u.next()){var h=l.value;if(h!=null)try{for(var d=(i=void 0,er(h.getCodewords())),x=d.next();!x.done;x=d.next()){var y=x.value;if(y!=null){var m=y.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][f].setValue(y.getValue())}}}}catch(_){i={error:_}}finally{try{x&&!x.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}f++}}catch(_){t={error:_}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o},r.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},r.getStartColumn=function(e,t,n,i){var a,o,s=i?1:-1,c=null;if(r.isValidBarcodeColumn(e,t-s)&&(c=e.getDetectionResultColumn(t-s).getCodeword(n)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(n),c!=null)return i?c.getStartX():c.getEndX();if(r.isValidBarcodeColumn(e,t-s)&&(c=e.getDetectionResultColumn(t-s).getCodewordNearby(n)),c!=null)return i?c.getEndX():c.getStartX();for(var f=0;r.isValidBarcodeColumn(e,t-s);){t-=s;try{for(var u=(a=void 0,er(e.getDetectionResultColumn(t).getCodewords())),l=u.next();!l.done;l=u.next()){var h=l.value;if(h!=null)return(i?h.getEndX():h.getStartX())+s*f*(h.getEndX()-h.getStartX())}}catch(d){a={error:d}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(a)throw a.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},r.detectCodeword=function(e,t,n,i,a,o,s,c){a=r.adjustCodewordStartColumn(e,t,n,i,a,o);var f=r.getModuleBitCount(e,t,n,i,a,o);if(f==null)return null;var u,l=ee.sum(f);if(i)u=a+l;else{for(var h=0;h<f.length/2;h++){var d=f[h];f[h]=f[f.length-1-h],f[f.length-1-h]=d}u=a,a=u-l}if(!r.checkCodewordSkew(l,s,c))return null;var x=Bs.getDecodedValue(f),y=J.getCodeword(x);return y===-1?null:new Ms(a,u,r.getCodewordBucketNumber(x),y)},r.getModuleBitCount=function(e,t,n,i,a,o){for(var s=a,c=new Int32Array(8),f=0,u=i?1:-1,l=i;(i?s<n:s>=t)&&f<c.length;)e.get(s,o)===l?(c[f]++,s+=u):(f++,l=!l);return f===c.length||s===(i?n:t)&&f===c.length-1?c:null},r.getNumberOfECCodeWords=function(e){return 2<<e},r.adjustCodewordStartColumn=function(e,t,n,i,a,o){for(var s=a,c=i?-1:1,f=0;f<2;f++){for(;(i?s>=t:s<n)&&i===e.get(s,o);){if(Math.abs(a-s)>r.CODEWORD_SKEW_SIZE)return a;s+=c}c=-c,i=!i}return s},r.checkCodewordSkew=function(e,t,n){return t-r.CODEWORD_SKEW_SIZE<=e&&e<=n+r.CODEWORD_SKEW_SIZE},r.decodeCodewords=function(e,t,n){if(e.length===0)throw R.getFormatInstance();var i=1<<t+1,a=r.correctErrors(e,n,i);r.verifyCodewordCount(e,i);var o=Ws.decode(e,""+t);return o.setErrorsCorrected(a),o.setErasures(n.length),o},r.correctErrors=function(e,t,n){if(t!=null&&t.length>n/2+r.MAX_ERRORS||n<0||n>r.MAX_EC_CODEWORDS)throw Ee.getChecksumInstance();return r.errorCorrection.decode(e,n,t)},r.verifyCodewordCount=function(e,t){if(e.length<4)throw R.getFormatInstance();var n=e[0];if(n>e.length)throw R.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw R.getFormatInstance()},r.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,i=t.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)t[i]++,e>>=1;return t},r.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},r.getCodewordBucketNumber_number=function(e){return r.getCodewordBucketNumber(r.getBitCountForCodeword(e))},r.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},r.toString=function(e){for(var t=new hn,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var a=e[n][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},r.CODEWORD_SKEW_SIZE=2,r.MAX_ERRORS=3,r.MAX_EC_CODEWORDS=512,r.errorCorrection=new Ss,r}(),$s=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Or=function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=r.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw b.getNotFoundInstance();return n[0]},r.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return r.decode(e,t,!0)}catch(n){throw n instanceof R||n instanceof Ee?b.getNotFoundInstance():n}},r.decode=function(e,t,n){var i,a,o=new Array,s=ws.detectMultiple(e,t,n);try{for(var c=$s(s.getPoints()),f=c.next();!f.done;f=c.next()){var u=f.value,l=zs.decode(s.getBits(),u[4],u[5],u[6],u[7],r.getMinCodewordWidth(u),r.getMaxCodewordWidth(u)),h=new Xe(l.getText(),l.getRawBytes(),void 0,u,L.PDF_417);h.putMetadata(He.ERROR_CORRECTION_LEVEL,l.getECLevel());var d=l.getOther();d!=null&&h.putMetadata(He.PDF417_EXTRA_METADATA,d),o.push(h)}}catch(x){i={error:x}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return o.map(function(x){return x})},r.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMinWidth=function(e,t){return e==null||t==null?Y.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(r.getMaxWidth(e[0],e[4]),r.getMaxWidth(e[6],e[2])*J.MODULES_IN_CODEWORD/J.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(e[1],e[5]),r.getMaxWidth(e[7],e[3])*J.MODULES_IN_CODEWORD/J.MODULES_IN_STOP_PATTERN)))},r.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(r.getMinWidth(e[0],e[4]),r.getMinWidth(e[6],e[2])*J.MODULES_IN_CODEWORD/J.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(e[1],e[5]),r.getMinWidth(e[7],e[3])*J.MODULES_IN_CODEWORD/J.MODULES_IN_STOP_PATTERN)))},r.prototype.reset=function(){},r}(),Ys=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),oi=function(r){Ys(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReaderException",e}(Ke),si=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pi=function(){function r(){}return r.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},r.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},r.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(ce.TRY_HARDER)!==void 0,n=e==null?null:e.get(ce.POSSIBLE_FORMATS),i=new Array;if(n!=null){var a=n.some(function(o){return o===L.UPC_A||o===L.UPC_E||o===L.EAN_13||o===L.EAN_8||o===L.CODABAR||o===L.CODE_39||o===L.CODE_93||o===L.CODE_128||o===L.ITF||o===L.RSS_14||o===L.RSS_EXPANDED});a&&!t&&i.push(new Mt(e)),n.includes(L.QR_CODE)&&i.push(new Nr),n.includes(L.DATA_MATRIX)&&i.push(new Ir),n.includes(L.AZTEC)&&i.push(new br),n.includes(L.PDF_417)&&i.push(new Or),a&&t&&i.push(new Mt(e))}i.length===0&&(t||i.push(new Mt(e)),i.push(new Nr),i.push(new Ir),i.push(new br),i.push(new Or),t&&i.push(new Mt(e))),this.readers=i},r.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var n=si(this.readers),i=n.next();!i.done;i=n.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.decodeInternal=function(e){var t,n;if(this.readers===null)throw new oi("No readers where selected, nothing can be read.");try{for(var i=si(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof oi)continue}}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw new b("No MultiFormat Readers were able to detect the code.")},r}(),Zs=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qs=function(r){Zs(e,r);function e(t,n){t===void 0&&(t=null),n===void 0&&(n=500);var i=this,a=new Pi;return a.setHints(t),i=r.call(this,a,n)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(kt),Ks=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){Ks(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Or,t)||this}return e})(kt);var Js=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){Js(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Nr,t)||this}return e})(kt);var on;(function(r){r[r.ERROR_CORRECTION=0]="ERROR_CORRECTION",r[r.CHARACTER_SET=1]="CHARACTER_SET",r[r.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",r[r.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",r[r.MIN_SIZE=4]="MIN_SIZE",r[r.MAX_SIZE=5]="MAX_SIZE",r[r.MARGIN=6]="MARGIN",r[r.PDF417_COMPACT=7]="PDF417_COMPACT",r[r.PDF417_COMPACTION=8]="PDF417_COMPACTION",r[r.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",r[r.AZTEC_LAYERS=10]="AZTEC_LAYERS",r[r.QR_VERSION=11]="QR_VERSION",r[r.GS1_FORMAT=12]="GS1_FORMAT",r[r.FORCE_C40=13]="FORCE_C40"})(on||(on={}));const yr=on;var Mi=function(){function r(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new pt(e,Int32Array.from([1])))}return r.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var o=n.multiply(new pt(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(o),n=o}return t[e]},r.prototype.encode=function(e,t){if(t===0)throw new j("No error correction bytes");var n=e.length-t;if(n<=0)throw new j("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(n);ve.arraycopy(e,0,a,0,n);var o=new pt(this.field,a);o=o.multiplyByMonomial(t,1);for(var s=o.divide(i)[1],c=s.getCoefficients(),f=t-c.length,u=0;u<f;u++)e[n+u]=0;ve.arraycopy(c,0,e,n+f,c.length)},r}(),ar=function(){function r(){}return r.applyMaskPenaltyRule1=function(e){return r.applyMaskPenaltyRule1Internal(e,!0)+r.applyMaskPenaltyRule1Internal(e,!1)},r.applyMaskPenaltyRule2=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var s=n[o],c=0;c<i-1;c++){var f=s[c];f===s[c+1]&&f===n[o+1][c]&&f===n[o+1][c+1]&&t++}return r.N2*t},r.applyMaskPenaltyRule3=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=0;s<i;s++){var c=n[o];s+6<i&&c[s]===1&&c[s+1]===0&&c[s+2]===1&&c[s+3]===1&&c[s+4]===1&&c[s+5]===0&&c[s+6]===1&&(r.isWhiteHorizontal(c,s-4,s)||r.isWhiteHorizontal(c,s+7,s+11))&&t++,o+6<a&&n[o][s]===1&&n[o+1][s]===0&&n[o+2][s]===1&&n[o+3][s]===1&&n[o+4][s]===1&&n[o+5][s]===0&&n[o+6][s]===1&&(r.isWhiteVertical(n,s,o-4,o)||r.isWhiteVertical(n,s,o+7,o+11))&&t++}return t*r.N3},r.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var i=t;i<n;i++)if(e[i]===1)return!1;return!0},r.isWhiteVertical=function(e,t,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var a=n;a<i;a++)if(e[a][t]===1)return!1;return!0},r.applyMaskPenaltyRule4=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=n[o],c=0;c<i;c++)s[c]===1&&t++;var f=e.getHeight()*e.getWidth(),u=Math.floor(Math.abs(t*2-f)*10/f);return u*r.N4},r.getDataMaskBit=function(e,t,n){var i,a;switch(e){case 0:i=n+t&1;break;case 1:i=n&1;break;case 2:i=t%3;break;case 3:i=(n+t)%3;break;case 4:i=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:a=n*t,i=(a&1)+a%3;break;case 6:a=n*t,i=(a&1)+a%3&1;break;case 7:a=n*t,i=a%3+(n+t&1)&1;break;default:throw new j("Invalid mask pattern: "+e)}return i===0},r.applyMaskPenaltyRule1Internal=function(e,t){for(var n=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<i;s++){for(var c=0,f=-1,u=0;u<a;u++){var l=t?o[s][u]:o[u][s];l===f?c++:(c>=5&&(n+=r.N1+(c-5)),c=1,f=l)}c>=5&&(n+=r.N1+(c-5))}return n},r.N1=3,r.N2=3,r.N3=40,r.N4=10,r}(),qs=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e0=function(){function r(e,t){this.width=e,this.height=t;for(var n=new Array(t),i=0;i!==t;i++)n[i]=new Uint8Array(e);this.bytes=n}return r.prototype.getHeight=function(){return this.height},r.prototype.getWidth=function(){return this.width},r.prototype.get=function(e,t){return this.bytes[t][e]},r.prototype.getArray=function(){return this.bytes},r.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},r.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},r.prototype.clear=function(e){var t,n;try{for(var i=qs(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;Pe.fill(o,e)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var a=this.bytes[n],o=t.bytes[n],s=0,c=this.width;s<c;++s)if(a[s]!==o[s])return!1;return!0},r.prototype.toString=function(){for(var e=new z,t=0,n=this.height;t<n;++t){for(var i=this.bytes[t],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},r}(),sn=function(){function r(){this.maskPattern=-1}return r.prototype.getMode=function(){return this.mode},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getVersion=function(){return this.version},r.prototype.getMaskPattern=function(){return this.maskPattern},r.prototype.getMatrix=function(){return this.matrix},r.prototype.toString=function(){var e=new z;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},r.prototype.setMode=function(e){this.mode=e},r.prototype.setECLevel=function(e){this.ecLevel=e},r.prototype.setVersion=function(e){this.version=e},r.prototype.setMaskPattern=function(e){this.maskPattern=e},r.prototype.setMatrix=function(e){this.matrix=e},r.isValidMaskPattern=function(e){return e>=0&&e<r.NUM_MASK_PATTERNS},r.NUM_MASK_PATTERNS=8,r}(),t0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pe=function(r){t0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="WriterException",e}(Ke),ci=function(){function r(){}return r.clearMatrix=function(e){e.clear(255)},r.buildMatrix=function(e,t,n,i,a){r.clearMatrix(a),r.embedBasicPatterns(n,a),r.embedTypeInfo(t,i,a),r.maybeEmbedVersionInfo(n,a),r.embedDataBits(e,i,a)},r.embedBasicPatterns=function(e,t){r.embedPositionDetectionPatternsAndSeparators(t),r.embedDarkDotAtLeftBottomCorner(t),r.maybeEmbedPositionAdjustmentPatterns(e,t),r.embedTimingPatterns(t)},r.embedTypeInfo=function(e,t,n){var i=new ke;r.makeTypeInfoBits(e,t,i);for(var a=0,o=i.getSize();a<o;++a){var s=i.get(i.getSize()-1-a),c=r.TYPE_INFO_COORDINATES[a],f=c[0],u=c[1];if(n.setBoolean(f,u,s),a<8){var l=n.getWidth()-a-1,h=8;n.setBoolean(l,h,s)}else{var l=8,h=n.getHeight()-7+(a-8);n.setBoolean(l,h,s)}}},r.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var n=new ke;r.makeVersionInfoBits(e,n);for(var i=6*3-1,a=0;a<6;++a)for(var o=0;o<3;++o){var s=n.get(i);i--,t.setBoolean(a,t.getHeight()-11+o,s),t.setBoolean(t.getHeight()-11+o,a,s)}}},r.embedDataBits=function(e,t,n){for(var i=0,a=-1,o=n.getWidth()-1,s=n.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<n.getHeight();){for(var c=0;c<2;++c){var f=o-c;if(r.isEmpty(n.get(f,s))){var u=void 0;i<e.getSize()?(u=e.get(i),++i):u=!1,t!==255&&ar.getDataMaskBit(t,f,s)&&(u=!u),n.setBoolean(f,s,u)}}s+=a}a=-a,s+=a,o-=2}if(i!==e.getSize())throw new pe("Not all bits consumed: "+i+"/"+e.getSize())},r.findMSBSet=function(e){return 32-Y.numberOfLeadingZeros(e)},r.calculateBCHCode=function(e,t){if(t===0)throw new j("0 polynomial");var n=r.findMSBSet(t);for(e<<=n-1;r.findMSBSet(e)>=n;)e^=t<<r.findMSBSet(e)-n;return e},r.makeTypeInfoBits=function(e,t,n){if(!sn.isValidMaskPattern(t))throw new pe("Invalid mask pattern");var i=e.getBits()<<3|t;n.appendBits(i,5);var a=r.calculateBCHCode(i,r.TYPE_INFO_POLY);n.appendBits(a,10);var o=new ke;if(o.appendBits(r.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new pe("should not happen but we got: "+n.getSize())},r.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var n=r.calculateBCHCode(e.getVersionNumber(),r.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new pe("should not happen but we got: "+t.getSize())},r.isEmpty=function(e){return e===255},r.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var n=(t+1)%2;r.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),r.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}},r.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new pe;e.setNumber(8,e.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(e,t,n){for(var i=0;i<8;++i){if(!r.isEmpty(n.get(e+i,t)))throw new pe;n.setNumber(e+i,t,0)}},r.embedVerticalSeparationPattern=function(e,t,n){for(var i=0;i<7;++i){if(!r.isEmpty(n.get(e,t+i)))throw new pe;n.setNumber(e,t+i,0)}},r.embedPositionAdjustmentPattern=function(e,t,n){for(var i=0;i<5;++i)for(var a=r.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)n.setNumber(e+o,t+i,a[o])},r.embedPositionDetectionPattern=function(e,t,n){for(var i=0;i<7;++i)for(var a=r.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)n.setNumber(e+o,t+i,a[o])},r.embedPositionDetectionPatternsAndSeparators=function(e){var t=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,e),r.embedPositionDetectionPattern(e.getWidth()-t,0,e),r.embedPositionDetectionPattern(0,e.getWidth()-t,e);var n=8;r.embedHorizontalSeparationPattern(0,n-1,e),r.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),r.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;r.embedVerticalSeparationPattern(i,0,e),r.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),r.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},r.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],a=0,o=i.length;a!==o;a++){var s=i[a];if(s>=0)for(var c=0;c!==o;c++){var f=i[c];f>=0&&r.isEmpty(t.get(f,s))&&r.embedPositionAdjustmentPattern(f-2,s-2,t)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r}(),r0=function(){function r(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return r.prototype.getDataBytes=function(){return this.dataBytes},r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},r}(),fi=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.calculateMaskPenalty=function(e){return ar.applyMaskPenaltyRule1(e)+ar.applyMaskPenaltyRule2(e)+ar.applyMaskPenaltyRule3(e)+ar.applyMaskPenaltyRule4(e)},r.encode=function(e,t,n){n===void 0&&(n=null);var i=r.DEFAULT_BYTE_MODE_ENCODING,a=n!==null&&n.get(yr.CHARACTER_SET)!==void 0;a&&(i=n.get(yr.CHARACTER_SET).toString());var o=this.chooseMode(e,i),s=new ke;if(o===xe.BYTE&&(a||r.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=De.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,s)}this.appendModeInfo(o,s);var f=new ke;this.appendBytes(e,o,f,i);var u;if(n!==null&&n.get(yr.QR_VERSION)!==void 0){var l=Number.parseInt(n.get(yr.QR_VERSION).toString(),10);u=Et.getVersionForNumber(l);var h=this.calculateBitsNeeded(o,s,f,u);if(!this.willFit(h,u,t))throw new pe("Data too big for requested version")}else u=this.recommendVersion(t,o,s,f);var d=new ke;d.appendBitArray(s);var x=o===xe.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(x,u,o,d),d.appendBitArray(f);var y=u.getECBlocksForLevel(t),m=u.getTotalCodewords()-y.getTotalECCodewords();this.terminateBits(m,d);var _=this.interleaveWithECBytes(d,u.getTotalCodewords(),m,y.getNumBlocks()),w=new sn;w.setECLevel(t),w.setMode(o),w.setVersion(u);var C=u.getDimensionForVersion(),A=new e0(C,C),S=this.chooseMaskPattern(_,t,u,A);return w.setMaskPattern(S),ci.buildMatrix(_,t,u,S,A),w.setMatrix(A),w},r.recommendVersion=function(e,t,n,i){var a=this.calculateBitsNeeded(t,n,i,Et.getVersionForNumber(1)),o=this.chooseVersion(a,e),s=this.calculateBitsNeeded(t,n,i,o);return this.chooseVersion(s,e)},r.calculateBitsNeeded=function(e,t,n,i){return t.getSize()+e.getCharacterCountBits(i)+n.getSize()},r.getAlphanumericCode=function(e){return e<r.ALPHANUMERIC_TABLE.length?r.ALPHANUMERIC_TABLE[e]:-1},r.chooseMode=function(e,t){if(t===void 0&&(t=null),De.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return xe.KANJI;for(var n=!1,i=!1,a=0,o=e.length;a<o;++a){var s=e.charAt(a);if(r.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return xe.BYTE}return i?xe.ALPHANUMERIC:n?xe.NUMERIC:xe.BYTE},r.isOnlyDoubleByteKanji=function(e){var t;try{t=tt.encode(e,De.SJIS)}catch{return!1}var n=t.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},r.chooseMaskPattern=function(e,t,n,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<sn.NUM_MASK_PATTERNS;s++){ci.buildMatrix(e,t,n,s,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,o=s)}return o},r.chooseVersion=function(e,t){for(var n=1;n<=40;n++){var i=Et.getVersionForNumber(n);if(r.willFit(e,i,t))return i}throw new pe("Data too big")},r.willFit=function(e,t,n){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(n),o=a.getTotalECCodewords(),s=i-o,c=(e+7)/8;return s>=c},r.terminateBits=function(e,t){var n=e*8;if(t.getSize()>n)throw new pe("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var i=0;i<4&&t.getSize()<n;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits(i&1?17:236,8);if(t.getSize()!==n)throw new pe("Bits size does not equal capacity")},r.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,i,a,o){if(i>=n)throw new pe("Block ID too large");var s=e%n,c=n-s,f=Math.floor(e/n),u=f+1,l=Math.floor(t/n),h=l+1,d=f-l,x=u-h;if(d!==x)throw new pe("EC bytes mismatch");if(n!==c+s)throw new pe("RS blocks mismatch");if(e!==(l+d)*c+(h+x)*s)throw new pe("Total bytes mismatch");i<c?(a[0]=l,o[0]=d):(a[0]=h,o[0]=x)},r.interleaveWithECBytes=function(e,t,n,i){var a,o,s,c;if(e.getSizeInBytes()!==n)throw new pe("Number of bits and data bytes does not match");for(var f=0,u=0,l=0,h=new Array,d=0;d<i;++d){var x=new Int32Array(1),y=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(t,n,i,d,x,y);var m=x[0],_=new Uint8Array(m);e.toBytes(8*f,_,0,m);var w=r.generateECBytes(_,y[0]);h.push(new r0(_,w)),u=Math.max(u,m),l=Math.max(l,w.length),f+=x[0]}if(n!==f)throw new pe("Data bytes does not match offset");for(var C=new ke,d=0;d<u;++d)try{for(var A=(a=void 0,fi(h)),S=A.next();!S.done;S=A.next()){var I=S.value,_=I.getDataBytes();d<_.length&&C.appendBits(_[d],8)}}catch(F){a={error:F}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}for(var d=0;d<l;++d)try{for(var O=(s=void 0,fi(h)),P=O.next();!P.done;P=O.next()){var I=P.value,w=I.getErrorCorrectionBytes();d<w.length&&C.appendBits(w[d],8)}}catch(F){s={error:F}}finally{try{P&&!P.done&&(c=O.return)&&c.call(O)}finally{if(s)throw s.error}}if(t!==C.getSizeInBytes())throw new pe("Interleaving error: "+t+" and "+C.getSizeInBytes()+" differ.");return C},r.generateECBytes=function(e,t){for(var n=e.length,i=new Int32Array(n+t),a=0;a<n;a++)i[a]=e[a]&255;new Mi(Qe.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),a=0;a<t;a++)o[a]=i[n+a];return o},r.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},r.appendLengthInfo=function(e,t,n,i){var a=n.getCharacterCountBits(t);if(e>=1<<a)throw new pe(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},r.appendBytes=function(e,t,n,i){switch(t){case xe.NUMERIC:r.appendNumericBytes(e,n);break;case xe.ALPHANUMERIC:r.appendAlphanumericBytes(e,n);break;case xe.BYTE:r.append8BitBytes(e,n,i);break;case xe.KANJI:r.appendKanjiBytes(e,n);break;default:throw new pe("Invalid mode: "+t)}},r.getDigit=function(e){return e.charCodeAt(0)-48},r.isDigit=function(e){var t=r.getDigit(e);return t>=0&&t<=9},r.appendNumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var a=r.getDigit(e.charAt(i));if(i+2<n){var o=r.getDigit(e.charAt(i+1)),s=r.getDigit(e.charAt(i+2));t.appendBits(a*100+o*10+s,10),i+=3}else if(i+1<n){var o=r.getDigit(e.charAt(i+1));t.appendBits(a*10+o,7),i+=2}else t.appendBits(a,4),i++}},r.appendAlphanumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var a=r.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new pe;if(i+1<n){var o=r.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new pe;t.appendBits(a*45+o,11),i+=2}else t.appendBits(a,6),i++}},r.append8BitBytes=function(e,t,n){var i;try{i=tt.encode(e,n)}catch(c){throw new pe(c)}for(var a=0,o=i.length;a!==o;a++){var s=i[a];t.appendBits(s,8)}},r.appendKanjiBytes=function(e,t){var n;try{n=tt.encode(e,De.SJIS)}catch(l){throw new pe(l)}for(var i=n.length,a=0;a<i;a+=2){var o=n[a]&255,s=n[a+1]&255,c=o<<8&4294967295|s,f=-1;if(c>=33088&&c<=40956?f=c-33088:c>=57408&&c<=60351&&(f=c-49472),f===-1)throw new pe("Invalid byte sequence");var u=(f>>8)*192+(f&255);t.appendBits(u,13)}},r.appendECI=function(e,t){t.appendBits(xe.ECI.getBits(),4),t.appendBits(e.getValue(),8)},r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),r.DEFAULT_BYTE_MODE_ENCODING=De.UTF8.getName(),r})();var n0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){n0(e,r);function e(t,n,i,a,o,s,c,f){var u=r.call(this,s,c)||this;if(u.yuvData=t,u.dataWidth=n,u.dataHeight=i,u.left=a,u.top=o,a+s>n||o+c>i)throw new j("Crop rectangle does not fit within image data.");return f&&u.reverseHorizontal(s,c),u}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new j("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return ve.arraycopy(this.yuvData,a,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=t*n,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return ve.arraycopy(this.yuvData,o,a,0,i),a;for(var s=0;s<n;s++){var c=s*t;ve.arraycopy(this.yuvData,o,a,c,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*n),a=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var c=s*t,f=0;f<t;f++){var u=a[o+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+f]=4278190080|u*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,n){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<n;a++,o+=this.dataWidth)for(var s=o+t/2,c=o,f=o+t-1;c<s;c++,f--){var u=i[c];i[c]=i[f],i[f]=u}},e.prototype.invert=function(){return new Rr(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(or);var i0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){i0(e,r);function e(t,n,i,a,o,s,c){var f=r.call(this,n,i)||this;if(f.dataWidth=a,f.dataHeight=o,f.left=s,f.top=c,t.BYTES_PER_ELEMENT===4){for(var u=n*i,l=new Uint8ClampedArray(u),h=0;h<u;h++){var d=t[h],x=d>>16&255,y=d>>7&510,m=d&255;l[h]=(x+y+m)/4&255}f.luminances=l}else f.luminances=t;if(a===void 0&&(f.dataWidth=n),o===void 0&&(f.dataHeight=i),s===void 0&&(f.left=0),c===void 0&&(f.top=0),f.left+n>f.dataWidth||f.top+i>f.dataHeight)throw new j("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new j("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return ve.arraycopy(this.luminances,a,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=t*n,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return ve.arraycopy(this.luminances,o,a,0,i),a;for(var s=0;s<n;s++){var c=s*t;ve.arraycopy(this.luminances,o,a,c,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+n)},e.prototype.invert=function(){return new Rr(this)},e})(or);var a0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),o0=function(r){a0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(De),s0=function(){function r(){}return r.ISO_8859_1=De.ISO8859_1,r}(),cn,c0=301,f0=function(r,e){for(var t=1,n=0;n<255;n++)e[n]=t,r[t]=n,t*=2,t>=256&&(t^=c0);return{LOG:r,ALOG:e}};cn=f0([],[]),cn.LOG;cn.ALOG;var ui;(function(r){r[r.FORCE_NONE=0]="FORCE_NONE",r[r.FORCE_SQUARE=1]="FORCE_SQUARE",r[r.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(ui||(ui={}));var li=129,Bi=230,u0=231,l0=235,d0=236,h0=237,v0=238,p0=239,x0=240,zr=254,g0=254,di="[)>05",hi="[)>06",vi="",se=0,Ve=1,$e=2,Te=3,Le=4,Ge=5,y0=function(){function r(){}return r.prototype.getEncodingMode=function(){return se},r.prototype.encode=function(e){var t=ot.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=ot.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Ge:e.writeCodeword(u0),e.signalEncoderChange(Ge);return;case Ve:e.writeCodeword(Bi),e.signalEncoderChange(Ve);return;case Te:e.writeCodeword(v0),e.signalEncoderChange(Te);break;case $e:e.writeCodeword(p0),e.signalEncoderChange($e);break;case Le:e.writeCodeword(x0),e.signalEncoderChange(Le);break;default:throw new Error("Illegal mode: "+i)}else ot.isExtendedASCII(n)?(e.writeCodeword(l0),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},r.prototype.encodeASCIIDigits=function(e,t){if(ot.isDigit(e)&&ot.isDigit(t)){var n=(e-48)*10+(t-48);return n+130}throw new Error("not digits: "+e+t)},r}(),m0=function(){function r(){}return r.prototype.getEncodingMode=function(){return Ge},r.prototype.encode=function(e){var t=new z;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();t.append(n),e.pos++;var i=ot.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(se);break}}var a=t.length()-1,o=1,s=e.getCodewordCount()+a+o;e.updateSymbolInfo(s);var c=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||c)if(a<=249)t.setCharAt(0,K.getCharAt(a));else if(a<=1555)t.setCharAt(0,K.getCharAt(Math.floor(a/250)+249)),t.insert(1,K.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var f=0,n=t.length();f<n;f++)e.writeCodeword(this.randomize255State(t.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},r.prototype.randomize255State=function(e,t){var n=149*t%255+1,i=e+n;return i<=255?i:i-256},r}(),vn=function(){function r(){}return r.prototype.getEncodingMode=function(){return Ve},r.prototype.encodeMaximal=function(e){for(var t=new z,n=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var s=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(c);var f=e.getSymbolInfo().getDataCapacity()-c,u=Math.floor(t.length()%3);(u===2&&f!==2||u===1&&(n>3||f!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(Bi),this.handleEOD(e,t)},r.prototype.encode=function(e){for(var t=new z;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,t),a=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new z;for(t.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var f=t.length();if(f%3===0){var u=ot.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){e.signalEncoderChange(se);break}}}this.handleEOD(e,t)},r.prototype.backtrackOneCharacter=function(e,t,n,i){var a=t.length(),o=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(o),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,n),e.resetSymbolInfo(),i},r.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},r.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+n;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(zr)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(zr),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(zr)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(se)},r.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var n=2;return n+=this.encodeChar(e-128,t),n},r.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,i=t%256,a=new z;return a.append(n),a.append(i),a.toString()},r}(),w0=function(){function r(){}return r.prototype.getEncodingMode=function(){return Le},r.prototype.encode=function(e){for(var t=new z;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var o=ot.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(se);break}}}t.append(K.getCharAt(31)),this.handleEOD(e,t)},r.prototype.handleEOD=function(e,t){try{var n=t.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,s=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),f=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}f?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(se)}},r.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(K.getCharAt(e-64)):ot.illegalCharacter(K.getCharAt(e))},r.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(i<<12)+(a<<6)+o,c=s>>16&255,f=s>>8&255,u=s&255,l=new z;return l.append(c),t>=2&&l.append(f),t>=3&&l.append(u),l.toString()},r}(),_0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),A0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ne=function(){function r(e,t,n,i,a,o,s,c){s===void 0&&(s=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=c}return r.lookup=function(e,t,n,i,a){var o,s;t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=A0(E0),f=c.next();!f.done;f=c.next()){var u=f.value;if(!(t===1&&u.rectangular)&&!(t===2&&!u.rectangular)&&!(n!=null&&(u.getSymbolWidth()<n.getWidth()||u.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(u.getSymbolWidth()>i.getWidth()||u.getSymbolHeight()>i.getHeight()))&&e<=u.dataCapacity)return u}}catch(l){o={error:l}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},r.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},r.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},r.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},r.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},r.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},r.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},r.prototype.getDataCapacity=function(){return this.dataCapacity},r.prototype.getErrorCodewords=function(){return this.errorCodewords},r.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},r.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},r}(),C0=function(r){_0(e,r);function e(){return r.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(ne),E0=[new ne(!1,3,5,8,8,1),new ne(!1,5,7,10,10,1),new ne(!0,5,7,16,6,1),new ne(!1,8,10,12,12,1),new ne(!0,10,11,14,6,2),new ne(!1,12,12,14,14,1),new ne(!0,16,14,24,10,1),new ne(!1,18,14,16,16,1),new ne(!1,22,18,18,18,1),new ne(!0,22,18,16,10,2),new ne(!1,30,20,20,20,1),new ne(!0,32,24,16,14,2),new ne(!1,36,24,22,22,1),new ne(!1,44,28,24,24,1),new ne(!0,49,28,22,14,2),new ne(!1,62,36,14,14,4),new ne(!1,86,42,16,16,4),new ne(!1,114,48,18,18,4),new ne(!1,144,56,20,20,4),new ne(!1,174,68,22,22,4),new ne(!1,204,84,24,24,4,102,42),new ne(!1,280,112,14,14,16,140,56),new ne(!1,368,144,16,16,16,92,36),new ne(!1,456,192,18,18,16,114,48),new ne(!1,576,224,20,20,16,144,56),new ne(!1,696,272,22,22,16,174,68),new ne(!1,816,336,24,24,16,136,56),new ne(!1,1050,408,18,18,36,175,68),new ne(!1,1304,496,20,20,36,163,62),new C0],b0=function(){function r(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(s){return s.charCodeAt(0)}),n=new z,i=0,a=t.length;i<a;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new z,this.newEncoding=-1}return r.prototype.setSymbolShape=function(e){this.shape=e},r.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},r.prototype.getMessage=function(){return this.msg},r.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},r.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCodewords=function(){return this.codewords},r.prototype.writeCodewords=function(e){this.codewords.append(e)},r.prototype.writeCodeword=function(e){this.codewords.append(e)},r.prototype.getCodewordCount=function(){return this.codewords.length()},r.prototype.getNewEncoding=function(){return this.newEncoding},r.prototype.signalEncoderChange=function(e){this.newEncoding=e},r.prototype.resetEncoderSignal=function(){this.newEncoding=-1},r.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},r.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},r.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},r.prototype.getSymbolInfo=function(){return this.symbolInfo},r.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ne.lookup(e,this.shape,this.minSize,this.maxSize,!0))},r.prototype.resetSymbolInfo=function(){this.symbolInfo=null},r}(),S0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),I0=function(r){S0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Te},e.prototype.encode=function(t){for(var n=new z;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,n);var a=n.length();if(a%3===0){this.writeNextTriplet(t,n);var o=ot.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(se);break}}}this.handleEOD(t,n)},e.prototype.encodeChar=function(t,n){switch(t){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:t>=48&&t<=57?n.append(t-48+4):t>=65&&t<=90?n.append(t-65+14):ot.illegalCharacter(K.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,n){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=n.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(g0),t.getNewEncoding()<0&&t.signalEncoderChange(se)},e}(vn),N0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),O0=function(r){N0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return $e},e.prototype.encodeChar=function(t,n){if(t===32)return n.append(3),1;if(t>=48&&t<=57)return n.append(t-48+4),1;if(t>=97&&t<=122)return n.append(t-97+14),1;if(t<32)return n.append(0),n.append(t),2;if(t<=47)return n.append(1),n.append(t-33),2;if(t<=64)return n.append(1),n.append(t-58+15),2;if(t>=91&&t<=95)return n.append(1),n.append(t-91+22),2;if(t===96)return n.append(2),n.append(0),2;if(t<=90)return n.append(2),n.append(t-65+1),2;if(t<=127)return n.append(2),n.append(t-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(t-128,n),i},e}(vn),ot=function(){function r(){}return r.randomize253State=function(e){var t=149*e%253+1,n=li+t;return n<=254?n:n-254},r.encodeHighLevel=function(e,t,n,i,a){t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new vn,s=[new y0,o,new O0,new I0,new w0,new m0],c=new b0(e);c.setSymbolShape(t),c.setSizeConstraints(n,i),e.startsWith(di)&&e.endsWith(vi)?(c.writeCodeword(d0),c.setSkipAtEnd(2),c.pos+=di.length):e.startsWith(hi)&&e.endsWith(vi)&&(c.writeCodeword(h0),c.setSkipAtEnd(2),c.pos+=hi.length);var f=se;for(a&&(o.encodeMaximal(c),f=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)s[f].encode(c),c.getNewEncoding()>=0&&(f=c.getNewEncoding(),c.resetEncoderSignal());var u=c.getCodewordCount();c.updateSymbolInfo();var l=c.getSymbolInfo().getDataCapacity();u<l&&f!==se&&f!==Ge&&f!==Le&&c.writeCodeword("þ");var h=c.getCodewords();for(h.length()<l&&h.append(li);h.length()<l;)h.append(this.randomize253State(h.length()+1));return c.getCodewords().toString()},r.lookAheadTest=function(e,t,n){var i=this.lookAheadTestIntern(e,t,n);if(n===Te&&i===Te){for(var a=Math.min(t+3,e.length),o=t;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return se}else if(n===Le&&i===Le){for(var a=Math.min(t+4,e.length),o=t;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return se}return i},r.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var i;n===se?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var a=0,o=new Uint8Array(6),s=[];;){if(t+a===e.length){Pe.fill(o,0),Pe.fill(s,0);var c=this.findMinimums(i,s,Y.MAX_VALUE,o),f=this.getMinimumCount(o);if(s[se]===c)return se;if(f===1){if(o[Ge]>0)return Ge;if(o[Le]>0)return Le;if(o[$e]>0)return $e;if(o[Te]>0)return Te}return Ve}var u=e.charCodeAt(t+a);if(a++,this.isDigit(u)?i[se]+=.5:this.isExtendedASCII(u)?(i[se]=Math.ceil(i[se]),i[se]+=2):(i[se]=Math.ceil(i[se]),i[se]++),this.isNativeC40(u)?i[Ve]+=2/3:this.isExtendedASCII(u)?i[Ve]+=8/3:i[Ve]+=4/3,this.isNativeText(u)?i[$e]+=2/3:this.isExtendedASCII(u)?i[$e]+=8/3:i[$e]+=4/3,this.isNativeX12(u)?i[Te]+=2/3:this.isExtendedASCII(u)?i[Te]+=13/3:i[Te]+=10/3,this.isNativeEDIFACT(u)?i[Le]+=3/4:this.isExtendedASCII(u)?i[Le]+=17/4:i[Le]+=13/4,this.isSpecialB256(u)?i[Ge]+=4:i[Ge]++,a>=4){if(Pe.fill(o,0),Pe.fill(s,0),this.findMinimums(i,s,Y.MAX_VALUE,o),s[se]<this.min(s[Ge],s[Ve],s[$e],s[Te],s[Le]))return se;if(s[Ge]<s[se]||s[Ge]+1<this.min(s[Ve],s[$e],s[Te],s[Le]))return Ge;if(s[Le]+1<this.min(s[Ge],s[Ve],s[$e],s[Te],s[se]))return Le;if(s[$e]+1<this.min(s[Ge],s[Ve],s[Le],s[Te],s[se]))return $e;if(s[Te]+1<this.min(s[Ge],s[Ve],s[Le],s[$e],s[se]))return Te;if(s[Ve]+1<this.min(s[se],s[Ge],s[Le],s[$e])){if(s[Ve]<s[Te])return Ve;if(s[Ve]===s[Te]){for(var l=t+a+1;l<e.length;){var h=e.charCodeAt(l);if(this.isX12TermSep(h))return Te;if(!this.isNativeX12(h))break;l++}return Ve}}}}},r.min=function(e,t,n,i,a){var o=Math.min(e,Math.min(t,Math.min(n,i)));return a===void 0?o:Math.min(o,a)},r.findMinimums=function(e,t,n,i){for(var a=0;a<6;a++){var o=t[a]=Math.ceil(e[a]);n>o&&(n=o,Pe.fill(i,0)),n===o&&(i[a]=i[a]+1)}return n},r.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},r.isDigit=function(e){return e>=48&&e<=57},r.isExtendedASCII=function(e){return e>=128&&e<=255},r.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},r.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},r.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},r.isX12TermSep=function(e){return e===13||e===42||e===62},r.isNativeEDIFACT=function(e){return e>=32&&e<=94},r.isSpecialB256=function(e){return!1},r.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var n=e.length,i=t;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-t},r.illegalCharacter=function(e){var t=Y.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},r}(),$r=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pi=function(){function r(e){this.charset=e,this.name=e.name}return r.prototype.canEncode=function(e){try{return tt.encode(e,this.charset)!=null}catch{return!1}},r}(),T0=function(){function r(e,t,n){var i,a,o,s,c,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(U){return new pi(o0.forName(U))}),this.encoders=[];var u=[];u.push(new pi(s0.ISO_8859_1));for(var l=t!=null&&t.name.startsWith("UTF"),h=0;h<e.length;h++){var d=!1;try{for(var x=(i=void 0,$r(u)),y=x.next();!y.done;y=x.next()){var m=y.value,_=e.charAt(h),w=_.charCodeAt(0);if(w===n||m.canEncode(_)){d=!0;break}}}catch(U){i={error:U}}finally{try{y&&!y.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}if(!d)try{for(var C=(o=void 0,$r(this.ENCODERS)),A=C.next();!A.done;A=C.next()){var m=A.value;if(m.canEncode(e.charAt(h))){u.push(m),d=!0;break}}}catch(U){o={error:U}}finally{try{A&&!A.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}d||(l=!0)}if(u.length===1&&!l)this.encoders=[u[0]];else{this.encoders=[];var S=0;try{for(var I=$r(u),O=I.next();!O.done;O=I.next()){var m=O.value;this.encoders[S++]=m}}catch(U){c={error:U}}finally{try{O&&!O.done&&(f=I.return)&&f.call(I)}finally{if(c)throw c.error}}}var P=-1;if(t!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&t.name===this.encoders[h].name){P=h;break}}this.priorityEncoderIndex=P}return r.prototype.length=function(){return this.encoders.length},r.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},r.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},r.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},r.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},r.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},r.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return tt.encode(K.getCharAt(e),this.encoders[t].name)},r}(),R0=3,D0=function(){function r(e,t,n){this.fnc1=n;var i=new T0(e,t,n);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,i,n)}return r.prototype.getFNC1Character=function(){return this.fnc1},r.prototype.length=function(){return this.bytes.length},r.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},r.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},r.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new z,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},r.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},r.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},r.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},r.prototype.addEdge=function(e,t,n){(e[t][n.encoderIndex]==null||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},r.prototype.addEdges=function(e,t,n,i,a,o){var s=e.charAt(i).charCodeAt(0),c=0,f=t.length();t.getPriorityEncoderIndex()>=0&&(s===o||t.canEncode(s,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),f=c+1);for(var u=c;u<f;u++)(s===o||t.canEncode(s,u))&&this.addEdge(n,i+1,new xi(s,t,u,a,o))},r.prototype.encodeMinimally=function(e,t,n){var i=e.length,a=new xi[i+1][t.length()];this.addEdges(e,t,a,0,null,n);for(var o=1;o<=i;o++){for(var s=0;s<t.length();s++)a[o][s]!=null&&o<i&&this.addEdges(e,t,a,o,a[o][s],n);for(var s=0;s<t.length();s++)a[o-1][s]=null}for(var c=-1,f=Y.MAX_VALUE,s=0;s<t.length();s++)if(a[i][s]!=null){var u=a[i][s];u.cachedTotalSize<f&&(f=u.cachedTotalSize,c=s)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var l=[],h=a[i][c];h!=null;){if(h.isFNC1())l.unshift(1e3);else for(var d=t.encode(h.c,h.encoderIndex),o=d.length-1;o>=0;o--)l.unshift(d[o]&255);var x=h.previous===null?0:h.previous.encoderIndex;x!==h.encoderIndex&&l.unshift(256+t.getECIValue(h.encoderIndex)),h=h.previous}for(var y=[],o=0;o<y.length;o++)y[o]=l[o];return y},r}(),xi=function(){function r(e,t,n,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:t.encode(e,n).length,s=i===null?0:i.encoderIndex;s!==n&&(o+=R0),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return r.prototype.isFNC1=function(){return this.c===1e3},r}(),P0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();var gi;(function(r){r[r.ASCII=0]="ASCII",r[r.C40=1]="C40",r[r.TEXT=2]="TEXT",r[r.X12=3]="X12",r[r.EDF=4]="EDF",r[r.B256=5]="B256"})(gi||(gi={}));(function(r){P0(e,r);function e(t,n,i,a,o){var s=r.call(this,t,n,i)||this;return s.shape=a,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(D0);var M0=function(){function r(){}return r.prototype.isCompact=function(){return this.compact},r.prototype.setCompact=function(e){this.compact=e},r.prototype.getSize=function(){return this.size},r.prototype.setSize=function(e){this.size=e},r.prototype.getLayers=function(){return this.layers},r.prototype.setLayers=function(e){this.layers=e},r.prototype.getCodeWords=function(){return this.codeWords},r.prototype.setCodeWords=function(e){this.codeWords=e},r.prototype.getMatrix=function(){return this.matrix},r.prototype.setMatrix=function(e){this.matrix=e},r}(),yi=function(){function r(){}return r.singletonList=function(e){return[e]},r.min=function(e,t){return e.sort(t)[0]},r}(),B0=function(){function r(e){this.previous=e}return r.prototype.getPrevious=function(){return this.previous},r}(),F0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pn=function(r){F0(e,r);function e(t,n,i){var a=r.call(this,t)||this;return a.value=n,a.bitCount=i,a}return e.prototype.appendTo=function(t,n){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,n){return new e(this,t,n)},e.prototype.addBinaryShift=function(t,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,n)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Y.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(B0),L0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),k0=function(r){L0(e,r);function e(t,n,i){var a=r.call(this,t,0,0)||this;return a.binaryShiftStart=n,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,n){return new e(this,t,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(pn);function j0(r,e,t){return new k0(r,e,t)}function tr(r,e,t){return new pn(r,e,t)}var U0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],xt=0,Tr=1,et=2,Fi=3,ft=4,V0=new pn(null,0,0),Yr=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],H0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function G0(r){var e,t;try{for(var n=H0(r),i=n.next();!i.done;i=n.next()){var a=i.value;Pe.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r[xt][ft]=0,r[Tr][ft]=0,r[Tr][xt]=28,r[Fi][ft]=0,r[et][ft]=0,r[et][xt]=15,r}var Li=G0(Pe.createInt32Array(6,6)),X0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W0=function(){function r(e,t,n,i){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=i}return r.prototype.getMode=function(){return this.mode},r.prototype.getToken=function(){return this.token},r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},r.prototype.getBitCount=function(){return this.bitCount},r.prototype.latchAndAppend=function(e,t){var n=this.bitCount,i=this.token;if(e!==this.mode){var a=Yr[this.mode][e];i=tr(i,a&65535,a>>16),n+=a>>16}var o=e===et?4:5;return i=tr(i,t,o),new r(i,e,0,n+o)},r.prototype.shiftAndAppend=function(e,t){var n=this.token,i=this.mode===et?4:5;return n=tr(n,Li[this.mode][e],i),n=tr(n,t,5),new r(n,this.mode,0,this.bitCount+i+5)},r.prototype.addBinaryShiftChar=function(e){var t=this.token,n=this.mode,i=this.bitCount;if(this.mode===ft||this.mode===et){var a=Yr[n][xt];t=tr(t,a&65535,a>>16),i+=a>>16,n=xt}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new r(t,n,this.binaryShiftByteCount+1,i+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},r.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=j0(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new r(t,this.mode,0,this.bitCount)},r.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Yr[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=r.calculateBinaryShiftCost(e)-r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},r.prototype.toBitArray=function(e){for(var t,n,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new ke;try{for(var s=X0(i),c=s.next();!c.done;c=s.next()){var f=c.value;f.appendTo(o,e)}}catch(u){t={error:u}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},r.prototype.toString=function(){return K.format("%s bits=%d bytes=%d",U0[this.mode],this.bitCount,this.binaryShiftByteCount)},r.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},r.INITIAL_STATE=new r(V0,xt,0,0),r}();function z0(r){var e=K.getCharCode(" "),t=K.getCharCode("."),n=K.getCharCode(",");r[xt][e]=1;for(var i=K.getCharCode("Z"),a=K.getCharCode("A"),o=a;o<=i;o++)r[xt][o]=o-a+2;r[Tr][e]=1;for(var s=K.getCharCode("z"),c=K.getCharCode("a"),o=c;o<=s;o++)r[Tr][o]=o-c+2;r[et][e]=1;for(var f=K.getCharCode("9"),u=K.getCharCode("0"),o=u;o<=f;o++)r[et][o]=o-u+2;r[et][n]=12,r[et][t]=13;for(var l=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<l.length;h++)r[Fi][K.getCharCode(l[h])]=h;for(var d=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<d.length;h++)K.getCharCode(d[h])>0&&(r[ft][K.getCharCode(d[h])]=h);return r}var Zr=z0(Pe.createInt32Array(5,256)),mr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$0=function(){function r(e){this.text=e}return r.prototype.encode=function(){for(var e=K.getCharCode(" "),t=K.getCharCode(`
`),n=yi.singletonList(W0.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case K.getCharCode("\r"):a=o===t?2:0;break;case K.getCharCode("."):a=o===e?3:0;break;case K.getCharCode(","):a=o===e?4:0;break;case K.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(n=r.updateStateListForPair(n,i,a),i++):n=this.updateStateListForChar(n,i)}var s=yi.min(n,function(c,f){return c.getBitCount()-f.getBitCount()});return s.toBitArray(this.text)},r.prototype.updateStateListForChar=function(e,t){var n,i,a=[];try{for(var o=mr(e),s=o.next();!s.done;s=o.next()){var c=s.value;this.updateStateForChar(c,t,a)}}catch(f){n={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r.simplifyStates(a)},r.prototype.updateStateForChar=function(e,t,n){for(var i=this.text[t]&255,a=Zr[e.getMode()][i]>0,o=null,s=0;s<=ft;s++){var c=Zr[s][i];if(c>0){if(o==null&&(o=e.endBinaryShift(t)),!a||s===e.getMode()||s===et){var f=o.latchAndAppend(s,c);n.push(f)}if(!a&&Li[e.getMode()][s]>=0){var u=o.shiftAndAppend(s,c);n.push(u)}}}if(e.getBinaryShiftByteCount()>0||Zr[e.getMode()][i]===0){var l=e.addBinaryShiftChar(t);n.push(l)}},r.updateStateListForPair=function(e,t,n){var i,a,o=[];try{for(var s=mr(e),c=s.next();!c.done;c=s.next()){var f=c.value;this.updateStateForPair(f,t,n,o)}}catch(u){i={error:u}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(o)},r.updateStateForPair=function(e,t,n,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(ft,n)),e.getMode()!==ft&&i.push(a.shiftAndAppend(ft,n)),n===3||n===4){var o=a.latchAndAppend(et,16-n).latchAndAppend(et,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(s)}},r.simplifyStates=function(e){var t,n,i,a,o=[];try{for(var s=mr(e),c=s.next();!c.done;c=s.next()){var f=c.value,u=!0,l=function(m){if(m.isBetterThanOrEqualTo(f))return u=!1,"break";f.isBetterThanOrEqualTo(m)&&(o=o.filter(function(_){return _!==m}))};try{for(var h=(i=void 0,mr(o)),d=h.next();!d.done;d=h.next()){var x=d.value,y=l(x);if(y==="break")break}}catch(m){i={error:m}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}u&&o.push(f)}}catch(m){t={error:m}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},r}(),Y0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.encodeBytes=function(e){return r.encode(e,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)},r.encode=function(e,t,n){var i=new $0(e).encode(),a=Y.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+a,s,c,f,u,l;if(n!==r.DEFAULT_AZTEC_LAYERS){if(s=n<0,c=Math.abs(n),c>(s?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS))throw new j(K.format("Illegal value %s for layers",n));f=r.totalBitsInLayer(c,s),u=r.WORD_SIZE[c];var h=f-f%u;if(l=r.stuffBits(i,u),l.getSize()+a>h)throw new j("Data to large for user specified layer");if(s&&l.getSize()>u*64)throw new j("Data to large for user specified layer")}else{u=0,l=null;for(var d=0;;d++){if(d>r.MAX_NB_BITS)throw new j("Data too large for an Aztec code");if(s=d<=3,c=s?d+1:d,f=r.totalBitsInLayer(c,s),!(o>f)){(l==null||u!==r.WORD_SIZE[c])&&(u=r.WORD_SIZE[c],l=r.stuffBits(i,u));var h=f-f%u;if(!(s&&l.getSize()>u*64)&&l.getSize()+a<=h)break}}}var x=r.generateCheckWords(l,f,u),y=l.getSize()/u,m=r.generateModeMessage(s,c,y),_=(s?11:14)+c*4,w=new Int32Array(_),C;if(s){C=_;for(var d=0;d<w.length;d++)w[d]=d}else{C=_+1+2*Y.truncDivision(Y.truncDivision(_,2)-1,15);for(var A=Y.truncDivision(_,2),S=Y.truncDivision(C,2),d=0;d<A;d++){var I=d+Y.truncDivision(d,15);w[A-d-1]=S-I-1,w[A+d]=S+I+1}}for(var O=new ut(C),d=0,P=0;d<c;d++){for(var U=(c-d)*4+(s?9:12),F=0;F<U;F++)for(var de=F*2,$=0;$<2;$++)x.get(P+de+$)&&O.set(w[d*2+$],w[d*2+F]),x.get(P+U*2+de+$)&&O.set(w[d*2+F],w[_-1-d*2-$]),x.get(P+U*4+de+$)&&O.set(w[_-1-d*2-$],w[_-1-d*2-F]),x.get(P+U*6+de+$)&&O.set(w[_-1-d*2-F],w[d*2+$]);P+=U*8}if(r.drawModeMessage(O,s,C,m),s)r.drawBullsEye(O,Y.truncDivision(C,2),5);else{r.drawBullsEye(O,Y.truncDivision(C,2),7);for(var d=0,F=0;d<Y.truncDivision(_,2)-1;d+=15,F+=16)for(var $=Y.truncDivision(C,2)&1;$<C;$+=2)O.set(Y.truncDivision(C,2)-F,$),O.set(Y.truncDivision(C,2)+F,$),O.set($,Y.truncDivision(C,2)-F),O.set($,Y.truncDivision(C,2)+F)}var G=new M0;return G.setCompact(s),G.setSize(C),G.setLayers(c),G.setCodeWords(y),G.setMatrix(O),G},r.drawBullsEye=function(e,t,n){for(var i=0;i<n;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},r.generateModeMessage=function(e,t,n){var i=new ke;return e?(i.appendBits(t-1,2),i.appendBits(n-1,6),i=r.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(n-1,11),i=r.generateCheckWords(i,40,4)),i},r.drawModeMessage=function(e,t,n,i){var a=Y.truncDivision(n,2);if(t)for(var o=0;o<7;o++){var s=a-3+o;i.get(o)&&e.set(s,a-5),i.get(o+7)&&e.set(a+5,s),i.get(20-o)&&e.set(s,a+5),i.get(27-o)&&e.set(a-5,s)}else for(var o=0;o<10;o++){var s=a-5+o+Y.truncDivision(o,5);i.get(o)&&e.set(s,a-7),i.get(o+10)&&e.set(a+7,s),i.get(29-o)&&e.set(s,a+7),i.get(39-o)&&e.set(a-7,s)}},r.generateCheckWords=function(e,t,n){var i,a,o=e.getSize()/n,s=new Mi(r.getGF(n)),c=Y.truncDivision(t,n),f=r.bitsToWords(e,n,c);s.encode(f,c-o);var u=t%n,l=new ke;l.appendBits(0,u);try{for(var h=Y0(Array.from(f)),d=h.next();!d.done;d=h.next()){var x=d.value;l.appendBits(x,n)}}catch(y){i={error:y}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l},r.bitsToWords=function(e,t,n){var i=new Int32Array(n),a,o;for(a=0,o=e.getSize()/t;a<o;a++){for(var s=0,c=0;c<t;c++)s|=e.get(a*t+c)?1<<t-c-1:0;i[a]=s}return i},r.getGF=function(e){switch(e){case 4:return Qe.AZTEC_PARAM;case 6:return Qe.AZTEC_DATA_6;case 8:return Qe.AZTEC_DATA_8;case 10:return Qe.AZTEC_DATA_10;case 12:return Qe.AZTEC_DATA_12;default:throw new j("Unsupported word size "+e)}},r.stuffBits=function(e,t){for(var n=new ke,i=e.getSize(),a=(1<<t)-2,o=0;o<i;o+=t){for(var s=0,c=0;c<t;c++)(o+c>=i||e.get(o+c))&&(s|=1<<t-1-c);(s&a)===a?(n.appendBits(s&a,t),o--):s&a?n.appendBits(s,t):(n.appendBits(s|1,t),o--)}return n},r.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.DEFAULT_EC_PERCENT=33,r.DEFAULT_AZTEC_LAYERS=0,r.MAX_NB_BITS=32,r.MAX_NB_BITS_COMPACT=4,r.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),r})();var Z0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Q0=function(r){Z0(e,r);function e(t){var n=r.call(this,t.width,t.height)||this;return n.canvas=t,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(t),n}return e.makeBufferFromCanvasImageData=function(t){var n;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var i=n.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,n,i){for(var a=new Uint8ClampedArray(n*i),o=0,s=0,c=t.length;o<c;o+=4,s++){var f=void 0,u=t[o+3];if(u===0)f=255;else{var l=t[o],h=t[o+1],d=t[o+2];f=306*l+601*h+117*d+512>>10}a[s]=f}return a},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new j("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return n===null?n=this.buffer.slice(a,a+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(a,a+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,a){return r.prototype.crop.call(this,t,n,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Rr(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*o),c=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*o);n.width=s,n.height=c;var f=n.getContext("2d");if(!f)throw new Error("Could not create a Canvas Context element.");return f.translate(s/2,c/2),f.rotate(i),f.drawImage(this.canvas,a/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(or);function ki(){return typeof navigator<"u"}function K0(){return ki()&&!!navigator.mediaDevices}function J0(){return!!(K0()&&navigator.mediaDevices.enumerateDevices)}var Ft=function(){return Ft=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ft.apply(this,arguments)},ge=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{f(n.next(u))}catch(l){o(l)}}function c(u){try{f(n.throw(u))}catch(l){o(l)}}function f(u){u.done?a(u.value):i(u.value).then(s,c)}f((n=n.apply(r,e||[])).next())})},ye=function(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(u){return c([f,u])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(u){f=[6,u],i=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Qr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q0={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},jt=function(){function r(e,t,n){t===void 0&&(t=new Map),n===void 0&&(n={}),this.reader=e,this.hints=t,this.options=Ft(Ft({},q0),n)}return Object.defineProperty(r.prototype,"possibleFormats",{set:function(e){this.hints.set(ce.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),r.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},r.mediaStreamSetTorch=function(e,t){return ge(this,void 0,void 0,function(){return ye(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return n.sent(),[2]}})})},r.mediaStreamIsTorchCompatible=function(e){var t,n,i=e.getVideoTracks();try{for(var a=Qr(i),o=a.next();!o.done;o=a.next()){var s=o.value;if(r.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!1},r.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},r.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},r.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new Ae("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new Ae("element with id '".concat(e,"' must be an ").concat(t," element"));return n},r.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return r.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},r.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return r.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},r.prepareVideoElement=function(e){var t=r.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.createBinaryBitmapFromCanvas=function(e){var t=new Q0(e),n=new Ai(t);return new _i(n)},r.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},r.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},r.createCaptureCanvas=function(e){if(!e)throw new Ae("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),n=r.getMediaElementDimensions(e),i=n.width,a=n.height;return t.style.width=i+"px",t.style.height=a+"px",t.width=i,t.height=a,t},r.tryPlayVideo=function(e){return ge(this,void 0,void 0,function(){var t;return ye(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(r.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return t=n.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},r.createCanvasFromMediaElement=function(e){var t=r.createCaptureCanvas(e),n=t.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return r.drawImageOnCanvas(n,e),t},r.createBinaryBitmapFromMediaElem=function(e){var t=r.createCanvasFromMediaElement(e);return r.createBinaryBitmapFromCanvas(t)},r.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},r.listVideoInputDevices=function(){return ge(this,void 0,void 0,function(){var e,t,n,i,a,o,s,c,f,u,l,h;return ye(this,function(d){switch(d.label){case 0:if(!ki())throw new Error("Can't enumerate devices, navigator is not present.");if(!J0())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=d.sent(),t=[];try{for(n=Qr(e),i=n.next();!i.done;i=n.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(s=a.deviceId||a.id,c=a.label||"Video device ".concat(t.length+1),f=a.groupId,u={deviceId:s,label:c,kind:o,groupId:f},t.push(u))}catch(x){l={error:x}}finally{try{i&&!i.done&&(h=n.return)&&h.call(n)}finally{if(l)throw l.error}}return[2,t]}})})},r.findDeviceById=function(e){return ge(this,void 0,void 0,function(){var t;return ye(this,function(n){switch(n.label){case 0:return[4,r.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},r.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},r.releaseAllStreams=function(){r.streamTracker.length!==0&&r.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),r.streamTracker=[]},r.playVideoOnLoadAsync=function(e,t){return ge(this,void 0,void 0,function(){var n;return ye(this,function(i){switch(i.label){case 0:return[4,r.tryPlayVideo(e)];case 1:return n=i.sent(),n?[2,!0]:[2,new Promise(function(a,o){var s=setTimeout(function(){r.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",c))},t),c=function(){r.tryPlayVideo(e).then(function(f){clearTimeout(s),e.removeEventListener("canplay",c),a(f)})};e.addEventListener("canplay",c)})]}})})},r.attachStreamToVideo=function(e,t,n){return n===void 0&&(n=5e3),ge(this,void 0,void 0,function(){var i;return ye(this,function(a){switch(a.label){case 0:return i=r.prepareVideoElement(t),r.addVideoSource(i,e),[4,r.playVideoOnLoadAsync(i,n)];case 1:return a.sent(),[2,i]}})})},r._waitImageLoad=function(e){return new Promise(function(t,n){var i=1e4,a=setTimeout(function(){r.isImageLoaded(e)||(e.removeEventListener("load",o),n())},i),o=function(){clearTimeout(a),e.removeEventListener("load",o),t()};e.addEventListener("load",o)})},r.checkCallbackFnOrThrow=function(e){if(!e)throw new Ae("`callbackFn` is a required parameter, you cannot capture results without it.")},r.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},r.prototype.decode=function(e){var t=r.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},r.prototype.decodeFromCanvas=function(e){var t=r.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},r.prototype.decodeFromImageElement=function(e){return ge(this,void 0,void 0,function(){var t;return ye(this,function(n){switch(n.label){case 0:if(!e)throw new Ae("An image element must be provided.");return t=r.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeFromImageUrl=function(e){return ge(this,void 0,void 0,function(){var t;return ye(this,function(n){switch(n.label){case 0:if(!e)throw new Ae("An URL must be provided.");t=r.prepareImageElement(),t.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,n.sent()];case 3:return r.destroyImageElement(t),[7];case 4:return[2]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return ge(this,void 0,void 0,function(){var i,a;return ye(this,function(o){switch(o.label){case 0:return r.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,n)];case 3:return[2,o.sent()];case 4:throw a=o.sent(),r.disposeMediaStream(i),a;case 5:return[2]}})})},r.prototype.decodeFromStream=function(e,t,n){return ge(this,void 0,void 0,function(){var i,a,o,s,c,f,u,l,h,d=this;return ye(this,function(x){switch(x.label){case 0:return r.checkCallbackFnOrThrow(n),i=this.options.tryPlayVideoTimeout,[4,r.attachStreamToVideo(e,t,i)];case 1:return a=x.sent(),o=function(){r.disposeMediaStream(e),r.cleanVideoSource(a)},s=this.scan(a,n,o),c=e.getVideoTracks(),f=Ft(Ft({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(y,m){return ge(this,void 0,void 0,function(){var _,w,C,A,S,I,O;return ye(this,function(P){switch(P.label){case 0:_=m?c.filter(m):c,P.label=1;case 1:P.trys.push([1,6,7,8]),w=Qr(_),C=w.next(),P.label=2;case 2:return C.done?[3,5]:(A=C.value,[4,A.applyConstraints(y)]);case 3:P.sent(),P.label=4;case 4:return C=w.next(),[3,2];case 5:return[3,8];case 6:return S=P.sent(),I={error:S},[3,8];case 7:try{C&&!C.done&&(O=w.return)&&O.call(w)}finally{if(I)throw I.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(y){return c.find(y).getConstraints()},streamVideoSettingsGet:function(y){return c.find(y).getSettings()},streamVideoCapabilitiesGet:function(y){return c.find(y).getCapabilities()}}),u=r.mediaStreamIsTorchCompatible(e),u&&(l=c==null?void 0:c.find(function(y){return r.mediaStreamIsTorchCompatibleTrack(y)}),h=function(y){return ge(d,void 0,void 0,function(){return ye(this,function(m){switch(m.label){case 0:return[4,r.mediaStreamSetTorch(l,y)];case 1:return m.sent(),[2]}})})},f.switchTorch=h,f.stop=function(){return ge(d,void 0,void 0,function(){return ye(this,function(y){switch(y.label){case 0:return s.stop(),[4,h(!1)];case 1:return y.sent(),[2]}})})}),[2,f]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return ge(this,void 0,void 0,function(){var i,a;return ye(this,function(o){switch(o.label){case 0:return r.checkCallbackFnOrThrow(n),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,n)];case 1:return[2,o.sent()]}})})},r.prototype.decodeFromVideoElement=function(e,t){return ge(this,void 0,void 0,function(){var n,i;return ye(this,function(a){switch(a.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new Ae("A video element must be provided.");return n=r.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,i)];case 1:return a.sent(),[2,this.scan(n,t)]}})})},r.prototype.decodeFromVideoUrl=function(e,t){return ge(this,void 0,void 0,function(){var n,i,a,o;return ye(this,function(s){switch(s.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new Ae("An URL must be provided.");return n=r.prepareVideoElement(),n.src=e,i=function(){r.cleanVideoSource(n)},a=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),o=this.scan(n,t,i),[2,o]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return ge(this,void 0,void 0,function(){var n;return ye(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return ge(this,void 0,void 0,function(){var n,i,a;return ye(this,function(o){switch(o.label){case 0:return n=!!t,[4,r.attachStreamToVideo(e,t)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=o.sent(),[2,a];case 4:return n||r.cleanVideoSource(i),[7];case 5:return[2]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return ge(this,void 0,void 0,function(){var n,i;return ye(this,function(a){switch(a.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},r.prototype.decodeOnceFromVideoElement=function(e){return ge(this,void 0,void 0,function(){var t,n;return ye(this,function(i){switch(i.label){case 0:if(!e)throw new Ae("A video element must be provided.");return t=r.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(t,n)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromVideoUrl=function(e){return ge(this,void 0,void 0,function(){var t,n;return ye(this,function(i){switch(i.label){case 0:if(!e)throw new Ae("An URL must be provided.");t=r.prepareVideoElement(),t.src=e,n=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,n];case 2:return[2,i.sent()];case 3:return r.cleanVideoSource(t),[7];case 4:return[2]}})})},r.prototype.scanOneResult=function(e,t,n,i){var a=this;return t===void 0&&(t=!0),n===void 0&&(n=!0),i===void 0&&(i=!0),new Promise(function(o,s){a.scan(e,function(c,f,u){if(c){o(c),u.stop();return}if(f){if(f instanceof b&&t||f instanceof Ee&&n||f instanceof R&&i)return;u.stop(),s(f)}})})},r.prototype.scan=function(e,t,n){var i=this;r.checkCallbackFnOrThrow(t);var a=r.createCaptureCanvas(e),o;try{o=a.getContext("2d",{willReadFrequently:!0})}catch{o=a.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){o=void 0,a=void 0},c=!1,f,u=function(){c=!0,clearTimeout(f),s(),n&&n()},l={stop:u},h=function(){if(!c)try{r.drawImageOnCanvas(o,e);var d=i.decodeFromCanvas(a);t(d,void 0,l),f=setTimeout(h,i.options.delayBetweenScanSuccess)}catch(_){t(void 0,_,l);var x=_ instanceof Ee,y=_ instanceof R,m=_ instanceof b;if(x||y||m){f=setTimeout(h,i.options.delayBetweenScanAttempts);return}s(),n&&n(_)}};return h(),l},r.prototype._decodeOnLoadImage=function(e){return ge(this,void 0,void 0,function(){var t;return ye(this,function(n){switch(n.label){case 0:return t=r.isImageLoaded(e),t?[3,2]:[4,r._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},r.prototype.getUserMedia=function(e){return ge(this,void 0,void 0,function(){var t;return ye(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=n.sent(),r.streamTracker.push(t),[2,t]}})})},r.streamTracker=[],r}(),ec=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){ec(e,r);function e(t,n){return r.call(this,new br,t,n)||this}return e})(jt);var tc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){tc(e,r);function e(t,n){return r.call(this,new Mt(t),t,n)||this}return e})(jt);var rc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){rc(e,r);function e(t,n){return r.call(this,new Ir,t,n)||this}return e})(jt);var nc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){nc(e,r);function e(t,n){var i=this,a=new Pi;return a.setHints(t),i=r.call(this,a,t,n)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(ce.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(jt);var ic=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){ic(e,r);function e(t,n){return r.call(this,new Or,t,n)||this}return e})(jt);var ac=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mi=function(r){ac(e,r);function e(t,n){return r.call(this,new Nr,t,n)||this}return e}(jt);const lc=()=>{const{user:r,logout:e}=ra(),[t,n]=ae.useState(!1),[i,a]=ae.useState(!1),[o,s]=ae.useState(null),[c,f]=ae.useState(null),[u,l]=ae.useState(!1),[h,d]=ae.useState([]),[x,y]=ae.useState([]),[m,_]=ae.useState("scanner"),[w,C]=ae.useState(!1),[A,S]=ae.useState({}),[I,O]=ae.useState({}),[P,U]=ae.useState(new Set),[F,de]=ae.useState({}),[$,G]=ae.useState([]),[be,Je]=ae.useState(!1),[gt,yt]=ae.useState(""),[st,Mr]=ae.useState([]),[Ut,cr]=ae.useState(!1),[rt,Vt]=ae.useState(""),fr=ae.useRef(null),ct=ae.useRef(null),nt=ae.useRef(null),ur=ae.useRef(null),Ht=ae.useRef(null),bt=ae.useRef(null),M=p=>P.has(p),me=p=>F[p]||null;ae.useEffect(()=>{if(console.log("🔍 [SecretaryDashboard] User role check:",r==null?void 0:r.role),r&&r.role!=="secretary"){console.log("❌ [SecretaryDashboard] User is not secretary, showing error"),te.error("Δεν έχετε δικαίωμα πρόσβασης σε αυτή τη σελίδα");return}console.log("✅ [SecretaryDashboard] User is secretary, proceeding")},[r]),ae.useEffect(()=>{lr()},[]),ae.useEffect(()=>{m==="membership-requests"?St():m==="installments"?Gt():m==="ultimate-installments"&&It()},[m]),ae.useEffect(()=>{t&&(console.log("🎬 [UI] Video container rendering - isScanning:",t,"isVideoReady:",i,"cameraError:",o),console.log("🎬 [UI] webcamRef.current:",fr.current))},[t,i,o]);const lr=async()=>{try{const{data:p,error:N}=await lt.from("scan_audit_logs").select("*").order("created_at",{ascending:!1}).limit(10);if(N)throw N;const D=(p==null?void 0:p.map(W=>W.user_id))||[],{data:T,error:V}=await lt.from("user_profiles").select("user_id, first_name, last_name, email").in("user_id",D);if(V)throw V;const X=(p==null?void 0:p.map(W=>({...W,user_profiles:T==null?void 0:T.find(fe=>fe.user_id===W.user_id)})))||[];d(X)}catch(p){console.error("Error loading recent scans:",p)}},St=async()=>{try{C(!0);const p=await jr();y(p)}catch(p){console.error("Error loading membership requests:",p),te.error("Σφάλμα κατά τη φόρτωση των αιτημάτων")}finally{C(!1)}},Gt=async()=>{try{Je(!0);const N=(await jr()).filter(D=>{var T;return((T=D.package)==null?void 0:T.name)==="Ultimate"&&D.has_installments});G(N)}catch(p){console.error("Error loading installment requests:",p),te.error("Σφάλμα κατά τη φόρτωση των αιτημάτων δόσεων")}finally{Je(!1)}},xn=async(p,N,D,T,V,X,W,fe,Ce,je)=>{try{const k={installment_1_amount:N,installment_2_amount:D,installment_3_amount:T,installment_1_payment_method:V,installment_2_payment_method:X,installment_3_payment_method:W};fe&&(k.installment_1_due_date=fe),Ce&&(k.installment_2_due_date=Ce),je&&(k.installment_3_due_date=je);const{error:Z}=await lt.from("membership_requests").update(k).eq("id",p);if(Z)throw Z;te.success("Οι δόσεις και ημερομηνίες ενημερώθηκαν επιτυχώς"),await Gt()}catch(k){console.error("Error updating installment amounts:",k),te.error("Σφάλμα κατά την ενημέρωση των δόσεων")}},ji=async p=>{try{const{error:N}=await lt.from("membership_requests").delete().eq("id",p);if(N)throw N;te.success("Το αίτημα δόσεων διαγράφηκε επιτυχώς"),await Gt()}catch(N){console.error("Error deleting installment request:",N),te.error("Σφάλμα κατά τη διαγραφή του αιτήματος")}},It=async()=>{try{cr(!0);const N=(await jr()).filter(D=>{var T;return((T=D.package)==null?void 0:T.name)==="Ultimate"});Mr(N)}catch(p){console.error("Error loading ultimate requests:",p),te.error("Σφάλμα κατά τη φόρτωση των Ultimate αιτημάτων")}finally{cr(!1)}},Ui=async p=>{try{const{error:N}=await lt.from("membership_requests").delete().eq("id",p);if(N)throw N;te.success("Το Ultimate αίτημα διαγράφηκε επιτυχώς"),await It()}catch(N){console.error("Error deleting ultimate request:",N),te.error("Σφάλμα κατά τη διαγραφή του Ultimate αιτήματος")}},Br=async p=>{var N;try{C(!0);const T=[...x,...st].find(X=>X.id===p);if(((N=T==null?void 0:T.package)==null?void 0:N.name)==="Ultimate"){const{approveUltimateMembershipRequest:X}=await vr(async()=>{const{approveUltimateMembershipRequest:fe}=await import("./membershipApi-D4OFDNqq.js");return{approveUltimateMembershipRequest:fe}},__vite__mapDeps([0,1,2]));await X(p)&&(te.success("Το Ultimate αίτημα εγκρίθηκε επιτυχώς! Δημιουργήθηκαν 2 συνδρομές: Pilates + Free Gym"),m==="ultimate-installments"?It():St())}else await aa(p)&&(te.success("Το αίτημα εγκρίθηκε επιτυχώς!"),St())}catch(D){console.error("Error approving request:",D),te.error("Σφάλμα κατά την έγκριση του αιτήματος")}finally{C(!1)}},Fr=async p=>{const N=prompt("Παρακαλώ εισάγετε τον λόγο απόρριψης:");if(N)try{C(!0),await oa(p,N)&&(te.success("Το αίτημα απορρίφθηκε επιτυχώς!"),m==="ultimate-installments"?It():St())}catch(D){console.error("Error rejecting request:",D),te.error("Σφάλμα κατά την απόρριψη του αιτήματος")}finally{C(!1)}},we=(p,N,D)=>{S(T=>({...T,[p]:{...T[p],[N]:D}}))},Nt=(p,N)=>{O(D=>({...D,[p]:N}))},gn=async p=>{const N=I[p];if(N==="none"||!r){te.error("Παρακαλώ επιλέξτε μια κατάσταση έγκρισης");return}try{C(!0);const D=A[p];if(!D){te.error("Δεν υπάρχουν επιλογές για αυτό το αίτημα");return}let T=x.find(X=>X.id===p);if(T||(T=st.find(X=>X.id===p)),!T){te.error("Αίτημα δεν βρέθηκε");return}if(await sa(T.user_id,N,{oldMembersUsed:D.oldMembers||!1,kettlebellPoints:D.kettlebellPoints?parseInt(D.kettlebellPoints):0,cashAmount:D.cashAmount||0,posAmount:D.posAmount||0,createdBy:r.id,notes:`Program options saved for membership request ${p} with ${N} status`})){if(console.log(`Program approval state saved for membership request: ${p}`),N==="pending"){const W=new Set(P),fe={...F};W.add(p),fe[p]=D,U(W),de(fe),te("Program Options τοποθετήθηκαν στην αναμονή - οι επιλογές παγώθηκαν",{icon:"⏳"})}else if(N==="approved"&&await Vi(p,T.user_id,D),M(p)){const W=new Set(P),fe={...F};W.delete(p),delete fe[p],U(W),de(fe)}O(W=>({...W,[p]:"none"}));const X={approved:"εγκρίθηκε και εκτελέστηκαν οι ενέργειες",rejected:"απορρίφθηκε",pending:"τοποθετήθηκε στην αναμονή"};te.success(`Program Options ${X[N]} επιτυχώς!`)}else te.error("Σφάλμα κατά την αποθήκευση των Program Options")}catch(D){console.error("Error saving request program options:",D),te.error("Σφάλμα κατά την αποθήκευση των Program Options")}finally{C(!1)}},Vi=async(p,N,D)=>{console.log("Executing approved program actions for membership request:",p);try{D.oldMembers&&(await ca(N,(r==null?void 0:r.id)||"")?console.log(`[APPROVED] Old Members marked as used for membership request: ${p}`):console.warn(`[APPROVED] Failed to mark Old Members as used for membership request: ${p}`)),D.kettlebellPoints&&parseInt(D.kettlebellPoints)>0&&(await fa(N,parseInt(D.kettlebellPoints),void 0,(r==null?void 0:r.id)||"")?console.log(`[APPROVED] Kettlebell Points saved for membership request: ${p}, Points: ${D.kettlebellPoints}`):console.warn(`[APPROVED] Failed to save Kettlebell Points for membership request: ${p}`)),D.cashAmount&&D.cashAmount>0&&(await Ln(N,D.cashAmount,"cash",void 0,(r==null?void 0:r.id)||"","Cash transaction from approved membership request")?console.log(`[APPROVED] Cash transaction saved for membership request: ${p}, Amount: €${D.cashAmount}`):console.warn(`[APPROVED] Failed to save Cash transaction for membership request: ${p}`)),D.posAmount&&D.posAmount>0&&(await Ln(N,D.posAmount,"pos",void 0,(r==null?void 0:r.id)||"","POS transaction from approved membership request")?console.log(`[APPROVED] POS transaction saved for membership request: ${p}, Amount: €${D.posAmount}`):console.warn(`[APPROVED] Failed to save POS transaction for membership request: ${p}`)),te.success("Έγιναν όλες οι απαραίτητες ενέργειες για το εγκεκριμένο αίτημα!")}catch(T){console.error("Error executing approved program actions for membership request:",T),te.error("Σφάλμα κατά την εκτέλεση των ενεργειών")}},yn=()=>{try{console.log("🎥 [Camera] Starting camera initialization..."),console.log("🎥 [Camera] Current states - isScanning:",t,"isVideoReady:",i,"cameraError:",o),s(null),a(!1),n(!0),f(null),l(!1),console.log("🎥 [Camera] Initializing ZXing continuous reader..."),setTimeout(()=>{Hi()},500)}catch(p){console.error("❌ [Camera] Error starting scanning:",p);const N=p instanceof Error?p.message:"Άγνωστο σφάλμα";s(`Δεν ήταν δυνατή η έναρξη της σάρωσης: ${N}`),te.error("Δεν ήταν δυνατή η έναρξη της σάρωσης")}},mt=()=>{var p;console.log("🛑 [Camera] Stopping scanning..."),ct.current&&(clearInterval(ct.current),ct.current=null),n(!1),a(!1),s(null);try{try{(p=Ht.current)==null||p.stop()}catch{}const N=nt.current,D=N==null?void 0:N.srcObject;D==null||D.getTracks().forEach(T=>T.stop()),N&&(N.srcObject=null)}catch(N){console.log("🧹 [Camera] Cleanup error:",N)}},Hi=async()=>{try{if(console.log("🔍 [QR Scanner] Starting continuous ZXing via BrowserQRCodeReader..."),!nt.current){console.log("❌ [QR Scanner] videoRef not available");return}const p=new mi;ur.current=p;const N=await mi.listVideoInputDevices();console.log("🎥 [Camera] Found devices:",N.map(V=>{var X;return{id:(X=V.deviceId)==null?void 0:X.slice(-6),label:V.label}}));const D=N.find(V=>/back|rear|environment/i.test(V.label))||N[N.length-1],T=(D==null?void 0:D.deviceId)||void 0;T||console.warn("⚠️ [Camera] No camera deviceId resolved, falling back to default."),await p.decodeFromVideoDevice(T,nt.current,async(V,X,W)=>{var fe;if(Ht.current=W,V){const Ce=V.getText();console.log("✅ [QR Scanner] ZXing stream detected:",Ce);try{const je=((fe=V==null?void 0:V.getResultPoints)==null?void 0:fe.call(V))||[];je&&je.length>=3?dr(je.map(k=>({x:k.getX?k.getX():k.x,y:k.getY?k.getY():k.y})),"rgba(16,185,129,0.9)"):wn("rgba(16,185,129,0.9)")}catch{}await Ot(Ce),W.stop(),mt()}else X&&Date.now()%2e3<50&&console.log("ℹ️ [QR Scanner] No code in frame yet. err:",(X==null?void 0:X.name)||X)}),a(!0),ct.current||Gi()}catch(p){console.error("❌ [QR Scanner] Error starting continuous ZXing:",p),s("Αποτυχία εκκίνησης ZXing reader")}},Gi=()=>{if(console.log("🔍 [QR Scanner] Starting scan loop with ZXing..."),!nt.current){console.log("❌ [QR Scanner] Video element not available");return}ct.current&&clearInterval(ct.current);const p=new Map;p.set(ce.POSSIBLE_FORMATS,[L.QR_CODE]);const N=new Qs(p,100);N.timeBetweenDecodingAttempts=80,ct.current=setInterval(async()=>{var D;if(!nt.current){console.log("🔍 [QR Scanner] Video element not available, stopping scan");return}try{const T=nt.current;if(!T||T.readyState<2){console.log("🔍 [QR Scanner] Video element not ready");return}const V=T.videoWidth,X=T.videoHeight;if(!V||!X){console.log("🔍 [QR Scanner] Invalid video dimensions");return}const W=document.createElement("canvas"),fe=W.getContext("2d",{willReadFrequently:!0});if(W.width=V,W.height=X,!fe){console.log("🔍 [QR Scanner] Canvas 2D context not available");return}fe.drawImage(T,0,0,V,X);const Ce=fe.getImageData(0,0,V,X),je=new ImageData(new Uint8ClampedArray(Ce.data),Ce.width,Ce.height);console.log("🔍 [QR Scanner] Captured frame from video:",V,"x",X);try{const k=Ce.data;let Z=0;for(let H=0;H<k.length;H+=4){const _e=k[H],Se=k[H+1],he=k[H+2],Ie=_e*.299+Se*.587+he*.114|0;k[H]=Ie,k[H+1]=Ie,k[H+2]=Ie,Z+=Ie}const ue=Z/(k.length/4),q=ue*.9;for(let H=0;H<k.length;H+=4){const _e=k[H]>q?255:0;k[H]=_e,k[H+1]=_e,k[H+2]=_e}fe.putImageData(Ce,0,0),console.log("🔍 [QR Scanner] Applied grayscale+threshold. Avg:",Math.round(ue),"Threshold:",Math.round(q))}catch(k){console.log("🔍 [QR Scanner] Preprocess error (grayscale/threshold):",k)}try{const Z=(await vr(()=>import("./jsQR-DY6PGUYO.js").then(q=>q.j),__vite__mapDeps([3,1,2]))).default;console.log("🔍 [QR Scanner] jsQR analyzing ORIGINAL (dontInvert/attemptBoth)...");const ue=["dontInvert","attemptBoth"];for(const q of ue){const H=Z(je.data,V,X,{inversionAttempts:q});if(H&&H.data){try{dr([H.location.topLeftCorner,H.location.topRightCorner,H.location.bottomRightCorner,H.location.bottomLeftCorner],"rgba(16,185,129,0.9)",V,X)}catch{}console.log(`✅ [QR Scanner] jsQR ORIGINAL detected (${q}):`,H.data),await Ot(H.data);return}}}catch(k){console.log("🔍 [QR Scanner] jsQR ORIGINAL error:",k)}try{const Z=(await vr(()=>import("./jsQR-DY6PGUYO.js").then(q=>q.j),__vite__mapDeps([3,1,2]))).default;console.log("🔍 [QR Scanner] jsQR analyzing PREPROCESSED (dontInvert/attemptBoth)...");const ue=["dontInvert","attemptBoth"];for(const q of ue){const H=Z(Ce.data,V,X,{inversionAttempts:q});if(H&&H.data){try{dr([H.location.topLeftCorner,H.location.topRightCorner,H.location.bottomRightCorner,H.location.bottomLeftCorner],"rgba(16,185,129,0.9)",V,X)}catch{}console.log(`✅ [QR Scanner] jsQR PREPROCESSED detected (${q}):`,H.data),await Ot(H.data);return}}console.log("🔍 [QR Scanner] jsQR did not detect, falling back to ZXing...")}catch(k){console.log("🔍 [QR Scanner] jsQR PREPROCESSED error:",k)}try{const k=document.createElement("canvas"),Z=k.getContext("2d"),ue=Math.floor(V*.6),q=Math.floor(X*.6),H=Math.floor((V-ue)/2),_e=Math.floor((X-q)/2);k.width=ue,k.height=q,Z==null||Z.drawImage(W,H,_e,ue,q,0,0,ue,q);const Se=new Image;await new Promise((Ie,Ye)=>{Se.onload=()=>Ie(),Se.onerror=Ye,Se.src=k.toDataURL("image/png")});const he=await N.decodeFromImage(Se);if(he&&he.getText){const Ie=he.getText();try{const Ye=((D=he==null?void 0:he.getResultPoints)==null?void 0:D.call(he))||[];Ye&&Ye.length>=3?dr(Ye.map(Ne=>({x:Ne.getX?Ne.getX():Ne.x,y:Ne.getY?Ne.getY():Ne.y})),"rgba(16,185,129,0.9)"):wn("rgba(16,185,129,0.9)")}catch{}console.log("✅ [QR Scanner] ZXing detected from CENTER CROP image:",Ie),await Ot(Ie);return}console.log("🔍 [QR Scanner] ZXing returned empty result from center crop")}catch(k){console.log("🔍 [QR Scanner] ZXing image decode error:",k),console.log("🔍 [QR Scanner] No QR code found in this frame");try{const Z=document.createElement("canvas"),ue=Z.getContext("2d"),q=Math.floor(V*.6),H=Math.floor(X*.6),_e=Math.floor((V-q)/2),Se=Math.floor((X-H)/2);ue&&(Z.width=512,Z.height=Math.floor(512*(H/q)),ue.drawImage(W,_e,Se,q,H,0,0,Z.width,Z.height),console.log("🔍 [QR Scanner] Debug crop data URL:",Z.toDataURL("image/png").slice(0,100)+"..."))}catch(Z){console.log("🔍 [QR Scanner] Debug crop error:",Z)}}try{const k=[.8,.6,.5,.4];for(const Z of k){const ue=Math.max(160,Math.floor(V*Z)),q=Math.max(120,Math.floor(X*Z)),H=document.createElement("canvas"),_e=H.getContext("2d");H.width=ue,H.height=q,_e==null||_e.drawImage(W,0,0,V,X,0,0,ue,q);const Se=new Image;await new Promise((he,Ie)=>{Se.onload=()=>he(),Se.onerror=Ie,Se.src=H.toDataURL("image/png")});try{const he=await N.decodeFromImage(Se);if(he&&he.getText){console.log(`✅ [QR Scanner] ZXing detected at scale ${Z}:`,he.getText()),await Ot(he.getText());return}}catch{}try{const Ie=(await vr(()=>import("./jsQR-DY6PGUYO.js").then(Ne=>Ne.j),__vite__mapDeps([3,1,2]))).default,Ye=_e==null?void 0:_e.getImageData(0,0,ue,q);if(Ye){const Ne=Ie(Ye.data,ue,q,{inversionAttempts:"attemptBoth"});if(Ne&&Ne.data){console.log(`✅ [QR Scanner] jsQR detected at scale ${Z}:`,Ne.data),await Ot(Ne.data);return}}}catch{}}console.log("🔍 [QR Scanner] Multi-scale attempts completed without detection")}catch(k){console.log("🔍 [QR Scanner] Multi-scale error:",k)}}catch(T){console.error("❌ [QR Scanner] Error capturing image:",T)}},1e3)},Xt=async p=>{console.log("🔍 [Ultra Simple QR] Processing ultra simple QR format"),console.log("🔍 [Ultra Simple QR] QR Data:",p);const{data:N,error:D}=await lt.from("qr_codes").select("*").eq("qr_token",p).eq("status","active").maybeSingle();if(console.log("🔍 [Ultra Simple QR] Database query result:",N?"Found":"Not found",D?"Error":"No error"),console.log("🔍 [Ultra Simple QR] QR Code data:",N),console.log("🔍 [Ultra Simple QR] QR Error:",D),D||!N){console.log("❌ [Ultra Simple QR] QR code validation failed"),f({success:!1,message:"Μη έγκυρο QR Code",reason:"QR Code δεν βρέθηκε ή είναι ανενεργό"}),l(!0),mt();return}const{data:T,error:V}=await lt.from("user_profiles").select("id, email, first_name, last_name").eq("user_id",N.user_id).maybeSingle();if(console.log("🔍 [Ultra Simple QR] User profile query result:",T?"Found":"Not found",V?"Error":"No error"),console.log("🔍 [Ultra Simple QR] User profile data:",T),console.log("🔍 [Ultra Simple QR] User profile error:",V),N.expires_at&&new Date(N.expires_at)<new Date){console.log("❌ [Ultra Simple QR] QR code is expired"),f({success:!1,message:"QR Code έχει λήξει",reason:"Το QR Code έχει λήξει και δεν είναι πλέον έγκυρο"}),l(!0),mt();return}console.log("✅ [Ultra Simple QR] QR code validated successfully for user:",T==null?void 0:T.first_name,T==null?void 0:T.last_name),console.log("✅ [Ultra Simple QR] Full user profile data:",T),console.log("✅ [Ultra Simple QR] QR code data:",N),f({success:!0,message:"Επιτυχής είσοδος!",userData:{id:(T==null?void 0:T.id)||"unknown",email:(T==null?void 0:T.email)||"unknown@email.com",name:`${(T==null?void 0:T.first_name)||""} ${(T==null?void 0:T.last_name)||""}`.trim()||"Άγνωστος",category:N.category}}),l(!0),mt(),lr()},Xi=async p=>{console.log("🔍 [URL QR] Processing URL QR format:",p),console.log("🔍 [URL QR] Checking if QR code exists in database...");const{data:N,error:D}=await lt.from("qr_codes").select("*, user_profiles!inner(id, email, first_name, last_name)").eq("qr_token",p).eq("status","active").single();if(D||!N)console.log("🔍 [URL QR] QR code not found in database, treating as external"),f({success:!0,message:"Εξωτερικό QR Code σαρώθηκε!",userData:{id:"external",email:"External QR Code",name:"Εξωτερικό QR Code",category:"external"}});else{console.log("🔍 [URL QR] QR code found in database, processing as valid user QR");const T=N.user_profiles;f({success:!0,message:"Επιτυχής είσοδος!",userData:{id:T.id,email:T.email,name:`${T.first_name} ${T.last_name}`.trim()||"Άγνωστος",category:N.category}})}l(!0),mt(),lr()},Ot=async p=>{try{if(console.log("🔍 [QR Process] Processing QR data:",p),console.log("🔍 [QR Process] QR data length:",p.length),console.log("🔍 [QR Process] QR data type:",typeof p),/^[A-Za-z0-9]{6,64}$/.test(p))console.log("🔍 [QR Process] Opaque short token detected"),await Xt(p);else if(p.includes("__")&&p.length>36)console.log("🔍 [QR Process] Ultra simple QR format detected (userId__category__timestamp)"),console.log("🔍 [QR Process] QR Data:",p),await Xt(p);else if(p.includes("_")&&p.length>36)console.log("🔍 [QR Process] Old QR format detected (userId_category_timestamp)"),console.log("🔍 [QR Process] QR Data:",p),await Xt(p);else if(p.includes("-")&&p.length>36)console.log("🔍 [QR Process] Old QR format detected (userId-category-timestamp)"),console.log("🔍 [QR Process] QR Data:",p),await Xt(p);else if(p.includes(":")&&p.length>50)console.log("🔍 [QR Process] Complex QR format detected (id:userId:category:timestamp:hash)"),console.log("🔍 [QR Process] QR Data:",p),await Xt(p);else if(p.startsWith("https://"))console.log("🔍 [QR Process] URL format detected"),await Xi(p);else throw console.log("❌ [QR Process] Unknown QR code format"),new Error("Unknown QR code format")}catch(N){console.error("Error processing QR code:",N),f({success:!1,message:"Σφάλμα επεξεργασίας QR Code",reason:"Μη έγκυρο ή απροσδιόριστο QR Code format"}),l(!0),mt()}},mn=p=>{switch(p){case"free_gym":return"Ελεύθερο Gym";case"pilates":return"Pilates";case"personal":return"Personal Training";default:return p}},wn=p=>{const N=bt.current;if(!N)return;const D=N.getContext("2d");D&&(D.strokeStyle=p,D.lineWidth=3,D.strokeRect(8,8,N.width-16,N.height-16))},dr=(p,N,D,T)=>{const V=bt.current,X=nt.current;if(!V||!X||!(p!=null&&p.length))return;const W=V.getContext("2d");if(!W)return;const fe=D?V.width/D:1,Ce=T?V.height/T:1;W.clearRect(0,0,V.width,V.height),W.beginPath(),W.strokeStyle=N,W.lineWidth=3,p.forEach((je,k)=>{const Z=je.x*fe,ue=je.y*Ce;k===0?W.moveTo(Z,ue):W.lineTo(Z,ue)}),W.closePath(),W.stroke()},Wi=()=>{l(!1),f(null)};return!r||r.role!=="secretary"?v.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx(na,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),v.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Δεν έχετε δικαίωμα πρόσβασης"}),v.jsx("p",{className:"text-gray-600",children:"Αυτή η σελίδα είναι διαθέσιμη μόνο για γραμματεία"})]})}):v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsx("div",{className:"bg-white shadow-sm border-b",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[v.jsxs("div",{className:"flex justify-between items-center py-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Secretary Dashboard"}),v.jsx("p",{className:"text-gray-600",children:m==="scanner"?"Σαρώστε QR codes για είσοδο/έξοδο":m==="membership-requests"?"Διαχείριση αιτημάτων συνδρομών":m==="ultimate-installments"?"Διαχείριση Ultimate συνδρομών και δόσεων":"Διαχείριση δόσεων για πακέτα Ultimate"})]}),v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsxs("button",{onClick:m==="scanner"?lr:m==="membership-requests"?St:m==="ultimate-installments"?It:Gt,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[v.jsx(Ur,{className:"h-4 w-4"}),v.jsx("span",{children:"Ανανέωση"})]}),v.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[v.jsx(Rt,{className:"h-4 w-4"}),v.jsx("span",{children:"Αποσύνδεση"})]})]})]}),v.jsx("div",{className:"border-t border-gray-200",children:v.jsxs("nav",{className:"flex space-x-8",children:[v.jsx("button",{onClick:()=>_("scanner"),className:`py-4 px-1 border-b-2 font-medium text-sm ${m==="scanner"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(Lr,{className:"h-5 w-5"}),v.jsx("span",{children:"QR Scanner"})]})}),v.jsx("button",{onClick:()=>_("membership-requests"),className:`py-4 px-1 border-b-2 font-medium text-sm ${m==="membership-requests"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(rr,{className:"h-5 w-5"}),v.jsx("span",{children:"Αιτήματα Συνδρομών"})]})}),v.jsx("button",{onClick:()=>_("ultimate-installments"),className:`py-4 px-1 border-b-2 font-medium text-sm ${m==="ultimate-installments"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("span",{className:"text-orange-500 text-lg",children:"👑"}),v.jsx("span",{children:"Ultimate Installments"})]})}),v.jsx("button",{onClick:()=>_("installments"),className:`py-4 px-1 border-b-2 font-medium text-sm ${m==="installments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(rr,{className:"h-5 w-5"}),v.jsx("span",{children:"Δόσεις Ultimate"})]})})]})})]})}),v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:m==="scanner"?v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-8",children:[v.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"QR Code Scanner"}),v.jsx("div",{className:"space-y-4",children:t?v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",style:{aspectRatio:"16/9",minHeight:"200px"},"data-scanning":t?"true":"false",children:[v.jsx("canvas",{ref:bt,className:"absolute inset-0 w-full h-full pointer-events-none"}),v.jsx("video",{ref:nt,className:"w-full h-full object-contain bg-black",playsInline:!0,muted:!0,autoPlay:!0}),!i&&!o&&v.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800",children:v.jsxs("div",{className:"text-center text-white",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),v.jsx("p",{className:"text-sm",children:"Φόρτωση κάμερας..."})]})}),o&&v.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900 bg-opacity-90",children:v.jsxs("div",{className:"text-center text-white p-4",children:[v.jsx(hr,{className:"h-12 w-12 mx-auto mb-4 text-red-300"}),v.jsx("p",{className:"text-sm font-medium mb-2",children:"Σφάλμα κάμερας"}),v.jsx("p",{className:"text-xs text-red-200",children:o})]})}),i&&!o&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"absolute inset-0 border-2 border-blue-500 rounded-lg pointer-events-none",children:v.jsx("div",{className:"absolute top-2 left-2 right-2 bg-blue-500 text-white text-center py-1 rounded text-sm",children:"Σαρώστε QR Code εδώ"})}),v.jsxs("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-75 text-white text-xs p-2 rounded",children:["Camera Status: ",i?"Ready":"Loading"]})]})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("button",{onClick:()=>mt(),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[v.jsx(hr,{className:"h-4 w-4 inline mr-2"}),"Σταματήστε σάρωση"]}),o&&v.jsxs("button",{onClick:yn,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[v.jsx(kr,{className:"h-4 w-4 inline mr-2"}),"Δοκιμάστε ξανά"]})]})]}):v.jsxs("div",{className:"text-center py-12",children:[v.jsx(kr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),v.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ξεκινήστε τη σάρωση"}),v.jsx("p",{className:"text-gray-600 mb-6",children:"Πατήστε το κουμπί για να ανοίξετε την κάμερα"}),v.jsxs("button",{onClick:()=>{console.log("🎯 [UI] Start scanning button clicked"),yn()},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[v.jsx(kr,{className:"h-5 w-5 inline mr-2"}),"Ξεκινήστε σάρωση"]})]})})]}),v.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Πρόσφατες σαρώσεις"}),h.length===0?v.jsxs("div",{className:"text-center py-8",children:[v.jsx(Lr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),v.jsx("p",{className:"text-gray-600",children:"Δεν υπάρχουν πρόσφατες σαρώσεις"})]}):v.jsx("div",{className:"space-y-3",children:h.map((p,N)=>v.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("div",{className:`p-2 rounded-full ${p.status==="approved"?"bg-green-100":"bg-red-100"}`,children:p.status==="approved"?v.jsx(Bn,{className:"h-4 w-4 text-green-600"}):v.jsx(hr,{className:"h-4 w-4 text-red-600"})}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900",children:p.user_profiles?`${p.user_profiles.first_name} ${p.user_profiles.last_name}`:"Άγνωστος"}),v.jsxs("p",{className:"text-sm text-gray-600",children:[mn(p.category)," • ",p.scan_type]})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsx("p",{className:"text-sm text-gray-500",children:new Date(p.created_at).toLocaleTimeString("el-GR")}),v.jsx("p",{className:`text-xs font-medium ${p.status==="approved"?"text-green-600":"text-red-600"}`,children:p.status==="approved"?"Εγκεκριμένο":"Απορριφθέν"})]})]},N))})]})]}):m==="membership-requests"?v.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Αιτήματα Συνδρομών"}),v.jsxs("button",{onClick:St,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[v.jsx(Ur,{className:"h-4 w-4 inline mr-2"}),"Ανανέωση"]})]}),w?v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"Φόρτωση αιτημάτων..."})]}):x.length===0?v.jsxs("div",{className:"text-center py-12",children:[v.jsx(rr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),v.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Δεν υπάρχουν αιτήματα"}),v.jsx("p",{className:"text-gray-600",children:"Δεν υπάρχουν αιτήματα συνδρομών για επεξεργασία"})]}):v.jsx("div",{className:"space-y-4",children:x.filter(p=>{var N,D;return((N=p.package)==null?void 0:N.name)==="Free Gym"||((D=p.package)==null?void 0:D.name)==="Pilates"}).filter(p=>p.status==="pending"||p.status==="approved"&&M(p.id)||p.status==="rejected"&&M(p.id)).map(p=>{var N,D,T,V,X,W,fe,Ce,je,k,Z,ue,q,H,_e,Se,he,Ie,Ye,Ne,Wt,zt,$t,Yt,Zt,Qt,Kt,Jt;return v.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsxs("div",{className:"flex-1",children:[v.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:v.jsx(Er,{className:"h-5 w-5 text-blue-600"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium text-gray-900",children:(N=p.user)!=null&&N.first_name&&((D=p.user)!=null&&D.last_name)?`${p.user.first_name} ${p.user.last_name}`:"Άγνωστος χρήστης"}),v.jsx("p",{className:"text-sm text-gray-600",children:((T=p.user)==null?void 0:T.email)||"Δεν υπάρχει email"})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(rr,{className:"h-4 w-4 text-gray-500"}),v.jsxs("span",{className:"text-sm text-gray-600",children:[v.jsx("span",{className:"font-medium",children:"Πακέτο:"})," ",((V=p.package)==null?void 0:V.name)||"Άγνωστο πακέτο"]})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(ia,{className:"h-4 w-4 text-gray-500"}),v.jsxs("span",{className:"text-sm text-gray-600",children:[v.jsx("span",{className:"font-medium",children:"Διάρκεια:"})," ",Kr(p.duration_type)]})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(ua,{className:"h-4 w-4 text-gray-500"}),v.jsxs("span",{className:"text-sm text-gray-600",children:[v.jsx("span",{className:"font-medium",children:"Τιμή:"})," ",Jr(p.requested_price)]})]})]}),p.classes_count&&p.classes_count>0&&v.jsx("div",{className:"mt-3 p-3 bg-pink-50 border border-pink-200 rounded-lg",children:v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("span",{className:"text-2xl",children:"🧘"}),v.jsxs("span",{className:"text-sm font-medium text-pink-800",children:["Μαθήματα Pilates: ",p.classes_count]})]})}),v.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:[v.jsx("span",{className:"font-medium",children:"Ημερομηνία αίτησης:"})," ",new Date(p.created_at).toLocaleDateString("el-GR")]})]}),v.jsxs("div",{className:"flex space-x-2 ml-4",children:[v.jsxs("button",{onClick:()=>Br(p.id),className:"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm",children:[v.jsx(Fn,{className:"h-4 w-4 inline mr-1"}),"Έγκριση"]}),v.jsxs("button",{onClick:()=>{prompt("Λόγος απόρριψης:")&&Fr(p.id)},className:"px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm",children:[v.jsx(Rt,{className:"h-4 w-4 inline mr-1"}),"Απόρριψη"]})]})]}),(p.status==="pending"||p.status==="approved"&&M(p.id)||p.status==="rejected"&&M(p.id))&&v.jsxs("div",{className:`mt-4 p-4 rounded-lg border ${M(p.id)?"bg-yellow-100 border-yellow-300":"bg-gray-50 border-gray-200"}`,children:[v.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:["Program Options",M(p.id)&&v.jsx("span",{className:"ml-2",children:"🔒"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[((X=p.package)==null?void 0:X.name)!=="Pilates"&&v.jsx("div",{className:`p-3 rounded-lg border ${M(p.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:v.jsx("button",{onClick:()=>{var Be;if(M(p.id)){te("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}we(p.id,"oldMembers",!((Be=A[p.id])!=null&&Be.oldMembers))},className:`w-full p-3 rounded-lg text-left transition-colors ${(W=A[p.id])!=null&&W.oldMembers||(fe=me(p.id))!=null&&fe.oldMembers?"bg-green-100 text-green-800 border-2 border-green-300":M(p.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:"font-medium",children:[M(p.id)&&"🔒 ","👴 Παλαιά μέλη"]}),(((Ce=A[p.id])==null?void 0:Ce.oldMembers)||((je=me(p.id))==null?void 0:je.oldMembers))&&v.jsx("span",{className:"text-green-600",children:"✓"})]})})}),((k=p.package)==null?void 0:k.name)!=="Pilates"&&v.jsxs("div",{className:`p-3 rounded-lg border ${M(p.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[M(p.id)&&"🔒 ","🏋️ Kettlebell Points"]}),v.jsx("input",{type:"number",value:M(p.id)?((Z=me(p.id))==null?void 0:Z.kettlebellPoints)||"":((ue=A[p.id])==null?void 0:ue.kettlebellPoints)||"",onChange:Be=>{M(p.id)||we(p.id,"kettlebellPoints",Be.target.value)},placeholder:"Εισάγετε πόντους",className:`w-full p-2 border rounded-lg ${M(p.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,disabled:M(p.id)})]}),v.jsxs("div",{className:`p-3 rounded-lg border ${M(p.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[v.jsx("button",{onClick:()=>{var Be;if(M(p.id)){te("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}we(p.id,"cash",!((Be=A[p.id])!=null&&Be.cash))},className:`w-full p-3 rounded-lg text-left transition-colors ${(q=A[p.id])!=null&&q.cash||(H=me(p.id))!=null&&H.cash?"bg-green-100 text-green-800 border-2 border-green-300":M(p.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:"font-medium",children:[M(p.id)&&"🔒 ","💰 Μετρητά"]}),(((_e=A[p.id])==null?void 0:_e.cash)||((Se=me(p.id))==null?void 0:Se.cash))&&v.jsx("span",{className:"text-green-600",children:"✓"})]})}),(((he=A[p.id])==null?void 0:he.cash)||((Ie=me(p.id))==null?void 0:Ie.cash))&&v.jsxs("div",{className:"mt-2",children:[v.jsx("input",{type:"number",value:M(p.id)?((Ye=me(p.id))==null?void 0:Ye.cashAmount)||"":((Ne=A[p.id])==null?void 0:Ne.cashAmount)||"",onChange:Be=>{M(p.id)||we(p.id,"cashAmount",parseFloat(Be.target.value)||0)},placeholder:"Ποσό σε €",className:`w-full p-2 border rounded-lg ${M(p.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500"}`,disabled:M(p.id)}),v.jsx("button",{onClick:()=>{M(p.id)},className:`mt-2 w-full px-3 py-1 text-sm rounded-lg ${M(p.id)?"bg-yellow-200 text-yellow-700 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,disabled:M(p.id),children:"✓ Επιλογή"})]})]}),v.jsxs("div",{className:`p-3 rounded-lg border ${M(p.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[v.jsx("button",{onClick:()=>{var Be;if(M(p.id)){te("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}we(p.id,"pos",!((Be=A[p.id])!=null&&Be.pos))},className:`w-full p-3 rounded-lg text-left transition-colors ${(Wt=A[p.id])!=null&&Wt.pos||(zt=me(p.id))!=null&&zt.pos?"bg-blue-100 text-blue-800 border-2 border-blue-300":M(p.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:"font-medium",children:[M(p.id)&&"🔒 ","💳 POS"]}),((($t=A[p.id])==null?void 0:$t.pos)||((Yt=me(p.id))==null?void 0:Yt.pos))&&v.jsx("span",{className:"text-blue-600",children:"✓"})]})}),(((Zt=A[p.id])==null?void 0:Zt.pos)||((Qt=me(p.id))==null?void 0:Qt.pos))&&v.jsxs("div",{className:"mt-2",children:[v.jsx("input",{type:"number",value:M(p.id)?((Kt=me(p.id))==null?void 0:Kt.posAmount)||"":((Jt=A[p.id])==null?void 0:Jt.posAmount)||"",onChange:Be=>{M(p.id)||we(p.id,"posAmount",parseFloat(Be.target.value)||0)},placeholder:"Ποσό σε €",className:`w-full p-2 border rounded-lg ${M(p.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,disabled:M(p.id)}),v.jsx("button",{onClick:()=>{M(p.id)},className:`mt-2 w-full px-3 py-1 text-sm rounded-lg ${M(p.id)?"bg-yellow-200 text-yellow-700 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:M(p.id),children:"✓ Επιλογή"})]})]})]}),v.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[v.jsx("button",{onClick:()=>Nt(p.id,"approved"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${I[p.id]==="approved"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:"✅ Έγκριση"}),v.jsx("button",{onClick:()=>Nt(p.id,"rejected"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${I[p.id]==="rejected"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:"❌ Απόρριψη"}),v.jsx("button",{onClick:()=>Nt(p.id,"pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${I[p.id]==="pending"?"bg-yellow-600 text-white":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"}`,children:"⏳ Αναμονή"}),v.jsxs("button",{onClick:()=>gn(p.id),disabled:w||I[p.id]==="none",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[w?v.jsx(Dt,{className:"h-4 w-4 animate-spin mr-2"}):v.jsx(wr,{className:"h-4 w-4 mr-2"}),"Αποθήκευση Program Options"]})]})]})]},p.id)})})]}):m==="ultimate-installments"?v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[v.jsx("span",{className:"text-orange-500 text-3xl mr-3",children:"👑"}),"Ultimate Installments"]}),v.jsx("p",{className:"text-gray-600 mt-1",children:"Διαχείριση όλων των Ultimate συνδρομών και δόσεων"})]}),v.jsxs("button",{onClick:It,disabled:Ut,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[Ut?v.jsx(Dt,{className:"h-4 w-4 animate-spin"}):v.jsx(Ur,{className:"h-4 w-4"}),v.jsx("span",{children:"Ανανέωση"})]})]}),v.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsx("div",{className:"flex-1",children:v.jsxs("div",{className:"relative",children:[v.jsx(qr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),v.jsx("input",{type:"text",placeholder:"Αναζήτηση με όνομα χρήστη...",value:rt,onChange:p=>Vt(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})}),rt&&v.jsx("button",{onClick:()=>Vt(""),className:"px-3 py-2 text-gray-500 hover:text-gray-700 transition-colors",children:v.jsx(Rt,{className:"h-4 w-4"})})]})}),Ut?v.jsxs("div",{className:"flex items-center justify-center py-12",children:[v.jsx(Dt,{className:"h-8 w-8 animate-spin text-orange-600"}),v.jsx("span",{className:"ml-2 text-gray-600",children:"Φόρτωση Ultimate αιτημάτων..."})]}):st.filter(p=>{var D,T;return rt===""||`${((D=p.user)==null?void 0:D.first_name)||""} ${((T=p.user)==null?void 0:T.last_name)||""}`.toLowerCase().includes(rt.toLowerCase())}).length===0?v.jsxs("div",{className:"text-center py-12",children:[v.jsx("span",{className:"text-orange-500 text-6xl mb-4 block",children:"👑"}),v.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:rt?"Δεν βρέθηκαν αποτελέσματα":"Δεν υπάρχουν Ultimate αιτήματα"}),v.jsx("p",{className:"text-gray-600",children:rt?"Δοκιμάστε διαφορετικό όνομα για την αναζήτηση.":"Όταν οι χρήστες υποβάλλουν αιτήματα για το Ultimate πακέτο, θα εμφανίζονται εδώ."})]}):v.jsx("div",{className:"grid gap-6",children:st.filter(p=>{var D,T;return rt===""||`${((D=p.user)==null?void 0:D.first_name)||""} ${((T=p.user)==null?void 0:T.last_name)||""}`.toLowerCase().includes(rt.toLowerCase())}).map(p=>{var N,D,T,V,X,W,fe,Ce,je,k,Z,ue,q,H,_e,Se,he,Ie,Ye,Ne,Wt,zt,$t,Yt,Zt,Qt,Kt,Jt,Be,_n,An,Cn,En,bn;return v.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-orange-200 p-6",children:[v.jsxs("div",{className:"flex items-start justify-between mb-6",children:[v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:v.jsx("span",{className:"text-white text-2xl",children:"👑"})}),v.jsxs("div",{children:[v.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:[(N=p.user)==null?void 0:N.first_name," ",(D=p.user)==null?void 0:D.last_name]}),v.jsx("p",{className:"text-sm text-gray-600",children:(T=p.user)==null?void 0:T.email}),v.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[v.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Ultimate Package"}),v.jsx("span",{className:"text-sm text-gray-500",children:"•"}),v.jsx("span",{className:"text-sm text-gray-600",children:Kr(p.duration_type)})]})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Jr(p.requested_price)}),v.jsx("div",{className:"text-sm text-gray-500",children:new Date(p.created_at).toLocaleDateString("el-GR")}),v.jsx("div",{className:"mt-2",children:v.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p.status==="pending"?"bg-yellow-100 text-yellow-800":p.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status==="pending"?"Εκκρεμεί":p.status==="approved"?"Εγκεκριμένο":"Απορριφθέν"})})]})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsx("h4",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Program Options"}),v.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[v.jsx("div",{className:`p-3 rounded-lg border ${M(p.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:v.jsx("button",{onClick:()=>{var Q;if(M(p.id)){te("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}we(p.id,"oldMembers",!((Q=A[p.id])!=null&&Q.oldMembers))},className:`w-full p-3 rounded-lg text-left transition-colors ${(V=A[p.id])!=null&&V.oldMembers||(X=me(p.id))!=null&&X.oldMembers?"bg-green-100 text-green-800 border-2 border-green-300":M(p.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:"font-medium",children:[M(p.id)&&"🔒 ","👴 Παλαιά μέλη"]}),(((W=A[p.id])==null?void 0:W.oldMembers)||((fe=me(p.id))==null?void 0:fe.oldMembers))&&v.jsx("span",{className:"text-green-600",children:"✓"})]})})}),v.jsxs("div",{className:`p-3 rounded-lg border ${M(p.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[M(p.id)&&"🔒 ","🏋️ Kettlebell Points"]}),v.jsx("input",{type:"number",value:M(p.id)?((Ce=me(p.id))==null?void 0:Ce.kettlebellPoints)||"":((je=A[p.id])==null?void 0:je.kettlebellPoints)||"",onChange:Q=>{M(p.id)||we(p.id,"kettlebellPoints",Q.target.value)},placeholder:"Εισάγετε πόντους",className:`w-full p-2 border rounded-lg ${M(p.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`,disabled:M(p.id)})]}),v.jsxs("div",{className:`p-3 rounded-lg border ${M(p.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[v.jsx("button",{onClick:()=>{var Q;if(M(p.id)){te("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}we(p.id,"cash",!((Q=A[p.id])!=null&&Q.cash))},className:`w-full p-3 rounded-lg text-left transition-colors ${(k=A[p.id])!=null&&k.cash||(Z=me(p.id))!=null&&Z.cash?"bg-green-100 text-green-800 border-2 border-green-300":M(p.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:"font-medium",children:[M(p.id)&&"🔒 ","💰 Μετρητά"]}),(((ue=A[p.id])==null?void 0:ue.cash)||((q=me(p.id))==null?void 0:q.cash))&&v.jsx("span",{className:"text-green-600",children:"✓"})]})}),(((H=A[p.id])==null?void 0:H.cash)||((_e=me(p.id))==null?void 0:_e.cash))&&v.jsx("div",{className:"mt-2",children:v.jsx("input",{type:"number",value:M(p.id)?((Se=me(p.id))==null?void 0:Se.cashAmount)||"":((he=A[p.id])==null?void 0:he.cashAmount)||"",onChange:Q=>{M(p.id)||we(p.id,"cashAmount",parseFloat(Q.target.value)||0)},placeholder:"Ποσό σε €",className:`w-full p-2 border rounded-lg ${M(p.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500"}`,disabled:M(p.id)})})]}),v.jsxs("div",{className:`p-3 rounded-lg border ${M(p.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[v.jsx("button",{onClick:()=>{var Q;if(M(p.id)){te("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}we(p.id,"pos",!((Q=A[p.id])!=null&&Q.pos))},className:`w-full p-3 rounded-lg text-left transition-colors ${(Ie=A[p.id])!=null&&Ie.pos||(Ye=me(p.id))!=null&&Ye.pos?"bg-blue-100 text-blue-800 border-2 border-blue-300":M(p.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:"font-medium",children:[M(p.id)&&"🔒 ","💳 POS"]}),(((Ne=A[p.id])==null?void 0:Ne.pos)||((Wt=me(p.id))==null?void 0:Wt.pos))&&v.jsx("span",{className:"text-blue-600",children:"✓"})]})}),(((zt=A[p.id])==null?void 0:zt.pos)||(($t=me(p.id))==null?void 0:$t.pos))&&v.jsx("div",{className:"mt-2",children:v.jsx("input",{type:"number",value:M(p.id)?((Yt=me(p.id))==null?void 0:Yt.posAmount)||"":((Zt=A[p.id])==null?void 0:Zt.posAmount)||"",onChange:Q=>{M(p.id)||we(p.id,"posAmount",parseFloat(Q.target.value)||0)},placeholder:"Ποσό σε €",className:`w-full p-2 border rounded-lg ${M(p.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,disabled:M(p.id)})})]})]})]}),v.jsx("div",{className:"space-y-4",children:p.has_installments?v.jsxs("div",{children:[v.jsxs("h4",{className:"text-lg font-semibold text-orange-800 border-b border-orange-200 pb-2 mb-4 flex items-center",children:[v.jsx("span",{className:"text-2xl mr-2",children:"💳"}),"Διαχείριση Δόσεων"]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1η Δόση"}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("input",{type:"number",value:((Qt=A[p.id])==null?void 0:Qt.installment1Amount)||p.installment_1_amount||"",onChange:Q=>we(p.id,"installment1Amount",Q.target.value),placeholder:"Ποσό",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),v.jsxs("select",{value:((Kt=A[p.id])==null?void 0:Kt.installment1PaymentMethod)||p.installment_1_payment_method||"cash",onChange:Q=>we(p.id,"installment1PaymentMethod",Q.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[v.jsx("option",{value:"cash",children:"💰 Μετρητά"}),v.jsx("option",{value:"pos",children:"💳 POS"})]}),v.jsx("input",{type:"date",value:((Jt=A[p.id])==null?void 0:Jt.installment1DueDate)||p.installment_1_due_date||"",onChange:Q=>we(p.id,"installment1DueDate",Q.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]})]}),v.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2η Δόση"}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("input",{type:"number",value:((Be=A[p.id])==null?void 0:Be.installment2Amount)||p.installment_2_amount||"",onChange:Q=>we(p.id,"installment2Amount",Q.target.value),placeholder:"Ποσό",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),v.jsxs("select",{value:((_n=A[p.id])==null?void 0:_n.installment2PaymentMethod)||p.installment_2_payment_method||"cash",onChange:Q=>we(p.id,"installment2PaymentMethod",Q.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[v.jsx("option",{value:"cash",children:"💰 Μετρητά"}),v.jsx("option",{value:"pos",children:"💳 POS"})]}),v.jsx("input",{type:"date",value:((An=A[p.id])==null?void 0:An.installment2DueDate)||p.installment_2_due_date||"",onChange:Q=>we(p.id,"installment2DueDate",Q.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]})]}),v.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"3η Δόση"}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("input",{type:"number",value:((Cn=A[p.id])==null?void 0:Cn.installment3Amount)||p.installment_3_amount||"",onChange:Q=>we(p.id,"installment3Amount",Q.target.value),placeholder:"Ποσό",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),v.jsxs("select",{value:((En=A[p.id])==null?void 0:En.installment3PaymentMethod)||p.installment_3_payment_method||"cash",onChange:Q=>we(p.id,"installment3PaymentMethod",Q.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[v.jsx("option",{value:"cash",children:"💰 Μετρητά"}),v.jsx("option",{value:"pos",children:"💳 POS"})]}),v.jsx("input",{type:"date",value:((bn=A[p.id])==null?void 0:bn.installment3DueDate)||p.installment_3_due_date||"",onChange:Q=>we(p.id,"installment3DueDate",Q.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]})]}),v.jsxs("button",{onClick:()=>{var Sn,In,Nn,On,Tn,Rn,Dn,Pn,Mn;const Q=Number(((Sn=A[p.id])==null?void 0:Sn.installment1Amount)||p.installment_1_amount||0),zi=Number(((In=A[p.id])==null?void 0:In.installment2Amount)||p.installment_2_amount||0),$i=Number(((Nn=A[p.id])==null?void 0:Nn.installment3Amount)||p.installment_3_amount||0),Yi=((On=A[p.id])==null?void 0:On.installment1PaymentMethod)||p.installment_1_payment_method||"cash",Zi=((Tn=A[p.id])==null?void 0:Tn.installment2PaymentMethod)||p.installment_2_payment_method||"cash",Qi=((Rn=A[p.id])==null?void 0:Rn.installment3PaymentMethod)||p.installment_3_payment_method||"cash",Ki=((Dn=A[p.id])==null?void 0:Dn.installment1DueDate)||p.installment_1_due_date||"",Ji=((Pn=A[p.id])==null?void 0:Pn.installment2DueDate)||p.installment_2_due_date||"",qi=((Mn=A[p.id])==null?void 0:Mn.installment3DueDate)||p.installment_3_due_date||"";xn(p.id,Q,zi,$i,Yi,Zi,Qi,Ki,Ji,qi)},className:"w-full px-4 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center space-x-2 font-medium",children:[v.jsx(wr,{className:"h-4 w-4"}),v.jsx("span",{children:"Αποθήκευση Δόσεων & Ημερομηνιών"})]})]})]}):v.jsxs("div",{children:[v.jsx("h4",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4",children:"Ενέργειες"}),v.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[v.jsx("span",{className:"text-2xl mb-2 block",children:"💰"}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Αυτή η συνδρομή δεν έχει δόσεις - πληρώνεται εφάπαξ"}),p.status==="pending"&&v.jsxs("div",{className:"flex space-x-2 justify-center",children:[v.jsxs("button",{onClick:()=>Br(p.id),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:[v.jsx(Fn,{className:"h-4 w-4 inline mr-1"}),"Έγκριση"]}),v.jsxs("button",{onClick:()=>Fr(p.id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:[v.jsx(Rt,{className:"h-4 w-4 inline mr-1"}),"Απόρριψη"]})]})]})]})})]}),v.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:v.jsxs("div",{className:"flex flex-wrap gap-2 justify-between items-center",children:[v.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.jsx("button",{onClick:()=>Nt(p.id,"approved"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${I[p.id]==="approved"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:"✅ Έγκριση"}),v.jsx("button",{onClick:()=>Nt(p.id,"rejected"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${I[p.id]==="rejected"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:"❌ Απόρριψη"}),v.jsx("button",{onClick:()=>Nt(p.id,"pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${I[p.id]==="pending"?"bg-yellow-600 text-white":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"}`,children:"⏳ Αναμονή"}),v.jsxs("button",{onClick:()=>gn(p.id),disabled:w||I[p.id]==="none",className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[w?v.jsx(Dt,{className:"h-4 w-4 animate-spin mr-2"}):v.jsx(wr,{className:"h-4 w-4 mr-2"}),"Αποθήκευση Program Options"]})]}),v.jsxs("button",{onClick:()=>{window.confirm("Είστε σίγουροι ότι θέλετε να διαγράψετε αυτό το Ultimate αίτημα; Αυτή η ενέργεια δεν μπορεί να αναιρεθεί.")&&Ui(p.id)},className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium flex items-center space-x-1",children:[v.jsx(Rt,{className:"h-3 w-3"}),v.jsx("span",{children:"Διαγραφή"})]})]})})]},p.id)})})]}):m==="installments"?v.jsx(la,{installmentRequests:$,installmentLoading:be,installmentSearchTerm:gt,setInstallmentSearchTerm:yt,selectedRequestOptions:A,handleRequestOptionChange:we,updateInstallmentAmounts:xn,deleteInstallmentRequest:ji,loadInstallmentRequests:Gt,handleApproveRequest:Br,handleRejectRequest:Fr,loading:w}):null}),u&&c&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:`mx-auto flex items-center justify-center h-16 w-16 rounded-full mb-4 ${c.success?"bg-green-100":"bg-red-100"}`,children:c.success?v.jsx(Bn,{className:"h-8 w-8 text-green-600"}):v.jsx(hr,{className:"h-8 w-8 text-red-600"})}),v.jsx("h3",{className:`text-lg font-semibold mb-2 ${c.success?"text-green-900":"text-red-900"}`,children:c.message}),c.userData&&v.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[v.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[v.jsx(Er,{className:"h-4 w-4 text-gray-600"}),v.jsx("span",{className:"font-medium",children:c.userData.name})]}),v.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[v.jsx(wi,{className:"h-4 w-4 text-gray-600"}),v.jsx("span",{className:"text-sm text-gray-600",children:c.userData.email})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(Lr,{className:"h-4 w-4 text-gray-600"}),v.jsx("span",{className:"text-sm text-gray-600",children:mn(c.userData.category)})]})]}),c.reason&&v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:c.reason}),v.jsx("button",{onClick:Wi,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Κλείσιμο"})]})})})]})};export{lc as default};
