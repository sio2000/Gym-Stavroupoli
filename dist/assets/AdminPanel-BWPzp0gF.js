const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/membershipApi-B3nxiQkH.js","assets/index-DXc16WYz.js","assets/index-CwkVD14D.css"])))=>i.map(i=>d[i]);
var Sn=Object.defineProperty;var An=(n,b,w)=>b in n?Sn(n,b,{enumerable:!0,configurable:!0,writable:!0,value:w}):n[b]=w;var St=(n,b,w)=>An(n,typeof b!="symbol"?b+"":b,w);import{d as Mt,r as m,z as x,j as e,t as _s,v as Jt,e as ma,m as $n,s as E,X as ze,b as De,U as Ke,w as sr,o as $t,C as st,M as xa,u as ga,R as At,x as qs,h as ha,L as ss,y as Cn,P as Mn,A as la,_ as Dn}from"./index-DXc16WYz.js";import{g as Un,a as aa,b as En,c as Xt,d as na,f as Qs,r as In,v as Tn,e as Ln,s as On,h as Fn,i as Rn}from"./groupAssignmentApi-bj-1TiGd.js";import{s as Gn,g as zn,a as Kn,b as Vn}from"./pilatesScheduleApi-Dt0AYZTo.js";import{g as oa,a as Wn,t as Bn,p as Zt,C as Hn,b as Yn}from"./date-1PgwZpeN.js";import{R as Ps}from"./refresh-cw-4bXYEX7k.js";import{S as Ve}from"./search-So_rUZ3S.js";import{T as et,P as Qn,g as Jn,a as Xn,s as Zn,b as qn,c as eo,d as so,G as to,e as ro,f as lo,h as Js,i as qt,m as Xs}from"./programApprovalApi-D7sXr-V5.js";import{P as Ct}from"./plus-Ck8cIO_E.js";import{getDurationLabel as tr,formatPrice as Fe,getMembershipPackages as ao,getPilatesPackageDurations as no,getMembershipRequestsWithLockedInstallments as oo,getUltimateMembershipRequests as io,updatePilatesPackagePricing as co,updateMembershipPackageDuration as mo,approveUltimateMembershipRequest as xo,approveMembershipRequest as go,rejectMembershipRequest as ia,getMembershipPackageDurations as ho}from"./membershipApi-B3nxiQkH.js";import{A as Zs}from"./award-DfHcEYS8.js";import{i as uo}from"./installmentsEligibility-D0dI4iZM.js";import"./groupTrainingCalendarApi-BWCjwwtT.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Mt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=Mt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=Mt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=Mt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),po=()=>{const[n,b]=m.useState([]),[w,$]=m.useState(!1),[k,D]=m.useState(!1),[_,B]=m.useState({}),[se,le]=m.useState({}),[T,me]=m.useState(()=>{const y=oa();return console.log("🔥🔥🔥 ADMIN FORCE REFRESH: Using NEW Greek Monday function - Monday:",y.toISOString(),"TIMESTAMP:",Date.now()),console.log("🔥🔥🔥 ADMIN FORCE REFRESH: Day of week (should be 1 for Monday):",y.getUTCDay()),y}),[ae,ce]=m.useState(null),[O,ne]=m.useState(!1),Q=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00"];m.useEffect(()=>{console.log("Admin: useEffect triggered - currentWeek changed to:",T.toISOString()),F();const y=Gn(()=>{F()});return()=>{try{y.unsubscribe()}catch{}}},[T]);const F=async()=>{try{$(!0);const y=await zn();b(y);const i={},A=he();console.log("Loading slots for week:",A),console.log("Existing slots from DB:",y.length),A.forEach(P=>{Q.forEach(G=>{const l=`${P}-${G}`,z=y.find(X=>X.date===P&&X.start_time===`${G}:00`);i[l]=z?z.is_active:!0,Object.keys(i).length<=5&&console.log(`Grid key: ${l}, existingSlot: ${!!z}, is_active: ${z==null?void 0:z.is_active}, final: ${i[l]}`)})}),console.log("All existing slots for this week:"),y.forEach(P=>{console.log(`  - ${P.date} ${P.start_time} (active: ${P.is_active})`)}),console.log("Initialized grid with slots:",Object.keys(i).length),console.log("Grid state sample:",Object.entries(i).slice(0,5));const c=Object.values(i).filter(Boolean).length,R=Object.values(i).filter(P=>!P).length;console.log(`Grid summary: ${c} active, ${R} inactive`),B(i);const j=A[0],U=A[A.length-1],q=await Kn(j,U),u={};q.forEach(P=>{const G=`${P.date}-${P.start_time.slice(0,5)}`;u[G]={booked:P.booked_count||0,cap:P.max_capacity}}),le(u)}catch(y){console.error("Error loading slots:",y),x.error("Σφάλμα φόρτωσης προγράμματος pilates")}finally{$(!1)}},he=()=>{const y=[],i=new Date(T);console.log("Admin: getWeekDates - currentWeek:",i);for(let A=0;A<14;A++){const c=Wn(i,A),R=Bn(c);y.push(R),console.log(`Admin: Day ${A}: ${R}`)}return y},ke=y=>{const i=Zt(y);return["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"][i.getDay()]},oe=(y,i)=>{const A=`${y}-${i}`;B(c=>({...c,[A]:!c[A]}))},te=async()=>{try{D(!0);const y=[],i=he();i.forEach(U=>{Q.forEach(q=>{const u=`${U}-${q}`;y.push({date:U,time:q,is_active:_[u]||!1})})}),console.log("=== SAVE SCHEDULE START ==="),console.log("Saving schedule with all slots:",y.length),console.log("Week dates:",i),console.log("Current grid state sample:",Object.entries(_).slice(0,10));const{data:A,error:c}=await E.from("pilates_schedule_slots").select("*").in("date",i);if(c)throw console.error("Error fetching existing slots:",c),c;if(console.log("Found existing slots:",(A==null?void 0:A.length)||0),A&&A.length>0&&console.log("Sample existing slots:",A.slice(0,3)),A&&A.length>0){const{error:U}=await E.from("pilates_schedule_slots").delete().in("date",i);if(U)throw console.error("Error deleting existing slots:",U),U;console.log("✅ Deleted existing slots for week")}else console.log("ℹ️ No existing slots to delete");const R=y.map(U=>({date:U.date,start_time:U.time,end_time:g(U.time),max_capacity:4,is_active:U.is_active}));console.log("Creating all slots:",R.slice(0,3)),console.log("Active slots count:",R.filter(U=>U.is_active).length),console.log("Inactive slots count:",R.filter(U=>!U.is_active).length);const{error:j}=await E.from("pilates_schedule_slots").insert(R);if(j)throw console.error("Error creating new slots:",j),j;console.log("✅ Created all slots:",R.length),console.log("🔥🔥🔥 === SAVE SCHEDULE COMPLETE - REALTIME SYNC TRIGGERED ==="),x.success("Πρόγραμμα αποθηκεύθηκε επιτυχώς!"),await F()}catch(y){console.error("Error saving schedule:",y),x.error("Σφάλμα αποθήκευσης προγράμματος")}finally{D(!1)}},g=y=>{const[i,A]=y.split(":").map(Number),c=new Date;return c.setHours(i+1,A),c.toTimeString().slice(0,5)},we=y=>{const i=new Date(T);y==="prev"?i.setDate(i.getDate()-14):i.setDate(i.getDate()+14),me(i)},a=y=>{const i=Zt(y),A=["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"],c=["Ιαν","Φεβ","Μαρ","Απρ","Μαι","Ιουν","Ιουλ","Αυγ","Σεπ","Οκτ","Νοε","Δεκ"];A[i.getDay()];const R=i.getDate(),j=c[i.getMonth()];return`${R} ${j}`},Ne=async(y,i,A)=>{try{ne(!0);const c=await Vn(y);ce({slotId:y,date:i,time:A,bookings:c})}catch(c){console.error("Error loading slot info:",c),x.error("Σφάλμα φόρτωσης πληροφοριών slot")}finally{ne(!1)}};if(w)return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});const ee=he();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Πρόγραμμα Pilates"}),e.jsx("p",{className:"text-gray-600",children:"Κάντε κλικ στις ώρες που δεν θέλετε να είναι διαθέσιμες"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{const y=oa();me(y),console.log("🔥🔥🔥 ADMIN: Force refreshed currentWeek to Greek Monday:",y.toISOString())},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"🔄 Refresh"}),e.jsx("button",{onClick:()=>we("prev"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"← Προηγούμενη"}),e.jsx("button",{onClick:()=>we("next"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Επόμενη →"}),e.jsxs("button",{onClick:te,disabled:k,className:"flex items-center space-x-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[e.jsx(_s,{className:"h-5 w-5"}),e.jsx("span",{children:k?"Αποθήκευση...":"Αποθήκευση"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:["2 εβδομάδες: ",a(ee[0])," - ",a(ee[13])]}),e.jsx("p",{className:"text-sm text-blue-700",children:"Κάντε κλικ στις κόκκινες ώρες για να τις απενεργοποιήσετε (δεν θα εμφανίζονται στους χρήστες)"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 border-r border-gray-200 min-w-[100px]",children:"Ώρα"}),ee.map((y,i)=>e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-500 border-r border-gray-200 min-w-[120px]",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-bold",children:ke(y)}),e.jsx("span",{className:"text-xs text-gray-400",children:a(y)})]})},y))]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Q.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 border-r border-gray-200 bg-gray-50",children:y}),ee.map((i,A)=>{const c=`${i}-${y}`,R=_[c],j=Zt(i).getDay(),U=j===0||j===6,q=se[c],u=(q==null?void 0:q.booked)??0,P=(q==null?void 0:q.cap)??4;return e.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-200",children:U?e.jsx("div",{className:"w-full h-8 bg-gray-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-400",children:"Σαβ/Κυρ"})}):e.jsxs("div",{className:"relative w-full h-8",children:[e.jsx("button",{onClick:()=>oe(i,y),className:`w-full h-8 rounded transition-all duration-200 flex items-center justify-center ${R?u>=P?"bg-red-100 text-red-800 border-2 border-red-300":"bg-green-100 text-green-800 hover:bg-green-200 border-2 border-green-300":"bg-red-100 text-red-800 hover:bg-red-200 border-2 border-red-300"}`,children:R?e.jsxs("span",{className:"text-xs font-semibold",children:[u,"/",P]}):e.jsx(Jt,{className:"h-5 w-5"})}),R&&u>0&&u<P&&e.jsx("button",{onClick:G=>{G.stopPropagation();const l=n.find(z=>z.date===i&&z.start_time===`${y}:00`);l&&Ne(l.id,i,y)},className:"absolute top-0 right-0 w-4 h-4 bg-blue-500 hover:bg-blue-600 rounded-full flex items-center justify-center text-white text-xs transition-colors",title:"Πληροφορίες κρατήσεων",children:e.jsx(bo,{size:10})})]})},c)})]},y))})]})})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Εξήγηση"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 border-2 border-green-300 rounded flex items-center justify-center",children:e.jsx(ma,{className:"h-5 w-5 text-green-800"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Διαθέσιμο"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Οι χρήστες μπορούν να κλείσουν μαθήματα"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 border-2 border-red-300 rounded flex items-center justify-center",children:e.jsx(Jt,{className:"h-5 w-5 text-red-800"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Απενεργοποιημένο"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Δεν εμφανίζεται στους χρήστες"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-400",children:"Σαβ/Κυρ"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Σαββατοκύριακο"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Δεν υπάρχουν μαθήματα"})]})]})]})]}),ae&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Κρατήσεις για ",a(ae.date)," στις ",ae.time]}),e.jsx("button",{onClick:()=>ce(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Jt,{size:20})})]}),O?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Φόρτωση..."})]}):e.jsx("div",{className:"space-y-3",children:ae.bookings.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[ae.bookings.length," κρατήσεις:"]}),ae.bookings.map((y,i)=>{var A,c,R;return e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[(A=y.user)==null?void 0:A.first_name," ",(c=y.user)==null?void 0:c.last_name]}),e.jsx("p",{className:"text-sm text-gray-600",children:(R=y.user)==null?void 0:R.email})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Κράτηση: ",new Date(y.booking_date).toLocaleDateString("el-GR")]})]},y.id||i)})]}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Δεν υπάρχουν κρατήσεις για αυτό το slot"})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx($n,{className:"h-5 w-5 text-blue-400 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Σημαντικές Πληροφορίες"}),e.jsxs("ul",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[e.jsx("li",{children:"• Κάθε ώρα έχει χωρητικότητα 4 χρήστες (4 κρεβάτια pilates)"}),e.jsx("li",{children:"• Κάντε κλικ στις ώρες που δεν θέλετε να δουλεύετε"}),e.jsx("li",{children:"• Το πρόγραμμα εμφανίζεται στους χρήστες με ενεργή pilates συνδρομή"}),e.jsx("li",{children:"• Μην ξεχάσετε να αποθηκεύσετε τις αλλαγές!"}),e.jsx("li",{children:'• Κάντε κλικ στο μπλε κουμπί "i" για να δείτε τις κρατήσεις ενός slot'})]})]})]})})]})},Ns=async(n,b,w,$,k="",D)=>{try{console.log("[saveCashTransaction] Saving transaction:",{userId:n,amount:b,transactionType:w,programId:$,createdBy:k,notes:D});const{data:_,error:B}=await E.from("user_cash_transactions").insert({user_id:n,amount:b,transaction_type:w,program_id:$,created_by:k,notes:D}).select().single();return B?(console.error("[saveCashTransaction] Error saving transaction:",B),!1):(console.log("[saveCashTransaction] Transaction saved successfully:",_),!0)}catch(_){return console.error("[saveCashTransaction] Exception saving transaction:",_),!1}},fo=async(n,b)=>{try{console.log("[getCashRegisterTotals] Fetching totals...");let w=E.from("user_cash_transactions").select("amount, transaction_type, created_at");if(n&&(w=w.gte("created_at",n)),b){const _=b.length===10?`${b}T23:59:59.999Z`:b;w=w.lte("created_at",_)}const{data:$,error:k}=await w;if(k)return console.error("[getCashRegisterTotals] Error fetching totals:",k),{total_cash:0,total_pos:0,total_transactions:0};const D=($==null?void 0:$.reduce((_,B)=>(B.transaction_type==="cash"?_.total_cash+=B.amount:B.transaction_type==="pos"&&(_.total_pos+=B.amount),_.total_transactions+=1,_),{total_cash:0,total_pos:0,total_transactions:0}))||{total_cash:0,total_pos:0,total_transactions:0};return console.log("[getCashRegisterTotals] Totals calculated:",D),D}catch(w){return console.error("[getCashRegisterTotals] Exception fetching totals:",w),{total_cash:0,total_pos:0,total_transactions:0}}},yo=async(n,b)=>{try{console.log("[getCashSummaryPerUser] Fetching user summaries...");let w=E.from("user_cash_transactions").select(`
        user_id,
        amount,
        transaction_type,
        created_at,
        user_profiles!user_cash_transactions_user_id_fkey(
          first_name,
          last_name,
          email
        )
      `).order("created_at",{ascending:!1});if(n&&(w=w.gte("created_at",n)),b){const B=b.length===10?`${b}T23:59:59.999Z`:b;w=w.lte("created_at",B)}const{data:$,error:k}=await w;if(k)return console.error("[getCashSummaryPerUser] Error fetching user summaries:",k),[];if(console.log("[getCashSummaryPerUser] Raw data received:",($==null?void 0:$.length)||0,"records"),!$||$.length===0)return console.log("[getCashSummaryPerUser] No data found, returning empty array"),[];const D=new Map;$.forEach(B=>{const se=B.user_id,le=B.user_profiles;D.has(se)||D.set(se,{user_id:se,user_name:le?`${le.first_name||""} ${le.last_name||""}`.trim():`User ${se.slice(0,8)}`,user_email:(le==null?void 0:le.email)||"No email",cash_total:0,pos_total:0,cash_count:0,pos_count:0});const T=D.get(se);B.transaction_type==="cash"?(T.cash_total+=B.amount,T.cash_count+=1,(!T.last_cash_date||new Date(B.created_at)>new Date(T.last_cash_date))&&(T.last_cash_date=B.created_at)):B.transaction_type==="pos"&&(T.pos_total+=B.amount,T.pos_count+=1,(!T.last_pos_date||new Date(B.created_at)>new Date(T.last_pos_date))&&(T.last_pos_date=B.created_at))});const _=Array.from(D.values()).sort((B,se)=>se.cash_total+se.pos_total-(B.cash_total+B.pos_total));return console.log("[getCashSummaryPerUser] Processed summaries:",_),_}catch(w){return console.error("[getCashSummaryPerUser] Exception fetching user summaries:",w),[]}},jo=()=>{const[n,b]=m.useState({total_cash:0,total_pos:0,total_transactions:0}),[w,$]=m.useState([]),[k,D]=m.useState(!1),[_,B]=m.useState(""),[se,le]=m.useState([]),[T,me]=m.useState(""),[ae,ce]=m.useState(""),[O,ne]=m.useState(1),Q=10,F=async()=>{try{D(!0);const[i,A]=await Promise.all([fo(T||void 0,ae||void 0),yo(T||void 0,ae||void 0)]);b(i),$(A)}catch(i){console.error("Error loading cash register data:",i),x.error("Σφάλμα κατά τη φόρτωση των δεδομένων ταμείου")}finally{D(!1)}};m.useEffect(()=>{F()},[]);const he=()=>{ne(1),F()},ke=i=>{if(!i.trim()){le([]);return}const A=w.filter(c=>c.user_name.toLowerCase().includes(i.toLowerCase())||c.user_email.toLowerCase().includes(i.toLowerCase()));le(A)},oe=i=>{B(i),ke(i),ne(1)},te=Math.ceil(w.length/Q),g=(O-1)*Q,we=g+Q,a=w.slice(g,we),Ne=()=>{ne(i=>Math.max(i-1,1))},ee=()=>{ne(i=>Math.min(i+1,te))},y=_?se:a;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 rounded-xl p-4 sm:p-6 text-white mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-2",children:"💰 Ταμείο"}),e.jsx("p",{className:"text-green-100 text-sm sm:text-base",children:"Συνολικά ποσά και ανάλυση χρηστών"})]}),e.jsxs("button",{onClick:F,disabled:k,className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg text-sm disabled:opacity-50",children:[e.jsx(Ps,{className:`h-4 w-4 ${k?"animate-spin":""}`}),e.jsx("span",{children:"🔄 Ανανέωση"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-green-800 mb-2",children:"💵 Συνολικά Μετρητά"}),e.jsx("p",{className:"text-green-600",children:"Όλοι οι χρήστες συνολικά"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-4xl font-bold text-green-900",children:["€",n.total_cash.toFixed(2)]}),e.jsx("div",{className:"text-sm text-green-600",children:"ευρώ"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-2",children:"💳 Συνολικά POS"}),e.jsx("p",{className:"text-blue-600",children:"Όλοι οι χρήστες συνολικά"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-4xl font-bold text-blue-900",children:["€",n.total_pos.toFixed(2)]}),e.jsx("div",{className:"text-sm text-blue-600",children:"ευρώ"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-2",children:"📊 Συνολικές Συναλλαγές"}),e.jsx("p",{className:"text-purple-600",children:"Όλες οι συναλλαγές"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-4xl font-bold text-purple-900",children:n.total_transactions}),e.jsx("div",{className:"text-sm text-purple-600",children:"συναλλαγές"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"👥 Ανάλυση Χρηστών"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Μετρητά και POS ανά χρήστη"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Αναζήτηση χρήστη...",value:_,onChange:i=>oe(i.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"})]}),_&&e.jsx("button",{onClick:()=>oe(""),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ze,{className:"h-4 w-4"})}),e.jsxs("div",{className:"hidden sm:flex items-center space-x-2 ml-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"date",value:T,onChange:i=>me(i.target.value),className:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"})]}),e.jsx("span",{className:"text-gray-500 text-sm",children:"—"}),e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"date",value:ae,onChange:i=>ce(i.target.value),className:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"})]}),e.jsx("button",{onClick:he,className:"px-3 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700",children:"Φίλτρο"})]})]})]})}),e.jsx("div",{className:"p-6",children:k?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ps,{className:"h-8 w-8 mx-auto mb-4 text-gray-400 animate-spin"}),e.jsx("p",{className:"text-gray-500",children:"Φόρτωση δεδομένων..."})]}):y.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(rr,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Δεν υπάρχουν συναλλαγές ακόμα"}),e.jsx("p",{className:"text-sm mt-2",children:"Οι συναλλαγές θα εμφανιστούν εδώ όταν δημιουργηθούν"})]}):e.jsxs("div",{className:"space-y-4",children:[y.map((i,A)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:i.user_name.split(" ").map(c=>c[0]).join("").slice(0,2)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:i.user_name}),e.jsx("p",{className:"text-sm text-gray-600",children:i.user_email}),e.jsxs("div",{className:"flex space-x-4 text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:["💵 ",i.cash_count," μετρητά"]}),e.jsxs("span",{children:["💳 ",i.pos_count," POS"]})]})]})]}),e.jsx("div",{className:"text-right space-y-2",children:e.jsxs("div",{className:"flex space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["€",i.cash_total.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Μετρητά"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:["€",i.pos_total.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500",children:"POS"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:["€",(i.cash_total+i.pos_total).toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Σύνολο"})]})]})})]})},i.user_id)),_&&se.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Δεν βρέθηκαν χρήστες με αυτό το όνομα"}),e.jsx("p",{className:"text-sm mt-2",children:"Δοκιμάστε ένα διαφορετικό όρο αναζήτησης"})]}),!_&&te>1&&e.jsxs("div",{className:"flex items-center justify-between py-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Εμφανίζονται ",g+1,"-",Math.min(we,w.length)," από ",w.length," χρήστες"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:Ne,disabled:O===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"← Προηγούμενη"}),e.jsxs("span",{className:"px-3 py-2 text-sm text-gray-700",children:["Σελίδα ",O," από ",te]}),e.jsx("button",{onClick:ee,disabled:O===te,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Επόμενη →"})]})]})]})})]})]})},vo=({selectedUser:n,programId:b,weeklyFrequency:w,onAssignmentComplete:$})=>{const[k,D]=m.useState([]),[_,B]=m.useState([]),[se,le]=m.useState(null),[T,me]=m.useState(null),[ae,ce]=m.useState([]),[O,ne]=m.useState(!1),[Q,F]=m.useState(""),[he,ke]=m.useState([]);m.useEffect(()=>{oe()},[n.id,b]);const oe=async()=>{ne(!0);try{await Promise.all([te(),g(),we()])}catch(u){console.error("Failed to load group assignment data:",u),x.error("Σφάλμα κατά τη φόρτωση των δεδομένων")}finally{ne(!1)}},te=async()=>{try{const u=await Un(se||void 0);D(u)}catch(u){throw console.error("Failed to load available slots:",u),u}},g=async()=>{try{const u=await aa(n.id,b);B(u)}catch(u){throw console.error("Failed to load user assignments:",u),u}},we=async()=>{try{const u=await En(n.id,b);ke(u)}catch(u){throw console.error("Failed to load weekly assignment summary:",u),u}},a=async u=>{try{const P=await Fn(u);ce(P)}catch(P){console.error("Failed to load slot assignments:",P),x.error("Σφάλμα κατά τη φόρτωση των αναθέσεων")}},Ne=async u=>{me(u),await a(u.groupIdentifier)},ee=async()=>{if(!T){x.error("Παρακαλώ επιλέξτε μια ομαδική θέση");return}try{ne(!0);const u=await Tn(n.id,b,T.groupIdentifier,T.dayOfWeek,T.startTime,T.endTime,w);if(!u.isValid){x.error(`Δεν είναι δυνατή η ανάθεση: ${u.errorMessage}`);return}const P=await Ln(b,n.id,T.groupIdentifier,w,Q);if(P.success){x.success("Η ανάθεση δημιουργήθηκε επιτυχώς!"),F(""),await oe(),await a(T.groupIdentifier);const G=await aa(n.id,b);G.length>=w&&await On(n.id,b,G)&&x.success(`🎉 Το πρόγραμμα ολοκληρώθηκε! Ο χρήστης ${n.firstName} ${n.lastName} θα λάβει ενημέρωση.`),$&&$()}else x.error(`Σφάλμα: ${P.message}`)}catch(u){console.error("Failed to assign user:",u),x.error("Σφάλμα κατά τη δημιουργία της ανάθεσης")}finally{ne(!1)}},y=async u=>{if(confirm("Είστε σίγουροι ότι θέλετε να αφαιρέσετε αυτή την ανάθεση;"))try{ne(!0),await In(u)?(x.success("Η ανάθεση αφαιρέθηκε επιτυχώς"),await oe(),T&&await a(T.groupIdentifier)):x.error("Σφάλμα κατά την αφαίρεση της ανάθεσης")}catch(P){console.error("Failed to remove assignment:",P),x.error("Σφάλμα κατά την αφαίρεση της ανάθεσης")}finally{ne(!1)}},i=()=>_.length,A=()=>Math.max(0,w-i()),c=()=>i()>=w,R=()=>{const u=i(),P=w;return u===0?`Δεν έχουν γίνει αναθέσεις ακόμα. Απαιτούνται ${P} αναθέσεις.`:u<P?`Έχουν γίνει ${u} από ${P} απαιτούμενες αναθέσεις. Απομένουν ${P-u}.`:"✅ Ολοκληρώθηκαν όλες οι αναθέσεις! Ο χρήστης θα λάβει ενημέρωση για το πρόγραμμά του."},j=()=>[{value:null,label:"Όλες οι ημέρες"},{value:1,label:"Δευτέρα"},{value:2,label:"Τρίτη"},{value:3,label:"Τετάρτη"},{value:4,label:"Πέμπτη"},{value:5,label:"Παρασκευή"},{value:6,label:"Σάββατο"}],U=u=>u.isFull?"bg-red-100 border-red-300 text-red-700":u.availableSpots<=1?"bg-yellow-100 border-yellow-300 text-yellow-700":"bg-green-100 border-green-300 text-green-700",q=u=>_.some(P=>P.groupIdentifier===u.groupIdentifier);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ke,{className:"h-6 w-6 text-blue-600"}),e.jsxs("h3",{className:"text-xl font-bold text-blue-800",children:["Ανάθεση Ομαδικών Θέσεων - ",n.firstName," ",n.lastName]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:c()?e.jsxs("div",{className:"flex items-center space-x-2 bg-green-100 px-3 py-1 rounded-full",children:[e.jsx(sr,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Ολοκληρώθηκε"})]}):e.jsxs("div",{className:"flex items-center space-x-2 bg-orange-100 px-3 py-1 rounded-full",children:[e.jsx(lr,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-700",children:"Σε εξέλιξη"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Στόχος Εβδομάδας"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:w})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Τρέχουσες Αναθέσεις"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i()})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Υπολείπονται"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:A()})]})]}),e.jsx("div",{className:`mt-4 p-4 rounded-lg ${c()?"bg-green-50 border border-green-200":"bg-blue-50 border border-blue-200"}`,children:e.jsx("p",{className:`text-sm font-medium ${c()?"text-green-700":"text-blue-700"}`,children:R()})})]}),_.length>0&&e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(De,{className:"h-5 w-5 mr-2 text-blue-600"}),"Τρέχουσες Αναθέσεις"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:_.map(u=>e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-blue-800",children:[Xt(u.dayOfWeek)," - ",na(u.groupType)]}),e.jsxs("div",{className:"text-sm text-blue-600",children:[Qs(u.startTime)," - ",Qs(u.endTime)]}),e.jsxs("div",{className:"text-sm text-blue-600",children:["Προπονητής: ",u.trainer]})]}),e.jsx("button",{onClick:()=>y(u.id),className:"text-red-600 hover:text-red-800 p-1",title:"Αφαίρεση ανάθεσης",children:e.jsx(et,{className:"h-4 w-4"})})]}),u.notes&&e.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Σημειώσεις: ",u.notes]})]},u.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsx($t,{className:"h-5 w-5 mr-2 text-green-600"}),"Διαθέσιμες Ομαδικές Θέσεις"]}),e.jsx("select",{value:se||"",onChange:u=>{const P=u.target.value?parseInt(u.target.value):null;le(P),te()},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:j().map(u=>e.jsx("option",{value:u.value||"",children:u.label},u.value||"all"))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(u=>{const P=q(u),G=!P&&!u.isFull&&!c();return e.jsxs("div",{className:`rounded-lg p-4 border-2 cursor-pointer transition-all ${(T==null?void 0:T.id)===u.id?"border-blue-500 bg-blue-50":`border-gray-200 hover:border-gray-300 ${U(u)}`} ${G?"":"opacity-60"}`,onClick:()=>G&&Ne(u),children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:Xt(u.dayOfWeek)}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center mt-1",children:[e.jsx(st,{className:"h-4 w-4 mr-1"}),Qs(u.startTime)," - ",Qs(u.endTime)]}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center mt-1",children:[e.jsx(xa,{className:"h-4 w-4 mr-1"}),u.trainer," - ",u.room]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-800",children:na(u.groupType)}),e.jsxs("div",{className:"text-xs text-gray-600",children:[u.currentAssignments,"/",u.maxCapacity]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u.isFull?"bg-red-100 text-red-800":u.availableSpots<=1?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:u.isFull?"Πλήρες":`${u.availableSpots} διαθέσιμες`})}),P&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Ανατεθειμένο"})]})]},u.id)})})]}),T&&!c()&&e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(Ct,{className:"h-5 w-5 mr-2 text-green-600"}),"Ανάθεση στη θέση: ",Xt(T.dayOfWeek)," - ",Qs(T.startTime)]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Σημειώσεις (προαιρετικό)"}),e.jsx("textarea",{value:Q,onChange:u=>F(u.target.value),placeholder:"Προσθέστε σημειώσεις για αυτή την ανάθεση...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),ae.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Τρέχοντα μέλη αυτής της ομάδας:"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:ae.map(u=>{var P,G;return e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["• ",(P=u.userInfo)==null?void 0:P.first_name," ",(G=u.userInfo)==null?void 0:G.last_name]},u.id)})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:ee,disabled:O,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:[e.jsx(Ct,{className:"h-4 w-4 mr-2"}),O?"Δημιουργία...":"Δημιουργία Ανάθεσης"]}),e.jsx("button",{onClick:()=>me(null),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Ακύρωση"})]})]})]}),c()&&e.jsx("div",{className:"bg-green-50 rounded-xl p-6 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(sr,{className:"h-8 w-8 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-green-800",children:"Οι αναθέσεις ολοκληρώθηκαν!"}),e.jsxs("p",{className:"text-green-600",children:["Ο χρήστης έχει ανατεθεί σε ",i()," ομαδικές θέσεις αυτή την εβδομάδα."]})]})]})})]})},wo=async n=>{if(!n||n==="undefined"||n==="00000000-0000-0000-0000-000000000001")try{const{data:b,error:w}=await E.from("user_profiles").select("user_id").eq("role","admin").limit(1).single();return w||!b?(console.error("No admin user found:",w),null):b.user_id}catch(b){return console.error("Error getting admin user:",b),null}return n},No=({ultimateRequests:n,ultimateLoading:b,ultimateSearchTerm:w,setUltimateSearchTerm:$,selectedRequestOptions:k,handleRequestOptionChange:D,updateInstallmentAmounts:_,deleteUltimateRequest:B,loadUltimateRequests:se,handleApproveRequest:le,handleRejectRequest:T,loading:me,requestProgramApprovalStatus:ae,handleRequestProgramApprovalChange:ce,handleSaveRequestProgramOptions:O,handleUnfreezeRequestProgramOptions:ne,requestPendingUsers:Q,requestFrozenOptions:F,ultimateRequestFrozenWithPending:he})=>{const{user:ke}=ga(),[oe,te]=At.useState(1),g=50,we=100,[a,Ne]=At.useState(!1),[ee,y]=At.useState(null),i=()=>{const l=n.filter(z=>{var ye,Se,pe;return w===""||`${((ye=z.user)==null?void 0:ye.first_name)||""} ${((Se=z.user)==null?void 0:Se.last_name)||""}`.toLowerCase().includes(w.toLowerCase())||(((pe=z.user)==null?void 0:pe.email)||"").toLowerCase().includes(w.toLowerCase())});if(l.length>we){const z=(oe-1)*g,X=z+g;return l.slice(z,X)}return l},A=()=>n.filter(l=>{var X,ye,Se;return w===""||`${((X=l.user)==null?void 0:X.first_name)||""} ${((ye=l.user)==null?void 0:ye.last_name)||""}`.toLowerCase().includes(w.toLowerCase())||(((Se=l.user)==null?void 0:Se.email)||"").toLowerCase().includes(w.toLowerCase())}).length,c=()=>{const l=A();return Math.ceil(l/g)},R=()=>A()>we,j=l=>Q.has(l),U=l=>F[l]||{},q=(l,z)=>{y({requestId:l,installmentNumber:z}),Ne(!0)},u=async()=>{if(ee){const{requestId:l,installmentNumber:z}=ee;try{console.log(`[AdminUltimateInstallmentsTab] Locking installment ${z} for request ${l}`);const X=n.find(xe=>xe.id===l);if(X){const xe=k[l]||{},je={};z===1?(je.installment_1_amount=parseFloat(String(xe.installment1Amount||X.installment_1_amount||0)).toString(),je.installment_1_payment_method=xe.installment1PaymentMethod||X.installment_1_payment_method||"cash",je.installment_1_due_date=xe.installment1DueDate||X.installment_1_due_date):z===2?(je.installment_2_amount=parseFloat(String(xe.installment2Amount||X.installment_2_amount||0)).toString(),je.installment_2_payment_method=xe.installment2PaymentMethod||X.installment_2_payment_method||"cash",je.installment_2_due_date=xe.installment2DueDate||X.installment_2_due_date):z===3&&(je.installment_3_amount=parseFloat(String(xe.installment3Amount||X.installment_3_amount||0)).toString(),je.installment_3_payment_method=xe.installment3PaymentMethod||X.installment_3_payment_method||"cash",je.installment_3_due_date=xe.installment3DueDate||X.installment_3_due_date);const{error:Le}=await E.from("ultimate_membership_requests").update(je).eq("id",l);if(Le){console.error("[AdminUltimateInstallmentsTab] Error saving values before lock:",Le),x.error("Σφάλμα κατά την αποθήκευση των τιμών");return}console.log("[AdminUltimateInstallmentsTab] Saved values before locking:",je)}const ye=await wo(ke==null?void 0:ke.id);if(!ye){console.error("[AdminUltimateInstallmentsTab] No valid user ID found for locking"),x.error("Σφάλμα: Δεν βρέθηκε έγκυρο ID χρήστη για το κλείδωμα");return}const{error:Se}=await E.rpc("lock_installment",{p_request_id:l,p_installment_number:z,p_locked_by:ye});if(Se){console.error(`[AdminUltimateInstallmentsTab] Error locking installment ${z}:`,Se),x.error(`Σφάλμα κατά το κλείδωμα της ${z}ης δόσης`);return}console.log(`[AdminUltimateInstallmentsTab] Successfully locked installment ${z}`);const pe=k[l]||{},_e=n.find(xe=>xe.id===l);_e&&(z===1?(D(l,"installment1Amount",pe.installment1Amount||_e.installment_1_amount||""),D(l,"installment1PaymentMethod",pe.installment1PaymentMethod||_e.installment_1_payment_method||"cash"),D(l,"installment1DueDate",pe.installment1DueDate||_e.installment_1_due_date)):z===2?(D(l,"installment2Amount",pe.installment2Amount||_e.installment_2_amount||""),D(l,"installment2PaymentMethod",pe.installment2PaymentMethod||_e.installment_2_payment_method||"cash"),D(l,"installment2DueDate",pe.installment2DueDate||_e.installment_2_due_date)):z===3&&(D(l,"installment3Amount",pe.installment3Amount||_e.installment_3_amount||""),D(l,"installment3PaymentMethod",pe.installment3PaymentMethod||_e.installment_3_payment_method||"cash"),D(l,"installment3DueDate",pe.installment3DueDate||_e.installment_3_due_date)));const We=`installment${z}Locked`;D(l,We,!0),x.success(`${z}η δόση κλειδώθηκε επιτυχώς με τις τρέχουσες τιμές`),await se()}catch(X){console.error("[AdminUltimateInstallmentsTab] Exception locking installment:",X),x.error("Σφάλμα κατά το κλείδωμα της δόσης")}Ne(!1),y(null)}},P=()=>{Ne(!1),y(null)},G=(l,z)=>{const X=`installment_${z}_locked`,ye=l[X]===!0;return console.log(`[AdminUltimateInstallmentsTab] isInstallmentLocked check for request ${l.id}, installment ${z}: locked = ${ye}, field = ${X}, value = ${l[X]}`),ye};return At.useEffect(()=>{te(1)},[w]),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center",children:[e.jsx("span",{className:"text-4xl mr-3",children:"👑"}),"Ultimate Συνδρομές"]}),e.jsx("p",{className:"text-gray-300 mt-2 text-lg",children:"Διαχείριση αιτημάτων για πακέτα Ultimate με και χωρίς δόσεις"})]}),e.jsxs("button",{onClick:se,disabled:b,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 disabled:opacity-50 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:scale-105 font-medium",children:[b?e.jsx(qs,{className:"h-5 w-5 animate-spin"}):e.jsx(Ve,{className:"h-5 w-5"}),e.jsx("span",{children:"Ανανέωση"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-700 to-gray-800 rounded-2xl shadow-lg border border-gray-600 p-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-blue-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"🔍 Αναζήτηση με όνομα χρήστη ή email...",value:w,onChange:l=>$(l.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-white placeholder-gray-400 text-lg font-medium"})]})}),w&&e.jsx("button",{onClick:()=>$(""),className:"px-4 py-4 text-gray-400 hover:text-white transition-colors bg-gray-600 rounded-xl hover:bg-gray-500",children:e.jsx(ze,{className:"h-5 w-5"})})]})}),R()&&!b&&e.jsx("div",{className:"bg-gradient-to-r from-gray-700 to-gray-800 rounded-2xl shadow-lg border border-gray-600 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-white font-medium",children:["Σελίδα ",oe," από ",c()," • Σύνολο: ",A()," αιτήματα"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>te(1),disabled:oe===1,className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Πρώτη"}),e.jsx("button",{onClick:()=>te(l=>Math.max(l-1,1)),disabled:oe===1,className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Προηγούμενη"}),e.jsxs("span",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium",children:[oe," / ",c()]}),e.jsx("button",{onClick:()=>te(l=>Math.min(l+1,c())),disabled:oe===c(),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Επόμενη"}),e.jsx("button",{onClick:()=>te(c()),disabled:oe===c(),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Τελευταία"})]})]})}),b?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx(qs,{className:"h-12 w-12 animate-spin text-blue-400 mx-auto mb-4"}),e.jsx("span",{className:"text-gray-300 font-medium text-lg",children:"Φόρτωση Ultimate αιτημάτων..."})]})}):i().length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-full p-6 w-24 h-24 mx-auto mb-6 shadow-2xl",children:e.jsx(ha,{className:"h-12 w-12 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:w?"🔍 Δεν βρέθηκαν αποτελέσματα":"👑 Δεν υπάρχουν Ultimate αιτήματα"}),e.jsx("p",{className:"text-gray-300 text-lg",children:w?"Δοκιμάστε διαφορετικό όνομα για την αναζήτηση.":"Όταν οι χρήστες υποβάλουν αιτήματα για το πακέτο Ultimate, θα εμφανίζονται εδώ."})]}):e.jsx("div",{className:"grid gap-8",children:i().map(l=>{var z,X,ye,Se,pe,_e,We,xe,je,Le,ks,xs,gs,hs,us,Ss,bs,As,tt,$s,Cs,ts,K,Re,Oe,rt,lt,at,Ge,nt,Ms,Ds,rs,ot,ls,it,as,ns,ps,Ae,os,Be,Us,fs;return e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl shadow-2xl border border-gray-600 p-8 hover:shadow-3xl transition-all duration-300 transform hover:scale-102",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-6 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsxs("div",{className:"relative",children:[(z=l.user)!=null&&z.profile_photo?e.jsxs("div",{className:"w-16 h-16 rounded-2xl overflow-hidden shadow-2xl border-3 border-blue-400",children:[e.jsx("img",{src:l.user.profile_photo,alt:`${(X=l.user)==null?void 0:X.first_name} ${(ye=l.user)==null?void 0:ye.last_name}`,className:"w-full h-full object-cover",onError:C=>{C.currentTarget.style.display="none";const Ue=C.currentTarget.nextElementSibling;Ue&&(Ue.style.display="flex")}}),e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center hidden",children:e.jsx(Ke,{className:"h-8 w-8 text-white"})})]}):e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-2xl",children:e.jsx(Ke,{className:"h-8 w-8 text-white"})}),l.status==="pending"&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-yellow-400 to-yellow-500 rounded-full border-2 border-white shadow-lg animate-pulse"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"text-2xl font-bold text-white mb-2",children:[(Se=l.user)==null?void 0:Se.first_name," ",(pe=l.user)==null?void 0:pe.last_name]}),e.jsxs("p",{className:"text-gray-300 mb-3 flex items-center text-lg",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mr-3"}),(_e=l.user)==null?void 0:_e.email]}),e.jsxs("div",{className:"flex items-center space-x-3 flex-wrap",children:[e.jsx("span",{className:"inline-flex items-center px-4 py-2 rounded-xl text-sm font-bold bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg",children:"👑 Ultimate Package"}),e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsx("span",{className:"text-gray-200 font-medium",children:tr(l.duration_type)}),l.has_installments&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-xl text-sm font-medium bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-lg",children:"💳 Με Δόσεις"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-green-400 to-green-500 bg-clip-text text-transparent mb-2",children:Fe(l.requested_price)}),e.jsxs("div",{className:"text-gray-300 flex items-center justify-end",children:[e.jsx(De,{className:"h-4 w-4 mr-2 text-blue-400"}),e.jsx("span",{className:"font-medium",children:new Date(l.created_at).toLocaleDateString("el-GR")})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[l.status==="pending"&&(U(l.id)&&Object.keys(U(l.id)||{}).length>0?e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("button",{onClick:()=>le(l.id),disabled:me,className:"px-8 py-4 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-2xl hover:from-green-700 hover:to-green-800 transition-all duration-200 text-lg font-bold shadow-2xl hover:shadow-3xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-3 transform hover:scale-110",children:[e.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"✅ Εγκρίνω Συνδρομή"})]}),e.jsxs("button",{onClick:()=>T(l.id),disabled:me,className:"px-8 py-4 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-2xl hover:from-red-700 hover:to-red-800 transition-all duration-200 text-lg font-bold shadow-2xl hover:shadow-3xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-3 transform hover:scale-110",children:[e.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),e.jsx("span",{children:"❌ Απορρίπτω Συνδρομή"})]})]}):e.jsx("div",{className:"max-w-[340px] text-right",children:e.jsxs("div",{className:"inline-flex items-start bg-yellow-500/10 border border-yellow-500/30 text-yellow-200 rounded-xl px-3 py-2 text-sm",children:[e.jsx("span",{className:"mr-2",children:"🔒"}),e.jsx("span",{children:"Για να ενεργοποιηθούν τα κουμπιά «Εγκρίνω Συνδρομή / Απορρίπτω Συνδρομή», εκτελέστε πρώτα ενέργεια πληρωμής (Έγκριση/Απόρριψη/Αναμονή) και πατήστε «Αποθήκευση Program Options»."})]})})),l.status==="approved"&&e.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-green-500/20 to-green-600/20 rounded-xl p-3 border border-green-500/30",children:[e.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl text-sm font-bold shadow-lg",children:"✅ Εγκεκριμένο"})]}),l.status==="rejected"&&e.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-red-500/20 to-red-600/20 rounded-xl p-3 border border-red-500/30",children:[e.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full animate-pulse"}),e.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl text-sm font-bold shadow-lg",children:"❌ Απορριφθέν"})]}),e.jsxs("button",{onClick:()=>{window.confirm("Είστε σίγουροι ότι θέλετε να διαγράψετε αυτό το Ultimate αίτημα; Αυτή η ενέργεια δεν μπορεί να αναιρεθεί.")&&B(l.id)},className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all duration-200 text-sm font-medium flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(et,{className:"h-4 w-4"}),e.jsx("span",{children:"🗑️ Διαγραφή"})]})]})]})]}),l.has_installments&&e.jsxs("div",{className:"mt-8 bg-gradient-to-r from-blue-500/20 to-blue-600/20 rounded-2xl p-6 border border-blue-500/30 shadow-xl",children:[e.jsxs("h4",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"text-3xl mr-3",children:"💳"}),"Διαχείριση Δόσεων"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-5 border border-gray-600 shadow-lg",children:[e.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"1️⃣"}),"1η Δόση"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"number",value:((We=k[l.id])==null?void 0:We.installment1Amount)||l.installment_1_amount||"",onChange:C=>D(l.id,"installment1Amount",C.target.value),placeholder:"Ποσό",disabled:G(l,1),className:`w-full p-4 border rounded-xl focus:ring-2 text-white placeholder-gray-400 text-lg font-medium ${G(l,1)?"border-orange-500 bg-orange-500/20 focus:ring-orange-500 cursor-not-allowed text-orange-200 placeholder-orange-300":"border-gray-600 bg-gray-800 focus:ring-blue-500 focus:border-blue-500"}`}),e.jsxs("select",{value:((xe=k[l.id])==null?void 0:xe.installment1PaymentMethod)||l.installment_1_payment_method||"cash",onChange:C=>D(l.id,"installment1PaymentMethod",C.target.value),disabled:G(l,1),className:`w-full p-4 border rounded-xl focus:ring-2 text-white text-lg font-medium ${G(l,1)?"border-orange-500 bg-orange-500/20 focus:ring-orange-500 cursor-not-allowed text-orange-200":"border-gray-600 bg-gray-800 focus:ring-blue-500 focus:border-blue-500"}`,children:[e.jsx("option",{value:"cash",children:"💰 Μετρητά"}),e.jsx("option",{value:"pos",children:"💳 POS"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center",children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"📅 Ημερομηνία Πληρωμής"]}),e.jsx("input",{type:"date",value:((je=k[l.id])==null?void 0:je.installment1DueDate)||l.installment_1_due_date||"",onChange:C=>D(l.id,"installment1DueDate",C.target.value),disabled:G(l,1),className:`w-full p-3 border rounded-xl focus:ring-2 focus:border-blue-500 text-white ${G(l,1)?"border-orange-500 bg-orange-500/20 focus:ring-orange-500 cursor-not-allowed text-orange-200":"border-gray-600 bg-gray-800 focus:ring-blue-500"}`})]}),e.jsx("div",{className:"flex items-center space-x-3 pt-2",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:G(l,1),onChange:()=>q(l.id,1),className:"w-4 h-4 text-orange-600 bg-gray-800 border-gray-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("span",{className:"text-sm text-gray-300 flex items-center space-x-1",children:[e.jsx(ss,{className:"h-3 w-3"}),e.jsx("span",{children:"Κλείδωμα Δόσης"})]})]})}),G(l,1)&&e.jsxs("div",{className:"mt-3 p-3 bg-orange-500/20 border border-orange-500/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ss,{className:"h-4 w-4 text-orange-400"}),e.jsx("span",{className:"text-sm font-bold text-orange-300",children:"Κλειδωμένες Τιμές"})]}),e.jsxs("div",{className:"space-y-1 text-xs text-orange-200",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"💰 Ποσό:"})," ",Fe(l.installment_1_amount||0)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"💳 Τρόπος Πληρωμής:"})," ",l.installment_1_payment_method==="cash"?"💰 Μετρητά":"💳 POS"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"📅 Ημερομηνία:"})," ",l.installment_1_due_date||"Δεν ορίστηκε"]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-5 border border-gray-600 shadow-lg",children:[e.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"2️⃣"}),"2η Δόση"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"number",value:((Le=k[l.id])==null?void 0:Le.installment2Amount)||l.installment_2_amount||"",onChange:C=>D(l.id,"installment2Amount",C.target.value),placeholder:"Ποσό",disabled:G(l,2),className:`w-full p-4 border rounded-xl focus:ring-2 text-white placeholder-gray-400 text-lg font-medium ${G(l,2)?"border-orange-500 bg-orange-500/20 focus:ring-orange-500 cursor-not-allowed text-orange-200 placeholder-orange-300":"border-gray-600 bg-gray-800 focus:ring-blue-500 focus:border-blue-500"}`}),e.jsxs("select",{value:((ks=k[l.id])==null?void 0:ks.installment2PaymentMethod)||l.installment_2_payment_method||"cash",onChange:C=>D(l.id,"installment2PaymentMethod",C.target.value),disabled:G(l,2),className:`w-full p-4 border rounded-xl focus:ring-2 text-white text-lg font-medium ${G(l,2)?"border-orange-500 bg-orange-500/20 focus:ring-orange-500 cursor-not-allowed text-orange-200":"border-gray-600 bg-gray-800 focus:ring-blue-500 focus:border-blue-500"}`,children:[e.jsx("option",{value:"cash",children:"💰 Μετρητά"}),e.jsx("option",{value:"pos",children:"💳 POS"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center",children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"📅 Ημερομηνία Πληρωμής"]}),e.jsx("input",{type:"date",value:((xs=k[l.id])==null?void 0:xs.installment2DueDate)||l.installment_2_due_date||"",onChange:C=>D(l.id,"installment2DueDate",C.target.value),disabled:G(l,2),className:`w-full p-3 border rounded-xl focus:ring-2 focus:border-blue-500 text-white ${G(l,2)?"border-orange-500 bg-orange-500/20 focus:ring-orange-500 cursor-not-allowed text-orange-200":"border-gray-600 bg-gray-800 focus:ring-blue-500"}`})]}),e.jsx("div",{className:"flex items-center space-x-3 pt-2",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:G(l,2),onChange:()=>q(l.id,2),className:"w-4 h-4 text-orange-600 bg-gray-800 border-gray-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("span",{className:"text-sm text-gray-300 flex items-center space-x-1",children:[e.jsx(ss,{className:"h-3 w-3"}),e.jsx("span",{children:"Κλείδωμα Δόσης"})]})]})}),G(l,2)&&e.jsxs("div",{className:"mt-3 p-3 bg-orange-500/20 border border-orange-500/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ss,{className:"h-4 w-4 text-orange-400"}),e.jsx("span",{className:"text-sm font-bold text-orange-300",children:"Κλειδωμένες Τιμές"})]}),e.jsxs("div",{className:"space-y-1 text-xs text-orange-200",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"💰 Ποσό:"})," ",Fe(l.installment_2_amount||0)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"💳 Τρόπος Πληρωμής:"})," ",l.installment_2_payment_method==="cash"?"💰 Μετρητά":"💳 POS"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"📅 Ημερομηνία:"})," ",l.installment_2_due_date||"Δεν ορίστηκε"]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-5 border border-gray-600 shadow-lg",children:[e.jsx("label",{className:"block text-lg font-bold text-white mb-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"3️⃣"}),"3η Δόση"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"number",value:((gs=k[l.id])==null?void 0:gs.installment3Amount)||l.installment_3_amount||"",onChange:C=>D(l.id,"installment3Amount",C.target.value),placeholder:"Ποσό",disabled:G(l,3),className:`w-full p-4 border rounded-xl focus:ring-2 text-white placeholder-gray-400 text-lg font-medium ${G(l,3)?"border-orange-500 bg-orange-500/20 focus:ring-orange-500 cursor-not-allowed text-orange-200 placeholder-orange-300":"border-gray-600 bg-gray-800 focus:ring-blue-500 focus:border-blue-500"}`}),e.jsxs("select",{value:((hs=k[l.id])==null?void 0:hs.installment3PaymentMethod)||l.installment_3_payment_method||"cash",onChange:C=>D(l.id,"installment3PaymentMethod",C.target.value),disabled:G(l,3),className:`w-full p-4 border rounded-xl focus:ring-2 text-white text-lg font-medium ${G(l,3)?"border-orange-500 bg-orange-500/20 focus:ring-orange-500 cursor-not-allowed text-orange-200":"border-gray-600 bg-gray-800 focus:ring-blue-500 focus:border-blue-500"}`,children:[e.jsx("option",{value:"cash",children:"💰 Μετρητά"}),e.jsx("option",{value:"pos",children:"💳 POS"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center",children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"📅 Ημερομηνία Πληρωμής"]}),e.jsx("input",{type:"date",value:((us=k[l.id])==null?void 0:us.installment3DueDate)||l.installment_3_due_date||"",onChange:C=>D(l.id,"installment3DueDate",C.target.value),disabled:G(l,3),className:`w-full p-3 border rounded-xl focus:ring-2 focus:border-blue-500 text-white ${G(l,3)?"border-orange-500 bg-orange-500/20 focus:ring-orange-500 cursor-not-allowed text-orange-200":"border-gray-600 bg-gray-800 focus:ring-blue-500"}`})]}),e.jsx("div",{className:"flex items-center space-x-3 pt-2",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:G(l,3),onChange:()=>q(l.id,3),className:"w-4 h-4 text-orange-600 bg-gray-800 border-gray-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("span",{className:"text-sm text-gray-300 flex items-center space-x-1",children:[e.jsx(ss,{className:"h-3 w-3"}),e.jsx("span",{children:"Κλείδωμα Δόσης"})]})]})}),G(l,3)&&e.jsxs("div",{className:"mt-3 p-3 bg-orange-500/20 border border-orange-500/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ss,{className:"h-4 w-4 text-orange-400"}),e.jsx("span",{className:"text-sm font-bold text-orange-300",children:"Κλειδωμένες Τιμές"})]}),e.jsxs("div",{className:"space-y-1 text-xs text-orange-200",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"💰 Ποσό:"})," ",Fe(l.installment_3_amount||0)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"💳 Τρόπος Πληρωμής:"})," ",l.installment_3_payment_method==="cash"?"💰 Μετρητά":"💳 POS"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"📅 Ημερομηνία:"})," ",l.installment_3_due_date||"Δεν ορίστηκε"]})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-blue-500/30 to-blue-600/30 rounded-2xl border border-blue-500/50 shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-blue-300 text-lg",children:"💰 Σύνολο Δόσεων:"}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-green-500 bg-clip-text text-transparent",children:Fe(Number(((Ss=k[l.id])==null?void 0:Ss.installment1Amount)||l.installment_1_amount||0)+Number(((bs=k[l.id])==null?void 0:bs.installment2Amount)||l.installment_2_amount||0)+Number(((As=k[l.id])==null?void 0:As.installment3Amount)||l.installment_3_amount||0))})]}),e.jsxs("div",{className:"text-blue-200 mt-2 font-medium",children:["📊 Από ",Fe(l.requested_price)," (Πακέτο Ultimate)"]})]})]}),e.jsxs("div",{className:"mt-8 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-2xl p-6 border border-purple-500/30 shadow-xl",children:[e.jsxs("h4",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"text-3xl mr-3",children:"⚙️"}),"Program Options"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx("button",{type:"button",onClick:()=>{var C;j(l.id)||D(l.id,"oldMembers",!((C=k[l.id])!=null&&C.oldMembers))},className:`w-full px-6 py-4 rounded-2xl font-bold transition-all duration-200 shadow-2xl transform hover:scale-105 text-lg ${j(l.id)?(tt=U(l.id))!=null&&tt.oldMembers?"bg-gradient-to-r from-green-600 to-green-700 text-white cursor-not-allowed border-2 border-yellow-400":"bg-gradient-to-r from-gray-600 to-gray-700 text-gray-300 cursor-not-allowed border-2 border-yellow-400":($s=k[l.id])!=null&&$s.oldMembers?"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800 border-2 border-green-400":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 border-2 border-blue-400"}`,disabled:j(l.id),children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"👴 Παλαιά μέλη"}),(j(l.id)?(Cs=U(l.id))==null?void 0:Cs.oldMembers:(ts=k[l.id])==null?void 0:ts.oldMembers)&&e.jsx("span",{className:"text-green-200 text-xl",children:"✓"}),j(l.id)&&e.jsx("span",{className:"text-yellow-400",children:"🔒"})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-5 border border-gray-600 shadow-lg",children:[e.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"🏋️‍♂️"}),"Kettlebell Points",j(l.id)&&e.jsx("span",{className:"text-yellow-400 ml-2",children:"🔒"})]}),e.jsx("input",{type:"number",value:j(l.id)?((K=U(l.id))==null?void 0:K.kettlebellPoints)||"":((Re=k[l.id])==null?void 0:Re.kettlebellPoints)||"",onChange:C=>{j(l.id)||D(l.id,"kettlebellPoints",C.target.value)},className:`w-full px-4 py-4 border rounded-xl focus:outline-none focus:ring-2 text-lg font-medium ${j(l.id)?"border-yellow-500 bg-yellow-500/20 focus:ring-yellow-500 cursor-not-allowed text-yellow-200 placeholder-yellow-300":"border-gray-600 bg-gray-800 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-gray-400"}`,placeholder:"Εισάγετε αριθμό...",disabled:j(l.id)})]}),e.jsx("button",{type:"button",onClick:()=>{var C;j(l.id)||D(l.id,"cash",!((C=k[l.id])!=null&&C.cash))},className:`w-full px-6 py-4 rounded-2xl font-bold transition-all duration-200 shadow-2xl transform hover:scale-105 text-lg ${j(l.id)?(Oe=U(l.id))!=null&&Oe.cash?"bg-gradient-to-r from-green-600 to-green-700 text-white cursor-not-allowed border-2 border-yellow-400":"bg-gradient-to-r from-gray-600 to-gray-700 text-gray-300 cursor-not-allowed border-2 border-yellow-400":(rt=k[l.id])!=null&&rt.cash?"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800 border-2 border-green-400":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 border-2 border-blue-400"}`,disabled:j(l.id),children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"💰 Μετρητά"}),(j(l.id)?(lt=U(l.id))==null?void 0:lt.cash:(at=k[l.id])==null?void 0:at.cash)&&e.jsx("span",{className:"text-green-200 text-xl",children:"✓"}),j(l.id)&&e.jsx("span",{className:"text-yellow-400",children:"🔒"})]})}),e.jsx("button",{type:"button",onClick:()=>{var C;j(l.id)||D(l.id,"pos",!((C=k[l.id])!=null&&C.pos))},className:`w-full px-6 py-4 rounded-2xl font-bold transition-all duration-200 shadow-2xl transform hover:scale-105 text-lg ${j(l.id)?(Ge=U(l.id))!=null&&Ge.pos?"bg-gradient-to-r from-green-600 to-green-700 text-white cursor-not-allowed border-2 border-yellow-400":"bg-gradient-to-r from-gray-600 to-gray-700 text-gray-300 cursor-not-allowed border-2 border-yellow-400":(nt=k[l.id])!=null&&nt.pos?"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800 border-2 border-green-400":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 border-2 border-blue-400"}`,disabled:j(l.id),children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"💳 POS"}),(j(l.id)?(Ms=U(l.id))==null?void 0:Ms.pos:(Ds=k[l.id])==null?void 0:Ds.pos)&&e.jsx("span",{className:"text-green-200 text-xl",children:"✓"}),j(l.id)&&e.jsx("span",{className:"text-yellow-400",children:"🔒"})]})})]}),(((rs=k[l.id])==null?void 0:rs.cash)||((ot=U(l.id))==null?void 0:ot.cash))&&e.jsxs("div",{className:"mb-6 bg-gradient-to-r from-green-500/20 to-green-600/20 rounded-2xl p-5 border border-green-500/30",children:[e.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"💰"}),"Ποσό Μετρητών (€)",j(l.id)&&e.jsx("span",{className:"text-yellow-400 ml-2",children:"🔒"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:j(l.id)?((it=(ls=U(l.id))==null?void 0:ls.cashAmount)==null?void 0:it.toString())||"":((ns=(as=k[l.id])==null?void 0:as.cashAmount)==null?void 0:ns.toString())||"",onChange:C=>{j(l.id)||D(l.id,"cashAmount",parseFloat(C.target.value)||0)},className:`w-full px-4 py-4 border rounded-xl focus:outline-none focus:ring-2 text-lg font-medium ${j(l.id)?"border-yellow-500 bg-yellow-500/20 focus:ring-yellow-500 cursor-not-allowed text-yellow-200 placeholder-yellow-300":"border-gray-600 bg-gray-800 focus:ring-green-500 focus:border-green-500 text-white placeholder-gray-400"}`,placeholder:"Εισάγετε ποσό σε €...",disabled:j(l.id)}),e.jsx("button",{onClick:()=>{var Ue,He;const C=j(l.id)?(Ue=U(l.id))==null?void 0:Ue.cashAmount:(He=k[l.id])==null?void 0:He.cashAmount;C&&parseFloat(C.toString())>0?x.success(`💰 Μετρητά €${C} επιλέχθηκαν!`):x.success("💰 Μετρητά μηδενίστηκαν!")},disabled:j(l.id),className:`mt-3 w-full px-4 py-3 text-sm rounded-xl font-medium transition-colors ${j(l.id)?"bg-yellow-500/50 text-yellow-200 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}`,children:"✓ Επιλογή Μετρητά"})]}),(((ps=k[l.id])==null?void 0:ps.pos)||((Ae=U(l.id))==null?void 0:Ae.pos))&&e.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-500/20 to-blue-600/20 rounded-2xl p-5 border border-blue-500/30",children:[e.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"💳"}),"Ποσό POS (€)",j(l.id)&&e.jsx("span",{className:"text-yellow-400 ml-2",children:"🔒"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:j(l.id)?((Be=(os=U(l.id))==null?void 0:os.posAmount)==null?void 0:Be.toString())||"":((fs=(Us=k[l.id])==null?void 0:Us.posAmount)==null?void 0:fs.toString())||"",onChange:C=>{j(l.id)||D(l.id,"posAmount",parseFloat(C.target.value)||0)},className:`w-full px-4 py-4 border rounded-xl focus:outline-none focus:ring-2 text-lg font-medium ${j(l.id)?"border-yellow-500 bg-yellow-500/20 focus:ring-yellow-500 cursor-not-allowed text-yellow-200 placeholder-yellow-300":"border-gray-600 bg-gray-800 focus:ring-blue-500 focus:border-blue-500 text-white placeholder-gray-400"}`,placeholder:"Εισάγετε ποσό σε €...",disabled:j(l.id)}),e.jsx("button",{onClick:()=>{var Ue,He;const C=j(l.id)?(Ue=U(l.id))==null?void 0:Ue.posAmount:(He=k[l.id])==null?void 0:He.posAmount;C&&parseFloat(C.toString())>0?x.success(`💳 POS €${C} επιλέχθηκε!`):x.success("💳 POS μηδενίστηκε!")},disabled:j(l.id),className:`mt-3 w-full px-4 py-3 text-sm rounded-xl font-medium transition-colors ${j(l.id)?"bg-yellow-500/50 text-yellow-200 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:"✓ Επιλογή POS"})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-4",children:[!U(l.id)&&e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"inline-flex items-start bg-blue-500/10 border border-blue-500/30 text-blue-200 rounded-xl px-3 py-2 text-sm",children:[e.jsx("span",{className:"mr-2",children:"ℹ️"}),e.jsx("span",{children:"Επιλέξτε μια κατάσταση πληρωμής (Έγκριση/Απόρριψη/Αναμονή) και πατήστε «Αποθήκευση Program Options»."})]})}),U(l.id)&&e.jsx("button",{onClick:()=>ce(l.id,"approved"),className:`px-6 py-3 rounded-2xl text-lg font-bold transition-all duration-200 shadow-xl transform hover:scale-105 ${ae[l.id]==="approved"?"bg-gradient-to-r from-green-600 to-green-700 text-white border-2 border-green-400":"bg-gradient-to-r from-green-500/20 to-green-600/20 text-green-300 border-2 border-green-500/30 hover:from-green-500/30 hover:to-green-600/30"}`,children:"✅ Έγκριση Πληρωμής"}),U(l.id)&&e.jsx("button",{onClick:()=>ce(l.id,"rejected"),className:`px-6 py-3 rounded-2xl text-lg font-bold transition-all duration-200 shadow-xl transform hover:scale-105 ${ae[l.id]==="rejected"?"bg-gradient-to-r from-red-600 to-red-700 text-white border-2 border-red-400":"bg-gradient-to-r from-red-500/20 to-red-600/20 text-red-300 border-2 border-red-500/30 hover:from-red-500/30 hover:to-red-600/30"}`,children:"❌ Απόρριψη Πληρωμής"}),e.jsx("button",{onClick:()=>ce(l.id,"pending"),className:`px-6 py-3 rounded-2xl text-lg font-bold transition-all duration-200 shadow-xl transform hover:scale-105 ${ae[l.id]==="pending"?"bg-gradient-to-r from-yellow-600 to-yellow-700 text-white border-2 border-yellow-400":"bg-gradient-to-r from-yellow-500/20 to-yellow-600/20 text-yellow-300 border-2 border-yellow-500/30 hover:from-yellow-500/30 hover:to-yellow-600/30"}`,children:"⏳ Αναμονή/Πάγωμα Πληρωμής"}),e.jsxs("button",{onClick:()=>O(l.id),disabled:me||ae[l.id]==="none",className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-2xl hover:from-purple-700 hover:to-purple-800 transition-all duration-200 text-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center shadow-2xl hover:shadow-3xl transform hover:scale-105",children:[me?e.jsx(qs,{className:"h-5 w-5 animate-spin mr-2"}):e.jsx(_s,{className:"h-5 w-5 mr-2"}),"💾 Αποθήκευση Program Options"]}),U(l.id)&&he.has(l.id)&&e.jsxs("button",{onClick:()=>ne(l.id),className:"px-6 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-2xl hover:from-orange-700 hover:to-orange-800 transition-all duration-200 text-lg font-bold flex items-center shadow-2xl hover:shadow-3xl transform hover:scale-105",children:[e.jsx("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),"🔓 ΞΕΠΑΓΩΜΑ"]})]})]})]},l.id)})}),a&&ee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl p-8 max-w-md mx-4 border border-gray-600 shadow-2xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-orange-500 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx(ss,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"🔒 Κλείδωμα Δόσης"}),e.jsxs("p",{className:"text-gray-300 mb-6 text-lg",children:["Do you confirm locking installment ",ee.installmentNumber,"?"]}),e.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"Μόλις κλειδώσετε αυτή τη δόση, δεν θα μπορείτε πλέον να επεξεργαστείτε το ποσό ή την ημερομηνία πληρωμής."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:P,className:"flex-1 px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-xl hover:from-gray-700 hover:to-gray-800 transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:"❌ Cancel"}),e.jsxs("button",{onClick:u,className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-xl hover:from-orange-700 hover:to-orange-800 transition-all duration-200 font-medium shadow-lg hover:shadow-xl flex items-center justify-center space-x-2",children:[e.jsx(sr,{className:"h-4 w-4"}),e.jsx("span",{children:"✅ Yes, Lock"})]})]})]})})})]})},_o=()=>{const[n,b]=m.useState(""),[w,$]=m.useState([]),[k,D]=m.useState([]),[_,B]=m.useState(null),[se,le]=m.useState(!1),[T,me]=m.useState(!1),[ae,ce]=m.useState(!1),[O,ne]=m.useState(1),[Q,F]=m.useState(1),[he,ke]=m.useState(0),oe=10,te=async(c=1)=>{try{le(!0);const[R,j]=await Promise.all([Jn(c,oe),Xn()]);D(R),ke(j),F(Math.ceil(j/oe)),ne(c)}catch(R){console.error("Error loading random users:",R),x.error("Σφάλμα κατά τη φόρτωση των χρηστών")}finally{le(!1)}};m.useEffect(()=>{te(1)},[]);const g=async c=>{if(b(c),!c.trim()){$([]);return}try{me(!0);const R=await Zn(c);$(R)}catch(R){console.error("Error searching users:",R),x.error("Σφάλμα κατά την αναζήτηση")}finally{me(!1)}},we=async c=>{try{ce(!0);const R=await qn(c);B(R)}catch(R){console.error("Error loading user details:",R),x.error("Σφάλμα κατά τη φόρτωση των λεπτομερειών χρήστη")}finally{ce(!1)}},a=()=>{O>1&&te(O-1)},Ne=()=>{O<Q&&te(O+1)},ee=()=>{b(""),$([])},y=c=>new Date(c).toLocaleDateString("el-GR",{year:"numeric",month:"long",day:"numeric"}),i=c=>new Intl.NumberFormat("el-GR",{style:"currency",currency:"EUR"}).format(c),A=n?w:k;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl p-4 sm:p-6 text-white mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-2",children:"👥 Χρήστες-Πληροφορίες"}),e.jsx("p",{className:"text-purple-100 text-sm sm:text-base",children:"Αναζήτηση και λεπτομέρειες χρηστών"})]}),e.jsxs("button",{onClick:()=>te(1),disabled:se,className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg text-sm disabled:opacity-50",children:[e.jsx(Ps,{className:`h-4 w-4 ${se?"animate-spin":""}`}),e.jsx("span",{children:"🔄 Ανανέωση"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"🔍 Αναζήτηση με όνομα, email ή ID χρήστη...",value:n,onChange:c=>g(c.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-gray-900 placeholder-gray-500"})]})}),n&&e.jsx("button",{onClick:ee,className:"px-4 py-3 text-gray-400 hover:text-gray-600 transition-colors bg-gray-100 rounded-xl hover:bg-gray-200",children:e.jsx(ze,{className:"h-5 w-5"})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:n?`Αποτελέσματα αναζήτησης (${w.length})`:`Χρήστες (Σελίδα ${O} από ${Q})`})}),se||T?e.jsx("div",{className:"p-8 text-center",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 text-gray-500",children:[e.jsx(Ps,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Φόρτωση χρηστών..."})]})}):A.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx($t,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Δεν βρέθηκαν χρήστες"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:A.map(c=>{var R,j,U,q,u,P;return e.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>we(c.user_id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:[((j=(R=c.first_name)==null?void 0:R.trim())==null?void 0:j.charAt(0))||((q=(U=c.email)==null?void 0:U.trim())==null?void 0:q.charAt(0))||"?",((P=(u=c.last_name)==null?void 0:u.trim())==null?void 0:P.charAt(0))||""]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:[c.first_name&&c.first_name.trim().length>0?c.first_name:c.email||"Χρήστης"," ",c.last_name||""]}),e.jsx("p",{className:"text-gray-600",children:c.email||"—"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",c.user_id]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Εγγραφή: ",y(c.created_at)]}),e.jsx("button",{className:"mt-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Προβολή Λεπτομερειών"})]})]})},c.user_id)})}),!n&&Q>1&&e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Εμφάνιση ",(O-1)*oe+1,"-",Math.min(O*oe,he)," από ",he," χρήστες"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:a,disabled:O===1,className:"flex items-center space-x-1 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[e.jsx(Hn,{className:"h-4 w-4"}),e.jsx("span",{children:"Προηγούμενη"})]}),e.jsxs("button",{onClick:Ne,disabled:O===Q,className:"flex items-center space-x-1 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[e.jsx("span",{children:"Επόμενη"}),e.jsx(Yn,{className:"h-4 w-4"})]})]})]})})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Λεπτομέρειες Χρήστη"}),e.jsx("button",{onClick:()=>B(null),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(ze,{className:"h-6 w-6"})})]})}),ae?e.jsx("div",{className:"p-8 text-center",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 text-gray-500",children:[e.jsx(Ps,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Φόρτωση λεπτομερειών..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Βασικές Πληροφορίες"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Όνομα"}),e.jsxs("p",{className:"font-medium",children:[_.user_info.first_name," ",_.user_info.last_name]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(Cn,{className:"h-4 w-4 mr-1"}),_.user_info.email]})]}),_.user_info.phone&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Τηλέφωνο"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(Mn,{className:"h-4 w-4 mr-1"}),_.user_info.phone]})]}),_.user_info.date_of_birth&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ημερομηνία Γέννησης"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(De,{className:"h-4 w-4 mr-1"}),y(_.user_info.date_of_birth)]})]}),_.user_info.address&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Διεύθυνση"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(xa,{className:"h-4 w-4 mr-1"}),_.user_info.address]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Εγγραφή"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(st,{className:"h-4 w-4 mr-1"}),y(_.user_info.created_at)]})]}),_.user_info.referral_code&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Κωδικός Παραπομπής"}),e.jsx("p",{className:"font-medium font-mono",children:_.user_info.referral_code})]})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ma,{className:"h-5 w-5 mr-2 text-green-600"}),"Ενεργές Συνδρομές (",_.active_memberships.length,")"]}),_.active_memberships.length===0?e.jsx("p",{className:"text-gray-600",children:"Δεν υπάρχουν ενεργές συνδρομές"}):e.jsx("div",{className:"space-y-3",children:_.active_memberships.map(c=>e.jsx("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:c.package_name}),e.jsx("p",{className:"text-sm text-gray-600",children:c.credits_remaining>0?`${c.credits_remaining} / ${c.credits_total} credits`:"Credits not available"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[y(c.start_date)," - ",y(c.end_date)]}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Ενεργή"})]})]})},c.id))})]}),e.jsxs("div",{className:"bg-orange-50 rounded-xl p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(st,{className:"h-5 w-5 mr-2 text-orange-600"}),"Εκκρεμή Αιτήματα Συνδρομών (",_.pending_requests.length,")"]}),_.pending_requests.length===0?e.jsx("p",{className:"text-gray-600",children:"Δεν υπάρχουν εκκρεμή αιτήματα συνδρομών"}):e.jsx("div",{className:"space-y-3",children:_.pending_requests.map(c=>e.jsx("div",{className:"bg-white rounded-lg p-4 border border-orange-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:c.package_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Διάρκεια: ",c.duration_type," | Τιμή: €",c.requested_price,c.classes_count&&` | Μαθήματα: ${c.classes_count}`]}),c.has_installments&&e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:e.jsxs("p",{children:["Δόσεις: ",c.installment_1_amount&&`€${c.installment_1_amount}`,c.installment_2_amount&&`, €${c.installment_2_amount}`,c.installment_3_amount&&`, €${c.installment_3_amount}`]})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:y(c.created_at)}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Εκκρεμές"})]})]})},c.id))})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Qn,{className:"h-5 w-5 mr-2 text-blue-600"}),"Ιστορικό Συνδρομών (",_.all_memberships.length,")"]}),_.all_memberships.length===0?e.jsx("p",{className:"text-gray-600",children:"Δεν υπάρχει ιστορικό συνδρομών"}):e.jsx("div",{className:"space-y-3",children:_.all_memberships.map(c=>e.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:c.package_name}),e.jsx("p",{className:"text-sm text-gray-600",children:c.credits_remaining>0?`${c.credits_remaining} / ${c.credits_total} credits`:"Credits not available"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[y(c.start_date)," - ",y(c.end_date)]}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${c.is_active?"bg-green-100 text-green-800":c.status==="expired"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:c.is_active?"Ενεργή":c.status})]})]})},c.id))})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-xl p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ha,{className:"h-5 w-5 mr-2 text-yellow-600"}),"Ιστορικό Πληρωμών (",_.payment_history.length,")"]}),e.jsx("div",{className:"mb-4 p-4 bg-white rounded-lg border border-yellow-200",children:e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["Συνολικό ποσό: ",i(_.total_paid)]})}),_.payment_history.length===0?e.jsx("p",{className:"text-gray-600",children:"Δεν υπάρχει ιστορικό πληρωμών"}):e.jsx("div",{className:"space-y-3",children:_.payment_history.map(c=>e.jsx("div",{className:"bg-white rounded-lg p-4 border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[i(c.amount)," ",c.currency]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[c.payment_method&&`Μέθοδος: ${c.payment_method}`,c.transaction_id&&` | ID: ${c.transaction_id}`,c.notes&&` | ${c.notes}`]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:y(c.created_at)}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${c.status==="approved"?"bg-green-100 text-green-800":c.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:c.status})]})]})},c.id))})]}),e.jsxs("div",{className:"bg-orange-50 rounded-xl p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Zs,{className:"h-5 w-5 mr-2 text-orange-600"}),"Kettlebell Points"]}),e.jsx("div",{className:"mb-4 p-4 bg-white rounded-lg border border-orange-200",children:e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[_.kettlebell_points.total_points," Points"]})}),_.kettlebell_points.points_history.length===0?e.jsx("p",{className:"text-gray-600",children:"Δεν υπάρχει ιστορικό points"}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:"Ιστορικό Points:"}),_.kettlebell_points.points_history.slice(0,10).map(c=>e.jsx("div",{className:"bg-white rounded-lg p-3 border border-orange-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["+",c.points," points"]}),c.program_id&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Program ID: ",c.program_id]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:y(c.created_at)})]})},c.id)),_.kettlebell_points.points_history.length>10&&e.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["... και ",_.kettlebell_points.points_history.length-10," ακόμα"]})]})]})]})]})})]})};class Po extends m.Component{constructor(){super(...arguments);St(this,"state",{hasError:!1});St(this,"handleRefresh",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.reload()});St(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})})}static getDerivedStateFromError(w){return{hasError:!0,error:w}}componentDidCatch(w,$){console.error("ErrorBoundary caught an error:",w,$),this.setState({error:w,errorInfo:$}),console.error("Production error:",{error:w,errorInfo:$})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(lr,{className:"h-8 w-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Κάτι πήγε στραβά"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Παρουσιάστηκε ένα απροσδόκητο σφάλμα στην εφαρμογή. Παρακαλώ δοκιμάστε να ανανεώσετε τη σελίδα."}),!1,e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:this.handleReset,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium",children:"Δοκιμή Ξανά"}),e.jsxs("button",{onClick:this.handleRefresh,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center space-x-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),e.jsx("span",{children:"Ανανέωση Σελίδας"})]})]})]})}):this.props.children}}const da=["Mike","Jordan"],ko=100,ca=async n=>{if(!n||n==="undefined"||n==="00000000-0000-0000-0000-000000000001")try{const{data:b,error:w}=await E.from("user_profiles").select("id").eq("role","admin").limit(1).single();return w||!b?(console.error("No admin user found:",w),null):b.id}catch(b){return console.error("Error getting admin user:",b),null}return n},Vo=()=>{var Nr,_r,Pr,kr,Sr,Ar,$r,Cr,Mr,Dr,Ur,Er,Ir,Tr,Lr,Or,Fr,Rr,Gr,zr,Kr,Vr,Wr,Br,Hr,Yr,Qr,Jr,Xr,Zr,qr,el,sl;const{user:n}=ga(),[b,w]=m.useState("personal-training"),[$,k]=m.useState([]),[D,_]=m.useState([]),[B,se]=m.useState(1),[le]=m.useState(10),[T,me]=m.useState({"personal-training":!1,"membership-packages":!1,"ultimate-subscriptions":!1,"pilates-schedule":!1,"kettlebell-points":!1,"cash-register":!1,"users-information":!1}),ae=m.useMemo(()=>{const s=(B-1)*le,t=s+le;return $.slice(s,t)},[$,B,le]);Math.ceil($.length/le);const[ce]=m.useState(null),[O,ne]=m.useState(null),[Q,F]=m.useState(!1),[he,ke]=m.useState(!1),[oe,te]=m.useState(!1),[g,we]=m.useState({code:"",selectedUserId:""}),[a,Ne]=m.useState("individual"),[ee,y]=m.useState("personal"),[i,A]=m.useState([]),[c,R]=m.useState(null),[j,U]=m.useState(null),[q,u]=m.useState(0),[P,G]=m.useState(1),[l,z]=m.useState(2),[X,ye]=m.useState(!1),[Se,pe]=m.useState(null),[_e,We]=m.useState(null),[xe,je]=m.useState({}),[Le,ks]=m.useState(""),[xs,gs]=m.useState("dropdown"),[hs]=m.useState(""),[us]=m.useState("all"),[Ss]=m.useState(!0),[bs,As]=m.useState(new Set),[tt,$s]=m.useState(new Set),[Cs,ts]=m.useState(""),[K,Re]=m.useState({}),[Oe,rt]=m.useState([]),[lt,at]=m.useState(0),[Ge,nt]=m.useState(""),[Ms,Ds]=m.useState([]),[rs,ot]=m.useState(""),[ls,it]=m.useState(""),[as,ns]=m.useState(1),ps=10,[Ae,os]=m.useState(""),[Be,Us]=m.useState(""),[fs,C]=m.useState(null),[Ue,He]=m.useState("dropdown"),[dt,Dt]=m.useState(""),[Ye,ct]=m.useState(""),[Qe,mt]=m.useState(""),[ua,Ut]=m.useState(!1),[ba,Et]=m.useState(!1),[Pe,xt]=m.useState("none"),[Es,pa]=m.useState([]),[It,ar]=m.useState(!1),[fa,ya]=m.useState(""),[So,Ao]=m.useState(!1),[$o,Co]=m.useState(1),[Tt,nr]=m.useState(new Set),[Lt,or]=m.useState({}),N=s=>Tt.has(s),$e=s=>Lt[s]||null,p=s=>bt.has(s),H=s=>pt[s]||null;m.useEffect(()=>{u(j?j*4:0)},[j]),m.useEffect(()=>{a==="individual"&&(R(null),U(null),u(0)),a==="combination"&&y("personal")},[a]),m.useEffect(()=>{(a==="group"&&i.length>0||a==="combination"&&g.selectedUserId)&&(c||(console.log("[AdminPanel] Auto-setting default group room to 3 for",a),R("3")))},[a,i.length,g.selectedUserId]),m.useEffect(()=>{var s,t;if((a==="individual"||a==="combination")&&g.selectedUserId){const r=$e(g.selectedUserId);r&&(ts(r.kettlebellPoints||""),ct(((s=r.cashAmount)==null?void 0:s.toString())||""),mt(((t=r.posAmount)==null?void 0:t.toString())||""))}},[g.selectedUserId,a]);const[ir,Ot]=m.useState([{id:"tmp-1",date:`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}-${String(new Date().getDate()).padStart(2,"0")}`,startTime:"18:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:""}]),[Je,Ft]=m.useState("new"),[gt,ys]=m.useState([]),[dr,cr]=m.useState(!1);m.useEffect(()=>{(a==="individual"||a==="combination")&&g.selectedUserId&&Je==="existing"&&fr(g.selectedUserId)},[g.selectedUserId,Je,a]);const[ja,va]=m.useState([]),[wa,Rt]=m.useState([]),[Ee,Na]=m.useState(null),[Xe,ht]=m.useState(null),[Gt,Is]=m.useState(""),[ut,_a]=m.useState([]),[Ze,Ce]=m.useState(1),[Ie,qe]=m.useState("all"),[mr,Pa]=m.useState(new Set),[js,ka]=m.useState(""),Ts=6,[M,xr]=m.useState({}),[gr,Sa]=m.useState({}),[is,zt]=m.useState({}),[bt,Ls]=m.useState(new Set),[pt,Os]=m.useState({}),[Aa,hr]=m.useState(new Set),[$a,Kt]=m.useState(!1),[ft,Vt]=m.useState(null),[Ca,Wt]=m.useState(!1),[Fs,Bt]=m.useState(null),[Ma,ur]=m.useState([]),Da=[{id:"personal-training",name:"Personal Training Πρόγραμμα",icon:De},{id:"membership-packages",name:"Πακέτα Συνδρομών",icon:er},{id:"ultimate-subscriptions",name:"👑 Ultimate Συνδρομές",icon:Ke},{id:"pilates-schedule",name:"Πρόγραμμα Pilates",icon:st},{id:"kettlebell-points",name:"Kettlebell Points",icon:Zs},{id:"cash-register",name:"Ταμείο",icon:rr},{id:"users-information",name:"Χρήστες-Πληροφορίες",icon:$t}],Ua=["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],Ea=s=>{const t=["user1@freegym.gr","user2@freegym.gr"],r=["PERSONAL2024","KICKBOX2024"],o=!!s.email&&t.includes(s.email),d=!!s.personalTrainingCode&&r.includes(s.personalTrainingCode);return o||d},br=$.filter(s=>{if(!Le)return!0;const t=Le.toLowerCase();return s.firstName.toLowerCase().includes(t)||s.lastName.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)||`${s.firstName} ${s.lastName}`.toLowerCase().includes(t)}),pr=$.filter(s=>{if(!dt)return!0;const t=dt.toLowerCase();return s.firstName.toLowerCase().includes(t)||s.lastName.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)||`${s.firstName} ${s.lastName}`.toLowerCase().includes(t)});D.filter(s=>{const t=!hs||(()=>{const o=hs.toLowerCase();return s.user.firstName.toLowerCase().includes(o)||s.user.lastName.toLowerCase().includes(o)||s.user.email.toLowerCase().includes(o)||`${s.user.firstName} ${s.user.lastName}`.toLowerCase().includes(o)})(),r=us==="all"||s.status===us;return t&&r}),m.useEffect(()=>{se(1)},[hs,us]);const Ia=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00"],Ta=async()=>{try{console.log("[AdminPanel] Checking admin role in database...");const{data:s,error:t}=await E.from("user_profiles").select("user_id, role, first_name, last_name, email").eq("user_id",n==null?void 0:n.id).single();return t?(console.error("[AdminPanel] Error checking admin profile:",t),!1):(console.log("[AdminPanel] Admin profile in database:",s),console.log("[AdminPanel] Admin role in database:",s==null?void 0:s.role),(s==null?void 0:s.role)==="admin")}catch(s){return console.error("[AdminPanel] Exception checking admin role:",s),!1}},La=async()=>{try{console.log("[AdminPanel] Testing if we can create data...");const s={user_id:n==null?void 0:n.id,month:1,year:2e3,schedule_data:{sessions:[]},status:"pending",created_by:n==null?void 0:n.id},{data:t,error:r}=await E.from("personal_training_schedules").insert(s).select();return r?(console.log("[AdminPanel] Cannot create data - RLS blocking:",r.message),!1):t&&t.length>0?(await E.from("personal_training_schedules").delete().eq("id",t[0].id),console.log("[AdminPanel] Can create data - RLS working correctly"),!0):!1}catch(s){return console.error("[AdminPanel] Exception testing data creation:",s),!1}},Oa=async(s,t)=>{if(!t){console.log("[AdminPanel] No admin ID available for test data creation");return}try{console.log("[AdminPanel] Creating test schedule for user:",s.email);const r={user_id:s.id,month:new Date().getMonth()+1,year:new Date().getFullYear(),schedule_data:{sessions:[{id:"test-1",date:`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}-${String(new Date().getDate()).padStart(2,"0")}`,startTime:"18:00",endTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",notes:"Test session created by admin"}],notes:"Test program created by admin",specialInstructions:"This is test data"},status:"pending",created_by:t},{data:o,error:d}=await E.from("personal_training_schedules").insert(r).select();d?console.error("[AdminPanel] Error creating test schedule:",d):(console.log("[AdminPanel] Test schedule created successfully:",o),setTimeout(()=>{Ht()},1e3))}catch(r){console.error("[AdminPanel] Exception creating test schedule:",r)}},Ht=m.useCallback(async()=>{console.log("[AdminPanel] ===== DATA LOADING STARTED ====="),console.log("[AdminPanel] Current user:",n==null?void 0:n.email,"Role:",n==null?void 0:n.role);try{F(!0),console.log("[AdminPanel] Querying user_profiles table...");const{data:s,error:t}=await E.from("user_profiles").select("*").order("created_at",{ascending:!1});if(console.log("[AdminPanel] User profiles query result - rows:",s==null?void 0:s.length,"error:",t),t)throw console.error("[AdminPanel] User profiles error:",t),t;console.log("[AdminPanel] Querying personal_training_schedules table..."),console.log("[AdminPanel] Current auth user ID:",n==null?void 0:n.id),console.log("[AdminPanel] Current auth user role:",n==null?void 0:n.role),console.log("[AdminPanel] Attempting to query personal_training_schedules...");let r=[],o=null;const{data:d,error:h}=await E.from("personal_training_schedules").select("id,user_id,month,year,schedule_data,status,created_by,created_at,updated_at,trainer_name,accepted_at,declined_at").order("created_at",{ascending:!1});if(h){console.log("[AdminPanel] Direct query failed:",h);const{data:f,error:Z}=await E.from("personal_training_schedules").select("id, user_id, status").limit(10);if(Z){console.log("[AdminPanel] Limited query also failed:",Z);const{count:ie,error:V}=await E.from("personal_training_schedules").select("*",{count:"exact",head:!0});console.log("[AdminPanel] Count query result:",ie,"error:",V)}else console.log("[AdminPanel] Limited query succeeded:",f),r=f||[]}else console.log("[AdminPanel] Direct query succeeded:",d),r=d||[];if(o=h,console.log("[AdminPanel] Schedules query result - rows:",r==null?void 0:r.length,"error:",o),(r==null?void 0:r.length)===0&&!o){console.log("[AdminPanel] Query succeeded but returned 0 rows - checking RLS policies...");const f=await Ta();console.log("[AdminPanel] Is admin in database:",f);const{count:Z,error:ie}=await E.from("personal_training_schedules").select("*",{count:"exact",head:!0});console.log("[AdminPanel] Total rows in table (bypassing RLS):",Z,"error:",ie),Z&&Z>0&&(console.warn("[AdminPanel] RLS is blocking access to existing data! Table has",Z,"rows but query returns 0."),console.warn("[AdminPanel] Admin role might not be properly configured in RLS policies."),console.warn("[AdminPanel] Please run the SQL script: database/fix_admin_rls_policies.sql"))}if(o){console.error("[AdminPanel] Schedules query failed with error:",o),console.log("[AdminPanel] Error code:",o.code),console.log("[AdminPanel] Error message:",o.message),console.log("[AdminPanel] Error details:",o.details),console.log("[AdminPanel] Error hint:",o.hint),console.log("[AdminPanel] Attempting to check table existence...");const{data:f,error:Z}=await E.from("personal_training_schedules").select("count").limit(1);console.log("[AdminPanel] Table check result:",f,"error:",Z)}if(o&&(console.error("[AdminPanel] Schedules error:",o),console.log("[AdminPanel] RLS might be blocking access. Checking if we can insert test data..."),console.log("[AdminPanel] Continuing with empty schedules due to RLS restrictions")),!s||s.length===0){console.log("[AdminPanel] No users found in database - setting empty states"),k([]),_([]);return}console.log("[AdminPanel] Transforming user profiles...");const v=s.map(f=>({id:f.user_id,email:f.email||`user-${f.user_id.slice(0,8)}@example.com`,firstName:f.first_name||"",lastName:f.last_name||"",profile_photo:f.profile_photo||"",profile_photo_locked:f.profile_photo_locked||!1,dob:f.dob||"",address:f.address||"",emergency_contact:f.emergency_contact||"",dob_locked:f.dob_locked||!1,hasPersonalTrainingCode:!1,personalTrainingCode:void 0,packageType:void 0}));console.log("[AdminPanel] Transformed users count:",v.length),k(v),me(f=>({...f,"personal-training":!0})),console.log("[AdminPanel] Creating program statuses from schedules..."),console.log("[AdminPanel] Schedules data:",r);const L=(r||[]).map(f=>{console.log("[AdminPanel] Processing schedule:",f.id,"for user:",f.user_id);const Z=v.find(V=>V.id===f.user_id);if(!Z)return console.warn(`[AdminPanel] User not found for schedule ${f.id}, user_id: ${f.user_id}`),null;const ie={user:Z,schedule:{id:f.id,userId:f.user_id,month:f.month,year:f.year,status:f.status,scheduleData:f.schedule_data,createdBy:f.created_by,createdAt:f.created_at,updatedAt:f.updated_at,acceptedAt:f.accepted_at,declinedAt:f.declined_at},status:f.status};return console.log("[AdminPanel] Created program status:",ie),ie}).filter(f=>f!==null);console.log("[AdminPanel] Final program statuses count:",L.length),L.length===0&&v.length>0&&(console.log("[AdminPanel] No schedules found. Creating test data to verify system..."),await La()?await Oa(v[0],n==null?void 0:n.id):(console.warn("[AdminPanel] Cannot create test data due to RLS restrictions."),console.warn("[AdminPanel] Please fix RLS policies by running: database/fix_admin_rls_policies.sql"))),_(L),console.log("[AdminPanel] Checking personal training codes...");const{data:I,error:S}=await E.from("personal_training_codes").select("*").limit(5);console.log("[AdminPanel] Personal training codes check - rows:",I==null?void 0:I.length,"error:",S),await Fa(v),me(f=>({...f,"personal-training":!0})),console.log("[AdminPanel] ===== DATA LOADING COMPLETED SUCCESSFULLY =====")}catch(s){console.error("[AdminPanel] ===== DATA LOADING FAILED ====="),console.error("[AdminPanel] Error details:",s);const t=s instanceof Error?s.message:"Unknown error";x.error(`Σφάλμα κατά τη φόρτωση των χρηστών: ${t}`),k([]),_([])}finally{F(!1)}},[n==null?void 0:n.email,n==null?void 0:n.role]),Fa=async s=>{try{const{data:t,error:r}=await E.from("personal_training_codes").select("user_id, code, package_type, sessions_remaining").eq("is_active",!0);if(r){console.error("Error fetching personal training codes:",r),k(s);return}const o=s.map(d=>{const h=t==null?void 0:t.find(v=>v.user_id===d.id);return h?{...d,hasPersonalTrainingCode:!0,personalTrainingCode:h.code,packageType:h.package_type}:d});k(o)}catch(t){console.error("Error checking personal training codes:",t)}},[Ra,vs]=m.useState({});m.useEffect(()=>{if(console.log("[AdminPanel] useEffect triggered - user:",n==null?void 0:n.email,"role:",n==null?void 0:n.role,"activeTab:",b),!n){console.log("[AdminPanel] No user logged in");return}if(n.role!=="admin"){console.warn("[AdminPanel] User is not admin! Role:",n.role,"Email:",n.email);return}if(Ra[b]){console.log(`[AdminPanel] ${b} is already loading, skipping...`);return}b==="personal-training"&&!T["personal-training"]?(console.log("[AdminPanel] Loading data for personal-training tab"),vs(s=>({...s,[b]:!0})),Ht().finally(()=>vs(s=>({...s,[b]:!1})))):b==="membership-packages"&&!T["membership-packages"]?(console.log("[AdminPanel] Loading membership packages"),vs(s=>({...s,[b]:!0})),yr().finally(()=>vs(s=>({...s,[b]:!1})))):b==="kettlebell-points"&&!T["kettlebell-points"]?(console.log("[AdminPanel] Loading kettlebell points"),vs(s=>({...s,[b]:!0})),jt().finally(()=>vs(s=>({...s,[b]:!1})))):console.log(`[AdminPanel] ${b} data already loaded, skipping reload`)},[n==null?void 0:n.id,b]);const Ga=()=>{if(!O)return;const s={id:Date.now().toString(),date:`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}-${String(new Date().getDate()).padStart(2,"0")}`,startTime:"09:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",notes:""},t={...O,scheduleData:{...O.scheduleData,sessions:[...O.scheduleData.sessions,s]}};ne(t)},Rs=(s,t,r)=>{if(!O)return;const o=O.scheduleData.sessions.map(h=>h.id===s?{...h,[t]:r}:h),d={...O,scheduleData:{...O.scheduleData,sessions:o}};ne(d)},za=s=>{if(!O)return;const t=O.scheduleData.sessions.filter(o=>o.id!==s),r={...O,scheduleData:{...O.scheduleData,sessions:t}};ne(r)},Ka=async()=>{if(!(!O||!ce))try{F(!0),x.success(`Το πρόγραμμα για τον ${ce.firstName} ${ce.lastName} αποθηκεύτηκε!`),ke(!1)}catch{x.error("Σφάλμα κατά την αποθήκευση του προγράμματος")}finally{F(!1)}},Va=async()=>{if(Pe==="none"||!n){x.error("Παρακαλώ επιλέξτε μια κατάσταση έγκρισης");return}try{F(!0);const s=a==="individual"||a==="combination"?[g.selectedUserId]:i;if(s.length===0){x.error("Δεν υπάρχουν επιλεγμένοι χρήστες");return}if(a==="group"){if(!c||!j){x.error("Παρακαλώ επιλέξτε Ομαδική Αίθουσα και συχνότητα εβδομάδας");return}if(i.length===0){x.error("Παρακαλώ επιλέξτε τουλάχιστον έναν χρήστη για το ομαδικό πρόγραμμα");return}}if(a==="combination"&&l>0&&(!c||!j)){x.error("Για συνδυασμένο πρόγραμμα με ομαδικές σεσίες, παρακαλώ επιλέξτε Ομαδική Αίθουσα και συχνότητα εβδομάδας");return}for(const o of s){const d=N(o),h=d?$e(o):K[o];if(!h)continue;await qt(o,Pe||"pending",{oldMembersUsed:h.oldMembers||!1,kettlebellPoints:h.kettlebellPoints?parseInt(h.kettlebellPoints):0,cashAmount:h.cashAmount||0,posAmount:h.posAmount||0,createdBy:n.id,groupRoomSize:a==="group"||a==="combination"?parseInt(c):null,weeklyFrequency:a==="group"||a==="combination"?j:null,monthlyTotal:a==="group"||a==="combination"?q:null,notes:`Program options saved with ${Pe} status${d?" (from frozen state)":""}${a==="group"||a==="combination"?` - Ομαδική Αίθουσα: ${c} χρήστες, ${j} φορές/εβδομάδα`:""}`})?console.log(`Program approval state saved for user ${o}: ${Pe}${d?" (from frozen state)":""}`):console.warn(`Failed to save program approval state for user ${o}`)}if(Pe==="approved")await Wa(s);else if(Pe==="rejected")console.log("Program options rejected - no actions executed"),x("Program Options απορρίφθηκαν - δεν εκτελέστηκαν ενέργειες",{icon:"ℹ️"});else if(Pe==="pending"){console.log("Program options pending - saving locally and freezing UI");const o={...Lt},d=new Set(Tt);for(const h of s){const v=K[h];v&&(o[h]={oldMembers:v.oldMembers,first150Members:v.first150Members,kettlebellPoints:v.kettlebellPoints,cash:v.cash,pos:v.pos,cashAmount:v.cashAmount,posAmount:v.posAmount,groupRoomSize:a==="group"||a==="combination"?parseInt(c):null,weeklyFrequency:a==="group"||a==="combination"?j:null,monthlyTotal:a==="group"||a==="combination"?q:null},d.add(h))}or(o),nr(d),x("Program Options τοποθετήθηκαν στην αναμονή - οι επιλογές παγώθηκαν",{icon:"⏳"})}if(xt("none"),Pe==="approved"||Pe==="rejected"){const o=new Set(Tt),d={...Lt};for(const h of s)N(h)&&(o.delete(h),delete d[h]);nr(o),or(d)}const t=s.some(o=>N(o)),r={approved:t?"εγκρίθηκε και εκτελέστηκαν οι ενέργειες (από frozen state)":"εγκρίθηκε και εκτελέστηκαν οι ενέργειες",rejected:t?"απορρίφθηκε (από frozen state)":"απορρίφθηκε",pending:"τοποθετήθηκε στην αναμονή"};x.success(`Program Options ${r[Pe]} επιτυχώς!`)}catch(s){console.error("Error saving program options:",s),x.error("Σφάλμα κατά την αποθήκευση των Program Options")}finally{F(!1)}},Wa=async s=>{console.log("Executing approved program actions for users:",s);try{for(const t of s){const r=N(t),o=r?$e(t):K[t];if(!o)continue;o.oldMembers&&(await Xs(t,(n==null?void 0:n.id)||"")?(console.log(`[APPROVED] Old Members marked as used for user: ${t}${r?" (from frozen state)":""}`),As(I=>new Set([...I,t])),$s(I=>new Set([...I,t])),Re(I=>({...I,[t]:{...I[t],oldMembers:!1,first150Members:!1,cash:!1,pos:!1,cashAmount:void 0,posAmount:void 0}}))):console.warn(`[APPROVED] Failed to mark Old Members as used for user: ${t}${r?" (from frozen state)":""}`));const d=o.kettlebellPoints&&o.kettlebellPoints.trim()!==""&&parseInt(o.kettlebellPoints)||0;d>0?await Js(t,d,void 0,(n==null?void 0:n.id)||"")?console.log(`[APPROVED] Kettlebell Points saved for user: ${t}, Points: ${d}${r?" (from frozen state)":""}`):console.warn(`[APPROVED] Failed to save Kettlebell Points for user: ${t}${r?" (from frozen state)":""}`):console.log(`[APPROVED] Kettlebell Points set to 0 for user: ${t}${r?" (from frozen state)":""}`);const h=o.cashAmount&&o.cashAmount>0?o.cashAmount:0;h>0?await Ns(t,h,"cash",void 0,(n==null?void 0:n.id)||"","Cash transaction from approved program creation")?console.log(`[APPROVED] Cash transaction saved for user: ${t}, Amount: €${h}${r?" (from frozen state)":""}`):console.warn(`[APPROVED] Failed to save Cash transaction for user: ${t}${r?" (from frozen state)":""}`):console.log(`[APPROVED] Cash amount set to 0 for user: ${t}${r?" (from frozen state)":""}`);const v=o.posAmount&&o.posAmount>0?o.posAmount:0;v>0?await Ns(t,v,"pos",void 0,(n==null?void 0:n.id)||"","POS transaction from approved program creation")?console.log(`[APPROVED] POS transaction saved for user: ${t}, Amount: €${v}${r?" (from frozen state)":""}`):console.warn(`[APPROVED] Failed to save POS transaction for user: ${t}${r?" (from frozen state)":""}`):console.log(`[APPROVED] POS amount set to 0 for user: ${t}${r?" (from frozen state)":""}`)}x.success("Έγιναν όλες οι απαραίτητες ενέργειες για τα εγκεκριμένα προγράμματα!")}catch(t){console.error("Error executing approved program actions:",t),x.error("Σφάλμα κατά την εκτέλεση των ενεργειών")}},ue=()=>Je==="existing"?gt:ir,Te=s=>{Je==="existing"?ys(s):Ot(s)},fr=async s=>{var t;if(s){cr(!0);try{console.log("[AdminPanel] Loading existing sessions for user:",s);const{data:r,error:o}=await E.from("personal_training_schedules").select("schedule_data, created_at").eq("user_id",s).order("created_at",{ascending:!1}).limit(1);if(o){console.error("[AdminPanel] Error loading existing sessions:",o),x.error("Σφάλμα κατά τη φόρτωση των υπαρχόντων σεσιών"),ys([]);return}r&&r.length>0&&((t=r[0].schedule_data)!=null&&t.sessions)?(console.log("[AdminPanel] Found existing sessions:",r[0].schedule_data.sessions),ys(r[0].schedule_data.sessions),x.success(`Φορτώθηκαν ${r[0].schedule_data.sessions.length} υπάρχουσες σεσίες`)):(console.log("[AdminPanel] No existing sessions found for user"),ys([]),x("Δεν βρέθηκαν υπάρχουσες σεσίες για αυτόν τον χρήστη",{icon:"ℹ️"}))}catch(r){console.error("[AdminPanel] Exception loading existing sessions:",r),x.error("Σφάλμα κατά τη φόρτωση των υπαρχόντων σεσιών"),ys([])}finally{cr(!1)}}},Ba=async()=>{var t,r,o;const s=a==="individual"||a==="combination"?[g.selectedUserId]:i;if(s.length===0){x.error("Παρακαλώ επιλέξτε χρήστη/ες");return}try{F(!0),console.log("[ADMIN] Starting to create personal training program..."),console.log("[ADMIN] User type:",ee);for(const I of s){const S=$.find(re=>re.id===I);if(!S){x.error(`Δεν βρέθηκε ο χρήστης με ID: ${I}`);continue}console.log("[ADMIN] Selected user:",S.firstName,S.lastName,"ID:",S.id),console.log("[ADMIN] Admin user ID:",n==null?void 0:n.id);let f=[];if(a==="group")if(ee==="paspartu"){const re=xe[S.id]||[];re.length>0?f=re.map((Y,J)=>({id:`group-session-${J+1}`,date:Y.date,startTime:Y.startTime,endTime:Y.endTime,type:"personal",trainer:Y.trainer||"Mike",room:Y.room||"Αίθουσα Mike",notes:`Group Paspartu Session ${J+1} - ${Y.notes||""}`})):(f=ue().map(J=>({id:J.id,date:J.date,startTime:J.startTime,type:J.type,trainer:J.trainer||"Mike",room:J.room,notes:J.notes+" (Group Paspartu)"})),console.log(`[ADMIN] Using ${f.length} current sessions for Group Paspartu user: ${S.email}`))}else f=[];else a==="combination"?f=ue().slice(0,P).map(Y=>({id:Y.id,date:Y.date,startTime:Y.startTime,type:Y.type,trainer:Y.trainer||"Mike",room:Y.room,notes:Y.notes+" (Personal - Συνδυασμός)"})):f=ue().map(Y=>({id:Y.id,date:Y.date,startTime:Y.startTime,type:Y.type,trainer:Y.trainer||"Mike",room:Y.room,notes:Y.notes}));const Z={user_id:S.id,trainer_name:a==="group"?"Mike":((t=f[0])==null?void 0:t.trainer)||"Mike",month:new Date().getMonth()+1,year:new Date().getFullYear(),schedule_data:{sessions:f,notes:a==="group"?"Group program - Οι σεσίες θα προστεθούν μέσω του Group Assignment Interface":a==="combination"?`Combination program - ${P} Personal + ${l} Group sessions`:"",trainer:a==="group"?"Mike":((r=f[0])==null?void 0:r.trainer)||"Mike",specialInstructions:a==="group"?"Ομαδικό πρόγραμμα - Οι λεπτομέρειες των σεσίων διαχειρίζονται ξεχωριστά":a==="combination"?`Συνδυασμένο πρόγραμμα - Περιλαμβάνει ${P} ατομικές σεσίες και ${l} ομαδικές σεσίες`:"",groupRoomSize:a==="group"||a==="combination"?parseInt(c):null,weeklyFrequency:a==="group"||a==="combination"?j:null,monthlyTotal:a==="group"||a==="combination"?q:null,combinationPersonalSessions:a==="combination"?P:null,combinationGroupSessions:a==="combination"?l:null},status:"accepted",created_by:n==null?void 0:n.id,user_type:ee,is_flexible:ee==="paspartu",training_type:a,group_room_size:a==="group"||a==="combination"?parseInt(c):null,weekly_frequency:a==="group"||a==="combination"?j:null,monthly_total:a==="group"||a==="combination"?q:null};console.log("[ADMIN] Schedule payload:",Z),console.log("[ADMIN] Inserting schedule into personal_training_schedules...");const{data:ie,error:V}=await E.from("personal_training_schedules").insert(Z).select().single();if(V)throw console.error("[ADMIN] Schedule insertion error:",V),V;if(console.log("[ADMIN] Schedule inserted successfully for user:",S.email),a==="combination"&&f.length>0){console.log("[ADMIN] Creating group_sessions for combination individual sessions...",f);const re=f.map(be=>{const ms=be.startTime,[_t,Pt]=ms.split(":").map(Number),kt=`${((_t+1)%24).toString().padStart(2,"0")}:${Pt.toString().padStart(2,"0")}`;return{session_date:be.date,start_time:be.startTime,end_time:kt,trainer:be.trainer,room:be.room,group_type:null,notes:be.notes+" (Individual - Combination Program)"}});console.log("[ADMIN] Individual group sessions to insert:",re);const{data:Y,error:J}=await E.from("group_sessions").insert(re.map(be=>({program_id:ie.id,user_id:S.id,session_date:be.session_date,start_time:be.start_time,end_time:be.end_time,trainer:be.trainer,room:be.room,group_type:be.group_type,notes:be.notes,is_active:!0,created_by:(n==null?void 0:n.id)||""})));J?(console.error("[ADMIN] Error creating group_sessions for combination individual sessions:",J),console.error("[ADMIN] Error details:",{message:J.message,details:J.details,hint:J.hint,code:J.code}),x.error("Σφάλμα κατά τη δημιουργία των ατομικών σεσίων του συνδυασμού")):(console.log("[ADMIN] Created group_sessions for combination individual sessions:",Y),console.log("[ADMIN] Individual sessions created successfully"))}else console.log("[ADMIN] Skipping individual sessions creation:",{trainingType:a,scheduleSessionsLength:f.length,willCreate:a==="combination"&&f.length>0});const de=K[S.id];if(de&&(de.oldMembers&&(await Xs(S.id,(n==null?void 0:n.id)||"")?console.log("[ADMIN] Old Members marked as used for user:",S.email):console.warn("[ADMIN] Failed to mark Old Members as used for user:",S.email)),de.kettlebellPoints&&parseInt(de.kettlebellPoints)>0&&(await Js(S.id,parseInt(de.kettlebellPoints),ie.id,(n==null?void 0:n.id)||"")?console.log("[ADMIN] Kettlebell Points saved for user:",S.email,"Points:",de.kettlebellPoints):console.warn("[ADMIN] Failed to save Kettlebell Points for user:",S.email))),ee==="paspartu"){console.log("[ADMIN] Handling Paspartu user - replacing old schedule and managing deposits...");const{error:re}=await E.rpc("replace_paspartu_schedule",{p_user_id:S.id,p_new_schedule_id:ie.id});re?(console.error("[ADMIN] Error replacing old Paspartu schedule:",re),console.warn("[ADMIN] Failed to replace old schedule, but new schedule was created successfully")):console.log("[ADMIN] Old Paspartu schedule replaced successfully for user:",S.email);let Y=5,J=0;a==="combination"?(J=P+l,console.log(`[ADMIN] Combination Paspartu: ${P} personal + ${l} group = ${J} used deposits`)):a==="individual"?(J=0,console.log("[ADMIN] Individual Paspartu: Credit 5 lessons, no deduction (original behavior)")):a==="group"&&(J=0,console.log("[ADMIN] Group Paspartu: Credit 5 lessons, no deduction (same as Individual)")),J>Y&&(console.warn(`[ADMIN] Warning: Used deposits (${J}) exceeds total deposits (${Y}). Setting to max.`),J=Y);const{error:be}=await E.rpc("reset_lesson_deposit_for_new_program",{p_user_id:S.id,p_total_lessons:Y,p_created_by:n==null?void 0:n.id});if(be)console.error("[ADMIN] Lesson deposit reset error:",be),console.warn("[ADMIN] Failed to reset lesson deposit, but schedule was created successfully");else if(console.log(`[ADMIN] Lesson deposit reset successfully for Paspartu user: ${S.email}`),console.log(`[ADMIN] Deposits: ${Y} total, ${J} will be used, ${Y-J} remaining`),J>0){const{error:ms}=await E.from("lesson_deposits").update({used_lessons:J,updated_at:new Date().toISOString()}).eq("user_id",S.id);ms?console.error("[ADMIN] Error updating used deposits:",ms):console.log(`[ADMIN] Updated used deposits to ${J} for user: ${S.email}`)}}if(ee==="paspartu"){console.log("[ADMIN] Ensuring lesson deposit exists for Paspartu user:",S.email);const{data:re}=await E.from("lesson_deposits").select("id").eq("user_id",S.id).single();if(re)console.log("[ADMIN] Lesson deposit already exists for Paspartu user:",S.email);else{const{error:Y}=await E.from("lesson_deposits").insert({user_id:S.id,total_lessons:5,used_lessons:0});Y?console.error("[ADMIN] Error creating lesson deposit:",Y):console.log("[ADMIN] Lesson deposit created successfully for Paspartu user:",S.email)}}console.log("[ADMIN] Creating Personal Training membership...");const{data:cs,error:Vs}=await E.from("membership_packages").select("id").eq("name","Personal Training").eq("is_active",!0).single();if(Vs||!cs){console.error("[ADMIN] Error finding Personal Training package:",Vs),console.warn("[ADMIN] Personal Training package not found, skipping membership creation");continue}const Nt={user_id:S.id,package_id:cs.id,duration_type:"lesson",start_date:`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}-${String(new Date().getDate()).padStart(2,"0")}`,end_date:(()=>{const re=new Date;return re.setDate(re.getDate()+30),`${re.getFullYear()}-${String(re.getMonth()+1).padStart(2,"0")}-${String(re.getDate()).padStart(2,"0")}`})(),is_active:!0,approved_by:n==null?void 0:n.id,approved_at:new Date().toISOString()},{error:Ws}=await E.from("memberships").insert(Nt);Ws?(console.error("[ADMIN] Membership insertion error:",Ws),console.warn("[ADMIN] Failed to create membership, but schedule was created successfully")):console.log("[ADMIN] Personal Training membership created successfully for user:",S.email)}const d=s.map(I=>{const S=$.find(f=>f.id===I);return S?`${S.firstName} ${S.lastName}`:"Άγνωστος"}).join(", "),h=ee==="personal"?"Personal":"Paspartu",v=a==="individual"?"Ατομικό":a==="combination"?"Συνδυασμένο":"Ομαδικό",L=a==="individual"||a==="combination"?"τον χρήστη":"τους χρήστες";if(x.success(`Το πρόγραμμα ${v} ${h} Training δημιουργήθηκε επιτυχώς για ${L}: ${d}!`),(a==="group"||a==="combination")&&s.length>0&&Object.keys(xe).length>0){console.log("[AdminPanel] Creating group sessions for selected slots:",xe);for(const I of s){const S=xe[I];if(S&&S.length>0){const{data:f}=await E.from("personal_training_schedules").select("id").eq("user_id",I).in("training_type",["group","combination"]).order("created_at",{ascending:!1}).limit(1);if(f&&f.length>0){const Z=f[0].id,ie=S.map(de=>({session_date:de.date,start_time:de.startTime,end_time:de.endTime,trainer:de.trainer,room:de.room,group_type:de.groupType,notes:de.notes||"Group session created by admin"})),V=await Rn(I,Z,ie,(n==null?void 0:n.id)||"");if(V.success){if(console.log(`[AdminPanel] Created ${V.createdCount} group sessions for user ${I}`),V.blockedSessions&&V.blockedSessions.length>0){const de=V.blockedSessions.length,cs=V.createdCount||0;x.error(`Δημιουργήθηκαν ${cs} σεσίες, αλλά ${de} σεσίες αποκλείστηκαν λόγω γεμάτου capacity. Λεπτομέρειες: ${V.blockedSessions.slice(0,2).join(", ")}${de>2?"...":""}`)}}else console.error("[AdminPanel] Error creating group sessions:",V.error),(o=V.error)!=null&&o.includes("capacity")?x.error(`Δεν μπορούν να δημιουργηθούν σεσίες: ${V.error}`):x.error(`Σφάλμα δημιουργίας σεσίων: ${V.error}`)}}}x.success("Το ομαδικό πρόγραμμα και οι αναθέσεις δημιουργήθηκαν επιτυχώς!")}else(a==="group"||a==="combination")&&s.length>0&&x(`Το ${a==="combination"?"συνδυασμένο":"ομαδικό"} πρόγραμμα δημιουργήθηκε. ${a==="combination"?"Μπορείτε να κάνετε ομαδικές αναθέσεις αργότερα από το Group Programs Overview.":"Μπορείτε να κάνετε αναθέσεις αργότερα από το Group Programs Overview."}`,{icon:"ℹ️"});te(!1),we({code:"",selectedUserId:""}),Ne("individual"),y("personal"),A([]),je({}),R(null),U(null),u(0),ks(""),gs("dropdown"),Ot([{id:"tmp-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:""}]),Ft("new"),ys([]),Ht()}catch(d){if(console.error("[ADMIN] Error creating personal training program:",d),d&&typeof d=="object"&&"code"in d){const h=d;h.code==="23505"?x.error("Το πρόγραμμα υπάρχει ήδη για αυτόν τον χρήστη."):h.code==="23503"?x.error("Πρόβλημα με τα δεδομένα χρήστη. Ελέγξτε ότι ο χρήστης υπάρχει."):h.code==="PGRST301"?x.error("Πρόβλημα αυθεντικοποίησης. Κάντε επανασύνδεση."):x.error(`Σφάλμα βάσης δεδομένων: ${h.message||"Άγνωστο σφάλμα"}`)}else x.error("Σφάλμα κατά τη δημιουργία του προγράμματος")}finally{F(!1)}};if(!n||n.role!=="admin")return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Δεν έχετε δικαίωμα πρόσβασης"}),e.jsx("p",{className:"text-gray-600",children:"Μόνο οι διαχειριστές μπορούν να έχουν πρόσβαση σε αυτή τη σελίδα."})]})});const yr=m.useCallback(async()=>{try{F(!0);const s=await ao(),t=["Personal Training","Premium","Βασικό + προσωπική προπόνηση","VIP","Premium + όλα τα προνόμια","Όλα από το premium","Απεριόριστη προσωπική προπόνηση","Βασικό","Πρόσβαση σε όλες τις αίθουσες","Όλες οι ομαδικές τάξεις"],r=s.filter(d=>!t.includes(d.name)&&!t.some(h=>{var v;return(v=d.description)==null?void 0:v.includes(h)}));va(r),me(d=>({...d,"membership-packages":!0}));const o=await no();ur(o)}catch(s){console.error("Error loading membership packages:",s),x.error("Σφάλμα κατά τη φόρτωση των πακέτων")}finally{F(!1)}},[]),jr=async s=>{try{const t=await ho(s);Rt(t)}catch(t){console.error("Error loading package durations:",t),x.error("Σφάλμα κατά τη φόρτωση των επιλογών διάρκειας")}},ws=async()=>{try{const s=await oo();_a(s),Ce(1)}catch(s){console.error("Error loading membership requests:",s),x.error("Σφάλμα κατά τη φόρτωση των αιτημάτων")}},Gs=()=>ut.filter(t=>{var L,I,S,f;const r=((L=t.package)==null?void 0:L.name)==="Free Gym",o=((I=t.package)==null?void 0:I.name)==="Pilates",d=t.has_installments===!0;let h=r||o;Ie==="freegym"&&(h=r),Ie==="pilates"&&(h=o),Ie==="installments"&&(h=d);const v=js===""||`${((S=t.user)==null?void 0:S.first_name)||""} ${((f=t.user)==null?void 0:f.last_name)||""}`.toLowerCase().includes(js.toLowerCase());return h&&v}).sort((t,r)=>new Date(r.created_at).getTime()-new Date(t.created_at).getTime()),Ha=()=>{const s=Gs(),t=(Ze-1)*Ts,r=t+Ts;return s.slice(t,r)},ds=()=>{const s=Gs();return Math.ceil(s.length/Ts)},Ya=()=>{Ce(s=>Math.max(s-1,1))},Qa=()=>{Ce(s=>Math.min(s+1,ds()))},Ja=()=>{Ce(1)},Xa=()=>{Ce(ds())},Za=s=>{ka(s.target.value),Ce(1)},qa=s=>{Na(s),s.name==="Pilates"?Rt(Ma):jr(s.id)},en=s=>{ht(s),Is(s.price.toString())},sn=async()=>{if(!Xe||!Gt)return;const s=parseFloat(Gt);if(isNaN(s)||s<0){x.error("Παρακαλώ εισάγετε έγκυρη τιμή");return}try{F(!0),(Ee==null?void 0:Ee.name)==="Pilates"?await co(Xe.duration_type,s)&&(Rt(r=>r.map(o=>o.id===Xe.id?{...o,price:s}:o)),ur(r=>r.map(o=>o.id===Xe.id?{...o,price:s}:o)),ht(null),Is(""),x.success("Η τιμή Pilates ενημερώθηκε επιτυχώς")):await mo(Xe.id,s)&&(ht(null),Is(""),jr((Ee==null?void 0:Ee.id)||""))}catch(t){console.error("Error updating price:",t)}finally{F(!1)}},tn=async s=>{var t;try{F(!0);const r=ut.find(d=>d.id===s);((t=r==null?void 0:r.package)==null?void 0:t.name)==="Ultimate"?await xo(s)&&(x.success("Το Ultimate αίτημα εγκρίθηκε επιτυχώς! Δημιουργήθηκαν 2 συνδρομές: Pilates + Open Gym"),ws()):await go(s)&&(x.success("Το αίτημα εγκρίθηκε επιτυχώς!"),ws())}catch(r){console.error("Error approving request:",r),x.error("Σφάλμα κατά την έγκριση του αιτήματος")}finally{F(!1)}},rn=async s=>{const t=prompt("Παρακαλώ εισάγετε τον λόγο απόρριψης:");if(t)try{F(!0),await ia(s,t)&&(x.success("Το αίτημα απορρίφθηκε επιτυχώς!"),ws())}catch(r){console.error("Error rejecting request:",r),x.error("Σφάλμα κατά την απόρριψη του αιτήματος")}finally{F(!1)}},ve=(s,t,r)=>{xr(o=>({...o,[s]:{...o[s],[t]:r}}))},ln=(s,t,r)=>{Sa(o=>({...o,[s]:{...o[s],[t]:r}}))},yt=(s,t)=>{zt(r=>({...r,[s]:t}))},an=async s=>{const t=is[s];if(t==="none"||!n){x.error("Παρακαλώ επιλέξτε μια κατάσταση έγκρισης");return}try{F(!0);const r=M[s];if(!r){x.error("Δεν υπάρχουν επιλογές για αυτό το αίτημα");return}const o=ut.find(h=>h.id===s);if(!o){x.error("Αίτημα δεν βρέθηκε");return}if(await qt(o.user_id,t||"pending",{oldMembersUsed:r.oldMembers||!1,kettlebellPoints:r.kettlebellPoints?parseInt(r.kettlebellPoints):0,cashAmount:r.cashAmount||0,posAmount:r.posAmount||0,createdBy:n.id,notes:`Program options saved for membership request ${s} with ${t} status`})){console.log(`Program approval state saved for membership request: ${s}`);const h=new Set(mr);if(h.add(s),Pa(h),t==="pending"){const L=new Set(bt),I={...pt};L.add(s),I[s]=r,Ls(L),Os(I),x("Program Options τοποθετήθηκαν στην αναμονή - οι επιλογές παγώθηκαν",{icon:"⏳"})}else if(t==="approved"&&await dn(s,o.user_id,r),p(s)){const L=new Set(bt),I={...pt};L.delete(s),delete I[s],Ls(L),Os(I)}zt(L=>({...L,[s]:"none"}));const v={approved:"εγκρίθηκε και εκτελέστηκαν οι ενέργειες",rejected:"απορρίφθηκε",pending:"τοποθετήθηκε στην αναμονή"};x.success(`Program Options ${v[t]} επιτυχώς!`)}else x.error("Σφάλμα κατά την αποθήκευση των Program Options")}catch(r){console.error("Error saving request program options:",r),x.error("Σφάλμα κατά την αποθήκευση των Program Options")}finally{F(!1)}},nn=async s=>{const t=is[s];if(t==="none"||!n){x.error("Παρακαλώ επιλέξτε μια κατάσταση έγκρισης");return}try{F(!0);const r=gr[s];if(!r){x.error("Δεν υπάρχουν επιλογές για αυτό το αίτημα");return}const o=Es.find(h=>h.id===s);if(!o){x.error("Ultimate αίτημα δεν βρέθηκε");return}if(await qt(o.user_id,t||"pending",{oldMembersUsed:r.oldMembers||!1,kettlebellPoints:r.kettlebellPoints?parseInt(r.kettlebellPoints):0,cashAmount:r.cashAmount??0,posAmount:r.posAmount??0,createdBy:n.id,notes:`Program options saved for ultimate membership request ${s} with ${t} status`})){console.log(`[AdminPanel] Successfully saved program options for ultimate request ${s}`),t==="pending"?(Ls(v=>new Set([...v,s])),Os(v=>({...v,[s]:{...r,oldMembers:r.oldMembers||!1,kettlebellPoints:r.kettlebellPoints||"",cash:r.cash||!1,pos:r.pos||!1,cashAmount:r.cashAmount??0,posAmount:r.posAmount??0}})),hr(v=>new Set([...v,s])),x("Ultimate Program Options τοποθετήθηκαν στην αναμονή - οι επιλογές παγώθηκαν",{icon:"⏳"})):(t==="approved"&&await cn(s,o.user_id,r),Ls(v=>new Set([...v,s])),Os(v=>({...v,[s]:{...r,oldMembers:r.oldMembers||!1,kettlebellPoints:r.kettlebellPoints||"",cash:r.cash||!1,pos:r.pos||!1,cashAmount:r.cashAmount??0,posAmount:r.posAmount??0}}))),zt(v=>({...v,[s]:"none"}));const h={approved:"εγκρίθηκε και εκτελέστηκαν οι ενέργειες",rejected:"απορρίφθηκε",pending:"τοποθετήθηκε στην αναμονή"};x.success(`Ultimate Program Options ${h[t]} επιτυχώς!`),await es()}else x.error("Σφάλμα κατά την αποθήκευση των Ultimate Program Options")}catch(r){console.error("[AdminPanel] Error saving ultimate program options:",r),x.error("Σφάλμα κατά την αποθήκευση των Ultimate Program Options")}finally{F(!1)}},on=async s=>{try{Ls(t=>{const r=new Set(t);return r.delete(s),r}),hr(t=>{const r=new Set(t);return r.delete(s),r}),Os(t=>{const r={...t};return delete r[s],r}),x.success("Program Options ξεπαγώθηκαν επιτυχώς!")}catch(t){console.error("[AdminPanel] Error unfreezing ultimate program options:",t),x.error("Σφάλμα κατά το ξεπάγωμα των Program Options")}},dn=async(s,t,r)=>{console.log("Executing approved program actions for membership request:",s);try{r.oldMembers&&(await Xs(t,(n==null?void 0:n.id)||"")?console.log(`[APPROVED] Old Members marked as used for membership request: ${s}`):console.warn(`[APPROVED] Failed to mark Old Members as used for membership request: ${s}`)),r.first150Members&&(await Xs(t,(n==null?void 0:n.id)||"")?console.log(`[APPROVED] First 150 Members - Old Members marked as used for membership request: ${s}`):console.warn(`[APPROVED] First 150 Members - Failed to mark Old Members as used for membership request: ${s}`),console.log(`[APPROVED] First 150 Members selected - Cash set to 45€ and POS locked for membership request: ${s}`)),r.kettlebellPoints&&parseInt(r.kettlebellPoints)>0&&(await Js(t,parseInt(r.kettlebellPoints),void 0,(n==null?void 0:n.id)||"")?console.log(`[APPROVED] Kettlebell Points saved for membership request: ${s}, Points: ${r.kettlebellPoints}`):console.warn(`[APPROVED] Failed to save Kettlebell Points for membership request: ${s}`)),r.cashAmount&&r.cashAmount>0&&(await Ns(t,r.cashAmount,"cash",void 0,(n==null?void 0:n.id)||"","Cash transaction from approved membership request")?console.log(`[APPROVED] Cash transaction saved for membership request: ${s}, Amount: €${r.cashAmount}`):console.warn(`[APPROVED] Failed to save Cash transaction for membership request: ${s}`)),r.posAmount&&r.posAmount>0&&(await Ns(t,r.posAmount,"pos",void 0,(n==null?void 0:n.id)||"","POS transaction from approved membership request")?console.log(`[APPROVED] POS transaction saved for membership request: ${s}, Amount: €${r.posAmount}`):console.warn(`[APPROVED] Failed to save POS transaction for membership request: ${s}`)),x.success("Έγιναν όλες οι απαραίτητες ενέργειες για το εγκεκριμένο αίτημα!")}catch(o){console.error("Error executing approved program actions for membership request:",o)}},cn=async(s,t,r)=>{console.log("[AdminPanel] Executing approved program actions for Ultimate membership request:",s);try{r.oldMembers&&(await Xs(t,(n==null?void 0:n.id)||"")?console.log(`[APPROVED] Old Members marked as used for Ultimate membership request: ${s}`):console.warn(`[APPROVED] Failed to mark Old Members as used for Ultimate membership request: ${s}`)),r.kettlebellPoints&&parseInt(r.kettlebellPoints)>0&&(await Js(t,parseInt(r.kettlebellPoints),s,(n==null?void 0:n.id)||"")?console.log(`[APPROVED] Kettlebell Points saved for Ultimate membership request: ${s}, Points: ${r.kettlebellPoints}`):console.warn(`[APPROVED] Failed to save Kettlebell Points for Ultimate membership request: ${s}`)),r.cashAmount&&r.cashAmount>0&&(await Ns(t,r.cashAmount,"cash",s,(n==null?void 0:n.id)||"","Cash transaction from approved Ultimate membership request")?console.log(`[APPROVED] Cash transaction saved for Ultimate membership request: ${s}, Amount: €${r.cashAmount}`):console.warn(`[APPROVED] Failed to save Cash transaction for Ultimate membership request: ${s}`)),r.posAmount&&r.posAmount>0&&(await Ns(t,r.posAmount,"pos",s,(n==null?void 0:n.id)||"","POS transaction from approved Ultimate membership request")?console.log(`[APPROVED] POS transaction saved for Ultimate membership request: ${s}, Amount: €${r.posAmount}`):console.warn(`[APPROVED] Failed to save POS transaction for Ultimate membership request: ${s}`)),x.success("Έγιναν όλες οι απαραίτητες ενέργειες για το εγκεκριμένο Ultimate αίτημα!")}catch(o){console.error("[AdminPanel] Error executing approved program actions for Ultimate membership request:",o),x.error("Σφάλμα κατά την εκτέλεση των ενεργειών")}},jt=m.useCallback(async()=>{try{F(!0);const[s,t]=await Promise.all([eo(rs||void 0,ls||void 0),so(rs||void 0,ls||void 0)]);at(s),rt(t),me(r=>({...r,"kettlebell-points":!0}))}catch(s){console.error("Error loading kettlebell points data:",s),x.error("Σφάλμα κατά τη φόρτωση των Kettlebell Points")}finally{F(!1)}},[rs,ls]),mn=async s=>{try{const r=(await lo(s)).reduce((o,d)=>o+d.points,0);ts(r.toString())}catch(t){console.error("Error loading user kettlebell points:",t),ts("")}},xn=s=>{if(!s.trim()){Ds([]);return}const t=Oe.filter(r=>r.user_name.toLowerCase().includes(s.toLowerCase())||r.user_email.toLowerCase().includes(s.toLowerCase()));Ds(t)},vr=s=>{nt(s),xn(s),ns(1)},vt=Math.ceil(Oe.length/ps),wt=(as-1)*ps,wr=wt+ps,gn=Oe.slice(wt,wr),hn=()=>{ns(s=>Math.max(s-1,1))},un=()=>{ns(s=>Math.min(s+1,vt))};m.useEffect(()=>{b==="membership-packages"&&(yr(),ws())},[b]),m.useEffect(()=>{b==="kettlebell-points"&&jt()},[b]),m.useEffect(()=>{(async()=>{if(n)try{const{data:t,error:r}=await E.from("user_old_members_usage").select("user_id");if(r){console.error("Error loading old members usage:",r);return}const o=new Set((t==null?void 0:t.map(d=>d.user_id))||[]);As(o),$s(o)}catch(t){console.error("Exception loading old members usage:",t)}})()},[n]);const es=async()=>{try{ar(!0);const s=await zs(()=>io(),"φόρτωση Ultimate αιτημάτων");s.length>ko&&(console.log(`[AdminPanel] Large Ultimate dataset detected: ${s.length} items`),x(`Φορτώθηκαν ${s.length} Ultimate αιτήματα. Χρησιμοποιείται σελιδοποίηση.`,{icon:"👑"})),pa(s),me(t=>({...t,"ultimate-subscriptions":!0}))}catch(s){Ks(s,"φόρτωση Ultimate αιτημάτων")}finally{ar(!1)}},bn=async s=>{try{await zs(async()=>{const{error:t}=await E.from("membership_requests").delete().eq("id",s);if(t)throw t;return!0},"διαγραφή Ultimate αιτήματος"),x.success("Το Ultimate αίτημα διαγράφηκε επιτυχώς"),await es()}catch(t){Ks(t,"διαγραφή Ultimate αιτήματος")}},pn=async s=>{var t;try{F(!0);const r=Es.find(d=>d.id===s);((t=r==null?void 0:r.package)==null?void 0:t.name)==="Ultimate"&&(await zs(async()=>{const{approveUltimateMembershipRequest:d}=await Dn(async()=>{const{approveUltimateMembershipRequest:v}=await import("./membershipApi-B3nxiQkH.js");return{approveUltimateMembershipRequest:v}},__vite__mapDeps([0,1,2])),h=await d(s);if(!h)throw new Error("Approval failed");return h},"έγκριση Ultimate αιτήματος"),x.success("Το Ultimate αίτημα εγκρίθηκε επιτυχώς! Δημιουργήθηκαν 2 συνδρομές: Pilates + Open Gym"),es())}catch(r){Ks(r,"έγκριση Ultimate αιτήματος")}finally{F(!1)}},fn=async s=>{const t=prompt("Παρακαλώ εισάγετε τον λόγο απόρριψης:");if(t)try{F(!0),await zs(async()=>{const r=await ia(s,t);if(!r)throw new Error("Rejection failed");return r},"απόρριψη Ultimate αιτήματος"),x.success("Το Ultimate αίτημα απορρίφθηκε επιτυχώς!"),es()}catch(r){Ks(r,"απόρριψη Ultimate αιτήματος")}finally{F(!1)}},Yt=(s,t)=>{Vt({requestId:s,installmentNumber:t}),Kt(!0)},yn=async()=>{if(ft){const{requestId:s,installmentNumber:t}=ft;try{const r=ut.find(v=>v.id===s);if(r){const v=M[s]||{},L={};t===1?(L.installment_1_amount=parseFloat(v.installment1Amount||r.installment_1_amount||0),L.installment_1_payment_method=v.installment1PaymentMethod||r.installment_1_payment_method||"cash",L.installment_1_due_date=v.installment1DueDate||r.installment_1_due_date):t===2?(L.installment_2_amount=parseFloat(v.installment2Amount||r.installment_2_amount||0),L.installment_2_payment_method=v.installment2PaymentMethod||r.installment_2_payment_method||"cash",L.installment_2_due_date=v.installment2DueDate||r.installment_2_due_date):t===3&&(L.installment_3_amount=parseFloat(v.installment3Amount||r.installment_3_amount||0),L.installment_3_payment_method=v.installment3PaymentMethod||r.installment_3_payment_method||"cash",L.installment_3_due_date=v.installment3DueDate||r.installment_3_due_date);const{error:I}=await E.from("membership_requests").update(L).eq("id",s);if(I){console.error("[AdminPanel] Error saving values before lock:",I),x.error("Σφάλμα κατά την αποθήκευση των τιμών");return}console.log("[AdminPanel] Saved values before locking:",L)}const o=await ca(n==null?void 0:n.id),{error:d}=await E.rpc("lock_installment",{p_request_id:s,p_installment_number:t,p_locked_by:o});if(d){console.error(`Error locking installment ${t}:`,d),x.error(`Σφάλμα κατά το κλείδωμα της ${t}ης δόσης`);return}const h=`installment${t}Locked`;ve(s,h,!0),x.success(`${t}η δόση κλειδώθηκε επιτυχώς με τις τρέχουσες τιμές`),await ws()}catch(r){console.error("Exception locking installment:",r),x.error("Σφάλμα κατά το κλείδωμα της δόσης")}Kt(!1),Vt(null)}},jn=()=>{Kt(!1),Vt(null)},vn=s=>{Bt(s),Wt(!0)},wn=async()=>{if(Fs){try{const s=await ca(n==null?void 0:n.id);console.log("Deleting third installment for request:",Fs,"by user:",s);const{error:t}=await E.rpc("delete_third_installment_permanently",{p_request_id:Fs,p_deleted_by:s});if(t){console.error("Error deleting third installment:",t),x.error("Σφάλμα κατά τη διαγραφή της 3ης δόσης");return}ve(Fs,"deleteThirdInstallment",!0),x.success("3η δόση διαγράφηκε επιτυχώς"),await ws()}catch(s){console.error("Exception deleting third installment:",s),x.error("Σφάλμα κατά τη διαγραφή της 3ης δόσης")}Wt(!1),Bt(null)}},Nn=()=>{Wt(!1),Bt(null)},ge=(s,t)=>{const r=`installment_${t}_locked`,o=s[r]===!0;return console.log(`[AdminPanel] isInstallmentLocked check for request ${s.id}, installment ${t}: locked = ${o}, field = ${r}, value = ${s[r]}`),s[r]!==void 0&&s[r]!==null?o:(console.log(`[AdminPanel] Field ${r} is undefined/null, checking old locked_installments table...`),!1)},_n=async(s,t,r,o,d,h,v,L,I,S)=>{try{const f={installment_1_amount:t,installment_2_amount:r,installment_3_amount:o,installment_1_payment_method:d,installment_2_payment_method:h,installment_3_payment_method:v};L&&(f.installment_1_due_date=L),I&&(f.installment_2_due_date=I),S&&(f.installment_3_due_date=S);const Z=M[s];if(Z){const ie=V=>!V||V==="undefined"?null:V;if(Z.installment1Locked){const{error:V}=await E.rpc("lock_installment",{p_request_id:s,p_installment_number:1,p_locked_by:ie(n==null?void 0:n.id)});V&&console.error("Error locking installment 1:",V)}if(Z.installment2Locked){const{error:V}=await E.rpc("lock_installment",{p_request_id:s,p_installment_number:2,p_locked_by:ie(n==null?void 0:n.id)});V&&console.error("Error locking installment 2:",V)}if(Z.installment3Locked){const{error:V}=await E.rpc("lock_installment",{p_request_id:s,p_installment_number:3,p_locked_by:ie(n==null?void 0:n.id)});V&&console.error("Error locking installment 3:",V)}if(Z.deleteThirdInstallment){const V=ie(n==null?void 0:n.id);if(V){const{error:de}=await E.rpc("delete_third_installment_permanently",{request_id:s,deleted_by_user_id:V==="00000000-0000-0000-0000-000000000001"?null:V});de&&console.error("Error deleting third installment:",de)}else console.error("No valid user ID for third installment deletion")}}await zs(async()=>{const{error:ie}=await E.from("membership_requests").update(f).eq("id",s);if(ie)throw ie;return!0},"ενημέρωση δόσεων"),x.success("Οι δόσεις και ημερομηνίες ενημερώθηκαν επιτυχώς"),await es()}catch(f){Ks(f,"ενημέρωση δόσεων")}};m.useEffect(()=>{b==="ultimate-subscriptions"&&!T["ultimate-subscriptions"]&&(console.log("[AdminPanel] Loading Ultimate Subscriptions data..."),es())},[b]),m.useEffect(()=>{b==="ultimate-subscriptions"&&Es.length===0&&!It&&(console.log("[AdminPanel] Ultimate Subscriptions tab active but no data, reloading..."),es())},[b,Es.length,It]);const zs=async(s,t="operation",r=3)=>{for(let o=1;o<=r;o++)try{return await s()}catch(d){if(console.error(`[AdminPanel] Database ${t} failed (attempt ${o}/${r}):`,d),o===r){const v=`Σφάλμα σύνδεσης με τη βάση δεδομένων κατά ${t}. Παρακαλώ ελέγξτε τη σύνδεσή σας και δοκιμάστε ξανά.`;throw x.error(v),d}const h=1e3*o;console.log(`[AdminPanel] Retrying ${t} in ${h}ms...`),await new Promise(v=>setTimeout(v,h))}throw new Error(`Failed to complete ${t} after ${r} attempts`)},Ks=(s,t)=>{var r,o,d;console.error(`[AdminPanel] Database error in ${t}:`,s),(r=s.message)!=null&&r.includes("network")||(o=s.message)!=null&&o.includes("connection")?x.error("Πρόβλημα σύνδεσης δικτύου. Παρακαλώ ελέγξτε τη σύνδεσή σας."):(d=s.message)!=null&&d.includes("timeout")?x.error("Η λειτουργία διήρκησε πολύ. Παρακαλώ δοκιμάστε ξανά."):x.error(`Παρουσιάστηκε σφάλμα κατά ${t}. Παρακαλώ δοκιμάστε ξανά.`)};m.useEffect(()=>{g.selectedUserId&&mn(g.selectedUserId)},[g.selectedUserId]);const Pn=async()=>{if(!Ae||!Be){C({type:"error",message:"Παρακαλώ επιλέξτε χρήστη και εισάγετε αριθμό points"});return}const s=parseInt(Be);if(s<=0){C({type:"error",message:"Ο αριθμός των points πρέπει να είναι μεγαλύτερος από 0"});return}try{C(null),F(!0);const t=$.find(d=>d.id===Ae);if(!t){C({type:"error",message:"Δεν βρέθηκε ο επιλεγμένος χρήστης"});return}if(console.log("[OpenGym] Starting Open Gym action for user:",t.email,"Extra Service:",s),!await Js(Ae,s,void 0,(n==null?void 0:n.id)||"")){C({type:"error",message:"Σφάλμα κατά την αποθήκευση των Kettlebell Points"});return}if(console.log("[OpenGym] Kettlebell Points saved successfully"),!await kn(Ae)){C({type:"error",message:"Σφάλμα κατά τη δημιουργία της Free Gym συνδρομής"});return}console.log("[OpenGym] Free Gym membership created successfully"),C({type:"success",message:`Επιτυχής εφαρμογή Open Gym για ${t.firstName} ${t.lastName}! Ενεργοποιήθηκε η 1μηνη Free Gym συνδρομή.`}),os(""),Us(""),Dt(""),x.success(`Open Gym εφαρμογή επιτυχής για ${t.firstName} ${t.lastName}`)}catch(t){console.error("[OpenGym] Error during Open Gym action:",t),C({type:"error",message:"Σφάλμα κατά την εκτέλεση της ενέργειας Open Gym"})}finally{F(!1)}},kn=async s=>{try{const{data:t,error:r}=await E.from("membership_packages").select("id").eq("name","Free Gym").eq("is_active",!0).single();if(r||!t)return console.error("[OpenGym] Error finding Free Gym package:",r),!1;const o=new Date,d=new Date;d.setMonth(d.getMonth()+1);const{error:h}=await E.from("memberships").insert({user_id:s,package_id:t.id,start_date:o.toISOString().split("T")[0],end_date:d.toISOString().split("T")[0],is_active:!0,expires_at:d.toISOString(),source_package_name:"Open Gym"});return h?(console.error("[OpenGym] Error creating Free Gym membership:",h),!1):!0}catch(t){return console.error("[OpenGym] Exception creating Free Gym membership:",t),!1}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-xl shadow-xl p-4 sm:p-8 text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-3xl font-bold mb-2",children:"🏋️‍♂️ Διαχείριση Γυμναστηρίου"}),e.jsxs("p",{className:"text-blue-100 text-sm sm:text-lg",children:["Καλώς ήρθες, ",e.jsx("span",{className:"font-semibold",children:n.firstName}),"!"]})]}),e.jsx("div",{className:"bg-white/20 rounded-xl p-3 sm:p-4 backdrop-blur-sm self-start sm:self-auto",children:e.jsx($t,{className:"h-8 w-8 sm:h-12 sm:w-12"})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex overflow-x-auto space-x-2 sm:space-x-8 px-3 sm:px-6",children:Da.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>w(s.id),className:`py-3 sm:py-4 px-2 sm:px-1 border-b-3 font-semibold text-xs sm:text-sm flex items-center space-x-2 sm:space-x-3 transition-all duration-200 whitespace-nowrap ${b===s.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(t,{className:`h-4 w-4 sm:h-5 sm:w-5 ${b===s.id?"text-blue-500":"text-gray-400"}`}),e.jsx("span",{className:"hidden sm:inline",children:s.name}),e.jsx("span",{className:"sm:hidden",children:s.name.split(" ")[0]})]},s.id)})})}),e.jsxs("div",{className:"p-3 sm:p-6",children:[Q&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Φόρτωση δεδομένων χρήστη… Αυτό μπορεί να διαρκέσει λίγα δευτερόλεπτα."})]}),b==="personal-training"&&!Q&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-4 sm:p-6 text-white mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-2",children:"💪 Personal Training Πρόγραμμα"}),e.jsx("p",{className:"text-purple-100 text-sm sm:text-base",children:"Διαχείριση προγραμμάτων προπόνησης"})]}),e.jsxs("button",{onClick:()=>te(!0),className:"flex items-center space-x-2 sm:space-x-3 px-4 sm:px-6 py-2 sm:py-3 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg text-sm sm:text-base",children:[e.jsx(De,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{children:"🏋️‍♂️ Δημιουργία Προγράμματος"})]})]})}),ce&&O&&!Ea({email:ce.email,personalTrainingCode:ce.personalTrainingCode})&&e.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border-2 border-blue-200 rounded-xl shadow-xl p-4 sm:p-8",id:"schedule-editor",children:[e.jsxs("div",{className:"flex flex-col space-y-4 sm:space-y-0 sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 sm:p-6 rounded-xl shadow-lg flex-1 sm:flex-none",children:[e.jsxs("h3",{className:"text-lg sm:text-2xl font-bold mb-1 sm:mb-2",children:["🏋️‍♂️ Πρόγραμμα για ",ce.firstName," ",ce.lastName]}),e.jsxs("p",{className:"text-blue-100 text-sm sm:text-lg",children:["📅 ",Ua[O.month-1]," ",O.year]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 sm:space-x-2 sm:gap-0",children:he?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:Ga,className:"flex items-center space-x-1 px-3 py-2 bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors text-sm",children:[e.jsx(Ct,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Προσθήκη Σεσίας"}),e.jsx("span",{className:"sm:hidden",children:"Προσθήκη"})]}),e.jsxs("button",{onClick:Ka,className:"flex items-center space-x-1 px-3 py-2 bg-primary-100 text-primary-700 rounded-md hover:bg-primary-200 transition-colors text-sm",children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsx("span",{children:"Αποθήκευση"})]}),e.jsx("button",{onClick:()=>ke(!1),className:"flex items-center space-x-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-sm",children:e.jsx("span",{children:"Ακύρωση"})})]}):e.jsxs("button",{onClick:()=>ke(!0),className:"flex items-center space-x-1 px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors text-sm",children:[e.jsx(la,{className:"h-4 w-4"}),e.jsx("span",{children:"Επεξεργασία"})]})})]}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:O.scheduleData.sessions.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Ημέρα"}),he?e.jsx("input",{type:"date",value:s.date,onChange:t=>Rs(s.id,"date",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",lang:"el"}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:new Date(s.date).toLocaleDateString("el-GR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Ώρα Έναρξης"}),he?e.jsx("select",{value:s.startTime,onChange:t=>Rs(s.id,"startTime",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:Ia.map(t=>e.jsx("option",{value:t,children:t},t))}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.startTime})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Τύπος"}),he?e.jsxs("select",{value:s.type,onChange:t=>Rs(s.id,"type",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:[e.jsx("option",{value:"personal",children:"Personal Training"}),e.jsx("option",{value:"kickboxing",children:"Kick Boxing"}),e.jsx("option",{value:"combo",children:"Combo"})]}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900 capitalize",children:s.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Προπονητής"}),he?e.jsx("select",{value:s.trainer,onChange:t=>Rs(s.id,"trainer",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:da.map(t=>e.jsx("option",{value:t,children:t},t))}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.trainer})]}),e.jsx("div",{className:"flex items-end sm:col-span-2 lg:col-span-1",children:he&&e.jsxs("button",{onClick:()=>za(s.id),className:"flex items-center space-x-1 px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors text-sm w-full sm:w-auto",children:[e.jsx(et,{className:"h-4 w-4"}),e.jsx("span",{children:"Διαγραφή"})]})})]}),s.notes&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Σημειώσεις"}),he?e.jsx("input",{type:"text",value:s.notes,onChange:t=>Rs(s.id,"notes",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",placeholder:"Σημειώσεις για τη σέσια"}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.notes})]})]},s.id))}),e.jsxs("div",{className:"mt-4 sm:mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Γενικές Σημειώσεις"}),he?e.jsx("textarea",{value:O.scheduleData.notes||"",onChange:s=>{const t={...O,scheduleData:{...O.scheduleData,notes:s.target.value}};ne(t)},className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",rows:3,placeholder:"Γενικές σημειώσεις για το πρόγραμμα..."}):e.jsx("p",{className:"text-sm text-gray-900",children:O.scheduleData.notes||"Δεν υπάρχουν σημειώσεις"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl shadow-lg border-2 border-orange-200",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-2xl font-bold text-orange-800 mb-2",children:"🏋️‍♂️ Open Gym"}),e.jsx("p",{className:"text-orange-600 text-sm sm:text-base",children:"Διαχείριση εξτρα υπηρεσιών και Free Gym συνδρομών"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-200",children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:["👤 Επιλογή Χρήστη",e.jsxs("span",{className:"ml-2 text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded",children:["Selected: ",Ae?"✅":"❌"]})]}),e.jsxs("div",{className:"flex space-x-3 mb-4",children:[e.jsx("button",{type:"button",onClick:()=>He("dropdown"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${Ue==="dropdown"?"bg-orange-600 text-white shadow-lg":"bg-white text-orange-600 border-2 border-orange-200 hover:border-orange-400"}`,children:"📋 Dropdown"}),e.jsx("button",{type:"button",onClick:()=>He("search"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${Ue==="search"?"bg-orange-600 text-white shadow-lg":"bg-white text-orange-600 border-2 border-orange-200 hover:border-orange-400"}`,children:"🔍 Αναζήτηση"})]}),Ue==="dropdown"?e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:Ae,onChange:s=>os(s.target.value),children:[e.jsx("option",{value:"",children:"-- Επιλέξτε χρήστη --"}),$.map(s=>e.jsxs("option",{value:s.id,children:[s.firstName," ",s.lastName," (",s.email,")"]},s.id))]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 placeholder-gray-400",placeholder:"🔍 Αναζήτηση με όνομα ή email...",value:dt,onChange:s=>Dt(s.target.value)}),dt&&e.jsx("div",{className:"max-h-48 overflow-y-auto border-2 border-orange-200 rounded-xl bg-white shadow-lg",children:pr.length>0?pr.map(s=>e.jsxs("div",{className:`p-4 hover:bg-orange-50 cursor-pointer border-b border-orange-100 last:border-b-0 transition-all duration-200 ${Ae===s.id?"bg-orange-100 border-l-4 border-l-orange-500":""}`,onClick:()=>{os(s.id),Dt("")},children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:s.email})]},s.id)):e.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Δεν βρέθηκαν χρήστες"})})]}),Ae&&e.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"✓"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[(Nr=$.find(s=>s.id===Ae))==null?void 0:Nr.firstName," ",(_r=$.find(s=>s.id===Ae))==null?void 0:_r.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:(Pr=$.find(s=>s.id===Ae))==null?void 0:Pr.email})]}),e.jsx("button",{onClick:()=>os(""),className:"ml-auto text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ze,{className:"h-4 w-4"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-200",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"🏋️‍♂️ Kettlebell Points"}),e.jsx("input",{type:"number",min:"0",step:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Εισάγετε αριθμό...",value:Be,onChange:s=>Us(s.target.value)})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:Pn,disabled:!Ae||!Be||parseInt(Be)<=0,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-200 font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-orange-500 disabled:hover:to-red-500",children:"🏋️‍♂️ Εφαρμογή Open Gym"})}),fs&&e.jsx("div",{className:`p-3 rounded-lg text-sm font-medium ${fs.type==="success"?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:fs.message})]})]})}),Ss&&e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl shadow-lg border-2 border-green-200",children:e.jsx("div",{className:"p-4 sm:p-6",children:e.jsx(to,{featureEnabled:Ss})})})]}),b==="membership-packages"&&!Q&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Διαχείριση Πακέτων Συνδρομών"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Ενημερώστε τις τιμές για κάθε πακέτο και διάρκεια"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ja.map(s=>e.jsxs("div",{className:`border-2 rounded-xl p-6 cursor-pointer transition-all duration-200 ${(Ee==null?void 0:Ee.id)===s.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>qa(s),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[s.name==="Pilates"?e.jsx("span",{className:"text-2xl",children:"🧘"}):e.jsx(Zs,{className:"h-6 w-6 text-blue-500"}),e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:s.name})]}),e.jsx(er,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:s.description}),s.features&&e.jsx("ul",{className:"space-y-1",children:s.features.slice(0,3).map((t,r)=>e.jsxs("li",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full mr-2"}),t]},r))})]},s.id))})})]}),Ee&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Τιμές για ",Ee.name]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Ενημερώστε τις τιμές για κάθε διάρκεια"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:wa.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(st,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:tr(s.duration_type)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.duration_days," ημέρες"]})]})]}),e.jsx("button",{onClick:()=>en(s),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(la,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>{qe("all"),Ce(1)},className:`px-3 py-1.5 rounded-full text-xs sm:text-sm font-semibold border transition-colors ${Ie==="all"?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-slate-300 hover:bg-slate-100"}`,children:"Όλα"}),e.jsx("button",{onClick:()=>{qe("freegym"),Ce(1)},className:`px-3 py-1.5 rounded-full text-xs sm:text-sm font-semibold border transition-colors ${Ie==="freegym"?"bg-green-600 text-white border-green-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-100"}`,children:"Open Gym"}),e.jsx("button",{onClick:()=>{qe("pilates"),Ce(1)},className:`px-3 py-1.5 rounded-full text-xs sm:text-sm font-semibold border transition-colors ${Ie==="pilates"?"bg-purple-600 text-white border-purple-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-100"}`,children:"Pilates"}),e.jsx("button",{onClick:()=>{qe("installments"),Ce(1)},className:`px-3 py-1.5 rounded-full text-xs sm:text-sm font-semibold border transition-colors ${Ie==="installments"?"bg-orange-600 text-white border-orange-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-100"}`,children:"Δόσεις"})]}),(Xe==null?void 0:Xe.id)===s.id?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"number",value:Gt,onChange:t=>Is(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Νέα τιμή",step:"0.01",min:"0"})}),e.jsx("button",{onClick:sn,disabled:Q,className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:e.jsx(_s,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{ht(null),Is("")},className:"px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:e.jsx(ze,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Fe(s.price)}),e.jsx("div",{className:"text-sm text-gray-600",children:"EUR"})]})]},s.id))})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 px-8 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-white/10 rounded-xl backdrop-blur-sm",children:e.jsx(Ke,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Αιτήματα Συνδρομών"}),e.jsx("p",{className:"text-slate-200 mt-1",children:"Διαχειριστείτε τα αιτήματα συνδρομών από χρήστες"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Αναζήτηση με όνομα χρήστη...",value:js,onChange:Za,className:"pl-12 pr-6 py-3 bg-white/10 border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 w-full lg:w-80 text-white placeholder-slate-300 backdrop-blur-sm"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-slate-50 via-blue-50 to-indigo-50 border border-slate-200 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"h-6 w-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Οδηγίες Διαχείρισης Αιτημάτων"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(Ve,{className:"h-3 w-3 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-800 mb-1",children:"Αναζήτηση & Πλοήγηση"}),e.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed",children:["Χρησιμοποιήστε το πεδίο αναζήτησης για να βρείτε γρήγορα αιτήματα με όνομα χρήστη. Η λίστα εμφανίζεται σε ",e.jsx("span",{className:"font-semibold text-blue-700",children:"6άδες"})," - ελέγξτε την επόμενη σελίδα αν δεν βρείτε το επιθυμητό αίτημα."]})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg p-4 border border-amber-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-amber-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(rr,{className:"h-3 w-3 text-amber-600"})}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-amber-800 mb-1 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-amber-500 rounded-full mr-2"}),"Σημαντική Προσοχή - Διαδικασία Πληρωμής"]}),e.jsxs("p",{className:"text-sm text-amber-700 leading-relaxed",children:[e.jsx("span",{className:"font-semibold",children:"ΠΡΩΤΑ"})," αποθηκεύουμε τα χρήματα στο σύστημα (Cash Register) και",e.jsx("span",{className:"font-semibold",children:" ΕΠΕΙΤΑ"})," επιλέγουμε για το αίτημα του χρήστη εάν εγκρίνεται ή απορρίπτεται."]})]})]})})]})]})]})}),e.jsx("div",{className:"p-8",children:Gs().length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Ke,{className:"h-10 w-10 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:js?"Δεν βρέθηκαν αποτελέσματα":"Δεν υπάρχουν αιτήματα"}),e.jsx("p",{className:"text-gray-500",children:js?`Για την αναζήτηση "${js}"`:"Δεν έχουν υποβληθεί αιτήματα συνδρομών ακόμα"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-slate-50 rounded-xl p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(De,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-slate-700",children:["Εμφάνιση ",(Ze-1)*Ts+1,"-",Math.min(Ze*Ts,Gs().length)," από ",Gs().length," αιτήματα"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Οργανωμένα σε 6άδες για εύκολη πλοήγηση"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 flex-wrap gap-y-2",children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-2 mr-4",children:[e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-slate-600 mr-1",children:"Φίλτρα αιτημάτων συνδρομών:"}),e.jsx("button",{onClick:()=>{qe("all"),Ce(1)},className:`px-3 py-1.5 rounded-full text-xs sm:text-sm font-semibold border transition-colors ${Ie==="all"?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-slate-300 hover:bg-slate-100"}`,children:"Όλα"}),e.jsx("button",{onClick:()=>{qe("freegym"),Ce(1)},className:`px-3 py-1.5 rounded-full text-xs sm:text-sm font-semibold border transition-colors ${Ie==="freegym"?"bg-green-600 text-white border-green-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-100"}`,children:"Open Gym"}),e.jsx("button",{onClick:()=>{qe("pilates"),Ce(1)},className:`px-3 py-1.5 rounded-full text-xs sm:text-sm font-semibold border transition-colors ${Ie==="pilates"?"bg-purple-600 text-white border-purple-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-100"}`,children:"Pilates"}),e.jsx("button",{onClick:()=>{qe("installments"),Ce(1)},className:`px-3 py-1.5 rounded-full text-xs sm:text-sm font-semibold border transition-colors ${Ie==="installments"?"bg-orange-600 text-white border-orange-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-100"}`,children:"Δόσεις"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[ds()>3&&e.jsx("button",{onClick:Ja,disabled:Ze===1,className:"px-3 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-200",title:"Πρώτη σελίδα",children:"««"}),e.jsxs("button",{onClick:Ya,disabled:Ze===1,className:"px-4 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed flex items-center space-x-2 transition-all duration-200",children:[e.jsx("span",{children:"←"}),e.jsx("span",{children:"Προηγούμενο"})]}),e.jsxs("div",{className:"px-4 py-2 text-sm font-semibold text-slate-700 bg-slate-200 rounded-lg min-w-[120px] text-center",children:[Ze," / ",ds()]}),e.jsxs("button",{onClick:Qa,disabled:Ze>=ds(),className:"px-4 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed flex items-center space-x-2 transition-all duration-200",children:[e.jsx("span",{children:"Επόμενο"}),e.jsx("span",{children:"→"})]}),ds()>3&&e.jsx("button",{onClick:Xa,disabled:Ze>=ds(),className:"px-3 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-200",title:"Τελευταία σελίδα",children:"»»"})]})]})]})}),e.jsx("div",{className:"space-y-8",children:Ha().map(s=>{var t,r,o,d,h,v,L,I,S,f,Z,ie,V,de,cs,Vs,Nt,Ws,re,Y,J,be,ms,_t,Pt,Qt,kt,tl,rl,ll,al,nl,ol,il,dl,cl,ml,xl,gl,hl,ul,bl,pl,fl,yl,jl,vl,wl,Nl,_l,Pl,kl,Sl,Al,$l,Cl,Ml,Dl,Ul,El,Il,Tl,Ll,Ol,Fl,Rl,Gl,zl,Kl,Vl,Wl,Bl,Hl,Yl,Ql,Jl,Xl,Zl,ql,ea,sa;return e.jsxs("div",{className:"relative bg-slate-100 border-2 border-slate-300 rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:`absolute left-0 top-0 h-full w-2 
                            ${s.status==="approved"?"bg-green-400":""}
                            ${s.status==="pending"?"bg-yellow-400":""}
                            ${s.status==="rejected"?"bg-red-400":""}
                          `}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"relative",children:[(t=s.user)!=null&&t.profile_photo?e.jsxs("div",{className:"w-12 h-12 rounded-xl overflow-hidden shadow-lg border-2 border-white",children:[e.jsx("img",{src:s.user.profile_photo,alt:`${(r=s.user)==null?void 0:r.first_name} ${(o=s.user)==null?void 0:o.last_name}`,className:"w-full h-full object-cover",onError:W=>{W.currentTarget.style.display="none";const fe=W.currentTarget.nextElementSibling;fe&&(fe.style.display="flex")}}),e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center hidden",children:e.jsx(Ke,{className:"h-6 w-6 text-white"})})]}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Ke,{className:"h-6 w-6 text-white"})}),s.status==="pending"&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full border-2 border-white"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-1",children:[(d=s.user)==null?void 0:d.first_name," ",(h=s.user)==null?void 0:h.last_name]}),e.jsxs("p",{className:"text-sm text-slate-600 mb-2 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-slate-300 rounded-full mr-2"}),(v=s.user)==null?void 0:v.email]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:(L=s.package)==null?void 0:L.name}),e.jsx("span",{className:"text-sm text-slate-500",children:"•"}),e.jsx("span",{className:"text-sm text-slate-600",children:tr(s.duration_type)})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:Fe(s.requested_price)}),e.jsxs("div",{className:"text-sm text-slate-500 flex items-center",children:[e.jsx(De,{className:"h-4 w-4 mr-1"}),new Date(s.created_at).toLocaleDateString("el-GR")]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[s.status==="pending"&&(mr.has(s.id)||H(s.id)?e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>tn(s.id),disabled:Q,className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Εγκρίνω Συνδρομή"})]}),e.jsxs("button",{onClick:()=>rn(s.id),disabled:Q,className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),e.jsx("span",{children:"Απορρίπτω Συνδρομή"})]})]}):e.jsx("div",{className:"max-w-[280px] text-right",children:e.jsxs("div",{className:"inline-flex items-start bg-amber-50 border border-amber-200 text-amber-800 rounded-lg px-3 py-2 text-xs",children:[e.jsx("span",{className:"mr-2",children:"🔒"}),e.jsx("span",{children:"Για να ενεργοποιηθούν τα κουμπιά «Εγκρίνω Συνδρομή / Απορρίπτω Συνδρομή», εκτελέστε πρώτα ενέργεια πληρωμής (Έγκριση/Απόρριψη/Αναμονή) και πατήστε «Αποθήκευση Program Options»."})]})})),s.status==="approved"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"Εγκεκριμένο"})]}),s.status==="rejected"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-semibold",children:"Απορριφθέν"})]})]})]})]})}),(s.status==="pending"||s.status==="approved"&&p(s.id)||s.status==="rejected"&&p(s.id))&&e.jsx("div",{className:`border-t border-slate-200 ${p(s.id)?"bg-yellow-50":"bg-slate-50"}`,children:e.jsxs("div",{className:"p-6 sm:p-7",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${p(s.id)?"bg-yellow-100":"bg-slate-100"}`,children:e.jsx(er,{className:`h-5 w-5 ${p(s.id)?"text-yellow-600":"text-slate-600"}`})}),e.jsx("h5",{className:`text-xl font-bold ${p(s.id)?"text-yellow-800":"text-slate-800"} flex items-center`,children:"🎛️ Επιλογές Προγράμματος"})]}),p(s.id)&&e.jsx("span",{className:"px-3 py-1 rounded-full bg-yellow-200 text-yellow-900 text-xs font-semibold",children:"🔒 Κλειδωμένο"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl border-2 ${p(s.id)?"bg-yellow-50 border-yellow-200":"bg-white border-slate-200"}`,children:e.jsx("button",{onClick:()=>{var W;if(p(s.id)){x("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}ve(s.id,"oldMembers",!((W=M[s.id])!=null&&W.oldMembers))},className:`w-full p-3 rounded-full text-left transition-colors ${(I=M[s.id])!=null&&I.oldMembers||(S=H(s.id))!=null&&S.oldMembers?"bg-green-100 text-green-800 border-2 border-green-300":p(s.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-slate-100 text-slate-700 border-2 border-slate-200 hover:bg-slate-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:[p(s.id)&&"🔒 ","👴 Παλαιά μέλη"]}),(((f=M[s.id])==null?void 0:f.oldMembers)||((Z=H(s.id))==null?void 0:Z.oldMembers))&&e.jsx("span",{className:"text-green-600",children:"✓"})]})})}),(()=>{var Me,Bs,Hs,Ys;const W=((Me=M[s.id])==null?void 0:Me.oldMembers)||((Bs=H(s.id))==null?void 0:Bs.oldMembers),fe=((Hs=M[s.id])==null?void 0:Hs.first150Members)===!1||((Ys=H(s.id))==null?void 0:Ys.first150Members)===!1;return W&&!fe})()&&e.jsxs("div",{className:`p-3 rounded-xl border-2 ${p(s.id)?"bg-yellow-50 border-yellow-200":"bg-white border-slate-200"}`,children:[e.jsxs("div",{className:"mb-3 text-xs text-gray-600 bg-blue-50 p-2 rounded-lg border border-blue-200",children:[e.jsx("span",{className:"font-medium",children:"ℹ️ Πληροφορίες:"})," Ισχύει μόνο για τα πρώτα 150 παλιά μέλη του γυμναστηρίου με τιμή 45€ ετήσιος (προσφορά), τα οποία εμφανίζονται στην καρτέλα Ταμείο"]}),e.jsx("button",{onClick:()=>{if(p(s.id)){x("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}xr(W=>{var Bs,Hs,Ys,ta,ra;const fe={...W},Me=!((Bs=fe[s.id])!=null&&Bs.first150Members);return fe[s.id]={...fe[s.id],first150Members:Me,cash:Me?!0:((Hs=fe[s.id])==null?void 0:Hs.cash)||!1,cashAmount:Me?45:(Ys=fe[s.id])==null?void 0:Ys.cashAmount,pos:Me?!1:((ta=fe[s.id])==null?void 0:ta.pos)||!1,posAmount:Me?0:(ra=fe[s.id])==null?void 0:ra.posAmount},fe})},className:`w-full px-4 py-3 rounded-full font-semibold transition-all duration-200 relative shadow ${(ie=M[s.id])!=null&&ie.first150Members||(V=H(s.id))!=null&&V.first150Members?"bg-orange-500 text-white hover:bg-orange-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"🏆 Πρώτα 150 Μέλη"}),(((de=M[s.id])==null?void 0:de.first150Members)||((cs=H(s.id))==null?void 0:cs.first150Members))&&e.jsx("span",{className:"text-orange-200",children:"✓"}),p(s.id)&&e.jsx("span",{className:"text-yellow-600",children:"🔒"})]})})]}),e.jsxs("div",{className:`p-3 rounded-xl border-2 ${p(s.id)?"bg-yellow-50 border-yellow-200":"bg-white border-slate-200"}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[p(s.id)&&"🔒 ","🏋️ Kettlebell Points"]}),e.jsx("input",{type:"number",value:p(s.id)?((Vs=H(s.id))==null?void 0:Vs.kettlebellPoints)||"":((Nt=M[s.id])==null?void 0:Nt.kettlebellPoints)||"",onChange:W=>{p(s.id)||ve(s.id,"kettlebellPoints",W.target.value)},placeholder:"Εισάγετε πόντους",className:`w-full p-2 border rounded-lg ${p(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,disabled:p(s.id)})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-4 border-2 border-slate-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"💳"}),e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"SECTION ΠΛΗΡΩΜΩΝ"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-3 rounded-xl border-2 ${p(s.id)?"bg-yellow-50 border-yellow-200":"bg-white border-slate-200"}`,children:[e.jsx("button",{onClick:()=>{var W,fe,Me;if(p(s.id)){x("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}if((W=M[s.id])!=null&&W.first150Members||(fe=H(s.id))!=null&&fe.first150Members){x('Το Μετρητά είναι κλειδωμένο όταν είναι επιλεγμένο το "Πρώτα 150 Μέλη"',{icon:"🔒"});return}ve(s.id,"cash",!((Me=M[s.id])!=null&&Me.cash))},className:`w-full p-3 rounded-full text-left transition-colors ${(Ws=M[s.id])!=null&&Ws.first150Members||(re=H(s.id))!=null&&re.first150Members?"bg-gray-100 text-gray-500 border-2 border-gray-300 cursor-not-allowed":(Y=M[s.id])!=null&&Y.cash||(J=H(s.id))!=null&&J.cash?"bg-green-100 text-green-800 border-2 border-green-300":p(s.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-slate-100 text-slate-700 border-2 border-slate-200 hover:bg-slate-200"}`,disabled:p(s.id)||((be=M[s.id])==null?void 0:be.first150Members)||((ms=H(s.id))==null?void 0:ms.first150Members),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:[p(s.id)&&"🔒 ",(((_t=M[s.id])==null?void 0:_t.first150Members)||((Pt=H(s.id))==null?void 0:Pt.first150Members))&&"🔒 ","💰 Μετρητά"]}),(((Qt=M[s.id])==null?void 0:Qt.cash)||((kt=H(s.id))==null?void 0:kt.cash))&&!((tl=M[s.id])!=null&&tl.first150Members||(rl=H(s.id))!=null&&rl.first150Members)&&e.jsx("span",{className:"text-green-600",children:"✓"})]})}),(((ll=M[s.id])==null?void 0:ll.cash)||((al=H(s.id))==null?void 0:al.cash))&&!((nl=M[s.id])!=null&&nl.first150Members||(ol=H(s.id))!=null&&ol.first150Members)&&e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"number",value:p(s.id)?((il=H(s.id))==null?void 0:il.cashAmount)||"":((dl=M[s.id])==null?void 0:dl.cashAmount)||"",onChange:W=>{p(s.id)||ve(s.id,"cashAmount",parseFloat(W.target.value)||0)},placeholder:"Ποσό σε €",className:`w-full p-2 border rounded-lg ${p(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500"}`,disabled:p(s.id)}),e.jsx("button",{onClick:()=>{p(s.id)},className:`mt-2 w-full px-3 py-1 text-sm rounded-lg ${p(s.id)?"bg-yellow-200 text-yellow-700 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,disabled:p(s.id),children:"✓ Επιλογή"})]})]}),e.jsxs("div",{className:`p-3 rounded-xl border-2 ${p(s.id)?"bg-yellow-50 border-yellow-200":"bg-white border-slate-200"}`,children:[e.jsx("button",{onClick:()=>{var W,fe,Me;if(p(s.id)){x("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}if((W=M[s.id])!=null&&W.first150Members||(fe=H(s.id))!=null&&fe.first150Members){x('Το POS είναι κλειδωμένο όταν είναι επιλεγμένο το "Πρώτα 150 Μέλη"',{icon:"🔒"});return}ve(s.id,"pos",!((Me=M[s.id])!=null&&Me.pos))},className:`w-full p-3 rounded-full text-left transition-colors ${(cl=M[s.id])!=null&&cl.pos||(ml=H(s.id))!=null&&ml.pos?"bg-blue-100 text-blue-800 border-2 border-blue-300":p(s.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":(xl=M[s.id])!=null&&xl.first150Members||(gl=H(s.id))!=null&&gl.first150Members?"bg-gray-100 text-gray-500 border-2 border-gray-300 cursor-not-allowed":"bg-slate-100 text-slate-700 border-2 border-slate-200 hover:bg-slate-200"}`,disabled:p(s.id)||((hl=M[s.id])==null?void 0:hl.first150Members)||((ul=H(s.id))==null?void 0:ul.first150Members),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:[p(s.id)&&"🔒 ",(((bl=M[s.id])==null?void 0:bl.first150Members)||((pl=H(s.id))==null?void 0:pl.first150Members))&&"🔒 ","💳 POS"]}),(((fl=M[s.id])==null?void 0:fl.pos)||((yl=H(s.id))==null?void 0:yl.pos))&&e.jsx("span",{className:"text-blue-600",children:"✓"})]})}),(((jl=M[s.id])==null?void 0:jl.pos)||((vl=H(s.id))==null?void 0:vl.pos))&&e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"number",value:p(s.id)?((wl=H(s.id))==null?void 0:wl.posAmount)||"":((Nl=M[s.id])==null?void 0:Nl.posAmount)||"",onChange:W=>{p(s.id)||ve(s.id,"posAmount",parseFloat(W.target.value)||0)},placeholder:"Ποσό σε €",className:`w-full p-2 border rounded-lg ${p(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,disabled:p(s.id)}),e.jsx("button",{onClick:()=>{p(s.id)},className:`mt-2 w-full px-3 py-1 text-sm rounded-full ${p(s.id)?"bg-yellow-200 text-yellow-700 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:p(s.id),children:"✓ Επιλογή"})]})]})]})]}),s.has_installments&&uo(((_l=s.package)==null?void 0:_l.name)||"",s.duration_type)&&e.jsxs("div",{className:`col-span-2 p-4 rounded-lg border ${p(s.id)?"bg-yellow-100 border-yellow-300":"bg-orange-50 border-orange-200"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"💳"}),e.jsxs("h4",{className:"text-lg font-semibold text-orange-800",children:[p(s.id)&&"🔒 ","Διαχείριση Δόσεων"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"1η Δόση"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",value:p(s.id)?((Pl=H(s.id))==null?void 0:Pl.installment1Amount)||"":((kl=M[s.id])==null?void 0:kl.installment1Amount)||s.installment_1_amount||"",onChange:W=>{p(s.id)||ve(s.id,"installment1Amount",W.target.value)},placeholder:"Ποσό",disabled:p(s.id)||ge(s,1),className:`w-full p-2 border rounded-lg ${p(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":ge(s,1)?"bg-orange-50 border-orange-300 cursor-not-allowed text-orange-600":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`}),e.jsxs("select",{value:p(s.id)?((Sl=H(s.id))==null?void 0:Sl.installment1PaymentMethod)||"cash":((Al=M[s.id])==null?void 0:Al.installment1PaymentMethod)||s.installment_1_payment_method||"cash",onChange:W=>{p(s.id)||ve(s.id,"installment1PaymentMethod",W.target.value)},disabled:p(s.id)||ge(s,1),className:`w-full p-2 border rounded-lg ${p(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":ge(s,1)?"bg-orange-50 border-orange-300 cursor-not-allowed text-orange-600":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`,children:[e.jsx("option",{value:"cash",children:"💰 Μετρητά"}),e.jsx("option",{value:"pos",children:"💳 POS"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"📅 Ημερομηνία Πληρωμής"}),e.jsx("input",{type:"date",value:p(s.id)?(($l=H(s.id))==null?void 0:$l.installment1DueDate)||"":((Cl=M[s.id])==null?void 0:Cl.installment1DueDate)||s.installment_1_due_date||"",onChange:W=>{p(s.id)||ve(s.id,"installment1DueDate",W.target.value)},disabled:p(s.id)||ge(s,1),className:`w-full p-2 border rounded-lg text-sm ${p(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":ge(s,1)?"bg-orange-50 border-orange-300 cursor-not-allowed text-orange-600":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:ge(s,1),onChange:()=>Yt(s.id,1),className:"h-4 w-4 text-orange-600 border-gray-300 rounded",disabled:p(s.id)}),e.jsx("span",{className:"text-xs text-gray-600",children:"Κλείδωμα Δόσης"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"2η Δόση"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",value:p(s.id)?((Ml=H(s.id))==null?void 0:Ml.installment2Amount)||"":((Dl=M[s.id])==null?void 0:Dl.installment2Amount)||s.installment_2_amount||"",onChange:W=>{p(s.id)||ve(s.id,"installment2Amount",W.target.value)},placeholder:"Ποσό",disabled:p(s.id)||ge(s,2),className:`w-full p-2 border rounded-lg ${p(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":ge(s,2)?"bg-orange-50 border-orange-300 cursor-not-allowed text-orange-600":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`}),e.jsxs("select",{value:p(s.id)?((Ul=H(s.id))==null?void 0:Ul.installment2PaymentMethod)||"cash":((El=M[s.id])==null?void 0:El.installment2PaymentMethod)||s.installment_2_payment_method||"cash",onChange:W=>{p(s.id)||ve(s.id,"installment2PaymentMethod",W.target.value)},disabled:p(s.id)||ge(s,2),className:`w-full p-2 border rounded-lg ${p(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":ge(s,2)?"bg-orange-50 border-orange-300 cursor-not-allowed text-orange-600":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`,children:[e.jsx("option",{value:"cash",children:"💰 Μετρητά"}),e.jsx("option",{value:"pos",children:"💳 POS"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"📅 Ημερομηνία Πληρωμής"}),e.jsx("input",{type:"date",value:p(s.id)?((Il=H(s.id))==null?void 0:Il.installment2DueDate)||"":((Tl=M[s.id])==null?void 0:Tl.installment2DueDate)||s.installment_2_due_date||"",onChange:W=>{p(s.id)||ve(s.id,"installment2DueDate",W.target.value)},disabled:p(s.id)||ge(s,2),className:`w-full p-2 border rounded-lg text-sm ${p(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":ge(s,2)?"bg-orange-50 border-orange-300 cursor-not-allowed text-orange-600":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:ge(s,2),onChange:()=>Yt(s.id,2),className:"h-4 w-4 text-orange-600 border-gray-300 rounded",disabled:p(s.id)}),e.jsx("span",{className:"text-xs text-gray-600",children:"Κλείδωμα Δόσης"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"3η Δόση"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",value:p(s.id)?((Ll=H(s.id))==null?void 0:Ll.installment3Amount)||"":((Ol=M[s.id])==null?void 0:Ol.installment3Amount)||s.installment_3_amount||"",onChange:W=>{p(s.id)||ve(s.id,"installment3Amount",W.target.value)},placeholder:"Ποσό",disabled:p(s.id)||ge(s,3)||((Fl=M[s.id])==null?void 0:Fl.deleteThirdInstallment)||s.third_installment_deleted,className:`w-full p-2 border rounded-lg ${p(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":ge(s,3)?"bg-orange-50 border-orange-300 cursor-not-allowed text-orange-600":(Rl=M[s.id])!=null&&Rl.deleteThirdInstallment||s.third_installment_deleted?"bg-red-50 border-red-300 cursor-not-allowed text-red-600":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`}),e.jsxs("select",{value:p(s.id)?((Gl=H(s.id))==null?void 0:Gl.installment3PaymentMethod)||"cash":((zl=M[s.id])==null?void 0:zl.installment3PaymentMethod)||s.installment_3_payment_method||"cash",onChange:W=>{p(s.id)||ve(s.id,"installment3PaymentMethod",W.target.value)},disabled:p(s.id)||ge(s,3)||((Kl=M[s.id])==null?void 0:Kl.deleteThirdInstallment)||s.third_installment_deleted,className:`w-full p-2 border rounded-lg ${p(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":ge(s,3)?"bg-orange-50 border-orange-300 cursor-not-allowed text-orange-600":(Vl=M[s.id])!=null&&Vl.deleteThirdInstallment||s.third_installment_deleted?"bg-red-50 border-red-300 cursor-not-allowed text-red-600":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`,children:[e.jsx("option",{value:"cash",children:"💰 Μετρητά"}),e.jsx("option",{value:"pos",children:"💳 POS"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"📅 Ημερομηνία Πληρωμής"}),e.jsx("input",{type:"date",value:p(s.id)?((Wl=H(s.id))==null?void 0:Wl.installment3DueDate)||"":((Bl=M[s.id])==null?void 0:Bl.installment3DueDate)||s.installment_3_due_date||"",onChange:W=>{p(s.id)||ve(s.id,"installment3DueDate",W.target.value)},disabled:p(s.id)||ge(s,3)||((Hl=M[s.id])==null?void 0:Hl.deleteThirdInstallment)||s.third_installment_deleted,className:`w-full p-2 border rounded-lg text-sm ${p(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":ge(s,3)?"bg-orange-50 border-orange-300 cursor-not-allowed text-orange-600":(Yl=M[s.id])!=null&&Yl.deleteThirdInstallment||s.third_installment_deleted?"bg-red-50 border-red-300 cursor-not-allowed text-red-600":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:ge(s,3),onChange:()=>Yt(s.id,3),disabled:((Ql=M[s.id])==null?void 0:Ql.deleteThirdInstallment)||s.third_installment_deleted||p(s.id),className:"h-4 w-4 text-orange-600 border-gray-300 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Κλείδωμα Δόσης"})]}),e.jsx("button",{type:"button",onClick:()=>vn(s.id),disabled:p(s.id),className:`text-xs px-2 py-1 rounded-md ${p(s.id)?"bg-yellow-200 text-yellow-700 cursor-not-allowed":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:"Διαγραφή 3ης Δόσης"})]})]})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-orange-100 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-orange-800",children:"Σύνολο Δόσεων:"}),e.jsx("span",{className:"text-lg font-bold text-orange-900",children:Fe((Number(((Jl=M[s.id])==null?void 0:Jl.installment1Amount)||0)||Number(((Xl=H(s.id))==null?void 0:Xl.installment1Amount)||0))+(Number(((Zl=M[s.id])==null?void 0:Zl.installment2Amount)||0)||Number(((ql=H(s.id))==null?void 0:ql.installment2Amount)||0))+(Number(((ea=M[s.id])==null?void 0:ea.installment3Amount)||0)||Number(((sa=H(s.id))==null?void 0:sa.installment3Amount)||0)))})]}),e.jsxs("div",{className:"text-sm text-orange-700 mt-1",children:["Από ",Fe(s.requested_price)," (Πακέτο Ultimate)"]})]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>yt(s.id,"approved"),className:`px-4 py-2 rounded-full text-sm font-semibold transition-colors ${is[s.id]==="approved"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:"✅ Έγκριση Πληρωμής"}),e.jsx("button",{onClick:()=>yt(s.id,"rejected"),className:`px-4 py-2 rounded-full text-sm font-semibold transition-colors ${is[s.id]==="rejected"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:"❌ Απόρριψη Πληρωμής"}),e.jsx("button",{onClick:()=>yt(s.id,"pending"),className:`px-4 py-2 rounded-full text-sm font-semibold transition-colors ${is[s.id]==="pending"?"bg-yellow-600 text-white":"bg-yellow-100 text-yellow-800 hover:bg-yellow-200"}`,children:"⏳ Αναμονή/Πάγωμα Πληρωμής"}),e.jsxs("button",{onClick:()=>an(s.id),disabled:Q||is[s.id]==="none",className:"px-4 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[Q?e.jsx(qs,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(_s,{className:"h-4 w-4 mr-2"}),"Αποθήκευση Program Options"]})]})]})})]},s.id)})})]})})]})]}),b==="pilates-schedule"&&!Q&&e.jsx(po,{}),b==="cash-register"&&!Q&&e.jsx(jo,{}),b==="users-information"&&!Q&&e.jsx(_o,{}),b==="kettlebell-points"&&!Q&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 rounded-xl p-4 sm:p-6 text-white mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-2",children:"🏋️‍♂️ Kettlebell Points Ranking"}),e.jsx("p",{className:"text-orange-100 text-sm sm:text-base",children:"Συνολικοί βαθμοί και κατάταξη χρηστών"})]}),e.jsxs("button",{onClick:jt,className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg text-sm",children:[e.jsx(Zs,{className:"h-4 w-4"}),e.jsx("span",{children:"🔄 Ανανέωση"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-2",children:"📊 Συνολικοί Βαθμοί"}),e.jsx("p",{className:"text-blue-600",children:"Όλοι οι χρήστες συνολικά"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-900",children:lt}),e.jsx("div",{className:"text-sm text-blue-600",children:"βαθμοί"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"🏆 Κατάταξη Χρηστών"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Βαθμοί Kettlebell ανά χρήστη"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Αναζήτηση χρήστη...",value:Ge,onChange:s=>vr(s.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]}),Ge&&e.jsx("button",{onClick:()=>vr(""),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ze,{className:"h-4 w-4"})}),e.jsxs("div",{className:"hidden sm:flex items-center space-x-2 ml-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"date",value:rs,onChange:s=>ot(s.target.value),className:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]}),e.jsx("span",{className:"text-gray-500 text-sm",children:"—"}),e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"date",value:ls,onChange:s=>it(s.target.value),className:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]}),e.jsx("button",{onClick:()=>{ns(1),jt()},className:"px-3 py-2 bg-orange-600 text-white rounded-lg text-sm hover:bg-orange-700",children:"Φίλτρο"})]})]})]})}),e.jsx("div",{className:"p-6",children:Oe.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Zs,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Δεν υπάρχουν βαθμοί Kettlebell ακόμα"}),e.jsx("p",{className:"text-sm mt-2",children:"Οι βαθμοί θα εμφανιστούν εδώ όταν δημιουργηθούν προγράμματα με Kettlebell Points"})]}):e.jsxs("div",{className:"space-y-4",children:[(Ge?Ms:gn).map((s,t)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${t===0?"bg-yellow-500":t===1?"bg-gray-400":t===2?"bg-orange-500":"bg-blue-500"}`,children:Ge?Oe.findIndex(r=>r.user_id===s.user_id)+1:wt+t+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.user_name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.user_email}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.points_count," ",s.points_count===1?"πρόγραμμα":"προγράμματα"," • Τελευταία ενημέρωση: ",new Date(s.last_updated).toLocaleDateString("el-GR")]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.total_points}),e.jsx("div",{className:"text-sm text-gray-600",children:"βαθμοί"})]})]})},s.user_id)),Ge&&Ms.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Δεν βρέθηκαν χρήστες με αυτό το όνομα"}),e.jsx("p",{className:"text-sm mt-2",children:"Δοκιμάστε ένα διαφορετικό όρο αναζήτησης"})]}),!Ge&&vt>1&&e.jsxs("div",{className:"flex items-center justify-between py-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Εμφανίζονται ",wt+1,"-",Math.min(wr,Oe.length)," από ",Oe.length," χρήστες"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:hn,disabled:as===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"← Προηγούμενη"}),e.jsxs("span",{className:"px-3 py-2 text-sm text-gray-700",children:["Σελίδα ",as," από ",vt]}),e.jsx("button",{onClick:un,disabled:as===vt,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Επόμενη →"})]})]})]})})]})]}),b!=="personal-training"&&b!=="membership-packages"&&b!=="ultimate-subscriptions"&&b!=="pilates-schedule"&&b!=="kettlebell-points"&&b!=="cash-register"&&!Q&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Αυτή η κατηγορία θα υλοποιηθεί σύντομα."})})]})]}),oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-2 sm:p-4",children:e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-t-xl sm:rounded-t-2xl p-4 sm:p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg sm:text-2xl font-bold mb-1 sm:mb-2",children:"🏋️‍♂️ Δημιουργία Προγράμματος"}),e.jsx("p",{className:"text-purple-100 text-sm sm:text-base",children:"Δημιουργήστε νέο πρόγραμμα Personal Training"})]}),e.jsx("button",{onClick:()=>te(!1),className:"text-white/80 hover:text-white hover:bg-white/20 rounded-full p-2 transition-all duration-200 flex-shrink-0 ml-2",children:e.jsx(ze,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]})}),e.jsxs("div",{className:"p-4 sm:p-8",children:[e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 sm:p-6 border border-indigo-200",children:[e.jsx("label",{className:"block text-base sm:text-lg font-bold text-indigo-800 mb-3 sm:mb-4 flex items-center",children:"🏋️‍♂️ Τύπος Προπόνησης"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>Ne("individual"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${a==="individual"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"👤 Ατομικό"}),e.jsx("button",{type:"button",onClick:()=>Ne("group"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${a==="group"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"👥 Group"}),e.jsx("button",{type:"button",onClick:()=>Ne("combination"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${a==="combination"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"🔀 Συνδυασμός"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-4 sm:p-6 border border-blue-200",children:[e.jsx("label",{className:"block text-base sm:text-lg font-bold text-blue-800 mb-3 sm:mb-4 flex items-center",children:"👥 Τύπος Χρήστη"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>y("personal"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${ee==="personal"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🏋️‍♂️ Personal User"}),a!=="combination"&&e.jsx("button",{type:"button",onClick:()=>y("paspartu"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${ee==="paspartu"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🎯 Paspartu User"})]}),e.jsx("div",{className:"mt-3 text-sm text-blue-700",children:a==="combination"?e.jsx("span",{children:"📋 Combination Training: Μόνο Personal Users - κλειδωμένο πρόγραμμα με συγκεκριμένες ώρες"}):ee==="personal"?e.jsx("span",{children:"📋 Personal Users: Παίρνουν κλειδωμένο πρόγραμμα με συγκεκριμένες ώρες"}):e.jsx("span",{children:"💳 Paspartu Users: Παίρνουν 5 μαθήματα και επιλέγουν ελεύθερα τις ώρες"})})]}),a==="combination"&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 sm:p-6 border border-purple-200",children:[e.jsx("label",{className:"block text-base sm:text-lg font-bold text-purple-800 mb-3 sm:mb-4 flex items-center",children:"🔀 Διαμόρφωση Συνδυασμού"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[e.jsx("label",{className:"block text-sm font-bold text-purple-700 mb-2",children:"👤 Ατομικές Σεσίες"}),e.jsx("select",{value:P,onChange:s=>G(parseInt(s.target.value)),className:"w-full px-3 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs("option",{value:s,children:[s," σεσίες"]},s))})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[e.jsx("label",{className:"block text-sm font-bold text-purple-700 mb-2",children:"👥 Ομαδικές Σεσίες"}),e.jsx("select",{value:l,onChange:s=>z(parseInt(s.target.value)),className:"w-full px-3 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[1,2,3,4,5].map(s=>e.jsxs("option",{value:s,children:[s," ",s===1?"φορά":"φορές","/εβδομάδα"]},s))})]})]}),e.jsxs("div",{className:"mt-3 text-sm text-purple-700 bg-purple-100 p-3 rounded-lg",children:[e.jsx("strong",{children:"📊 Σύνολο:"})," ",P," ατομικές σεσίες + ",l," ",l===1?"φορά":"φορές","/εβδομάδα ομαδικές"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:[e.jsxs("label",{className:"block text-lg font-bold text-blue-800 mb-4 flex items-center",children:["👤 ",a==="individual"?"Επιλογή Χρήστη":a==="combination"?"Επιλογή Χρήστη (Συνδυασμός)":"Επιλογή Χρηστών (Group)",(a==="individual"||a==="combination")&&e.jsxs("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded",children:["Selected: ",g.selectedUserId?"✅":"❌"]})]}),e.jsxs("div",{className:"flex space-x-3 mb-4",children:[e.jsx("button",{type:"button",onClick:()=>gs("dropdown"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${xs==="dropdown"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"📋 Dropdown"}),e.jsx("button",{type:"button",onClick:()=>gs("search"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${xs==="search"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🔍 Αναζήτηση"})]}),xs==="dropdown"?a==="individual"||a==="combination"?e.jsxs("select",{className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700",value:g.selectedUserId,onChange:s=>{console.log("[AdminPanel] User selected:",s.target.value),we({...g,selectedUserId:s.target.value})},children:[e.jsx("option",{value:"",children:"-- Επιλέξτε χρήστη --"}),$.length>0?$.map(s=>e.jsxs("option",{value:s.id,children:[s.firstName," ",s.lastName," (",s.email,")"]},s.id)):e.jsx("option",{value:"",disabled:!0,children:"Δεν υπάρχουν χρήστες"})]}):e.jsx("div",{className:"max-h-48 overflow-y-auto border-2 border-blue-200 rounded-xl bg-white",children:ae.length>0?ae.map(s=>e.jsx("div",{className:`p-3 hover:bg-blue-50 cursor-pointer border-b border-blue-100 last:border-b-0 transition-all duration-200 ${i.includes(s.id)?"bg-blue-100 border-l-4 border-l-blue-500":""}`,onClick:()=>{i.includes(s.id)?A(t=>t.filter(r=>r!==s.id)):A(t=>[...t,s.id])},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:i.includes(s.id),onChange:()=>{},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:s.email})]})]})},s.id)):e.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Δεν υπάρχουν χρήστες"})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700 placeholder-gray-400",placeholder:"🔍 Αναζήτηση με όνομα ή email...",value:Le,onChange:s=>ks(s.target.value)}),Le&&e.jsx("div",{className:"max-h-48 overflow-y-auto border-2 border-blue-200 rounded-xl bg-white shadow-lg",children:br.length>0?br.map(s=>e.jsxs("div",{className:`p-4 hover:bg-blue-50 cursor-pointer border-b border-blue-100 last:border-b-0 transition-all duration-200 ${a==="individual"||a==="combination"?g.selectedUserId===s.id?"bg-blue-100 border-l-4 border-l-blue-500":"":i.includes(s.id)?"bg-blue-100 border-l-4 border-l-blue-500":""}`,onClick:()=>{a==="individual"||a==="combination"?we({...g,selectedUserId:s.id}):i.includes(s.id)?A(t=>t.filter(r=>r!==s.id)):A(t=>[...t,s.id])},children:[a==="group"&&e.jsx("input",{type:"checkbox",checked:i.includes(s.id),onChange:()=>{},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:s.email})]},s.id)):e.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Δεν βρέθηκαν χρήστες"})})]}),(a==="individual"||a==="combination"?g.selectedUserId:i.length>0)&&e.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm",children:"✓"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-green-800",children:["✅ ",a==="individual"||a==="combination"?"Επιλεγμένος:":"Επιλεγμένοι:"]}),a==="individual"||a==="combination"?e.jsxs("div",{className:"text-xs text-green-600",children:[(kr=$.find(s=>s.id===g.selectedUserId))==null?void 0:kr.firstName," ",(Sr=$.find(s=>s.id===g.selectedUserId))==null?void 0:Sr.lastName," (",(Ar=$.find(s=>s.id===g.selectedUserId))==null?void 0:Ar.email,")"]}):e.jsxs("div",{className:"text-xs text-green-600",children:[i.map(s=>{const t=$.find(r=>r.id===s);return t?`${t.firstName} ${t.lastName}`:"Άγνωστος"}).join(", ")," (",i.length," χρήστες)"]})]})]})})]}),(a==="group"&&i.length>0||a==="combination"&&g.selectedUserId)&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 sm:p-6 border border-orange-200 mt-4",children:[e.jsxs("h4",{className:"text-lg sm:text-xl font-bold text-orange-800 mb-4 sm:mb-6 flex items-center",children:["🏠 ",a==="combination"?"Επιλογές Ομαδικής Αίθουσας (για Group Sessions)":"Επιλογές Ομαδικής Αίθουσας"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"text-purple-600",children:"💡"}),e.jsxs("div",{className:"text-sm text-purple-700",children:[e.jsx("strong",{children:"Νέα Λειτουργία:"})," Θα επιλέξετε το Group Size (2, 3, ή 6 άτομα) για κάθε σεσία ξεχωριστά στη Διαχείριση Ομαδικών Αναθέσεων"]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-orange-700 mb-3",children:"Πόσες φορές την εβδομάδα θα παρακολουθούν οι χρήστες;"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[1,2,3,4,5].map(s=>e.jsx("button",{type:"button",onClick:()=>U(s),className:`p-3 rounded-lg border-2 transition-all duration-200 ${j===s?"bg-orange-600 text-white border-orange-600 shadow-lg":"bg-white text-orange-600 border-orange-300 hover:border-orange-500"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold",children:s}),e.jsxs("div",{className:"text-xs opacity-75",children:[s===1?"φορά":"φορές","/εβδομάδα"]})]})},s))})]})}),c&&j&&e.jsx("div",{className:"bg-orange-100 border border-orange-300 rounded-lg p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-orange-700 mb-1",children:"Μηνιαίο Σύνολο"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-800",children:[q," συνεδρίες/μήνα"]}),e.jsxs("div",{className:"text-xs text-orange-600 mt-1",children:["(",j," φορές/εβδομάδα × 4 εβδομάδες)"]})]})}),c&&j&&e.jsx(ro,{selectedGroupRoom:c,weeklyFrequency:j,monthlyTotal:q,selectedUserIds:a==="combination"?[g.selectedUserId]:i,onSlotsChange:je})]})]}),(a==="individual"||a==="combination"?g.selectedUserId:i.length>0)&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 sm:p-6 border border-purple-200 mt-4",children:[e.jsx("h4",{className:"text-lg sm:text-xl font-bold text-purple-800 mb-4 sm:mb-6 flex items-center",children:"⚙️ Επιλογές Προγράμματος"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[!(a==="individual"||a==="combination"?bs.has(g.selectedUserId):i.some(s=>bs.has(s)))&&e.jsx("div",{className:`rounded-lg p-4 border ${(a==="individual"||a==="combination"?N(g.selectedUserId):i.some(s=>N(s)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:e.jsx("button",{type:"button",onClick:()=>{const s=a==="individual"||a==="combination"?[g.selectedUserId]:i;if(s.some(r=>N(r))){x("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Re(r=>{const o={...r};return s.forEach(d=>{var v,L,I,S,f,Z;const h=!((v=o[d])!=null&&v.oldMembers);o[d]={...o[d],oldMembers:h,first150Members:h?(L=o[d])==null?void 0:L.first150Members:!1,cash:h?(I=o[d])==null?void 0:I.cash:!1,pos:h?(S=o[d])==null?void 0:S.pos:!1,cashAmount:h?(f=o[d])==null?void 0:f.cashAmount:void 0,posAmount:h?(Z=o[d])==null?void 0:Z.posAmount:void 0}}),o})},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 relative shadow-lg ${(a==="individual"||a==="combination")&&g.selectedUserId?N(g.selectedUserId)?($r=$e(g.selectedUserId))!=null&&$r.oldMembers?"bg-green-500 text-white":"bg-blue-500 text-white":(Cr=K[g.selectedUserId])!=null&&Cr.oldMembers?"bg-green-500 text-white hover:bg-green-600":"bg-blue-500 text-white hover:bg-blue-600":i.some(s=>{var t;return(t=K[s])==null?void 0:t.oldMembers})?"bg-green-500 text-white hover:bg-green-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"👴 Παλαιά μέλη"}),((a==="individual"||a==="combination")&&g.selectedUserId?N(g.selectedUserId)?(Mr=$e(g.selectedUserId))==null?void 0:Mr.oldMembers:(Dr=K[g.selectedUserId])==null?void 0:Dr.oldMembers:i.some(s=>{var t;return(t=K[s])==null?void 0:t.oldMembers}))&&e.jsx("span",{className:"text-green-200",children:"✓"}),(a==="individual"?N(g.selectedUserId):i.some(s=>N(s)))&&e.jsx("span",{className:"text-yellow-600",children:"🔒"})]})})}),(()=>{const s=a==="individual"||a==="combination"?[g.selectedUserId]:i,t=s.some(d=>{var h;return(h=K[d])==null?void 0:h.oldMembers}),r=s.some(d=>bs.has(d)||tt.has(d)),o=s.some(d=>{var h;return((h=K[d])==null?void 0:h.oldMembers)===!1});return t&&!r&&!o})()&&e.jsxs("div",{className:`rounded-lg p-4 border ${(a==="individual"||a==="combination"?N(g.selectedUserId):i.some(s=>N(s)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"mb-3 text-xs text-gray-600 bg-blue-50 p-2 rounded-lg border border-blue-200",children:[e.jsx("span",{className:"font-medium",children:"ℹ️ Πληροφορίες:"})," Ισχύει μόνο για τα πρώτα 150 παλιά μέλη του γυμναστηρίου με τιμή 45€ ετήσιος (προσφορά), τα οποία εμφανίζονται στην καρτέλα Ταμείο"]}),e.jsx("button",{type:"button",onClick:()=>{const s=a==="individual"||a==="combination"?[g.selectedUserId]:i;if(s.some(r=>N(r))){x("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Re(r=>{const o={...r};return s.forEach(d=>{var v,L,I,S,f;const h=!((v=o[d])!=null&&v.first150Members);o[d]={...o[d],first150Members:h,cash:h?!0:((L=o[d])==null?void 0:L.cash)||!1,cashAmount:h?45:(I=o[d])==null?void 0:I.cashAmount,pos:h?!1:((S=o[d])==null?void 0:S.pos)||!1,posAmount:h?0:(f=o[d])==null?void 0:f.posAmount}}),o})},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 relative shadow-lg ${(a==="individual"||a==="combination")&&g.selectedUserId?N(g.selectedUserId)?(Ur=$e(g.selectedUserId))!=null&&Ur.first150Members?"bg-orange-500 text-white":"bg-blue-500 text-white":(Er=K[g.selectedUserId])!=null&&Er.first150Members?"bg-orange-500 text-white hover:bg-orange-600":"bg-blue-500 text-white hover:bg-blue-600":i.some(s=>{var t;return(t=K[s])==null?void 0:t.first150Members})?"bg-orange-500 text-white hover:bg-orange-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"🏆 Πρώτα 150 Μέλη"}),((a==="individual"||a==="combination")&&g.selectedUserId?N(g.selectedUserId)?(Ir=$e(g.selectedUserId))==null?void 0:Ir.first150Members:(Tr=K[g.selectedUserId])==null?void 0:Tr.first150Members:i.some(s=>{var t;return(t=K[s])==null?void 0:t.first150Members}))&&e.jsx("span",{className:"text-orange-200",children:"✓"}),(a==="individual"?N(g.selectedUserId):i.some(s=>N(s)))&&e.jsx("span",{className:"text-yellow-600",children:"🔒"})]})})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${(a==="individual"||a==="combination"?N(g.selectedUserId):i.some(s=>N(s)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["🏋️‍♂️ Kettlebell Points",(a==="individual"||a==="combination"?N(g.selectedUserId):i.some(s=>N(s)))&&e.jsx("span",{className:"text-yellow-600 ml-2",children:"🔒"})]}),e.jsx("input",{type:"number",value:(a==="individual"||a==="combination")&&g.selectedUserId&&N(g.selectedUserId)?((Lr=$e(g.selectedUserId))==null?void 0:Lr.kettlebellPoints)||"":Cs,onChange:s=>{const t=a==="individual"?[g.selectedUserId]:i;if(t.some(o=>N(o))){x("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}ts(s.target.value),Re(o=>{const d={...o};return t.forEach(h=>{d[h]={...d[h],kettlebellPoints:s.target.value||""}}),d})},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${(a==="individual"?N(g.selectedUserId):i.some(s=>N(s)))?"border-yellow-300 bg-yellow-50 focus:ring-yellow-500":"border-gray-300 focus:ring-purple-500 focus:border-purple-500"}`,placeholder:"Εισάγετε αριθμό...",disabled:a==="individual"||a==="combination"?N(g.selectedUserId):i.some(s=>N(s))})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${(a==="individual"||a==="combination"?N(g.selectedUserId):i.some(s=>N(s)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["💰 Μετρητά (€)",(a==="individual"||a==="combination"?N(g.selectedUserId):i.some(s=>N(s)))&&e.jsx("span",{className:"text-yellow-600 ml-2",children:"🔒"})]}),ua?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",step:"0.01",min:"0",value:(a==="individual"||a==="combination")&&g.selectedUserId?N(g.selectedUserId)?((zr=(Gr=$e(g.selectedUserId))==null?void 0:Gr.cashAmount)==null?void 0:zr.toString())||"":(Kr=K[g.selectedUserId])!=null&&Kr.first150Members?"45":Ye:i.some(s=>{var t;return(t=K[s])==null?void 0:t.first150Members})?"45":Ye,onChange:s=>{const t=a==="individual"||a==="combination"?[g.selectedUserId]:i;if(t.some(d=>N(d))){x("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}if(t.some(d=>{var h;return(h=K[d])==null?void 0:h.first150Members})){x('Το πεδίο Μετρητά είναι κλειδωμένο όταν είναι επιλεγμένο "Πρώτα 150 Μέλη"',{icon:"🔒"});return}ct(s.target.value)},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${(a==="individual"?N(g.selectedUserId)||(Vr=K[g.selectedUserId])!=null&&Vr.first150Members:i.some(s=>N(s))||i.some(s=>{var t;return(t=K[s])==null?void 0:t.first150Members}))?"border-orange-300 bg-orange-50 focus:ring-orange-500":"border-gray-300 focus:ring-green-500 focus:border-green-500"}`,placeholder:"Εισάγετε ποσό σε €...",autoFocus:!0,disabled:a==="individual"||a==="combination"?N(g.selectedUserId)||((Wr=K[g.selectedUserId])==null?void 0:Wr.first150Members):i.some(s=>N(s))||i.some(s=>{var t;return(t=K[s])==null?void 0:t.first150Members})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{const s=a==="individual"||a==="combination"?[g.selectedUserId]:i;if(s.some(r=>N(r))){x("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Re(r=>{const o={...r};return s.forEach(d=>{const h=Ye&&parseFloat(Ye)>0?parseFloat(Ye):0;o[d]={...o[d],cash:h>0,cashAmount:h}}),o}),Ye&&parseFloat(Ye)>0?x.success(`Μετρητά €${Ye} προστέθηκαν! Θα αποθηκευτούν με το Save.`):x.success("Μετρητά μηδενίστηκαν! Θα αποθηκευτεί με το Save."),Ut(!1),ct("")},className:`flex-1 px-3 py-2 text-white rounded-lg transition-colors text-sm ${(a==="individual"||a==="combination")&&g.selectedUserId?N(g.selectedUserId)?(Br=$e(g.selectedUserId))!=null&&Br.cash?"bg-green-600 cursor-not-allowed":"bg-yellow-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700":i.some(s=>N(s))?"bg-yellow-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,disabled:a==="individual"||a==="combination"?N(g.selectedUserId):i.some(s=>N(s)),children:"✓ Επιλογή"}),e.jsx("button",{type:"button",onClick:()=>{Ut(!1),ct("")},className:"flex-1 px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:"Ακύρωση"})]})]}):e.jsx("button",{type:"button",onClick:()=>{const s=a==="individual"||a==="combination"?[g.selectedUserId]:i;if(s.some(o=>N(o))){x("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}if(s.some(o=>{var d;return(d=K[o])==null?void 0:d.first150Members})){x('Το πεδίο Μετρητά είναι κλειδωμένο όταν είναι επιλεγμένο "Πρώτα 150 Μέλη"',{icon:"🔒"});return}Ut(!0)},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 shadow-lg ${(a==="individual"||a==="combination")&&g.selectedUserId?N(g.selectedUserId)?(Or=$e(g.selectedUserId))!=null&&Or.cash?"bg-green-500 text-white cursor-not-allowed":"bg-yellow-500 text-white cursor-not-allowed":(Fr=K[g.selectedUserId])!=null&&Fr.first150Members?"bg-orange-500 text-white cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600":i.some(s=>N(s))?"bg-yellow-500 text-white cursor-not-allowed":i.some(s=>{var t;return(t=K[s])==null?void 0:t.first150Members})?"bg-orange-500 text-white cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,disabled:a==="individual"||a==="combination"?N(g.selectedUserId)||((Rr=K[g.selectedUserId])==null?void 0:Rr.first150Members):i.some(s=>N(s))||i.some(s=>{var t;return(t=K[s])==null?void 0:t.first150Members}),children:"💰 Μετρητά"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${(a==="individual"||a==="combination"?N(g.selectedUserId):i.some(s=>N(s)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["💳 POS (€)",(a==="individual"||a==="combination"?N(g.selectedUserId):i.some(s=>N(s)))&&e.jsx("span",{className:"text-yellow-600 ml-2",children:"🔒"})]}),ba?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",step:"0.01",min:"0",value:(a==="individual"||a==="combination")&&g.selectedUserId?N(g.selectedUserId)?((Xr=(Jr=$e(g.selectedUserId))==null?void 0:Jr.posAmount)==null?void 0:Xr.toString())||"":(Zr=K[g.selectedUserId])!=null&&Zr.first150Members?"0":Qe:i.some(s=>{var t;return(t=K[s])==null?void 0:t.first150Members})?"0":Qe,onChange:s=>{const t=a==="individual"||a==="combination"?[g.selectedUserId]:i;if(t.some(d=>N(d))){x("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}if(t.some(d=>{var h;return(h=K[d])==null?void 0:h.first150Members})){x('Το πεδίο POS είναι κλειδωμένο όταν είναι επιλεγμένο "Πρώτα 150 Μέλη"',{icon:"🔒"});return}mt(s.target.value)},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${(a==="individual"?N(g.selectedUserId)||(qr=K[g.selectedUserId])!=null&&qr.first150Members:i.some(s=>N(s))||i.some(s=>{var t;return(t=K[s])==null?void 0:t.first150Members}))?"border-orange-300 bg-orange-50 focus:ring-orange-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Εισάγετε ποσό σε €...",autoFocus:!0,disabled:a==="individual"||a==="combination"?N(g.selectedUserId)||((el=K[g.selectedUserId])==null?void 0:el.first150Members):i.some(s=>N(s))||i.some(s=>{var t;return(t=K[s])==null?void 0:t.first150Members})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{const s=a==="individual"||a==="combination"?[g.selectedUserId]:i;if(s.some(r=>N(r))){x("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Re(r=>{const o={...r};return s.forEach(d=>{const h=Qe&&parseFloat(Qe)>0?parseFloat(Qe):0;o[d]={...o[d],pos:h>0,posAmount:h}}),o}),Qe&&parseFloat(Qe)>0?x.success(`POS €${Qe} προστέθηκε! Θα αποθηκευτεί με το Save.`):x.success("POS μηδενίστηκε! Θα αποθηκευτεί με το Save."),Et(!1),mt("")},className:`flex-1 px-3 py-2 text-white rounded-lg transition-colors text-sm ${(a==="individual"||a==="combination")&&g.selectedUserId?N(g.selectedUserId)?(sl=$e(g.selectedUserId))!=null&&sl.pos?"bg-blue-600 cursor-not-allowed":"bg-yellow-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700":i.some(s=>N(s))?"bg-yellow-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,disabled:a==="individual"||a==="combination"?N(g.selectedUserId):i.some(s=>N(s)),children:"✓ Επιλογή"}),e.jsx("button",{type:"button",onClick:()=>{Et(!1),mt("")},className:"flex-1 px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:"Ακύρωση"})]})]}):e.jsx("button",{type:"button",onClick:()=>{const s=a==="individual"||a==="combination"?[g.selectedUserId]:i;if(s.some(o=>N(o))){x("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}if(s.some(o=>{var d;return(d=K[o])==null?void 0:d.first150Members})){x('Το πεδίο POS είναι κλειδωμένο όταν είναι επιλεγμένο "Πρώτα 150 Μέλη"',{icon:"🔒"});return}Et(!0)},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 shadow-lg ${(a==="individual"||a==="combination")&&g.selectedUserId?N(g.selectedUserId)?(Hr=$e(g.selectedUserId))!=null&&Hr.pos?"bg-blue-500 text-white cursor-not-allowed":"bg-yellow-500 text-white cursor-not-allowed":(Yr=K[g.selectedUserId])!=null&&Yr.first150Members?"bg-orange-500 text-white cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600":i.some(s=>N(s))?"bg-yellow-500 text-white cursor-not-allowed":i.some(s=>{var t;return(t=K[s])==null?void 0:t.first150Members})?"bg-orange-500 text-white cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,disabled:a==="individual"||a==="combination"?N(g.selectedUserId)||((Qr=K[g.selectedUserId])==null?void 0:Qr.first150Members):i.some(s=>N(s))||i.some(s=>{var t;return(t=K[s])==null?void 0:t.first150Members}),children:"💳 POS"})]}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsx("button",{type:"button",onClick:()=>{xt("approved")},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${Pe==="approved"?"bg-green-600 text-white shadow-lg":"bg-green-500 text-white hover:bg-green-600 shadow-lg"}`,children:"✅ Έγκριση Πληρωμής"})}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsx("button",{type:"button",onClick:()=>{xt("rejected")},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${Pe==="rejected"?"bg-red-600 text-white shadow-lg":"bg-red-500 text-white hover:bg-red-600 shadow-lg"}`,children:"❌ Απόρριψη Πληρωμής"})}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsx("button",{type:"button",onClick:()=>{xt("pending")},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${Pe==="pending"?"bg-yellow-600 text-white shadow-lg":"bg-yellow-500 text-white hover:bg-yellow-600 shadow-lg"}`,children:"⏳ Αναμονή/Πάγωμα Πληρωμής"})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("button",{type:"button",onClick:Va,disabled:Pe==="none"||Q,className:`w-full px-6 py-4 rounded-lg font-bold text-lg transition-all duration-200 ${Pe==="none"||Q?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:from-purple-700 hover:to-indigo-700 shadow-lg hover:shadow-xl"}`,children:Q?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(qs,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Αποθήκευση..."})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(_s,{className:"h-5 w-5"}),e.jsx("span",{children:"💾 Αποθήκευση Program Options"})]})}),Pe==="none"&&e.jsx("p",{className:"text-sm text-gray-600 mt-2 text-center",children:"Επιλέξτε Έγκριση, Απόρριψη ή Στην Αναμονή για να αποθηκεύσετε"})]})]})]}),a!=="group"&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-4 sm:p-6 border border-orange-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsxs("h4",{className:"text-lg sm:text-xl font-bold text-orange-800 flex items-center",children:["🏋️‍♂️ Προσωποποιημένο Πρόγραμμα",a==="combination"&&e.jsx("span",{className:"ml-2 text-sm bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"Personal Sessions"})]}),e.jsxs("div",{className:`text-sm px-3 py-2 rounded-lg ${a==="combination"&&ue().length>P?"bg-red-100 text-red-700 border border-red-300":"text-gray-600 bg-gray-100"}`,children:["📊 Σύνολο: ",ue().length," σεσίας",a==="combination"&&e.jsxs("span",{className:`ml-2 ${ue().length>P?"text-red-600":"text-purple-600"}`,children:["(",P," θα χρησιμοποιηθούν)",ue().length>P&&e.jsx("span",{className:"ml-1 font-bold",children:"⚠️ Περισσότερες από όσες θα χρησιμοποιηθούν!"})]})]})]}),e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Φίλτρο Σεσιών:"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{Ft("new"),ir.length===0&&Ot([{id:"tmp-1",date:`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}-${String(new Date().getDate()).padStart(2,"0")}`,startTime:"18:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:""}])},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${Je==="new"?"bg-blue-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"🆕 Νέες Σεσίες"}),e.jsxs("button",{onClick:()=>{Ft("existing"),(a==="individual"||a==="combination")&&g.selectedUserId&&fr(g.selectedUserId)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${Je==="existing"?"bg-green-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:!g.selectedUserId,children:["📚 Υπάρχουσες Σεσίες",dr&&e.jsx("span",{className:"ml-2",children:"⏳"})]})]}),Je==="existing"&&gt.length>0&&e.jsxs("div",{className:"text-sm text-green-600 bg-green-100 px-3 py-1 rounded-lg",children:["✅ ",gt.length," υπάρχουσες σεσίες φορτώθηκαν"]}),Je==="existing"&&gt.length===0&&!dr&&e.jsx("div",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-lg",children:"ℹ️ Δεν βρέθηκαν υπάρχουσες σεσίες"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-gray-300 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 border-b-2 border-gray-400",children:e.jsxs("div",{className:`grid gap-0 text-sm font-bold text-gray-800 ${a==="individual"?"grid-cols-6":"grid-cols-7"}`,children:[e.jsx("div",{className:"col-span-1 text-center py-3 border-r border-gray-300 bg-gray-200",children:"#"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"📅 Ημερομηνία"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"🕐 Έναρξη"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"💪 Τύπος"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"🏠 Αίθουσα"}),a!=="individual"&&e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"👥 Group"}),e.jsx("div",{className:"col-span-1 py-3 px-2",children:"👨‍🏫 Προπονητής"})]})}),e.jsx("div",{className:"divide-y divide-gray-300",children:ue().map((s,t)=>e.jsxs("div",{className:`grid gap-0 hover:bg-blue-50 transition-colors ${a==="individual"?"grid-cols-6":"grid-cols-7"}`,children:[e.jsxs("div",{className:"col-span-1 flex items-center justify-center space-x-2 py-3 border-r border-gray-300 bg-gray-50",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700",children:t+1}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("button",{onClick:()=>Te(ue().filter((r,o)=>o!==t)),className:"text-red-600 hover:text-red-800 p-1 text-xs bg-red-100 rounded hover:bg-red-200",title:"Διαγραφή Σέσιας",children:e.jsx(et,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>{const r=ue(),o={...s,id:`tmp-${Date.now()}`};Te([...r.slice(0,t+1),o,...r.slice(t+1)])},className:"text-blue-600 hover:text-blue-800 p-1 text-xs bg-blue-100 rounded hover:bg-blue-200",title:"Αντιγραφή Σέσιας",children:e.jsx(Ct,{className:"h-3 w-3"})})]})]}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsx("input",{type:"date",className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.date,onChange:r=>{const o=ue();Te(o.map((d,h)=>h===t?{...d,date:r.target.value}:d))},lang:"el"})}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsx("input",{type:"time",className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.startTime,onChange:r=>{const o=ue();Te(o.map((d,h)=>h===t?{...d,startTime:r.target.value}:d))}})}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsxs("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.type,onChange:r=>{const o=ue();Te(o.map((d,h)=>h===t?{...d,type:r.target.value}:d))},children:[e.jsx("option",{value:"personal",children:"Προσωπική"}),e.jsx("option",{value:"kickboxing",children:"Kick Boxing"}),e.jsx("option",{value:"combo",children:"Combo"})]})}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsxs("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.room,onChange:r=>{const o=ue();Te(o.map((d,h)=>h===t?{...d,room:r.target.value}:d))},children:[e.jsx("option",{value:"Αίθουσα Mike",children:"Αίθουσα Mike"}),e.jsx("option",{value:"Αίθουσα Jordan",children:"Αίθουσα Jordan"})]})}),a!=="individual"&&e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:a==="combination"?e.jsx("div",{className:"w-full px-2 py-2 text-sm border-2 border-gray-200 rounded bg-gray-100 text-gray-600 font-medium",children:"🔒 1 άτομο (Ατομική)"}):e.jsxs("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.group||"",onChange:r=>{const o=ue();Te(o.map((d,h)=>h===t?{...d,group:r.target.value}:d))},children:[e.jsx("option",{value:"",children:"Επιλέξτε Group"}),e.jsx("option",{value:"2ΑτομαGroup",children:"2ΑτομαGroup"}),e.jsx("option",{value:"3ΑτομαGroup",children:"3ΑτομαGroup"}),e.jsx("option",{value:"6ΑτομαGroup",children:"6ΑτομαGroup"})]})}),e.jsx("div",{className:"col-span-1 p-2",children:e.jsx("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.trainer,onChange:r=>{const o=ue();Te(o.map((d,h)=>h===t?{...d,trainer:r.target.value}:d))},children:da.map(r=>e.jsx("option",{value:r,children:r},r))})})]},s.id))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mt-4 space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-medium flex items-center justify-center",onClick:()=>{var t;const s=ue();if(a==="combination"&&s.length>=P){x.error(`Για συνδυασμένο πρόγραμμα μπορείτε να έχετε μέγιστο ${P} ατομικές σεσίες`);return}Te([...s,{id:`tmp-${Date.now()}`,date:`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}-${String(new Date().getDate()).padStart(2,"0")}`,startTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:a==="combination"?void 0:"2ΑτομαGroup",notes:((t=s[0])==null?void 0:t.notes)||""}])},children:"➕ Προσθήκη Σέσιας"}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium flex items-center justify-center",onClick:()=>{var r;const s=ue();if(a==="combination"&&s.length>=P){x.error(`Για συνδυασμένο πρόγραμμα μπορείτε να έχετε μέγιστο ${P} ατομικές σεσίες`);return}const t={id:`tmp-${Date.now()}`,date:`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}-${String(new Date().getDate()).padStart(2,"0")}`,startTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:((r=s[0])==null?void 0:r.notes)||""};Te([...s,t])},children:"📋 Αντιγραφή Τελευταίας"}),ue().length>1&&e.jsx("button",{type:"button",className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium flex items-center justify-center",onClick:()=>{const s=ue();Te(s.slice(0,-1))},children:"➖ Διαγραφή Τελευταίας"})]}),e.jsx("div",{className:"text-center sm:text-right",children:e.jsx("div",{className:"text-xs text-gray-500",children:"💡 Κάντε κλικ στα κελιά για επεξεργασία • Χρησιμοποιήστε τα κουμπιά για διαχείριση"})})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>te(!1),className:"flex-1 px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 transition-all duration-200 font-semibold shadow-lg",children:"❌ Ακύρωση"}),e.jsxs("button",{onClick:()=>{console.log("[AdminPanel] Button clicked - trainingType:",a,"selectedUserId:",g.selectedUserId),Ba()},disabled:a==="individual"||a==="combination"?!g.selectedUserId:i.length===0,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-200 font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-green-500 disabled:hover:to-emerald-500",title:a==="individual"||a==="combination"?g.selectedUserId?"Δημιουργία Προγράμματος":"Παρακαλώ επιλέξτε χρήστη":i.length===0?"Παρακαλώ επιλέξτε χρήστες":"Δημιουργία Προγράμματος",children:["✅ Δημιουργία Προγράμματος",(a==="individual"||a==="combination")&&!g.selectedUserId&&e.jsx("span",{className:"ml-2 text-xs opacity-75",children:"(Επιλέξτε χρήστη)"})]})]})]})]})}),$a&&ft&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl p-8 max-w-md mx-4 border border-gray-600 shadow-2xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-orange-500 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx(ss,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Κλείδωμα Δόσης"}),e.jsxs("p",{className:"text-gray-300 mb-8 text-lg",children:["Είστε σίγουροι ότι θέλετε να κλειδώσετε την ",ft.installmentNumber,"η δόση; Αυτή η ενέργεια δεν μπορεί να αναιρεθεί."]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:jn,className:"flex-1 px-6 py-3 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-colors font-medium",children:"Ακύρωση"}),e.jsx("button",{onClick:yn,className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all font-medium",children:"Κλείδωμα"})]})]})})}),Ca&&Fs&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl p-8 max-w-md mx-4 border border-gray-600 shadow-2xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-red-500 to-red-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx(et,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Διαγραφή 3ης Δόσης"}),e.jsx("p",{className:"text-gray-300 mb-8 text-lg",children:"Είστε σίγουροι ότι θέλετε να διαγράψετε την 3η δόση; Αυτή η ενέργεια δεν μπορεί να αναιρεθεί."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:Nn,className:"flex-1 px-6 py-3 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-colors font-medium",children:"Ακύρωση"}),e.jsx("button",{onClick:wn,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all font-medium",children:"Διαγραφή"})]})]})})}),X&&Se&&_e&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Διαχείριση Ομαδικών Αναθέσεων"}),e.jsx("button",{onClick:()=>{ye(!1),pe(null),We(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ze,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"p-6",children:e.jsx(vo,{selectedUser:Se,programId:_e,weeklyFrequency:j,onAssignmentComplete:()=>{const s=i.findIndex(t=>t===Se.id);if(s<i.length-1){const t=i[s+1],r=$.find(o=>o.id===t);r&&E.from("personal_training_schedules").select("id").eq("user_id",r.id).order("created_at",{ascending:!1}).limit(1).then(({data:o})=>{o&&o.length>0&&(pe(r),We(o[0].id),x.success(`Μετάβαση στον επόμενο χρήστη: ${r.firstName} ${r.lastName}`))})}else x.success("Όλες οι αναθέσεις ολοκληρώθηκαν!"),ye(!1),pe(null),We(null)}})})]})}),b==="ultimate-subscriptions"&&!Q&&e.jsx(Po,{fallback:e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"bg-red-100 rounded-full p-6 w-24 h-24 mx-auto mb-6",children:e.jsx(lr,{className:"h-12 w-12 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Σφάλμα στη φόρτωση Ultimate Συνδρομών"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Παρουσιάστηκε ένα σφάλμα. Παρακαλώ ανανεώστε τη σελίδα ή δοκιμάστε ξανά."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium",children:"Ανανέωση Σελίδας"})]}),children:e.jsx("div",{className:"space-y-6",children:e.jsx(No,{ultimateRequests:Es,ultimateLoading:It,ultimateSearchTerm:fa,setUltimateSearchTerm:ya,selectedRequestOptions:gr,handleRequestOptionChange:ln,updateInstallmentAmounts:_n,deleteUltimateRequest:bn,loadUltimateRequests:es,handleApproveRequest:pn,handleRejectRequest:fn,loading:Q,requestProgramApprovalStatus:is,handleRequestProgramApprovalChange:yt,handleSaveRequestProgramOptions:nn,handleUnfreezeRequestProgramOptions:on,requestPendingUsers:bt,requestFrozenOptions:pt,ultimateRequestFrozenWithPending:Aa})})})]})};export{Vo as default};
