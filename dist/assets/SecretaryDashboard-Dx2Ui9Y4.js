const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/membershipApi-CZzjnGWn.js","assets/index-D1F5Dm1t.js","assets/index-C5u_S0_l.css","assets/jsQR-qox8XAHS.js"])))=>i.map(i=>d[i]);
import{d as Na,s as $e,j as v,x as yr,X as Er,h as mr,U as sr,b as Wt,T as Oa,t as $r,u as ca,r as U,z as ae,I as Ta,Q as Mr,J as Br,v as lr,e as An,C as Ra,w as Da,_ as dr}from"./index-D1F5Dm1t.js";import{getDurationLabel as fa,formatPrice as wr,getMembershipRequests as Fr,approveMembershipRequest as Pa,rejectMembershipRequest as Ma}from"./membershipApi-CZzjnGWn.js";import{G as Ba,s as Fa}from"./programApprovalApi-BCmRNKrH.js";import{S as Cn}from"./search-Bn7g1gX9.js";import{R as En}from"./refresh-cw-Dn7fOdWs.js";import"./groupTrainingCalendarApi-CPHiZ7y6.js";import"./chevron-right-DwW40yBp.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=Na("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),bn=async(r,e,t,n,a="",i)=>{try{console.log("[saveSecretaryCashTransaction] Saving transaction via admin function:",{userId:r,amount:e,transactionType:t,programId:n,createdBy:a,notes:i});const{data:o,error:s}=await $e.rpc("admin_save_cash_transaction",{p_user_id:r,p_amount:e,p_transaction_type:t,p_program_id:n,p_created_by:a,p_notes:i});if(s){console.error("[saveSecretaryCashTransaction] Error saving transaction via admin function:",s),console.log("[saveSecretaryCashTransaction] Trying direct insert...");const{data:c,error:f}=await $e.from("user_cash_transactions").insert({user_id:r,amount:e,transaction_type:t,program_id:n,created_by:a,notes:i});return f?(console.error("[saveSecretaryCashTransaction] Direct insert also failed:",f),!1):(console.log("[saveSecretaryCashTransaction] Direct insert successful:",c),!0)}return console.log("[saveSecretaryCashTransaction] Transaction saved via admin function:",o),!0}catch(o){return console.error("[saveSecretaryCashTransaction] Exception saving transaction:",o),!1}},ka=async(r,e,t,n="")=>{try{console.log("[saveSecretaryKettlebellPoints] Saving kettlebell points via admin function:",{userId:r,points:e,programId:t,createdBy:n});const{data:a,error:i}=await $e.rpc("admin_save_kettlebell_points",{p_user_id:r,p_points:e,p_program_id:t,p_created_by:n});if(i){console.error("[saveSecretaryKettlebellPoints] Error saving via admin function:",i),console.log("[saveSecretaryKettlebellPoints] Trying direct insert...");const{data:o,error:s}=await $e.from("user_kettlebell_points").insert({user_id:r,points:e,program_id:t,created_by:n});return s?(console.error("[saveSecretaryKettlebellPoints] Direct insert also failed:",s),!1):(console.log("[saveSecretaryKettlebellPoints] Direct insert successful:",o),!0)}return console.log("[saveSecretaryKettlebellPoints] Points saved via admin function:",a),!0}catch(a){return console.error("[saveSecretaryKettlebellPoints] Exception saving points:",a),!1}},ja=async(r,e="")=>{try{console.log("[saveSecretaryOldMembersUsage] Marking old members as used via admin function:",{userId:r,createdBy:e});const{data:t,error:n}=await $e.rpc("admin_mark_old_members_used",{p_user_id:r,p_created_by:e});if(n){console.error("[saveSecretaryOldMembersUsage] Error marking via admin function:",n),console.log("[saveSecretaryOldMembersUsage] Trying direct insert...");const{data:a,error:i}=await $e.from("old_members_usage").insert({user_id:r,used_by:e,used_at:new Date().toISOString()});return i?(console.error("[saveSecretaryOldMembersUsage] Direct insert also failed:",i),!1):(console.log("[saveSecretaryOldMembersUsage] Direct insert successful:",a),!0)}return console.log("[saveSecretaryOldMembersUsage] Old members marked via admin function:",t),!0}catch(t){return console.error("[saveSecretaryOldMembersUsage] Exception marking old members:",t),!1}},Ua=({ultimateRequests:r,ultimateLoading:e,ultimateSearchTerm:t,setUltimateSearchTerm:n,selectedRequestOptions:a,handleRequestOptionChange:i,updateInstallmentAmounts:o,deleteUltimateRequest:s,loadUltimateRequests:c,handleApproveRequest:f,handleRejectRequest:u,loading:l,requestProgramApprovalStatus:d,handleRequestProgramApprovalChange:h,handleSaveRequestProgramOptions:x,requestPendingUsers:y,requestFrozenOptions:_})=>{const A=()=>r.filter(p=>{var I,N,R;return t===""||`${((I=p.user)==null?void 0:I.first_name)||""} ${((N=p.user)==null?void 0:N.last_name)||""}`.toLowerCase().includes(t.toLowerCase())||(((R=p.user)==null?void 0:R.email)||"").toLowerCase().includes(t.toLowerCase())}),w=p=>y.has(p),C=p=>_[p]||{};return v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center",children:[v.jsx("span",{className:"text-4xl mr-3",children:"👑"}),"Ultimate Συνδρομές"]}),v.jsx("p",{className:"text-gray-300 mt-2 text-lg",children:"Διαχείριση αιτημάτων για πακέτα Ultimate με και χωρίς δόσεις"})]}),v.jsxs("button",{onClick:c,disabled:e,className:"px-6 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-xl hover:from-orange-700 hover:to-orange-800 transition-all duration-200 disabled:opacity-50 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:scale-105 font-medium",children:[e?v.jsx(yr,{className:"h-5 w-5 animate-spin"}):v.jsx(Cn,{className:"h-5 w-5"}),v.jsx("span",{children:"Ανανέωση"})]})]}),v.jsx("div",{className:"bg-gradient-to-r from-gray-700 to-gray-800 rounded-2xl shadow-lg border border-gray-600 p-6",children:v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsx("div",{className:"flex-1",children:v.jsxs("div",{className:"relative",children:[v.jsx(Cn,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-orange-400 h-5 w-5"}),v.jsx("input",{type:"text",placeholder:"🔍 Αναζήτηση με όνομα χρήστη ή email...",value:t,onChange:p=>n(p.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-white placeholder-gray-400 text-lg font-medium"})]})}),t&&v.jsx("button",{onClick:()=>n(""),className:"px-4 py-4 text-gray-400 hover:text-white transition-colors bg-gray-600 rounded-xl hover:bg-gray-500",children:v.jsx(Er,{className:"h-5 w-5"})})]})}),e?v.jsx("div",{className:"flex items-center justify-center py-16",children:v.jsxs("div",{className:"text-center",children:[v.jsx(yr,{className:"h-12 w-12 animate-spin text-orange-400 mx-auto mb-4"}),v.jsx("span",{className:"text-gray-300 font-medium text-lg",children:"Φόρτωση Ultimate αιτημάτων..."})]})}):A().length===0?v.jsxs("div",{className:"text-center py-16",children:[v.jsx("div",{className:"bg-gradient-to-br from-orange-600 to-orange-700 rounded-full p-6 w-24 h-24 mx-auto mb-6 shadow-2xl",children:v.jsx(mr,{className:"h-12 w-12 text-white"})}),v.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:t?"🔍 Δεν βρέθηκαν αποτελέσματα":"👑 Δεν υπάρχουν Ultimate αιτήματα"}),v.jsx("p",{className:"text-gray-300 text-lg",children:t?"Δοκιμάστε διαφορετικό όνομα για την αναζήτηση.":"Όταν οι χρήστες υποβάλουν αιτήματα για το πακέτο Ultimate, θα εμφανίζονται εδώ."})]}):v.jsx("div",{className:"grid gap-8",children:A().map(p=>{var S,I,N,R,k,B,ue,W,ie,Re,Le,Ct,Et,qe,ct,ft,Ht,St,Pt,G,He,bt,ot,Gt,Mt,ut,Bt,Z,et,Ze,tt,mt,It,K,De,rt,vt,wt,qt,st,Ge,er,Ft,ur;return v.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl shadow-2xl border border-gray-600 p-8 hover:shadow-3xl transition-all duration-300 transform hover:scale-102",children:[v.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-6 lg:space-y-0",children:[v.jsxs("div",{className:"flex items-start space-x-6",children:[v.jsxs("div",{className:"relative",children:[(S=p.user)!=null&&S.profile_photo?v.jsxs("div",{className:"w-16 h-16 rounded-2xl overflow-hidden shadow-2xl border-3 border-orange-400",children:[v.jsx("img",{src:p.user.profile_photo,alt:`${(I=p.user)==null?void 0:I.first_name} ${(N=p.user)==null?void 0:N.last_name}`,className:"w-full h-full object-cover",onError:m=>{m.currentTarget.style.display="none";const O=m.currentTarget.nextElementSibling;O&&(O.style.display="flex")}}),v.jsx("div",{className:"w-full h-full bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center hidden",children:v.jsx(sr,{className:"h-8 w-8 text-white"})})]}):v.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center shadow-2xl",children:v.jsx(sr,{className:"h-8 w-8 text-white"})}),p.status==="pending"&&v.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-yellow-400 to-yellow-500 rounded-full border-2 border-white shadow-lg animate-pulse"})]}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("h4",{className:"text-2xl font-bold text-white mb-2",children:[(R=p.user)==null?void 0:R.first_name," ",(k=p.user)==null?void 0:k.last_name]}),v.jsxs("p",{className:"text-gray-300 mb-3 flex items-center text-lg",children:[v.jsx("span",{className:"w-2 h-2 bg-orange-400 rounded-full mr-3"}),(B=p.user)==null?void 0:B.email]}),v.jsxs("div",{className:"flex items-center space-x-3 flex-wrap",children:[v.jsx("span",{className:"inline-flex items-center px-4 py-2 rounded-xl text-sm font-bold bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg",children:"👑 Ultimate Package"}),v.jsx("span",{className:"text-gray-400",children:"•"}),v.jsx("span",{className:"text-gray-200 font-medium",children:fa(p.duration_type)}),p.has_installments&&v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"text-gray-400",children:"•"}),v.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-xl text-sm font-medium bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg",children:"💳 Με Δόσεις"})]})]})]})]}),v.jsxs("div",{className:"flex items-center space-x-8",children:[v.jsxs("div",{className:"text-right",children:[v.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-green-400 to-green-500 bg-clip-text text-transparent mb-2",children:wr(p.requested_price)}),v.jsxs("div",{className:"text-gray-300 flex items-center justify-end",children:[v.jsx(Wt,{className:"h-4 w-4 mr-2 text-orange-400"}),v.jsx("span",{className:"font-medium",children:new Date(p.created_at).toLocaleDateString("el-GR")})]})]}),v.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[p.status==="pending"&&v.jsxs("div",{className:"flex flex-col space-y-3",children:[v.jsxs("button",{onClick:()=>f(p.id),disabled:l,className:"px-8 py-4 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-2xl hover:from-green-700 hover:to-green-800 transition-all duration-200 text-lg font-bold shadow-2xl hover:shadow-3xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-3 transform hover:scale-110",children:[v.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),v.jsx("span",{children:"✅ Εγκρίνω"})]}),v.jsxs("button",{onClick:()=>u(p.id),disabled:l,className:"px-8 py-4 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-2xl hover:from-red-700 hover:to-red-800 transition-all duration-200 text-lg font-bold shadow-2xl hover:shadow-3xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-3 transform hover:scale-110",children:[v.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),v.jsx("span",{children:"❌ Απορρίπτω"})]})]}),p.status==="approved"&&v.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-green-500/20 to-green-600/20 rounded-xl p-3 border border-green-500/30",children:[v.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),v.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl text-sm font-bold shadow-lg",children:"✅ Εγκεκριμένο"})]}),p.status==="rejected"&&v.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-red-500/20 to-red-600/20 rounded-xl p-3 border border-red-500/30",children:[v.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full animate-pulse"}),v.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl text-sm font-bold shadow-lg",children:"❌ Απορριφθέν"})]}),v.jsxs("button",{onClick:()=>{window.confirm("Είστε σίγουροι ότι θέλετε να διαγράψετε αυτό το Ultimate αίτημα; Αυτή η ενέργεια δεν μπορεί να αναιρεθεί.")&&s(p.id)},className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all duration-200 text-sm font-medium flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:scale-105",children:[v.jsx(Oa,{className:"h-4 w-4"}),v.jsx("span",{children:"🗑️ Διαγραφή"})]})]})]})]}),p.has_installments&&v.jsxs("div",{className:"mt-8 bg-gradient-to-r from-orange-500/20 to-orange-600/20 rounded-2xl p-6 border border-orange-500/30 shadow-xl",children:[v.jsxs("h4",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[v.jsx("span",{className:"text-3xl mr-3",children:"💳"}),"Διαχείριση Δόσεων"]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-5 border border-gray-600 shadow-lg",children:[v.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[v.jsx("span",{className:"text-2xl mr-2",children:"1️⃣"}),"1η Δόση"]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("input",{type:"number",value:((ue=a[p.id])==null?void 0:ue.installment1Amount)||p.installment_1_amount||"",onChange:m=>i(p.id,"installment1Amount",m.target.value),placeholder:"Ποσό",className:"w-full p-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-white placeholder-gray-400 text-lg font-medium"}),v.jsxs("select",{value:((W=a[p.id])==null?void 0:W.installment1PaymentMethod)||p.installment_1_payment_method||"cash",onChange:m=>i(p.id,"installment1PaymentMethod",m.target.value),className:"w-full p-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-white text-lg font-medium",children:[v.jsx("option",{value:"cash",children:"💰 Μετρητά"}),v.jsx("option",{value:"pos",children:"💳 POS"})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center",children:[v.jsx(Wt,{className:"h-4 w-4 mr-2"}),"📅 Ημερομηνία Πληρωμής"]}),v.jsx("input",{type:"date",value:((ie=a[p.id])==null?void 0:ie.installment1DueDate)||p.installment_1_due_date||"",onChange:m=>i(p.id,"installment1DueDate",m.target.value),className:"w-full p-3 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-white"})]})]})]}),v.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-5 border border-gray-600 shadow-lg",children:[v.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[v.jsx("span",{className:"text-2xl mr-2",children:"2️⃣"}),"2η Δόση"]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("input",{type:"number",value:((Re=a[p.id])==null?void 0:Re.installment2Amount)||p.installment_2_amount||"",onChange:m=>i(p.id,"installment2Amount",m.target.value),placeholder:"Ποσό",className:"w-full p-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-white placeholder-gray-400 text-lg font-medium"}),v.jsxs("select",{value:((Le=a[p.id])==null?void 0:Le.installment2PaymentMethod)||p.installment_2_payment_method||"cash",onChange:m=>i(p.id,"installment2PaymentMethod",m.target.value),className:"w-full p-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-white text-lg font-medium",children:[v.jsx("option",{value:"cash",children:"💰 Μετρητά"}),v.jsx("option",{value:"pos",children:"💳 POS"})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center",children:[v.jsx(Wt,{className:"h-4 w-4 mr-2"}),"📅 Ημερομηνία Πληρωμής"]}),v.jsx("input",{type:"date",value:((Ct=a[p.id])==null?void 0:Ct.installment2DueDate)||p.installment_2_due_date||"",onChange:m=>i(p.id,"installment2DueDate",m.target.value),className:"w-full p-3 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-white"})]})]})]}),v.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-5 border border-gray-600 shadow-lg",children:[v.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[v.jsx("span",{className:"text-2xl mr-2",children:"3️⃣"}),"3η Δόση"]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("input",{type:"number",value:((Et=a[p.id])==null?void 0:Et.installment3Amount)||p.installment_3_amount||"",onChange:m=>i(p.id,"installment3Amount",m.target.value),placeholder:"Ποσό",className:"w-full p-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-white placeholder-gray-400 text-lg font-medium"}),v.jsxs("select",{value:((qe=a[p.id])==null?void 0:qe.installment3PaymentMethod)||p.installment_3_payment_method||"cash",onChange:m=>i(p.id,"installment3PaymentMethod",m.target.value),className:"w-full p-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-white text-lg font-medium",children:[v.jsx("option",{value:"cash",children:"💰 Μετρητά"}),v.jsx("option",{value:"pos",children:"💳 POS"})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center",children:[v.jsx(Wt,{className:"h-4 w-4 mr-2"}),"📅 Ημερομηνία Πληρωμής"]}),v.jsx("input",{type:"date",value:((ct=a[p.id])==null?void 0:ct.installment3DueDate)||p.installment_3_due_date||"",onChange:m=>i(p.id,"installment3DueDate",m.target.value),className:"w-full p-3 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-white"})]})]})]})]}),v.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-orange-500/30 to-orange-600/30 rounded-2xl border border-orange-500/50 shadow-xl",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-orange-300 text-lg",children:"💰 Σύνολο Δόσεων:"}),v.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-green-500 bg-clip-text text-transparent",children:wr(Number(((ft=a[p.id])==null?void 0:ft.installment1Amount)||p.installment_1_amount||0)+Number(((Ht=a[p.id])==null?void 0:Ht.installment2Amount)||p.installment_2_amount||0)+Number(((St=a[p.id])==null?void 0:St.installment3Amount)||p.installment_3_amount||0))})]}),v.jsxs("div",{className:"text-orange-200 mt-2 font-medium",children:["📊 Από ",wr(p.requested_price)," (Πακέτο Ultimate)"]})]}),v.jsx("div",{className:"mt-6 flex justify-end",children:v.jsxs("button",{onClick:()=>{var ke,L,Q,le,ee,H,we,Ee,ve;const m=parseFloat(((ke=a[p.id])==null?void 0:ke.installment1Amount)||p.installment_1_amount||"0"),O=parseFloat(((L=a[p.id])==null?void 0:L.installment2Amount)||p.installment_2_amount||"0"),D=parseFloat(((Q=a[p.id])==null?void 0:Q.installment3Amount)||p.installment_3_amount||"0"),P=((le=a[p.id])==null?void 0:le.installment1PaymentMethod)||p.installment_1_payment_method||"cash",V=((ee=a[p.id])==null?void 0:ee.installment2PaymentMethod)||p.installment_2_payment_method||"cash",X=((H=a[p.id])==null?void 0:H.installment3PaymentMethod)||p.installment_3_payment_method||"cash",z=((we=a[p.id])==null?void 0:we.installment1DueDate)||p.installment_1_due_date,he=((Ee=a[p.id])==null?void 0:Ee.installment2DueDate)||p.installment_2_due_date,Ce=((ve=a[p.id])==null?void 0:ve.installment3DueDate)||p.installment_3_due_date;o(p.id,m,O,D,P,V,X,z,he,Ce)},className:"px-8 py-4 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-2xl hover:from-orange-700 hover:to-orange-800 transition-all duration-200 flex items-center space-x-3 shadow-2xl hover:shadow-3xl transform hover:scale-110 font-bold text-lg",children:[v.jsx($r,{className:"h-5 w-5"}),v.jsx("span",{children:"💾 Αποθήκευση Δόσεων & Ημερομηνιών"})]})})]}),v.jsxs("div",{className:"mt-8 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-2xl p-6 border border-purple-500/30 shadow-xl",children:[v.jsxs("h4",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[v.jsx("span",{className:"text-3xl mr-3",children:"⚙️"}),"Program Options"]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[v.jsx("button",{type:"button",onClick:()=>{var m;w(p.id)||i(p.id,"oldMembers",!((m=a[p.id])!=null&&m.oldMembers))},className:`w-full px-6 py-4 rounded-2xl font-bold transition-all duration-200 shadow-2xl transform hover:scale-105 text-lg ${w(p.id)?(Pt=C(p.id))!=null&&Pt.oldMembers?"bg-gradient-to-r from-green-600 to-green-700 text-white cursor-not-allowed border-2 border-yellow-400":"bg-gradient-to-r from-gray-600 to-gray-700 text-gray-300 cursor-not-allowed border-2 border-yellow-400":(G=a[p.id])!=null&&G.oldMembers?"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800 border-2 border-green-400":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 border-2 border-blue-400"}`,disabled:w(p.id),children:v.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[v.jsx("span",{children:"👴 Παλαιά μέλη"}),(w(p.id)?(He=C(p.id))==null?void 0:He.oldMembers:(bt=a[p.id])==null?void 0:bt.oldMembers)&&v.jsx("span",{className:"text-green-200 text-xl",children:"✓"}),w(p.id)&&v.jsx("span",{className:"text-yellow-400",children:"🔒"})]})}),v.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-5 border border-gray-600 shadow-lg",children:[v.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[v.jsx("span",{className:"text-2xl mr-2",children:"🏋️‍♂️"}),"Kettlebell Points",w(p.id)&&v.jsx("span",{className:"text-yellow-400 ml-2",children:"🔒"})]}),v.jsx("input",{type:"number",value:w(p.id)?((ot=C(p.id))==null?void 0:ot.kettlebellPoints)||"":((Gt=a[p.id])==null?void 0:Gt.kettlebellPoints)||"",onChange:m=>{w(p.id)||i(p.id,"kettlebellPoints",m.target.value)},className:`w-full px-4 py-4 border rounded-xl focus:outline-none focus:ring-2 text-lg font-medium ${w(p.id)?"border-yellow-500 bg-yellow-500/20 focus:ring-yellow-500 cursor-not-allowed text-yellow-200 placeholder-yellow-300":"border-gray-600 bg-gray-800 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-gray-400"}`,placeholder:"Εισάγετε αριθμό...",disabled:w(p.id)})]}),v.jsx("button",{type:"button",onClick:()=>{var m;w(p.id)||i(p.id,"cash",!((m=a[p.id])!=null&&m.cash))},className:`w-full px-6 py-4 rounded-2xl font-bold transition-all duration-200 shadow-2xl transform hover:scale-105 text-lg ${w(p.id)?(Mt=C(p.id))!=null&&Mt.cash?"bg-gradient-to-r from-green-600 to-green-700 text-white cursor-not-allowed border-2 border-yellow-400":"bg-gradient-to-r from-gray-600 to-gray-700 text-gray-300 cursor-not-allowed border-2 border-yellow-400":(ut=a[p.id])!=null&&ut.cash?"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800 border-2 border-green-400":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 border-2 border-blue-400"}`,disabled:w(p.id),children:v.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[v.jsx("span",{children:"💰 Μετρητά"}),(w(p.id)?(Bt=C(p.id))==null?void 0:Bt.cash:(Z=a[p.id])==null?void 0:Z.cash)&&v.jsx("span",{className:"text-green-200 text-xl",children:"✓"}),w(p.id)&&v.jsx("span",{className:"text-yellow-400",children:"🔒"})]})}),v.jsx("button",{type:"button",onClick:()=>{var m;w(p.id)||i(p.id,"pos",!((m=a[p.id])!=null&&m.pos))},className:`w-full px-6 py-4 rounded-2xl font-bold transition-all duration-200 shadow-2xl transform hover:scale-105 text-lg ${w(p.id)?(et=C(p.id))!=null&&et.pos?"bg-gradient-to-r from-green-600 to-green-700 text-white cursor-not-allowed border-2 border-yellow-400":"bg-gradient-to-r from-gray-600 to-gray-700 text-gray-300 cursor-not-allowed border-2 border-yellow-400":(Ze=a[p.id])!=null&&Ze.pos?"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800 border-2 border-green-400":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 border-2 border-blue-400"}`,disabled:w(p.id),children:v.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[v.jsx("span",{children:"💳 POS"}),(w(p.id)?(tt=C(p.id))==null?void 0:tt.pos:(mt=a[p.id])==null?void 0:mt.pos)&&v.jsx("span",{className:"text-green-200 text-xl",children:"✓"}),w(p.id)&&v.jsx("span",{className:"text-yellow-400",children:"🔒"})]})})]}),(((It=a[p.id])==null?void 0:It.cash)||((K=C(p.id))==null?void 0:K.cash))&&v.jsxs("div",{className:"mb-6 bg-gradient-to-r from-green-500/20 to-green-600/20 rounded-2xl p-5 border border-green-500/30",children:[v.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[v.jsx("span",{className:"text-2xl mr-2",children:"💰"}),"Ποσό Μετρητών (€)",w(p.id)&&v.jsx("span",{className:"text-yellow-400 ml-2",children:"🔒"})]}),v.jsx("input",{type:"number",step:"0.01",min:"0",value:w(p.id)?((rt=(De=C(p.id))==null?void 0:De.cashAmount)==null?void 0:rt.toString())||"":((wt=(vt=a[p.id])==null?void 0:vt.cashAmount)==null?void 0:wt.toString())||"",onChange:m=>{w(p.id)||i(p.id,"cashAmount",parseFloat(m.target.value)||0)},className:`w-full px-4 py-4 border rounded-xl focus:outline-none focus:ring-2 text-lg font-medium ${w(p.id)?"border-yellow-500 bg-yellow-500/20 focus:ring-yellow-500 cursor-not-allowed text-yellow-200 placeholder-yellow-300":"border-gray-600 bg-gray-800 focus:ring-green-500 focus:border-green-500 text-white placeholder-gray-400"}`,placeholder:"Εισάγετε ποσό σε €...",disabled:w(p.id)})]}),(((qt=a[p.id])==null?void 0:qt.pos)||((st=C(p.id))==null?void 0:st.pos))&&v.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-500/20 to-blue-600/20 rounded-2xl p-5 border border-blue-500/30",children:[v.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[v.jsx("span",{className:"text-2xl mr-2",children:"💳"}),"Ποσό POS (€)",w(p.id)&&v.jsx("span",{className:"text-yellow-400 ml-2",children:"🔒"})]}),v.jsx("input",{type:"number",step:"0.01",min:"0",value:w(p.id)?((er=(Ge=C(p.id))==null?void 0:Ge.posAmount)==null?void 0:er.toString())||"":((ur=(Ft=a[p.id])==null?void 0:Ft.posAmount)==null?void 0:ur.toString())||"",onChange:m=>{w(p.id)||i(p.id,"posAmount",parseFloat(m.target.value)||0)},className:`w-full px-4 py-4 border rounded-xl focus:outline-none focus:ring-2 text-lg font-medium ${w(p.id)?"border-yellow-500 bg-yellow-500/20 focus:ring-yellow-500 cursor-not-allowed text-yellow-200 placeholder-yellow-300":"border-gray-600 bg-gray-800 focus:ring-blue-500 focus:border-blue-500 text-white placeholder-gray-400"}`,placeholder:"Εισάγετε ποσό σε €...",disabled:w(p.id)})]}),v.jsxs("div",{className:"mt-6 flex flex-wrap gap-4",children:[v.jsx("button",{onClick:()=>h(p.id,"approved"),className:`px-6 py-3 rounded-2xl text-lg font-bold transition-all duration-200 shadow-xl transform hover:scale-105 ${d[p.id]==="approved"?"bg-gradient-to-r from-green-600 to-green-700 text-white border-2 border-green-400":"bg-gradient-to-r from-green-500/20 to-green-600/20 text-green-300 border-2 border-green-500/30 hover:from-green-500/30 hover:to-green-600/30"}`,children:"✅ Έγκριση"}),v.jsx("button",{onClick:()=>h(p.id,"rejected"),className:`px-6 py-3 rounded-2xl text-lg font-bold transition-all duration-200 shadow-xl transform hover:scale-105 ${d[p.id]==="rejected"?"bg-gradient-to-r from-red-600 to-red-700 text-white border-2 border-red-400":"bg-gradient-to-r from-red-500/20 to-red-600/20 text-red-300 border-2 border-red-500/30 hover:from-red-500/30 hover:to-red-600/30"}`,children:"❌ Απόρριψη"}),v.jsx("button",{onClick:()=>h(p.id,"pending"),className:`px-6 py-3 rounded-2xl text-lg font-bold transition-all duration-200 shadow-xl transform hover:scale-105 ${d[p.id]==="pending"?"bg-gradient-to-r from-yellow-600 to-yellow-700 text-white border-2 border-yellow-400":"bg-gradient-to-r from-yellow-500/20 to-yellow-600/20 text-yellow-300 border-2 border-yellow-500/30 hover:from-yellow-500/30 hover:to-yellow-600/30"}`,children:"⏳ Αναμονή"}),v.jsxs("button",{onClick:()=>x(p.id),disabled:l||d[p.id]==="none",className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-2xl hover:from-purple-700 hover:to-purple-800 transition-all duration-200 text-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center shadow-2xl hover:shadow-3xl transform hover:scale-105",children:[l?v.jsx(yr,{className:"h-5 w-5 animate-spin mr-2"}):v.jsx($r,{className:"h-5 w-5 mr-2"}),"💾 Αποθήκευση Program Options"]})]})]})]},p.id)})})]})},Va=({userRole:r="admin"})=>{var Mt,ut,Bt;const{user:e}=ca(),[t,n]=U.useState([]),[a,i]=U.useState([]),[o,s]=U.useState(null),[c,f]=U.useState(null),[u,l]=U.useState(!1),[d,h]=U.useState(!1),[x,y]=U.useState(!1),[_,A]=U.useState({code:"",selectedUserId:""}),[w,C]=U.useState("individual"),[p,S]=U.useState("personal"),[I,N]=U.useState([]),[R,k]=U.useState(null),[B,ue]=U.useState(null),[W,ie]=U.useState(0),[Re,Le]=U.useState(1),[Ct,Et]=U.useState(2),[qe,ct]=U.useState(""),[ft,Ht]=U.useState("dropdown"),[St,Pt]=U.useState(1),[G]=U.useState(10);U.useMemo(()=>{const Z=(St-1)*G,et=Z+G;return t.slice(Z,et)},[t,St,G]),Math.ceil(t.length/G);const[He,bt]=U.useState([{id:"tmp-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:""}]),ot=U.useCallback(async()=>{console.log("[PersonalTrainingProgram] Loading users and schedules...");try{l(!0);const{data:Z,error:et}=await $e.from("user_profiles").select("*").order("created_at",{ascending:!1});if(et)throw console.error("[PersonalTrainingProgram] User profiles error:",et),et;const{data:Ze,error:tt}=await $e.from("personal_training_schedules").select("id,user_id,month,year,schedule_data,status,created_by,created_at,updated_at,trainer_name,accepted_at,declined_at").order("created_at",{ascending:!1});if(tt&&console.error("[PersonalTrainingProgram] Schedules error:",tt),!Z||Z.length===0){console.log("[PersonalTrainingProgram] No users found"),n([]),i([]);return}const mt=Z.map(K=>({id:K.user_id,email:K.email||`user-${K.user_id.slice(0,8)}@example.com`,firstName:K.first_name||"",lastName:K.last_name||"",profile_photo:K.profile_photo||"",profile_photo_locked:K.profile_photo_locked||!1,dob:K.dob||"",address:K.address||"",emergency_contact:K.emergency_contact||"",dob_locked:K.dob_locked||!1,hasPersonalTrainingCode:!1,personalTrainingCode:void 0,packageType:void 0}));n(mt);const It=(Ze||[]).map(K=>{const De=mt.find(rt=>rt.id===K.user_id);return De?{user:De,schedule:{id:K.id,userId:K.user_id,month:K.month,year:K.year,status:K.status,scheduleData:K.schedule_data,createdBy:K.created_by,createdAt:K.created_at,updatedAt:K.updated_at,acceptedAt:K.accepted_at,declinedAt:K.declined_at},status:K.status}:null}).filter(K=>K!==null);i(It)}catch(Z){console.error("[PersonalTrainingProgram] Error loading data:",Z),ae.error("Σφάλμα κατά τη φόρτωση των δεδομένων")}finally{l(!1)}},[]);U.useEffect(()=>{ot()},[ot]);const Gt=async()=>{var et,Ze;const Z=w==="individual"||w==="combination"?[_.selectedUserId]:I;if(Z.length===0){ae.error("Παρακαλώ επιλέξτε χρήστη/ες");return}try{l(!0),console.log(`[PersonalTrainingProgram] Creating program as ${r}...`);for(const De of Z){const rt=t.find(Ge=>Ge.id===De);if(!rt){ae.error(`Δεν βρέθηκε ο χρήστης με ID: ${De}`);continue}let vt=[];w==="individual"&&(vt=He.map(Ge=>({id:Ge.id,date:Ge.date,startTime:Ge.startTime,endTime:Ge.endTime,type:Ge.type,trainer:Ge.trainer||"Mike",room:Ge.room,notes:Ge.notes})));const wt={user_id:rt.id,trainer_name:((et=vt[0])==null?void 0:et.trainer)||"Mike",month:new Date().getMonth()+1,year:new Date().getFullYear(),schedule_data:{sessions:vt,notes:"",trainer:((Ze=vt[0])==null?void 0:Ze.trainer)||"Mike"},status:"accepted",created_by:e==null?void 0:e.id,user_type:p,is_flexible:p==="paspartu",training_type:w},{data:qt,error:st}=await $e.from("personal_training_schedules").insert(wt).select().single();if(st)throw console.error("[PersonalTrainingProgram] Schedule insertion error:",st),st;console.log("[PersonalTrainingProgram] Schedule created successfully for user:",rt.email)}const tt=Z.map(De=>{const rt=t.find(vt=>vt.id===De);return rt?`${rt.firstName} ${rt.lastName}`:"Άγνωστος"}).join(", "),mt=p==="personal"?"Personal":"Paspartu",It=w==="individual"?"Ατομικό":w==="combination"?"Συνδυασμένο":"Ομαδικό",K=w==="individual"||w==="combination"?"τον χρήστη":"τους χρήστες";ae.success(`Το πρόγραμμα ${It} ${mt} Training δημιουργήθηκε επιτυχώς για ${K}: ${tt}!`),y(!1),A({code:"",selectedUserId:""}),C("individual"),S("personal"),N([]),ct(""),Ht("dropdown"),bt([{id:"tmp-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:""}]),ot()}catch(tt){console.error("[PersonalTrainingProgram] Error creating personal training program:",tt),ae.error("Σφάλμα κατά τη δημιουργία του προγράμματος")}finally{l(!1)}};return U.useMemo(()=>qe?t.filter(Z=>Z.firstName.toLowerCase().includes(qe.toLowerCase())||Z.lastName.toLowerCase().includes(qe.toLowerCase())||Z.email.toLowerCase().includes(qe.toLowerCase())):t,[t,qe]),v.jsxs("div",{className:"space-y-6",children:[v.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-4 sm:p-6 text-white mb-4 sm:mb-6",children:v.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-2",children:"💪 Personal Training Πρόγραμμα"}),v.jsxs("p",{className:"text-purple-100 text-sm sm:text-base",children:["Διαχείριση προγραμμάτων προπόνησης (",r==="admin"?"Admin":"Secretary",")"]})]}),v.jsxs("button",{onClick:()=>y(!0),className:"flex items-center space-x-2 sm:space-x-3 px-4 sm:px-6 py-2 sm:py-3 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg text-sm sm:text-base",children:[v.jsx(Wt,{className:"h-4 w-4 sm:h-5 sm:w-5"}),v.jsx("span",{children:"🏋️‍♂️ Δημιουργία Προγράμματος"})]})]})}),v.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl shadow-lg border-2 border-green-200",children:v.jsx("div",{className:"p-4 sm:p-6",children:v.jsx(Ba,{featureEnabled:!0})})}),x&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-2 sm:p-4",children:v.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:[v.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-t-xl sm:rounded-t-2xl p-4 sm:p-6 text-white",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("h3",{className:"text-lg sm:text-2xl font-bold mb-1 sm:mb-2",children:"🏋️‍♂️ Δημιουργία Προγράμματος"}),v.jsx("p",{className:"text-purple-100 text-sm sm:text-base",children:"Δημιουργήστε νέο πρόγραμμα Personal Training"})]}),v.jsx("button",{onClick:()=>y(!1),className:"text-white/80 hover:text-white hover:bg-white/20 rounded-full p-2 transition-all duration-200 flex-shrink-0 ml-2",children:v.jsx(Er,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]})}),v.jsxs("div",{className:"p-4 sm:p-8",children:[v.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[v.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 sm:p-6 border border-indigo-200",children:[v.jsx("label",{className:"block text-base sm:text-lg font-bold text-indigo-800 mb-3 sm:mb-4 flex items-center",children:"🏋️‍♂️ Τύπος Προπόνησης"}),v.jsx("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:v.jsx("button",{type:"button",onClick:()=>C("individual"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${w==="individual"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"👤 Ατομικό"})})]}),v.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-4 sm:p-6 border border-blue-200",children:[v.jsx("label",{className:"block text-base sm:text-lg font-bold text-blue-800 mb-3 sm:mb-4 flex items-center",children:"👥 Τύπος Χρήστη"}),v.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[v.jsx("button",{type:"button",onClick:()=>S("personal"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${p==="personal"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🏋️‍♂️ Personal User"}),v.jsx("button",{type:"button",onClick:()=>S("paspartu"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${p==="paspartu"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🎯 Paspartu User"})]})]}),v.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:[v.jsxs("label",{className:"block text-lg font-bold text-blue-800 mb-4 flex items-center",children:["👤 Επιλογή Χρήστη",v.jsxs("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded",children:["Selected: ",_.selectedUserId?"✅":"❌"]})]}),v.jsxs("select",{className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700",value:_.selectedUserId,onChange:Z=>{A({..._,selectedUserId:Z.target.value})},children:[v.jsx("option",{value:"",children:"-- Επιλέξτε χρήστη --"}),t.length>0?t.map(Z=>v.jsxs("option",{value:Z.id,children:[Z.firstName," ",Z.lastName," (",Z.email,")"]},Z.id)):v.jsx("option",{value:"",disabled:!0,children:"Δεν υπάρχουν χρήστες"})]}),_.selectedUserId&&v.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3",children:v.jsx("span",{className:"text-white text-sm",children:"✓"})}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm font-bold text-green-800",children:"✅ Επιλεγμένος:"}),v.jsxs("div",{className:"text-xs text-green-600",children:[(Mt=t.find(Z=>Z.id===_.selectedUserId))==null?void 0:Mt.firstName," ",(ut=t.find(Z=>Z.id===_.selectedUserId))==null?void 0:ut.lastName," (",(Bt=t.find(Z=>Z.id===_.selectedUserId))==null?void 0:Bt.email,")"]})]})]})})]})]}),v.jsxs("div",{className:"flex space-x-4 mt-8 pt-6 border-t border-gray-200",children:[v.jsx("button",{onClick:()=>y(!1),className:"flex-1 px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 transition-all duration-200 font-semibold shadow-lg",children:"❌ Ακύρωση"}),v.jsxs("button",{onClick:Gt,disabled:!_.selectedUserId,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-200 font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",title:_.selectedUserId?"Δημιουργία Προγράμματος":"Παρακαλώ επιλέξτε χρήστη",children:["✅ Δημιουργία Προγράμματος",!_.selectedUserId&&v.jsx("span",{className:"ml-2 text-xs opacity-75",children:"(Επιλέξτε χρήστη)"})]})]})]})]})}),u&&v.jsxs("div",{className:"flex items-center justify-center py-8",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),v.jsx("span",{className:"ml-2 text-gray-600",children:"Φόρτωση δεδομένων..."})]})]})};function Ha(r,e){var t=Object.setPrototypeOf;t?t(r,e):r.__proto__=e}function Ga(r,e){e===void 0&&(e=r.constructor);var t=Error.captureStackTrace;t&&t(r,e)}var Xa=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wa=function(r){Xa(e,r);function e(t,n){var a=this.constructor,i=r.call(this,t,n)||this;return Object.defineProperty(i,"name",{value:a.name,enumerable:!1,configurable:!0}),Ha(i,a.prototype),Ga(i),i}return e}(Error),za=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),it=function(r){za(e,r);function e(t){t===void 0&&(t=void 0);var n=r.call(this,t)||this;return n.message=t,n}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(Wa),$a=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_e=function(r){$a(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArgumentException",e}(it),Ya=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),j=function(r){Ya(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(it),ua=function(){function r(e){if(this.binarizer=e,e===null)throw new j("Binarizer must be non-null.")}return r.prototype.getWidth=function(){return this.binarizer.getWidth()},r.prototype.getHeight=function(){return this.binarizer.getHeight()},r.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},r.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},r.prototype.crop=function(e,t,n,a){var i=this.binarizer.getLuminanceSource().crop(e,t,n,a);return new r(this.binarizer.createBinarizer(i))},r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},r.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(e))},r.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(e))},r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},r}(),Za=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ae=function(r){Za(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(it),Qa=function(){function r(e){this.source=e}return r.prototype.getLuminanceSource=function(){return this.source},r.prototype.getWidth=function(){return this.source.getWidth()},r.prototype.getHeight=function(){return this.source.getHeight()},r}(),xe=function(){function r(){}return r.arraycopy=function(e,t,n,a,i){for(;i--;)n[a++]=e[t++]},r.currentTimeMillis=function(){return Date.now()},r}(),Ka=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rn=function(r){Ka(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(it),Ja=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sn=function(r){Ja(e,r);function e(t,n){t===void 0&&(t=void 0),n===void 0&&(n=void 0);var a=r.call(this,n)||this;return a.index=t,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(rn),qa=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oe=function(){function r(){}return r.fill=function(e,t){for(var n=0,a=e.length;n<a;n++)e[n]=t},r.fillWithin=function(e,t,n,a){r.rangeCheck(e.length,t,n);for(var i=t;i<n;i++)e[i]=a},r.rangeCheck=function(e,t,n){if(t>n)throw new j("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new Sn(t);if(n>e)throw new Sn(n)},r.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},r.create=function(e,t,n){var a=Array.from({length:e});return a.map(function(i){return Array.from({length:t}).fill(n)})},r.createInt32Array=function(e,t,n){var a=Array.from({length:e});return a.map(function(i){return Int32Array.from({length:t}).fill(n)})},r.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==t[n])return!1;return!0},r.hashCode=function(e){var t,n;if(e===null)return 0;var a=1;try{for(var i=qa(e),o=i.next();!o.done;o=i.next()){var s=o.value;a=31*a+s}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},r.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},r.copyOf=function(e,t){return e.slice(0,t)},r.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},r.copyOfRange=function(e,t,n){var a=n-t,i=new Int32Array(a);return xe.arraycopy(e,t,i,0,a),i},r.binarySearch=function(e,t,n){n===void 0&&(n=r.numberComparator);for(var a=0,i=e.length-1;a<=i;){var o=i+a>>1,s=n(t,e[o]);if(s>0)a=o+1;else if(s<0)i=o-1;else return o}return-a-1},r.numberComparator=function(e,t){return e-t},r}(),Y=function(){function r(){}return r.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)},r.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},r.toHexString=function(e){return e.toString(16)},r.toBinaryString=function(e){return String(parseInt(String(e),2))},r.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},r.truncDivision=function(e,t){return Math.trunc(e/t)},r.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r.MIN_VALUE_32_BITS=-2147483648,r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r}(),Fe=function(){function r(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=r.makeArray(e):this.bits=t)}return r.prototype.getSize=function(){return this.size},r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},r.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=r.makeArray(e);xe.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},r.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},r.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},r.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},r.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,a=Math.floor(e/32),i=n[a];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++a===o)return t;i=n[a]}var s=a*32+Y.numberOfTrailingZeros(i);return s>t?t:s},r.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,a=Math.floor(e/32),i=~n[a];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++a===o)return t;i=~n[a]}var s=a*32+Y.numberOfTrailingZeros(i);return s>t?t:s},r.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},r.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new j;if(t!==e){t--;for(var n=Math.floor(e/32),a=Math.floor(t/32),i=this.bits,o=n;o<=a;o++){var s=o>n?0:e&31,c=o<a?31:t&31,f=(2<<c)-(1<<s);i[o]|=f}}},r.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},r.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new j;if(t===e)return!0;t--;for(var a=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=a;s<=i;s++){var c=s>a?0:e&31,f=s<i?31:t&31,u=(2<<f)-(1<<c)&4294967295;if((o[s]&u)!==(n?u:0))return!1}return!0},r.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},r.prototype.appendBits=function(e,t){if(t<0||t>32)throw new j("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)},r.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},r.prototype.xor=function(e){if(this.size!==e.size)throw new j("Sizes don't match");for(var t=this.bits,n=0,a=t.length;n<a;n++)t[n]^=e.bits[n]},r.prototype.toBytes=function(e,t,n,a){for(var i=0;i<a;i++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;t[n+i]=o}},r.prototype.getBitArray=function(){return this.bits},r.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,a=this.bits,i=0;i<n;i++){var o=a[i];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-i]=o}if(this.size!==n*32){for(var s=n*32-this.size,c=e[0]>>>s,i=1;i<n;i++){var f=e[i];c|=f<<32-s,e[i-1]=c,c=f>>>s}e[n-1]=c}this.bits=e},r.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.size===t.size&&Oe.equals(this.bits,t.bits)},r.prototype.hashCode=function(){return 31*this.size+Oe.hashCode(this.bits)},r.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e},r.prototype.clone=function(){return new r(this.size,this.bits.slice())},r.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},r}(),fe;(function(r){r[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",r[r.ASSUME_GS1=8]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(fe||(fe={}));var ei=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),T=function(r){ei(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(it),ti=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},se;(function(r){r[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR"})(se||(se={}));var Ne=function(){function r(e,t,n){for(var a,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,r.VALUE_IDENTIFIER_TO_ECI.set(e,this),r.NAME_TO_ECI.set(n,this);for(var c=this.values,f=0,u=c.length;f!==u;f++){var l=c[f];r.VALUES_TO_ECI.set(l,this)}try{for(var d=ti(o),h=d.next();!h.done;h=d.next()){var x=h.value;r.NAME_TO_ECI.set(x,this)}}catch(y){a={error:y}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}}return r.prototype.getValueIdentifier=function(){return this.valueIdentifier},r.prototype.getName=function(){return this.name},r.prototype.getValue=function(){return this.values[0]},r.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new T("incorect value");var t=r.VALUES_TO_ECI.get(e);if(t===void 0)throw new T("incorect value");return t},r.getCharacterSetECIByName=function(e){var t=r.NAME_TO_ECI.get(e);if(t===void 0)throw new T("incorect value");return t},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.getName()===t.getName()},r.VALUE_IDENTIFIER_TO_ECI=new Map,r.VALUES_TO_ECI=new Map,r.NAME_TO_ECI=new Map,r.Cp437=new r(se.Cp437,Int32Array.from([0,2]),"Cp437"),r.ISO8859_1=new r(se.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),r.ISO8859_2=new r(se.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),r.ISO8859_3=new r(se.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),r.ISO8859_4=new r(se.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),r.ISO8859_5=new r(se.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),r.ISO8859_6=new r(se.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),r.ISO8859_7=new r(se.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),r.ISO8859_8=new r(se.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),r.ISO8859_9=new r(se.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),r.ISO8859_10=new r(se.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),r.ISO8859_11=new r(se.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),r.ISO8859_13=new r(se.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),r.ISO8859_14=new r(se.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),r.ISO8859_15=new r(se.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),r.ISO8859_16=new r(se.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),r.SJIS=new r(se.SJIS,20,"SJIS","Shift_JIS"),r.Cp1250=new r(se.Cp1250,21,"Cp1250","windows-1250"),r.Cp1251=new r(se.Cp1251,22,"Cp1251","windows-1251"),r.Cp1252=new r(se.Cp1252,23,"Cp1252","windows-1252"),r.Cp1256=new r(se.Cp1256,24,"Cp1256","windows-1256"),r.UnicodeBigUnmarked=new r(se.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),r.UTF8=new r(se.UTF8,26,"UTF8","UTF-8"),r.ASCII=new r(se.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),r.Big5=new r(se.Big5,28,"Big5"),r.GB18030=new r(se.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),r.EUC_KR=new r(se.EUC_KR,30,"EUC_KR","EUC-KR"),r}(),ri=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_r=function(r){ri(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(it),ht=function(){function r(){}return r.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},r.shouldDecodeOnFallback=function(e){return!r.isBrowser()&&e==="ISO-8859-1"},r.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},r.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},r.encodingName=function(e){return typeof e=="string"?e:e.getName()},r.encodingCharacterSet=function(e){return e instanceof Ne?e:Ne.getCharacterSetECIByName(e)},r.decodeFallback=function(e,t){var n=this.encodingCharacterSet(t);if(r.isDecodeFallbackSupported(n)){for(var a="",i=0,o=e.length;i<o;i++){var s=e[i].toString(16);s.length<2&&(s="0"+s),a+="%"+s}return decodeURIComponent(a)}if(n.equals(Ne.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new _r("Encoding "+this.encodingName(t)+" not supported by fallback.")},r.isDecodeFallbackSupported=function(e){return e.equals(Ne.UTF8)||e.equals(Ne.ISO8859_1)||e.equals(Ne.ASCII)},r.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),n=t.split(""),a=[],i=0;i<n.length;i++)a.push(n[i].charCodeAt(0));return new Uint8Array(a)},r}(),J=function(){function r(){}return r.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var n=t?t.getName():this.ISO88591;return ht.decode(new Uint8Array([e]),n)},r.guessEncoding=function(e,t){if(t!=null&&t.get(fe.CHARACTER_SET)!==void 0)return t.get(fe.CHARACTER_SET).toString();for(var n=e.length,a=!0,i=!0,o=!0,s=0,c=0,f=0,u=0,l=0,d=0,h=0,x=0,y=0,_=0,A=0,w=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,C=0;C<n&&(a||i||o);C++){var p=e[C]&255;o&&(s>0?p&128?s--:o=!1:p&128&&(p&64?(s++,p&32?(s++,p&16?(s++,p&8?o=!1:u++):f++):c++):o=!1)),a&&(p>127&&p<160?a=!1:p>159&&(p<192||p===215||p===247)&&A++),i&&(l>0?p<64||p===127||p>252?i=!1:l--:p===128||p===160||p>239?i=!1:p>160&&p<224?(d++,x=0,h++,h>y&&(y=h)):p>127?(l++,h=0,x++,x>_&&(_=x)):(h=0,x=0))}return o&&s>0&&(o=!1),i&&l>0&&(i=!1),o&&(w||c+f+u>0)?r.UTF8:i&&(r.ASSUME_SHIFT_JIS||y>=3||_>=3)?r.SHIFT_JIS:a&&i?y===2&&d===2||A*10>=n?r.SHIFT_JIS:r.ISO88591:a?r.ISO88591:i?r.SHIFT_JIS:o?r.UTF8:r.PLATFORM_DEFAULT_ENCODING},r.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=-1;function i(s,c,f,u,l,d){if(s==="%%")return"%";if(t[++a]!==void 0){s=u?parseInt(u.substr(1)):void 0;var h=l?parseInt(l.substr(1)):void 0,x;switch(d){case"s":x=t[a];break;case"c":x=t[a][0];break;case"f":x=parseFloat(t[a]).toFixed(s);break;case"p":x=parseFloat(t[a]).toPrecision(s);break;case"e":x=parseFloat(t[a]).toExponential(s);break;case"x":x=parseInt(t[a]).toString(h||16);break;case"d":x=parseFloat(parseInt(t[a],h||10).toPrecision(s)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(h);for(var y=parseInt(f),_=f&&f[0]+""=="0"?"0":" ";x.length<y;)x=c!==void 0?x+_:_+x;return x}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},r.getBytes=function(e,t){return ht.encode(e,t)},r.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},r.getCharAt=function(e){return String.fromCharCode(e)},r.SHIFT_JIS=Ne.SJIS.getName(),r.GB2312="GB2312",r.ISO88591=Ne.ISO8859_1.getName(),r.EUC_JP="EUC_JP",r.UTF8=Ne.UTF8.getName(),r.PLATFORM_DEFAULT_ENCODING=r.UTF8,r.ASSUME_SHIFT_JIS=!1,r}(),$=function(){function r(e){e===void 0&&(e=""),this.value=e}return r.prototype.enableDecoding=function(e){return this.encoding=e,this},r.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=J.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},r.prototype.appendChars=function(e,t,n){for(var a=t;t<t+n;a++)this.append(e[a]);return this},r.prototype.length=function(){return this.value.length},r.prototype.charAt=function(e){return this.value.charAt(e)},r.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},r.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},r.prototype.substring=function(e,t){return this.value.substring(e,t)},r.prototype.setLengthToZero=function(){this.value=""},r.prototype.toString=function(){return this.value},r.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},r}(),At=function(){function r(e,t,n,a){if(this.width=e,this.height=t,this.rowSize=n,this.bits=a,t==null&&(t=e),this.height=t,e<1||t<1)throw new j("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return r.parseFromBooleanArray=function(e){for(var t=e.length,n=e[0].length,a=new r(n,t),i=0;i<t;i++)for(var o=e[i],s=0;s<n;s++)o[s]&&a.set(s,i);return a},r.parseFromString=function(e,t,n){if(e===null)throw new j("stringRepresentation cannot be null");for(var a=new Array(e.length),i=0,o=0,s=-1,c=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new j("row lengths do not match");o=i,c++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,a[i]=!0,i++;else if(e.substring(f,f+n.length)===n)f+=n.length,a[i]=!1,i++;else throw new j("illegal character encountered: "+e.substring(f));if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new j("row lengths do not match");c++}for(var u=new r(s,c),l=0;l<i;l++)a[l]&&u.set(Math.floor(l%s),Math.floor(l/s));return u},r.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},r.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},r.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},r.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},r.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new j("input matrix dimensions do not match");for(var t=new Fe(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,i=0,o=this.height;i<o;i++)for(var s=i*n,c=e.getRow(i,t).getBitArray(),f=0;f<n;f++)a[s+f]^=c[f]},r.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},r.prototype.setRegion=function(e,t,n,a){if(t<0||e<0)throw new j("Left and top must be nonnegative");if(a<1||n<1)throw new j("Height and width must be at least 1");var i=e+n,o=t+a;if(o>this.height||i>this.width)throw new j("The region must fit inside the matrix");for(var s=this.rowSize,c=this.bits,f=t;f<o;f++)for(var u=f*s,l=e;l<i;l++)c[u+Math.floor(l/32)]|=1<<(l&31)&4294967295},r.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Fe(this.width):t.clear();for(var n=this.rowSize,a=this.bits,i=e*n,o=0;o<n;o++)t.setBulk(o*32,a[i+o]);return t},r.prototype.setRow=function(e,t){xe.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},r.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new Fe(e),a=new Fe(e),i=0,o=Math.floor((t+1)/2);i<o;i++)n=this.getRow(i,n),a=this.getRow(t-1-i,a),n.reverse(),a.reverse(),this.setRow(i,a),this.setRow(t-1-i,n)},r.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,a=this.bits,i=e,o=t,s=-1,c=-1,f=0;f<t;f++)for(var u=0;u<n;u++){var l=a[f*n+u];if(l!==0){if(f<o&&(o=f),f>c&&(c=f),u*32<i){for(var d=0;!(l<<31-d&4294967295);)d++;u*32+d<i&&(i=u*32+d)}if(u*32+31>s){for(var d=31;!(l>>>d);)d--;u*32+d>s&&(s=u*32+d)}}}return s<i||c<o?null:Int32Array.from([i,o,s-i+1,c-o+1])},r.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;for(var a=n/e,i=n%e*32,o=t[n],s=0;!(o<<31-s&4294967295);)s++;return i+=s,Int32Array.from([i,a])},r.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&t[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),i=Math.floor(n%e)*32,o=t[n],s=31;!(o>>>s);)s--;return i+=s,Int32Array.from([i,a])},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRowSize=function(){return this.rowSize},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Oe.equals(this.bits,t.bits)},r.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Oe.hashCode(this.bits),e},r.prototype.toString=function(e,t,n){return e===void 0&&(e="X "),t===void 0&&(t="  "),n===void 0&&(n=`
`),this.buildToString(e,t,n)},r.prototype.buildToString=function(e,t,n){for(var a=new $,i=0,o=this.height;i<o;i++){for(var s=0,c=this.width;s<c;s++)a.append(this.get(s,i)?e:t);a.append(n)}return a.toString()},r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())},r}(),ni=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),b=function(r){ni(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(it),ai=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ii=function(r){ai(e,r);function e(t){var n=r.call(this,t)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(t,n){var a=this.getLuminanceSource(),i=a.getWidth();n==null||n.getSize()<i?n=new Fe(i):n.clear(),this.initArrays(i);for(var o=a.getRow(t,this.luminances),s=this.buckets,c=0;c<i;c++)s[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(s);if(i<3)for(var c=0;c<i;c++)(o[c]&255)<f&&n.set(c);else for(var u=o[0]&255,l=o[1]&255,c=1;c<i-1;c++){var d=o[c+1]&255;(l*4-u-d)/2<f&&n.set(c),u=l,l=d}return n},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),n=t.getWidth(),a=t.getHeight(),i=new At(n,a);this.initArrays(n);for(var o=this.buckets,s=1;s<5;s++)for(var c=Math.floor(a*s/5),f=t.getRow(c,this.luminances),u=Math.floor(n*4/5),l=Math.floor(n/5);l<u;l++){var d=f[l]&255;o[d>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(o),x=t.getMatrix(),s=0;s<a;s++)for(var y=s*n,l=0;l<n;l++){var d=x[y+l]&255;d<h&&i.set(l,s)}return i},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(t){for(var n=t.length,a=0,i=0,o=0,s=0;s<n;s++)t[s]>o&&(i=s,o=t[s]),t[s]>a&&(a=t[s]);for(var c=0,f=0,s=0;s<n;s++){var u=s-i,l=t[s]*u*u;l>f&&(c=s,f=l)}if(i>c){var d=i;i=c,c=d}if(c-i<=n/16)throw new b;for(var h=c-1,x=-1,s=c-1;s>i;s--){var y=s-i,l=y*y*(c-s)*(a-t[s]);l>x&&(h=s,x=l)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Qa),oi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),la=function(r){oi(e,r);function e(t){var n=r.call(this,t)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),n=t.getWidth(),a=t.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var i=t.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&o++;var s=a>>e.BLOCK_SIZE_POWER;a&e.BLOCK_SIZE_MASK&&s++;var c=e.calculateBlackPoints(i,o,s,n,a),f=new At(n,a);e.calculateThresholdForBlock(i,o,s,n,a,c,f),this.matrix=f}else this.matrix=r.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,n,a,i,o,s,c){for(var f=o-e.BLOCK_SIZE,u=i-e.BLOCK_SIZE,l=0;l<a;l++){var d=l<<e.BLOCK_SIZE_POWER;d>f&&(d=f);for(var h=e.cap(l,2,a-3),x=0;x<n;x++){var y=x<<e.BLOCK_SIZE_POWER;y>u&&(y=u);for(var _=e.cap(x,2,n-3),A=0,w=-2;w<=2;w++){var C=s[h+w];A+=C[_-2]+C[_-1]+C[_]+C[_+1]+C[_+2]}var p=A/25;e.thresholdBlock(t,y,d,p,i,c)}}},e.cap=function(t,n,a){return t<n?n:t>a?a:t},e.thresholdBlock=function(t,n,a,i,o,s){for(var c=0,f=a*o+n;c<e.BLOCK_SIZE;c++,f+=o)for(var u=0;u<e.BLOCK_SIZE;u++)(t[f+u]&255)<=i&&s.set(n+u,a+c)},e.calculateBlackPoints=function(t,n,a,i,o){for(var s=o-e.BLOCK_SIZE,c=i-e.BLOCK_SIZE,f=new Array(a),u=0;u<a;u++){f[u]=new Int32Array(n);var l=u<<e.BLOCK_SIZE_POWER;l>s&&(l=s);for(var d=0;d<n;d++){var h=d<<e.BLOCK_SIZE_POWER;h>c&&(h=c);for(var x=0,y=255,_=0,A=0,w=l*i+h;A<e.BLOCK_SIZE;A++,w+=i){for(var C=0;C<e.BLOCK_SIZE;C++){var p=t[w+C]&255;x+=p,p<y&&(y=p),p>_&&(_=p)}if(_-y>e.MIN_DYNAMIC_RANGE)for(A++,w+=i;A<e.BLOCK_SIZE;A++,w+=i)for(var C=0;C<e.BLOCK_SIZE;C++)x+=t[w+C]&255}var S=x>>e.BLOCK_SIZE_POWER*2;if(_-y<=e.MIN_DYNAMIC_RANGE&&(S=y/2,u>0&&d>0)){var I=(f[u-1][d]+2*f[u][d-1]+f[u-1][d-1])/4;y<I&&(S=I)}f[u][d]=S}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(ii),cr=function(){function r(e,t){this.width=e,this.height=t}return r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.isCropSupported=function(){return!1},r.prototype.crop=function(e,t,n,a){throw new _r("This luminance source does not support cropping.")},r.prototype.isRotateSupported=function(){return!1},r.prototype.rotateCounterClockwise=function(){throw new _r("This luminance source does not support rotation by 90 degrees.")},r.prototype.rotateCounterClockwise45=function(){throw new _r("This luminance source does not support rotation by 45 degrees.")},r.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new $,n=0;n<this.height;n++){for(var a=this.getRow(n,e),i=0;i<this.width;i++){var o=a[i]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()},r}(),si=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rr=function(r){si(e,r);function e(t){var n=r.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return e.prototype.getRow=function(t,n){for(var a=this.delegate.getRow(t,n),i=this.getWidth(),o=0;o<i;o++)a[o]=255-(a[o]&255);return a},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),i=0;i<n;i++)a[i]=255-(t[i]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,n,a,i){return new e(this.delegate.crop(t,n,a,i))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(cr),ci=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fi=function(r){ci(e,r);function e(t,n){n===void 0&&(n=!1);var a=r.call(this,t.width,t.height)||this;return a.canvas=t,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(t,n),a}return e.makeBufferFromCanvasImageData=function(t,n){n===void 0&&(n=!1);var a=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(a.data,t.width,t.height,n)},e.toGrayscaleBuffer=function(t,n,a,i){i===void 0&&(i=!1);var o=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!i)for(var s=0,c=0,f=t.length;s<f;s+=4,c++){var u=void 0,l=t[s+3];if(l===0)u=255;else{var d=t[s],h=t[s+1],x=t[s+2];u=306*d+601*h+117*x+512>>10}o[c]=u}else for(var s=0,c=0,y=t.length;s<y;s+=4,c++){var u=void 0,l=t[s+3];if(l===0)u=255;else{var d=t[s],h=t[s+1],x=t[s+2];u=306*d+601*h+117*x+512>>10}o[c]=255-u}return o},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new j("Requested row is outside the image: "+t);var a=this.getWidth(),i=t*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return r.prototype.crop.call(this,t,n,a,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement(),a=n.getContext("2d"),i=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*s),f=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*s);return n.width=c,n.height=f,a.translate(c/2,f/2),a.rotate(i),a.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new Rr(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(cr),ui=function(){function r(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},r}(),Qe=function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function s(u){try{f(n.next(u))}catch(l){o(l)}}function c(u){try{f(n.throw(u))}catch(l){o(l)}}function f(u){u.done?i(u.value):a(u.value).then(s,c)}f((n=n.apply(r,e||[])).next())})},Ke=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(u){return c([f,u])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,a&&(i=f[0]&2?a.return:f[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,f[1])).done)return i;switch(a=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(u){f=[6,u],a=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},li=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kt=function(){function r(e,t,n){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),r.prototype.listVideoInputDevices=function(){return Qe(this,void 0,void 0,function(){var e,t,n,a,i,o,s,c,f,u,l,d;return Ke(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=li(e),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(s=i.deviceId||i.id,c=i.label||"Video device "+(t.length+1),f=i.groupId,u={deviceId:s,label:c,kind:o,groupId:f},t.push(u))}catch(x){l={error:x}}finally{try{a&&!a.done&&(d=n.return)&&d.call(n)}finally{if(l)throw l.error}}return[2,t]}})})},r.prototype.getVideoInputDevices=function(){return Qe(this,void 0,void 0,function(){var e;return Ke(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(n){return new ui(n.deviceId,n.label)})]}})})},r.prototype.findDeviceById=function(e){return Qe(this,void 0,void 0,function(){var t;return Ke(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(a){return a.deviceId===e})]:[2,null]}})})},r.prototype.decodeFromInputVideoDevice=function(e,t){return Qe(this,void 0,void 0,function(){return Ke(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return Qe(this,void 0,void 0,function(){var n,a;return Ke(this,function(i){switch(i.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,t)];case 1:return[2,i.sent()]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return Qe(this,void 0,void 0,function(){var n;return Ke(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,a.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return Qe(this,void 0,void 0,function(){var n,a;return Ke(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=i.sent(),[4,this.decodeOnce(n)];case 2:return a=i.sent(),[2,a]}})})},r.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return Qe(this,void 0,void 0,function(){return Ke(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,a.sent()]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return Qe(this,void 0,void 0,function(){var a,i;return Ke(this,function(o){switch(o.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,t,n)];case 1:return[2,o.sent()]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return Qe(this,void 0,void 0,function(){var a;return Ke(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=i.sent(),[4,this.decodeFromStream(a,t,n)];case 2:return[2,i.sent()]}})})},r.prototype.decodeFromStream=function(e,t,n){return Qe(this,void 0,void 0,function(){var a;return Ke(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return a=i.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,i.sent()]}})})},r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},r.prototype.attachStreamToVideo=function(e,t){return Qe(this,void 0,void 0,function(){var n;return Ke(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},r.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,a){return t.playVideoOnLoad(e,function(){return n()})})},r.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},r.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},r.prototype.tryPlayVideo=function(e){return Qe(this,void 0,void 0,function(){return Ke(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},r.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new _e("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new _e("element with id '"+e+"' must be an "+t+" element");return n},r.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new _e("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},r.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new _e("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},r.prototype.decodeFromVideoContinuously=function(e,t,n){if(e===void 0&&t===void 0)throw new _e("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},r.prototype.decodeFromImageElement=function(e){if(!e)throw new _e("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n},r.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},r.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},r.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new _e("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},r.prototype.decodeFromImageUrl=function(e){if(!e)throw new _e("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},r.prototype.decodeFromVideoUrl=function(e){if(!e)throw new _e("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},r.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new _e("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,t);return n.src=e,a},r.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,a){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",t.imageLoadedListener)})},r.prototype._decodeOnLoadVideo=function(e){return Qe(this,void 0,void 0,function(){return Ke(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},r.prototype._decodeOnLoadVideoContinuously=function(e,t){return Qe(this,void 0,void 0,function(){return Ke(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},r.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},r.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.prototype.decodeOnce=function(e,t,n){var a=this;t===void 0&&(t=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var i=function(o,s){if(a._stopAsyncDecode){s(new b("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);o(c)}catch(d){var f=t&&d instanceof b,u=d instanceof Ae||d instanceof T,l=u&&n;if(f||l)return setTimeout(i,a._timeBetweenDecodingAttempts,o,s);s(d)}};return new Promise(function(o,s){return i(o,s)})},r.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var i=n.decode(e);t(i,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){t(null,c);var o=c instanceof Ae||c instanceof T,s=c instanceof b;(o||s)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},r.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},r.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new fi(n,t),i=new la(a);return new ua(i)},r.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},r.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},r.prototype.drawFrameOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.drawImageOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},r.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=a+"px",t.width=n,t.height=a,t},r.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},r.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},r.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},r.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},r.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},r.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},r}(),Ye=function(){function r(e,t,n,a,i,o){n===void 0&&(n=t==null?0:8*t.length),o===void 0&&(o=xe.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=a,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=a,this.format=i,this.resultMetadata=null,o==null?this.timestamp=xe.currentTimeMillis():this.timestamp=o}return r.prototype.getText=function(){return this.text},r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.getBarcodeFormat=function(){return this.format},r.prototype.getResultMetadata=function(){return this.resultMetadata},r.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},r.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},r.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(t.length+e.length);xe.arraycopy(t,0,n,0,t.length),xe.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.toString=function(){return this.text},r}(),F;(function(r){r[r.AZTEC=0]="AZTEC",r[r.CODABAR=1]="CODABAR",r[r.CODE_39=2]="CODE_39",r[r.CODE_93=3]="CODE_93",r[r.CODE_128=4]="CODE_128",r[r.DATA_MATRIX=5]="DATA_MATRIX",r[r.EAN_8=6]="EAN_8",r[r.EAN_13=7]="EAN_13",r[r.ITF=8]="ITF",r[r.MAXICODE=9]="MAXICODE",r[r.PDF_417=10]="PDF_417",r[r.QR_CODE=11]="QR_CODE",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(F||(F={}));var Yr;(function(r){r[r.OTHER=0]="OTHER",r[r.ORIENTATION=1]="ORIENTATION",r[r.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",r[r.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",r[r.ISSUE_NUMBER=4]="ISSUE_NUMBER",r[r.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",r[r.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",r[r.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",r[r.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",r[r.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",r[r.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Yr||(Yr={}));const Ve=Yr;var Dr=function(){function r(e,t,n,a,i,o){i===void 0&&(i=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.setNumBits=function(e){this.numBits=e},r.prototype.getText=function(){return this.text},r.prototype.getByteSegments=function(){return this.byteSegments},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getErrorsCorrected=function(){return this.errorsCorrected},r.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},r.prototype.getErasures=function(){return this.erasures},r.prototype.setErasures=function(e){this.erasures=e},r.prototype.getOther=function(){return this.other},r.prototype.setOther=function(e){this.other=e},r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},r}(),ar=function(){function r(){}return r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new j;return this.logTable[e]},r.addOrSubtract=function(e,t){return e^t},r}(),Rt=function(){function r(e,t){if(t.length===0)throw new j;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var a=1;a<n&&t[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),xe.arraycopy(t,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,n;if(e===1){n=0;for(var a=0,i=t.length;a!==i;a++){var o=t[a];n=ar.addOrSubtract(n,o)}return n}n=t[0];for(var s=t.length,c=this.field,a=1;a<s;a++)n=ar.addOrSubtract(c.multiply(e,n),t[a]);return n},r.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new j("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var a=t;t=n,n=a}var i=new Int32Array(n.length),o=n.length-t.length;xe.arraycopy(n,0,i,0,o);for(var s=o;s<n.length;s++)i[s]=ar.addOrSubtract(t[s-o],n[s]);return new r(this.field,i)},r.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new j("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,n=t.length,a=e.coefficients,i=a.length,o=new Int32Array(n+i-1),s=this.field,c=0;c<n;c++)for(var f=t[c],u=0;u<i;u++)o[c+u]=ar.addOrSubtract(o[c+u],s.multiply(f,a[u]));return new r(s,o)},r.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,n=this.field,a=new Int32Array(t),i=this.coefficients,o=0;o<t;o++)a[o]=n.multiply(i[o],e);return new r(n,a)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new j;if(t===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,i=new Int32Array(a+e),o=this.field,s=0;s<a;s++)i[s]=o.multiply(n[s],t);return new r(o,i)},r.prototype.divide=function(e){if(!this.field.equals(e.field))throw new j("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new j("Divide by 0");for(var t=this.field,n=t.getZero(),a=this,i=e.getCoefficient(e.getDegree()),o=t.inverse(i);a.getDegree()>=e.getDegree()&&!a.isZero();){var s=a.getDegree()-e.getDegree(),c=t.multiply(a.getCoefficient(a.getDegree()),o),f=e.multiplyByMonomial(s,c),u=t.buildMonomial(s,c);n=n.addOrSubtract(u),a=a.addOrSubtract(f)}return[n,a]},r.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},r}(),di=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),da=function(r){di(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(it),hi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),at=function(r){hi(e,r);function e(t,n,a){var i=r.call(this)||this;i.primitive=t,i.size=n,i.generatorBase=a;for(var o=new Int32Array(n),s=1,c=0;c<n;c++)o[c]=s,s*=2,s>=n&&(s^=t,s&=n-1);i.expTable=o;for(var f=new Int32Array(n),c=0;c<n-1;c++)f[o[c]]=c;return i.logTable=f,i.zero=new Rt(i,Int32Array.from([0])),i.one=new Rt(i,Int32Array.from([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new j;if(n===0)return this.zero;var a=new Int32Array(t+1);return a[0]=n,new Rt(this,a)},e.prototype.inverse=function(t){if(t===0)throw new da;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,n){return t===0||n===0?0:this.expTable[(this.logTable[t]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Y.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(ar),vi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),hr=function(r){vi(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(it),xi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fr=function(r){xi(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(it),Pr=function(){function r(e){this.field=e}return r.prototype.decode=function(e,t){for(var n=this.field,a=new Rt(n,e),i=new Int32Array(t),o=!0,s=0;s<t;s++){var c=a.evaluateAt(n.exp(s+n.getGeneratorBase()));i[i.length-1-s]=c,c!==0&&(o=!1)}if(!o)for(var f=new Rt(n,i),u=this.runEuclideanAlgorithm(n.buildMonomial(t,1),f,t),l=u[0],d=u[1],h=this.findErrorLocations(l),x=this.findErrorMagnitudes(d,h),s=0;s<h.length;s++){var y=e.length-1-n.log(h[s]);if(y<0)throw new hr("Bad error location");e[y]=at.addOrSubtract(e[y],x[s])}},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var a=e;e=t,t=a}for(var i=this.field,o=e,s=t,c=i.getZero(),f=i.getOne();s.getDegree()>=(n/2|0);){var u=o,l=c;if(o=s,c=f,o.isZero())throw new hr("r_{i-1} was zero");s=u;for(var d=i.getZero(),h=o.getCoefficient(o.getDegree()),x=i.inverse(h);s.getDegree()>=o.getDegree()&&!s.isZero();){var y=s.getDegree()-o.getDegree(),_=i.multiply(s.getCoefficient(s.getDegree()),x);d=d.addOrSubtract(i.buildMonomial(y,_)),s=s.addOrSubtract(o.multiplyByMonomial(y,_))}if(f=d.multiply(c).addOrSubtract(l),s.getDegree()>=o.getDegree())throw new fr("Division algorithm failed to reduce polynomial?")}var A=f.getCoefficient(0);if(A===0)throw new hr("sigmaTilde(0) was zero");var w=i.inverse(A),C=f.multiplyScalar(w),p=s.multiplyScalar(w);return[C,p]},r.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),a=0,i=this.field,o=1;o<i.getSize()&&a<t;o++)e.evaluateAt(o)===0&&(n[a]=i.inverse(o),a++);if(a!==t)throw new hr("Error locator degree does not match number of roots");return n},r.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,a=new Int32Array(n),i=this.field,o=0;o<n;o++){for(var s=i.inverse(t[o]),c=1,f=0;f<n;f++)if(o!==f){var u=i.multiply(t[f],s),l=u&1?u&-2:u|1;c=i.multiply(c,l)}a[o]=i.multiply(e.evaluateAt(s),i.inverse(c)),i.getGeneratorBase()!==0&&(a[o]=i.multiply(a[o],s))}return a},r}(),je;(function(r){r[r.UPPER=0]="UPPER",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.DIGIT=3]="DIGIT",r[r.PUNCT=4]="PUNCT",r[r.BINARY=5]="BINARY"})(je||(je={}));var In=function(){function r(){}return r.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),n=this.extractBits(t),a=this.correctBits(n),i=r.convertBoolArrayToByteArray(a),o=r.getEncodedData(a),s=new Dr(i,o,null,null);return s.setNumBits(a.length),s},r.highLevelDecode=function(e){return this.getEncodedData(e)},r.getEncodedData=function(e){for(var t=e.length,n=je.UPPER,a=je.UPPER,i="",o=0;o<t;)if(a===je.BINARY){if(t-o<5)break;var s=r.readCode(e,o,5);if(o+=5,s===0){if(t-o<11)break;s=r.readCode(e,o,11)+31,o+=11}for(var c=0;c<s;c++){if(t-o<8){o=t;break}var f=r.readCode(e,o,8);i+=J.castAsNonUtf8Char(f),o+=8}a=n}else{var u=a===je.DIGIT?4:5;if(t-o<u)break;var f=r.readCode(e,o,u);o+=u;var l=r.getCharacter(a,f);l.startsWith("CTRL_")?(n=a,a=r.getTable(l.charAt(5)),l.charAt(6)==="L"&&(n=a)):(i+=l,a=n)}return i},r.getTable=function(e){switch(e){case"L":return je.LOWER;case"P":return je.PUNCT;case"M":return je.MIXED;case"D":return je.DIGIT;case"B":return je.BINARY;case"U":default:return je.UPPER}},r.getCharacter=function(e,t){switch(e){case je.UPPER:return r.UPPER_TABLE[t];case je.LOWER:return r.LOWER_TABLE[t];case je.MIXED:return r.MIXED_TABLE[t];case je.PUNCT:return r.PUNCT_TABLE[t];case je.DIGIT:return r.DIGIT_TABLE[t];default:throw new fr("Bad table")}},r.prototype.correctBits=function(e){var t,n;this.ddata.getNbLayers()<=2?(n=6,t=at.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=at.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=at.AZTEC_DATA_10):(n=12,t=at.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),i=e.length/n;if(i<a)throw new T;for(var o=e.length%n,s=new Int32Array(i),c=0;c<i;c++,o+=n)s[c]=r.readCode(e,o,n);try{var f=new Pr(t);f.decode(s,i-a)}catch(_){throw new T(_)}for(var u=(1<<n)-1,l=0,c=0;c<a;c++){var d=s[c];if(d===0||d===u)throw new T;(d===1||d===u-1)&&l++}for(var h=new Array(a*n-l),x=0,c=0;c<a;c++){var d=s[c];if(d===1||d===u-1)h.fill(d>1,x,x+n-1),x+=n-1;else for(var y=n-1;y>=0;--y)h[x++]=(d&1<<y)!==0}return h},r.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(t?11:14)+n*4,i=new Int32Array(a),o=new Array(this.totalBitsInLayer(n,t));if(t)for(var s=0;s<i.length;s++)i[s]=s;else for(var c=a+1+2*Y.truncDivision(Y.truncDivision(a,2)-1,15),f=a/2,u=Y.truncDivision(c,2),s=0;s<f;s++){var l=s+Y.truncDivision(s,15);i[f-s-1]=u-l-1,i[f+s]=u+l+1}for(var s=0,d=0;s<n;s++){for(var h=(n-s)*4+(t?9:12),x=s*2,y=a-1-x,_=0;_<h;_++)for(var A=_*2,w=0;w<2;w++)o[d+A+w]=e.get(i[x+w],i[x+_]),o[d+2*h+A+w]=e.get(i[x+_],i[y-w]),o[d+4*h+A+w]=e.get(i[y-w],i[y-_]),o[d+6*h+A+w]=e.get(i[y-_],i[x+w]);d+=h*8}return o},r.readCode=function(e,t,n){for(var a=0,i=t;i<t+n;i++)a<<=1,e[i]&&(a|=1);return a},r.readByte=function(e,t){var n=e.length-t;return n>=8?r.readCode(e,t,8):r.readCode(e,t,n)<<8-n},r.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),n=0;n<t.length;n++)t[n]=r.readByte(e,8*n);return t},r.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],r.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],r.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],r.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],r.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],r}(),te=function(){function r(){}return r.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},r.distance=function(e,t,n,a){var i=e-n,o=t-a;return Math.sqrt(i*i+o*o)},r.sum=function(e){for(var t=0,n=0,a=e.length;n!==a;n++){var i=e[n];t+=i}return t},r}(),Zr=function(){function r(){}return r.floatToIntBits=function(e){return e},r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r}(),M=function(){function r(e,t){this.x=e,this.y=t}return r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.equals=function(e){if(e instanceof r){var t=e;return this.x===t.x&&this.y===t.y}return!1},r.prototype.hashCode=function(){return 31*Zr.floatToIntBits(this.x)+Zr.floatToIntBits(this.y)},r.prototype.toString=function(){return"("+this.x+","+this.y+")"},r.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),i,o,s;if(n>=t&&n>=a?(o=e[0],i=e[1],s=e[2]):a>=n&&a>=t?(o=e[1],i=e[0],s=e[2]):(o=e[2],i=e[0],s=e[1]),this.crossProductZ(i,o,s)<0){var c=i;i=s,s=c}e[0]=i,e[1]=o,e[2]=s},r.distance=function(e,t){return te.distance(e.x,e.y,t.x,t.y)},r.crossProductZ=function(e,t,n){var a=t.x,i=t.y;return(n.x-a)*(e.y-i)-(n.y-i)*(e.x-a)},r}(),nn=function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r}(),pi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gi=function(r){pi(e,r);function e(t,n,a,i,o){var s=r.call(this,t,n)||this;return s.compact=a,s.nbDatablocks=i,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(nn),Qr=function(){function r(e,t,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=r.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=a-i,this.downInit=a+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new b}return r.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,a=this.downInit,i=!1,o=!0,s=!1,c=!1,f=!1,u=!1,l=!1,d=this.width,h=this.height;o;){o=!1;for(var x=!0;(x||!c)&&t<d;)x=this.containsBlackPoint(n,a,t,!1),x?(t++,o=!0,c=!0):c||t++;if(t>=d){i=!0;break}for(var y=!0;(y||!f)&&a<h;)y=this.containsBlackPoint(e,t,a,!0),y?(a++,o=!0,f=!0):f||a++;if(a>=h){i=!0;break}for(var _=!0;(_||!u)&&e>=0;)_=this.containsBlackPoint(n,a,e,!1),_?(e--,o=!0,u=!0):u||e--;if(e<0){i=!0;break}for(var A=!0;(A||!l)&&n>=0;)A=this.containsBlackPoint(e,t,n,!0),A?(n--,o=!0,l=!0):l||n--;if(n<0){i=!0;break}o&&(s=!0)}if(!i&&s){for(var w=t-e,C=null,p=1;C===null&&p<w;p++)C=this.getBlackPointOnSegment(e,a-p,e+p,a);if(C==null)throw new b;for(var S=null,p=1;S===null&&p<w;p++)S=this.getBlackPointOnSegment(e,n+p,e+p,n);if(S==null)throw new b;for(var I=null,p=1;I===null&&p<w;p++)I=this.getBlackPointOnSegment(t,n+p,t-p,n);if(I==null)throw new b;for(var N=null,p=1;N===null&&p<w;p++)N=this.getBlackPointOnSegment(t,a-p,t-p,a);if(N==null)throw new b;return this.centerEdges(N,C,I,S)}else throw new b},r.prototype.getBlackPointOnSegment=function(e,t,n,a){for(var i=te.round(te.distance(e,t,n,a)),o=(n-e)/i,s=(a-t)/i,c=this.image,f=0;f<i;f++){var u=te.round(e+f*o),l=te.round(t+f*s);if(c.get(u,l))return new M(u,l)}return null},r.prototype.centerEdges=function(e,t,n,a){var i=e.getX(),o=e.getY(),s=t.getX(),c=t.getY(),f=n.getX(),u=n.getY(),l=a.getX(),d=a.getY(),h=r.CORR;return i<this.width/2?[new M(l-h,d+h),new M(s+h,c+h),new M(f-h,u-h),new M(i+h,o-h)]:[new M(l+h,d+h),new M(s+h,c-h),new M(f-h,u+h),new M(i-h,o-h)]},r.prototype.containsBlackPoint=function(e,t,n,a){var i=this.image;if(a){for(var o=e;o<=t;o++)if(i.get(o,n))return!0}else for(var s=e;s<=t;s++)if(i.get(n,s))return!0;return!1},r.INIT_SIZE=10,r.CORR=1,r}(),Nn=function(){function r(){}return r.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),a=e.getHeight(),i=!0,o=0;o<t.length&&i;o+=2){var s=Math.floor(t[o]),c=Math.floor(t[o+1]);if(s<-1||s>n||c<-1||c>a)throw new b;i=!1,s===-1?(t[o]=0,i=!0):s===n&&(t[o]=n-1,i=!0),c===-1?(t[o+1]=0,i=!0):c===a&&(t[o+1]=a-1,i=!0)}i=!0;for(var o=t.length-2;o>=0&&i;o-=2){var s=Math.floor(t[o]),c=Math.floor(t[o+1]);if(s<-1||s>n||c<-1||c>a)throw new b;i=!1,s===-1?(t[o]=0,i=!0):s===n&&(t[o]=n-1,i=!0),c===-1?(t[o+1]=0,i=!0):c===a&&(t[o+1]=a-1,i=!0)}},r}(),ha=function(){function r(e,t,n,a,i,o,s,c,f){this.a11=e,this.a21=t,this.a31=n,this.a12=a,this.a22=i,this.a32=o,this.a13=s,this.a23=c,this.a33=f}return r.quadrilateralToQuadrilateral=function(e,t,n,a,i,o,s,c,f,u,l,d,h,x,y,_){var A=r.quadrilateralToSquare(e,t,n,a,i,o,s,c),w=r.squareToQuadrilateral(f,u,l,d,h,x,y,_);return w.times(A)},r.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,a=this.a12,i=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,u=this.a32,l=this.a33,d=0;d<t;d+=2){var h=e[d],x=e[d+1],y=i*h+c*x+l;e[d]=(n*h+o*x+f)/y,e[d+1]=(a*h+s*x+u)/y}},r.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,a=this.a12,i=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,u=this.a32,l=this.a33,d=e.length,h=0;h<d;h++){var x=e[h],y=t[h],_=i*x+c*y+l;e[h]=(n*x+o*y+f)/_,t[h]=(a*x+s*y+u)/_}},r.squareToQuadrilateral=function(e,t,n,a,i,o,s,c){var f=e-n+i-s,u=t-a+o-c;if(f===0&&u===0)return new r(n-e,i-n,e,a-t,o-a,t,0,0,1);var l=n-i,d=s-i,h=a-o,x=c-o,y=l*x-d*h,_=(f*x-d*u)/y,A=(l*u-f*h)/y;return new r(n-e+_*n,s-e+A*s,e,a-t+_*a,c-t+A*c,t,_,A,1)},r.quadrilateralToSquare=function(e,t,n,a,i,o,s,c){return r.squareToQuadrilateral(e,t,n,a,i,o,s,c).buildAdjoint()},r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},r.prototype.times=function(e){return new r(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},r}(),yi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mi=function(r){yi(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,n,a,i,o,s,c,f,u,l,d,h,x,y,_,A,w,C,p){var S=ha.quadrilateralToQuadrilateral(i,o,s,c,f,u,l,d,h,x,y,_,A,w,C,p);return this.sampleGridWithTransform(t,n,a,S)},e.prototype.sampleGridWithTransform=function(t,n,a,i){if(n<=0||a<=0)throw new b;for(var o=new At(n,a),s=new Float32Array(2*n),c=0;c<a;c++){for(var f=s.length,u=c+.5,l=0;l<f;l+=2)s[l]=l/2+.5,s[l+1]=u;i.transformPoints(s),Nn.checkAndNudgePoints(t,s);try{for(var l=0;l<f;l+=2)t.get(Math.floor(s[l]),Math.floor(s[l+1]))&&o.set(l/2,c)}catch{throw new b}}return o},e}(Nn),an=function(){function r(){}return r.setGridSampler=function(e){r.gridSampler=e},r.getInstance=function(){return r.gridSampler},r.gridSampler=new mi,r}(),nt=function(){function r(e,t){this.x=e,this.y=t}return r.prototype.toResultPoint=function(){return new M(this.getX(),this.getY())},r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r}(),wi=function(){function r(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return r.prototype.detect=function(){return this.detectMirror(!1)},r.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new gi(i,o,this.compact,this.nbDataBlocks,this.nbLayers)},r.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new b;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var a=0,i=0;i<4;i++){var o=n[(this.shift+i)%4];this.compact?(a<<=7,a+=o>>1&127):(a<<=10,a+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},r.prototype.getRotation=function(e,t){var n=0;e.forEach(function(i,o,s){var c=(i>>t-2<<1)+(i&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(Y.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new b},r.prototype.getCorrectedParameterData=function(e,t){var n,a;t?(n=7,a=2):(n=10,a=4);for(var i=n-a,o=new Int32Array(n),s=n-1;s>=0;--s)o[s]=e&15,e>>=4;try{var c=new Pr(at.AZTEC_PARAM);c.decode(o,i)}catch{throw new b}for(var f=0,s=0;s<a;s++)f=(f<<4)+o[s];return f},r.prototype.getBullsEyeCorners=function(e){var t=e,n=e,a=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(t,o,1,-1),c=this.getFirstDifferent(n,o,1,1),f=this.getFirstDifferent(a,o,-1,1),u=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){var l=this.distancePoint(u,s)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(l<.75||l>1.25||!this.isWhiteOrBlackRectangle(s,c,f,u))break}t=s,n=c,a=f,i=u,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new b;this.compact=this.nbCenterLayers===5;var d=new M(t.getX()+.5,t.getY()-.5),h=new M(n.getX()+.5,n.getY()+.5),x=new M(a.getX()-.5,a.getY()+.5),y=new M(i.getX()-.5,i.getY()-.5);return this.expandSquare([d,h,x,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},r.prototype.getMatrixCenter=function(){var e,t,n,a;try{var i=new Qr(this.image).detect();e=i[0],t=i[1],n=i[2],a=i[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new nt(o+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new nt(o+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new nt(o-7,s+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new nt(o-7,s-7),!1,-1,-1).toResultPoint()}var c=te.round((e.getX()+a.getX()+t.getX()+n.getX())/4),f=te.round((e.getY()+a.getY()+t.getY()+n.getY())/4);try{var i=new Qr(this.image,15,c,f).detect();e=i[0],t=i[1],n=i[2],a=i[3]}catch{e=this.getFirstDifferent(new nt(c+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new nt(c+7,f+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new nt(c-7,f+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new nt(c-7,f-7),!1,-1,-1).toResultPoint()}return c=te.round((e.getX()+a.getX()+t.getX()+n.getX())/4),f=te.round((e.getY()+a.getY()+t.getY()+n.getY())/4),new nt(c,f)},r.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},r.prototype.sampleGrid=function(e,t,n,a,i){var o=an.getInstance(),s=this.getDimension(),c=s/2-this.nbCenterLayers,f=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,c,c,f,c,f,f,c,f,t.getX(),t.getY(),n.getX(),n.getY(),a.getX(),a.getY(),i.getX(),i.getY())},r.prototype.sampleLine=function(e,t,n){for(var a=0,i=this.distanceResultPoint(e,t),o=i/n,s=e.getX(),c=e.getY(),f=o*(t.getX()-e.getX())/i,u=o*(t.getY()-e.getY())/i,l=0;l<n;l++)this.image.get(te.round(s+l*f),te.round(c+l*u))&&(a|=1<<n-l-1);return a},r.prototype.isWhiteOrBlackRectangle=function(e,t,n,a){var i=3;e=new nt(e.getX()-i,e.getY()+i),t=new nt(t.getX()-i,t.getY()-i),n=new nt(n.getX()+i,n.getY()-i),a=new nt(a.getX()+i,a.getY()+i);var o=this.getColor(a,e);if(o===0)return!1;var s=this.getColor(e,t);return s!==o||(s=this.getColor(t,n),s!==o)?!1:(s=this.getColor(n,a),s===o)},r.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),a=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,o=0,s=e.getX(),c=e.getY(),f=this.image.get(e.getX(),e.getY()),u=Math.ceil(n),l=0;l<u;l++)s+=a,c+=i,this.image.get(te.round(s),te.round(c))!==f&&o++;var d=o/n;return d>.1&&d<.9?0:d<=.1===f?1:-1},r.prototype.getFirstDifferent=function(e,t,n,a){for(var i=e.getX()+n,o=e.getY()+a;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n,o+=a;for(i-=n,o-=a;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=a;return o-=a,new nt(i,o)},r.prototype.expandSquare=function(e,t,n){var a=n/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,f=new M(s+a*i,c+a*o),u=new M(s-a*i,c-a*o);i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var l=new M(s+a*i,c+a*o),d=new M(s-a*i,c-a*o),h=[f,l,u,d];return h},r.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},r.prototype.isValidPoint=function(e){var t=te.round(e.getX()),n=te.round(e.getY());return this.isValid(t,n)},r.prototype.distancePoint=function(e,t){return te.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.distanceResultPoint=function(e,t){return te.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Y.truncDivision(this.nbLayers-4,8)+1)+15},r}(),br=function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=null,a=new wi(e.getBlackMatrix()),i=null,o=null;try{var s=a.detectMirror(!1);i=s.getPoints(),this.reportFoundResultPoints(t,i),o=new In().decode(s)}catch(l){n=l}if(o==null)try{var s=a.detectMirror(!0);i=s.getPoints(),this.reportFoundResultPoints(t,i),o=new In().decode(s)}catch(l){throw n??l}var c=new Ye(o.getText(),o.getRawBytes(),o.getNumBits(),i,F.AZTEC,xe.currentTimeMillis()),f=o.getByteSegments();f!=null&&c.putMetadata(Ve.BYTE_SEGMENTS,f);var u=o.getECLevel();return u!=null&&c.putMetadata(Ve.ERROR_CORRECTION_LEVEL,u),c},r.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var n=e.get(fe.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach(function(a,i,o){n.foundPossibleResultPoint(a)})}},r.prototype.reset=function(){},r}(),_i=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){_i(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new br,t)||this}return e})(Kt);var Te=function(){function r(){}return r.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var n=t&&t.get(fe.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),i=this.doDecode(a,t),o=i.getResultMetadata(),s=270;o!==null&&o.get(Ve.ORIENTATION)===!0&&(s=s+o.get(Ve.ORIENTATION)%360),i.putMetadata(Ve.ORIENTATION,s);var c=i.getResultPoints();if(c!==null)for(var f=a.getHeight(),u=0;u<c.length;u++)c[u]=new M(f-c[u].getY()-1,c[u].getX());return i}else throw new b}},r.prototype.reset=function(){},r.prototype.doDecode=function(e,t){var n=e.getWidth(),a=e.getHeight(),i=new Fe(n),o=t&&t.get(fe.TRY_HARDER)===!0,s=Math.max(1,a>>(o?8:5)),c;o?c=a:c=15;for(var f=Math.trunc(a/2),u=0;u<c;u++){var l=Math.trunc((u+1)/2),d=(u&1)===0,h=f+s*(d?l:-l);if(h<0||h>=a)break;try{i=e.getBlackRow(h,i)}catch{continue}for(var x=function(w){if(w===1&&(i.reverse(),t&&t.get(fe.NEED_RESULT_POINT_CALLBACK)===!0)){var C=new Map;t.forEach(function(I,N){return C.set(N,I)}),C.delete(fe.NEED_RESULT_POINT_CALLBACK),t=C}try{var p=y.decodeRow(h,i,t);if(w===1){p.putMetadata(Ve.ORIENTATION,180);var S=p.getResultPoints();S!==null&&(S[0]=new M(n-S[0].getX()-1,S[0].getY()),S[1]=new M(n-S[1].getX()-1,S[1].getY()))}return{value:p}}catch{}},y=this,_=0;_<2;_++){var A=x(_);if(typeof A=="object")return A.value}}throw new b},r.recordPattern=function(e,t,n){for(var a=n.length,i=0;i<a;i++)n[i]=0;var o=e.getSize();if(t>=o)throw new b;for(var s=!e.get(t),c=0,f=t;f<o;){if(e.get(f)!==s)n[c]++;else{if(++c===a)break;n[c]=1,s=!s}f++}if(!(c===a||c===a-1&&f===o))throw new b},r.recordPatternInReverse=function(e,t,n){for(var a=n.length,i=e.get(t);t>0&&a>=0;)e.get(--t)!==i&&(a--,i=!i);if(a>=0)throw new b;r.recordPattern(e,t+1,n)},r.patternMatchVariance=function(e,t,n){for(var a=e.length,i=0,o=0,s=0;s<a;s++)i+=e[s],o+=t[s];if(i<o)return Number.POSITIVE_INFINITY;var c=i/o;n*=c;for(var f=0,u=0;u<a;u++){var l=e[u],d=t[u]*c,h=l>d?l-d:d-l;if(h>n)return Number.POSITIVE_INFINITY;f+=h}return f/i},r}(),Ai=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),On=function(r){Ai(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var n=t.getSize(),a=t.getNextSet(0),i=0,o=Int32Array.from([0,0,0,0,0,0]),s=a,c=!1,f=6,u=a;u<n;u++)if(t.get(u)!==c)o[i]++;else{if(i===f-1){for(var l=e.MAX_AVG_VARIANCE,d=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var x=Te.patternMatchVariance(o,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);x<l&&(l=x,d=h)}if(d>=0&&t.isRange(Math.max(0,s-(u-s)/2),s,!1))return Int32Array.from([s,u,d]);s+=o[0]+o[1],o=o.slice(2,o.length),o[i-1]=0,o[i]=0,i--}else i++;o[i]=1,c=!c}throw new b},e.decodeCode=function(t,n,a){Te.recordPattern(t,a,n);for(var i=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var c=e.CODE_PATTERNS[s],f=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);f<i&&(i=f,o=s)}if(o>=0)return o;throw new b},e.prototype.decodeRow=function(t,n,a){var i=a&&a.get(fe.ASSUME_GS1)===!0,o=e.findStartPattern(n),s=o[2],c=0,f=new Uint8Array(20);f[c++]=s;var u;switch(s){case e.CODE_START_A:u=e.CODE_CODE_A;break;case e.CODE_START_B:u=e.CODE_CODE_B;break;case e.CODE_START_C:u=e.CODE_CODE_C;break;default:throw new T}for(var l=!1,d=!1,h="",x=o[0],y=o[1],_=Int32Array.from([0,0,0,0,0,0]),A=0,w=0,C=s,p=0,S=!0,I=!1,N=!1;!l;){var R=d;switch(d=!1,A=w,w=e.decodeCode(n,_,y),f[c++]=w,w!==e.CODE_STOP&&(S=!0),w!==e.CODE_STOP&&(p++,C+=p*w),x=y,y+=_.reduce(function(Et,qe){return Et+qe},0),w){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new T}switch(u){case e.CODE_CODE_A:if(w<64)N===I?h+=String.fromCharCode(32+w):h+=String.fromCharCode(32+w+128),N=!1;else if(w<96)N===I?h+=String.fromCharCode(w-64):h+=String.fromCharCode(w+64),N=!1;else switch(w!==e.CODE_STOP&&(S=!1),w){case e.CODE_FNC_1:i&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!I&&N?(I=!0,N=!1):I&&N?(I=!1,N=!1):N=!0;break;case e.CODE_SHIFT:d=!0,u=e.CODE_CODE_B;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:l=!0;break}break;case e.CODE_CODE_B:if(w<96)N===I?h+=String.fromCharCode(32+w):h+=String.fromCharCode(32+w+128),N=!1;else switch(w!==e.CODE_STOP&&(S=!1),w){case e.CODE_FNC_1:i&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!I&&N?(I=!0,N=!1):I&&N?(I=!1,N=!1):N=!0;break;case e.CODE_SHIFT:d=!0,u=e.CODE_CODE_A;break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:l=!0;break}break;case e.CODE_CODE_C:if(w<100)w<10&&(h+="0"),h+=w;else switch(w!==e.CODE_STOP&&(S=!1),w){case e.CODE_FNC_1:i&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_STOP:l=!0;break}break}R&&(u=u===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var k=y-x;if(y=n.getNextUnset(y),!n.isRange(y,Math.min(n.getSize(),y+(y-x)/2),!1))throw new b;if(C-=p*A,C%103!==A)throw new Ae;var B=h.length;if(B===0)throw new b;B>0&&S&&(u===e.CODE_CODE_C?h=h.substring(0,B-2):h=h.substring(0,B-1));for(var ue=(o[1]+o[0])/2,W=x+k/2,ie=f.length,Re=new Uint8Array(ie),Le=0;Le<ie;Le++)Re[Le]=f[Le];var Ct=[new M(ue,t),new M(W,t)];return new Ye(h,Re,0,Ct,F.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Te),Ci=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Lr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tn=function(r){Ci(e,r);function e(t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var a=r.call(this)||this;return a.usingCheckDigit=t,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(t,n,a){var i,o,s,c,f=this.counters;f.fill(0),this.decodeRowResult="";var u=e.findAsteriskPattern(n,f),l=n.getNextSet(u[1]),d=n.getSize(),h,x;do{e.recordPattern(n,l,f);var y=e.toNarrowWidePattern(f);if(y<0)throw new b;h=e.patternToChar(y),this.decodeRowResult+=h,x=l;try{for(var _=(i=void 0,Lr(f)),A=_.next();!A.done;A=_.next()){var w=A.value;l+=w}}catch(ie){i={error:ie}}finally{try{A&&!A.done&&(o=_.return)&&o.call(_)}finally{if(i)throw i.error}}l=n.getNextSet(l)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C=0;try{for(var p=Lr(f),S=p.next();!S.done;S=p.next()){var w=S.value;C+=w}}catch(ie){s={error:ie}}finally{try{S&&!S.done&&(c=p.return)&&c.call(p)}finally{if(s)throw s.error}}var I=l-x-C;if(l!==d&&I*2<C)throw new b;if(this.usingCheckDigit){for(var N=this.decodeRowResult.length-1,R=0,k=0;k<N;k++)R+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(k));if(this.decodeRowResult.charAt(N)!==e.ALPHABET_STRING.charAt(R%43))throw new Ae;this.decodeRowResult=this.decodeRowResult.substring(0,N)}if(this.decodeRowResult.length===0)throw new b;var B;this.extendedMode?B=e.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;var ue=(u[1]+u[0])/2,W=x+C/2;return new Ye(B,null,0,[new M(ue,t),new M(W,t)],F.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,n){for(var a=t.getSize(),i=t.getNextSet(0),o=0,s=i,c=!1,f=n.length,u=i;u<a;u++)if(t.get(u)!==c)n[o]++;else{if(o===f-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((u-s)/2)),s,!1))return[s,u];s+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,c=!c}throw new b},e.toNarrowWidePattern=function(t){var n,a,i=t.length,o=0,s;do{var c=2147483647;try{for(var f=(n=void 0,Lr(t)),u=f.next();!u.done;u=f.next()){var l=u.value;l<c&&l>o&&(c=l)}}catch(y){n={error:y}}finally{try{u&&!u.done&&(a=f.return)&&a.call(f)}finally{if(n)throw n.error}}o=c,s=0;for(var d=0,h=0,x=0;x<i;x++){var l=t[x];l>o&&(h|=1<<i-1-x,s++,d+=l)}if(s===3){for(var x=0;x<i&&s>0;x++){var l=t[x];if(l>o&&(s--,l*2>=d))return-1}return h}}while(s>3);return-1},e.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);if(t===e.ASTERISK_ENCODING)return"*";throw new b},e.decodeExtended=function(t){for(var n=t.length,a="",i=0;i<n;i++){var o=t.charAt(i);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=t.charAt(i+1),c="\0";switch(o){case"+":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new T;break;case"$":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new T;break;case"%":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s==="X"||s==="Y"||s==="Z")c="";else throw new T;break;case"/":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new T;break}a+=c,i++}else a+=o}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Te),Ei=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),kr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rn=function(r){Ei(e,r);function e(){var t=r.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,n,a){var i,o,s,c,f=this.findAsteriskPattern(n),u=n.getNextSet(f[1]),l=n.getSize(),d=this.counters;d.fill(0),this.decodeRowResult="";var h,x;do{e.recordPattern(n,u,d);var y=this.toPattern(d);if(y<0)throw new b;h=this.patternToChar(y),this.decodeRowResult+=h,x=u;try{for(var _=(i=void 0,kr(d)),A=_.next();!A.done;A=_.next()){var w=A.value;u+=w}}catch(k){i={error:k}}finally{try{A&&!A.done&&(o=_.return)&&o.call(_)}finally{if(i)throw i.error}}u=n.getNextSet(u)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C=0;try{for(var p=kr(d),S=p.next();!S.done;S=p.next()){var w=S.value;C+=w}}catch(k){s={error:k}}finally{try{S&&!S.done&&(c=p.return)&&c.call(p)}finally{if(s)throw s.error}}if(u===l||!n.get(u))throw new b;if(this.decodeRowResult.length<2)throw new b;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var I=this.decodeExtended(this.decodeRowResult),N=(f[1]+f[0])/2,R=x+C/2;return new Ye(I,null,0,[new M(N,t),new M(R,t)],F.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var n=t.getSize(),a=t.getNextSet(0);this.counters.fill(0);for(var i=this.counters,o=a,s=!1,c=i.length,f=0,u=a;u<n;u++)if(t.get(u)!==s)i[f]++;else{if(f===c-1){if(this.toPattern(i)===e.ASTERISK_ENCODING)return new Int32Array([o,u]);o+=i[0]+i[1],i.copyWithin(0,2,2+f-1),i[f-1]=0,i[f]=0,f--}else f++;i[f]=1,s=!s}throw new b},e.prototype.toPattern=function(t){var n,a,i=0;try{for(var o=kr(t),s=o.next();!s.done;s=o.next()){var c=s.value;i+=c}}catch(x){n={error:x}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}for(var f=0,u=t.length,l=0;l<u;l++){var d=Math.round(t[l]*9/i);if(d<1||d>4)return-1;if(l&1)f<<=d;else for(var h=0;h<d;h++)f=f<<1|1}return f},e.prototype.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);throw new b},e.prototype.decodeExtended=function(t){for(var n=t.length,a="",i=0;i<n;i++){var o=t.charAt(i);if(o>="a"&&o<="d"){if(i>=n-1)throw new T;var s=t.charAt(i+1),c="\0";switch(o){case"d":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new T;break;case"a":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new T;break;case"b":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s>="X"&&s<="Z")c="";else throw new T;break;case"c":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new T;break}a+=c,i++}else a+=o}return a},e.prototype.checkChecksums=function(t){var n=t.length;this.checkOneChecksum(t,n-2,20),this.checkOneChecksum(t,n-1,15)},e.prototype.checkOneChecksum=function(t,n,a){for(var i=1,o=0,s=n-1;s>=0;s--)o+=i*e.ALPHABET_STRING.indexOf(t.charAt(s)),++i>a&&(i=1);if(t.charAt(n)!==e.ALPHABET_STRING[o%47])throw new Ae},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Te),bi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Si=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dn=function(r){bi(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,n,a){var i,o,s=this.decodeStart(n),c=this.decodeEnd(n),f=new $;e.decodeMiddle(n,s[1],c[0],f);var u=f.toString(),l=null;a!=null&&(l=a.get(fe.ALLOWED_LENGTHS)),l==null&&(l=e.DEFAULT_ALLOWED_LENGTHS);var d=u.length,h=!1,x=0;try{for(var y=Si(l),_=y.next();!_.done;_=y.next()){var A=_.value;if(d===A){h=!0;break}A>x&&(x=A)}}catch(p){i={error:p}}finally{try{_&&!_.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}if(!h&&d>x&&(h=!0),!h)throw new T;var w=[new M(s[1],t),new M(c[0],t)],C=new Ye(u,null,0,w,F.ITF,new Date().getTime());return C},e.decodeMiddle=function(t,n,a,i){var o=new Int32Array(10),s=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),s.fill(0),c.fill(0);n<a;){Te.recordPattern(t,n,o);for(var f=0;f<5;f++){var u=2*f;s[f]=o[u],c[f]=o[u+1]}var l=e.decodeDigit(s);i.append(l.toString()),l=this.decodeDigit(c),i.append(l.toString()),o.forEach(function(d){n+=d})}},e.prototype.decodeStart=function(t){var n=e.skipWhiteSpace(t),a=e.findGuardPattern(t,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(t,a[0]),a},e.prototype.validateQuietZone=function(t,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var i=n-1;a>0&&i>=0&&!t.get(i);i--)a--;if(a!==0)throw new b},e.skipWhiteSpace=function(t){var n=t.getSize(),a=t.getNextSet(0);if(a===n)throw new b;return a},e.prototype.decodeEnd=function(t){t.reverse();try{var n=e.skipWhiteSpace(t),a=void 0;try{a=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof b&&(a=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,a[0]);var i=a[0];return a[0]=t.getSize()-a[1],a[1]=t.getSize()-i,a}finally{t.reverse()}},e.findGuardPattern=function(t,n,a){var i=a.length,o=new Int32Array(i),s=t.getSize(),c=!1,f=0,u=n;o.fill(0);for(var l=n;l<s;l++)if(t.get(l)!==c)o[f]++;else{if(f===i-1){if(Te.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[u,l];u+=o[0]+o[1],xe.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,c=!c}throw new b},e.decodeDigit=function(t){for(var n=e.MAX_AVG_VARIANCE,a=-1,i=e.PATTERNS.length,o=0;o<i;o++){var s=e.PATTERNS[o],c=Te.patternMatchVariance(t,s,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=o):c===n&&(a=-1)}if(a>=0)return a%10;throw new b},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Te),Ii=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qt=function(r){Ii(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var n=!1,a,i=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),a=e.findGuardPattern(t,i,!1,this.START_END_PATTERN,o);var s=a[0];i=a[1];var c=s-(i-s);c>=0&&(n=t.isRange(c,s,!1))}return a},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var a=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,a=0,i=n-1;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new T;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new T;a+=o}return(1e3-a)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,n,a,i){return this.findGuardPattern(t,n,a,i,new Int32Array(i.length))},e.findGuardPattern=function(t,n,a,i,o){var s=t.getSize();n=a?t.getNextUnset(n):t.getNextSet(n);for(var c=0,f=n,u=i.length,l=a,d=n;d<s;d++)if(t.get(d)!==l)o[c]++;else{if(c===u-1){if(Te.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,d]);f+=o[0]+o[1];for(var h=o.slice(2,o.length),x=0;x<c-1;x++)o[x]=h[x];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,l=!l}throw new b},e.decodeDigit=function(t,n,a,i){this.recordPattern(t,a,n);for(var o=this.MAX_AVG_VARIANCE,s=-1,c=i.length,f=0;f<c;f++){var u=i[f],l=Te.patternMatchVariance(n,u,e.MAX_INDIVIDUAL_VARIANCE);l<o&&(o=l,s=f)}if(s>=0)return s;throw new b},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Te),Ni=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oi=function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,a),o=a.toString(),s=r.parseExtensionString(o),c=[new M((n[0]+n[1])/2,e),new M(i,e)],f=new Ye(o,null,0,c,F.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},r.prototype.decodeMiddle=function(e,t,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=t[1],f=0,u=0;u<5&&c<s;u++){var l=Qt.decodeDigit(e,o,c,Qt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+l%10);try{for(var d=(a=void 0,Ni(o)),h=d.next();!h.done;h=d.next()){var x=h.value;c+=x}}catch(_){a={error:_}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}l>=10&&(f|=1<<4-u),u!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new b;var y=this.determineCheckDigit(f);if(r.extensionChecksum(n.toString())!==y)throw new b;return c},r.extensionChecksum=function(e){for(var t=e.length,n=0,a=t-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=t-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},r.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new b},r.parseExtensionString=function(e){if(e.length!==5)return null;var t=r.parseExtension5String(e);return t==null?null:new Map([[Ve.SUGGESTED_PRICE,t]])},r.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),i=n%100,o=i<10?"0"+i:i.toString();return t+a+"."+o},r}(),Ti=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ri=function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,a),o=a.toString(),s=r.parseExtensionString(o),c=[new M((n[0]+n[1])/2,e),new M(i,e)],f=new Ye(o,null,0,c,F.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},r.prototype.decodeMiddle=function(e,t,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=t[1],f=0,u=0;u<2&&c<s;u++){var l=Qt.decodeDigit(e,o,c,Qt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+l%10);try{for(var d=(a=void 0,Ti(o)),h=d.next();!h.done;h=d.next()){var x=h.value;c+=x}}catch(y){a={error:y}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}l>=10&&(f|=1<<1-u),u!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new b;if(parseInt(n.toString())%4!==f)throw new b;return c},r.parseExtensionString=function(e){return e.length!==2?null:new Map([[Ve.ISSUE_NUMBER,parseInt(e)]])},r}(),Di=function(){function r(){}return r.decodeRow=function(e,t,n){var a=Qt.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var i=new Oi;return i.decodeRow(e,t,a)}catch{var o=new Ri;return o.decodeRow(e,t,a)}},r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),r}(),Pi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ie=function(r){Pi(e,r);function e(){var t=r.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],i=new Int32Array(a.length),o=0;o<a.length;o++)i[o]=a[a.length-o-1];e.L_AND_G_PATTERNS[n]=i}return t}return e.prototype.decodeRow=function(t,n,a){var i=e.findStartGuardPattern(n),o=a==null?null:a.get(fe.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new M((i[0]+i[1])/2,t);o.foundPossibleResultPoint(s)}var c=this.decodeMiddle(n,i,this.decodeRowStringBuffer),f=c.rowOffset,u=c.resultString;if(o!=null){var l=new M(f,t);o.foundPossibleResultPoint(l)}var d=e.decodeEnd(n,f);if(o!=null){var h=new M((d[0]+d[1])/2,t);o.foundPossibleResultPoint(h)}var x=d[1],y=x+(x-d[0]);if(y>=n.getSize()||!n.isRange(x,y,!1))throw new b;var _=u.toString();if(_.length<8)throw new T;if(!e.checkChecksum(_))throw new Ae;var A=(i[1]+i[0])/2,w=(d[1]+d[0])/2,C=this.getBarcodeFormat(),p=[new M(A,t),new M(w,t)],S=new Ye(_,null,0,p,C,new Date().getTime()),I=0;try{var N=Di.decodeRow(t,n,d[1]);S.putMetadata(Ve.UPC_EAN_EXTENSION,N.getText()),S.putAllMetadata(N.getResultMetadata()),S.addResultPoints(N.getResultPoints()),I=N.getText().length}catch{}var R=a==null?null:a.get(fe.ALLOWED_EAN_EXTENSIONS);if(R!=null){var k=!1;for(var B in R)if(I.toString()===B){k=!0;break}if(!k)throw new b}return C===F.EAN_13||F.UPC_A,S},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var a=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,a=0,i=n-1;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new T;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new T;a+=o}return(1e3-a)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Qt),Mi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kr=function(r){Mi(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,a){var i,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var u=t.getSize(),l=n[1],d=0,h=0;h<6&&l<u;h++){var x=Ie.decodeDigit(t,f,l,Ie.L_AND_G_PATTERNS);a+=String.fromCharCode(48+x%10);try{for(var y=(i=void 0,Pn(f)),_=y.next();!_.done;_=y.next()){var A=_.value;l+=A}}catch(S){i={error:S}}finally{try{_&&!_.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}x>=10&&(d|=1<<5-h)}a=e.determineFirstDigit(a,d);var w=Ie.findGuardPattern(t,l,!0,Ie.MIDDLE_PATTERN,new Int32Array(Ie.MIDDLE_PATTERN.length).fill(0));l=w[1];for(var h=0;h<6&&l<u;h++){var x=Ie.decodeDigit(t,f,l,Ie.L_PATTERNS);a+=String.fromCharCode(48+x);try{for(var C=(s=void 0,Pn(f)),p=C.next();!p.done;p=C.next()){var A=p.value;l+=A}}catch(N){s={error:N}}finally{try{p&&!p.done&&(c=C.return)&&c.call(C)}finally{if(s)throw s.error}}}return{rowOffset:l,resultString:a}},e.prototype.getBarcodeFormat=function(){return F.EAN_13},e.determineFirstDigit=function(t,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return t=String.fromCharCode(48+a)+t,t;throw new b},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Ie),Bi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bn=function(r){Bi(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,a){var i,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var u=t.getSize(),l=n[1],d=0;d<4&&l<u;d++){var h=Ie.decodeDigit(t,f,l,Ie.L_PATTERNS);a+=String.fromCharCode(48+h);try{for(var x=(i=void 0,Mn(f)),y=x.next();!y.done;y=x.next()){var _=y.value;l+=_}}catch(p){i={error:p}}finally{try{y&&!y.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}}var A=Ie.findGuardPattern(t,l,!0,Ie.MIDDLE_PATTERN,new Int32Array(Ie.MIDDLE_PATTERN.length).fill(0));l=A[1];for(var d=0;d<4&&l<u;d++){var h=Ie.decodeDigit(t,f,l,Ie.L_PATTERNS);a+=String.fromCharCode(48+h);try{for(var w=(s=void 0,Mn(f)),C=w.next();!C.done;C=w.next()){var _=C.value;l+=_}}catch(I){s={error:I}}finally{try{C&&!C.done&&(c=w.return)&&c.call(w)}finally{if(s)throw s.error}}}return{rowOffset:l,resultString:a}},e.prototype.getBarcodeFormat=function(){return F.EAN_8},e}(Ie),Fi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fn=function(r){Fi(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ean13Reader=new Kr,t}return e.prototype.getBarcodeFormat=function(){return F.UPC_A},e.prototype.decode=function(t,n){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,n,a))},e.prototype.decodeMiddle=function(t,n,a){return this.ean13Reader.decodeMiddle(t,n,a)},e.prototype.maybeReturnResult=function(t){var n=t.getText();if(n.charAt(0)==="0"){var a=new Ye(n.substring(1),null,null,t.getResultPoints(),F.UPC_A);return t.getResultMetadata()!=null&&a.putAllMetadata(t.getResultMetadata()),a}else throw new b},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Ie),Li=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ki=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ln=function(r){Li(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,n,a){var i,o,s=this.decodeMiddleCounters.map(function(_){return _});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=t.getSize(),f=n[1],u=0,l=0;l<6&&f<c;l++){var d=e.decodeDigit(t,s,f,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+d%10);try{for(var h=(i=void 0,ki(s)),x=h.next();!x.done;x=h.next()){var y=x.value;f+=y}}catch(_){i={error:_}}finally{try{x&&!x.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}d>=10&&(u|=1<<5-l)}return e.determineNumSysAndCheckDigit(new $(a),u),f},e.prototype.decodeEnd=function(t,n){return e.findGuardPatternWithoutCounters(t,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Ie.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,n){for(var a=0;a<=1;a++)for(var i=0;i<10;i++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][i]){t.insert(0,"0"+a),t.append("0"+i);return}throw b.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return F.UPC_E},e.convertUPCEtoUPCA=function(t){var n=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),a=new $;a.append(t.charAt(0));var i=n[5];switch(i){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(i),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(i);break}return t.length>=8&&a.append(t.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Ie),ji=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),kn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jr=function(r){ji(e,r);function e(t){var n=r.call(this)||this,a=t==null?null:t.get(fe.POSSIBLE_FORMATS),i=[];return a!=null&&(a.indexOf(F.EAN_13)>-1&&i.push(new Kr),a.indexOf(F.UPC_A)>-1&&i.push(new Fn),a.indexOf(F.EAN_8)>-1&&i.push(new Bn),a.indexOf(F.UPC_E)>-1&&i.push(new Ln)),i.length===0&&(i.push(new Kr),i.push(new Fn),i.push(new Bn),i.push(new Ln)),n.readers=i,n}return e.prototype.decodeRow=function(t,n,a){var i,o;try{for(var s=kn(this.readers),c=s.next();!c.done;c=s.next()){var f=c.value;try{var u=f.decodeRow(t,n,a),l=u.getBarcodeFormat()===F.EAN_13&&u.getText().charAt(0)==="0",d=a==null?null:a.get(fe.POSSIBLE_FORMATS),h=d==null||d.includes(F.UPC_A);if(l&&h){var x=u.getRawBytes(),y=new Ye(u.getText().substring(1),x,x?x.length:null,u.getResultPoints(),F.UPC_A);return y.putAllMetadata(u.getResultMetadata()),y}return u}catch{}}}catch(_){i={error:_}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}throw new b},e.prototype.reset=function(){var t,n;try{for(var a=kn(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;o.reset()}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},e}(Te),Ui=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vi=function(r){Ui(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,n,a){var i=this.getValidRowData(n);if(!i)throw new b;var o=this.codaBarDecodeRow(i.row);if(!o)throw new b;return new Ye(o,null,0,[new M(i.left,t),new M(i.right,t)],F.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var n=t.toArray(),a=n.indexOf(!0);if(a===-1)return null;var i=n.lastIndexOf(!0);if(i<=a)return null;n=n.slice(a,i+1);for(var o=[],s=n[0],c=1,f=1;f<n.length;f++)n[f]===s?c++:(s=n[f],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:a,right:i}},e.prototype.codaBarDecodeRow=function(t){for(var n=[],a=Math.ceil(t.reduce(function(c,f){return(c+f)/2},0));t.length>0;){var i=t.splice(0,8).splice(0,7),o=i.map(function(c){return c<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(t){var n=/^[A-D].{1,}[A-D]$/;return n.test(t)},e}(Te),Hi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gi=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jt=function(r){Hi(e,r);function e(){var t=r.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,n){for(var a=0;a<n.length;a++)if(Te.patternMatchVariance(t,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new b},e.count=function(t){return te.sum(new Int32Array(t))},e.increment=function(t,n){for(var a=0,i=n[0],o=1;o<t.length;o++)n[o]>i&&(i=n[o],a=o);t[a]++},e.decrement=function(t,n){for(var a=0,i=n[0],o=1;o<t.length;o++)n[o]<i&&(i=n[o],a=o);t[a]--},e.isFinderPattern=function(t){var n,a,i=t[0]+t[1],o=i+t[2]+t[3],s=i/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var u=Gi(t),l=u.next();!l.done;l=u.next()){var d=l.value;d>f&&(f=d),d<c&&(c=d)}}catch(h){n={error:h}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}return f<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Te),Sr=function(){function r(e,t){this.value=e,this.checksumPortion=t}return r.prototype.getValue=function(){return this.value},r.prototype.getChecksumPortion=function(){return this.checksumPortion},r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},r.prototype.hashCode=function(){return this.value^this.checksumPortion},r}(),va=function(){function r(e,t,n,a,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new M(n,i)),this.resultPoints.push(new M(a,i))}return r.prototype.getValue=function(){return this.value},r.prototype.getStartEnd=function(){return this.startEnd},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.hashCode=function(){return this.value},r}(),Xi=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zt=function(){function r(){}return r.getRSSvalue=function(e,t,n){var a,i,o=0;try{for(var s=Xi(e),c=s.next();!c.done;c=s.next()){var f=c.value;o+=f}}catch(w){a={error:w}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}for(var u=0,l=0,d=e.length,h=0;h<d-1;h++){var x=void 0;for(x=1,l|=1<<h;x<e[h];x++,l&=~(1<<h)){var y=r.combins(o-x-1,d-h-2);if(n&&l===0&&o-x-(d-h-1)>=d-h-1&&(y-=r.combins(o-x-(d-h),d-h-2)),d-h-1>1){for(var _=0,A=o-x-(d-h-2);A>t;A--)_+=r.combins(o-x-A-1,d-h-3);y-=_*(d-1-h)}else o-x>t&&y--;u+=y}o-=x}return u},r.combins=function(e,t){var n,a;e-t>t?(a=t,n=e-t):(a=e-t,n=t);for(var i=1,o=1,s=e;s>n;s--)i*=s,o<=a&&(i/=o,o++);for(;o<=a;)i/=o,o++;return i},r}(),Wi=function(){function r(){}return r.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var n=12*t,a=new Fe(n),i=0,o=e[0],s=o.getRightChar().getValue(),c=11;c>=0;--c)s&1<<c&&a.set(i),i++;for(var c=1;c<e.length;++c){for(var f=e[c],u=f.getLeftChar().getValue(),l=11;l>=0;--l)u&1<<l&&a.set(i),i++;if(f.getRightChar()!==null)for(var d=f.getRightChar().getValue(),l=11;l>=0;--l)d&1<<l&&a.set(i),i++}return a},r}(),Lt=function(){function r(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return r.prototype.getDecodedInformation=function(){return this.decodedInformation},r.prototype.isFinished=function(){return this.finished},r}(),on=function(){function r(e){this.newPosition=e}return r.prototype.getNewPosition=function(){return this.newPosition},r}(),zi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pt=function(r){zi(e,r);function e(t,n){var a=r.call(this,t)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(on),$i=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),kt=function(r){$i(e,r);function e(t,n,a){var i=r.call(this,t)||this;return a?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=n,i}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(on),Yi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xt=function(r){Yi(e,r);function e(t,n,a){var i=r.call(this,t)||this;if(n<0||n>10||a<0||a>10)throw new T;return i.firstDigit=n,i.secondDigit=a,i}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(on),vr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zi=function(){function r(){}return r.parseFieldsInGeneralPurpose=function(e){var t,n,a,i,o,s,c,f;if(!e)return null;if(e.length<2)throw new b;var u=e.substring(0,2);try{for(var l=vr(r.TWO_DIGIT_DATA_LENGTH),d=l.next();!d.done;d=l.next()){var h=d.value;if(h[0]===u)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(2,h[2],e):r.processFixedAI(2,h[1],e)}}catch(I){t={error:I}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}if(e.length<3)throw new b;var x=e.substring(0,3);try{for(var y=vr(r.THREE_DIGIT_DATA_LENGTH),_=y.next();!_.done;_=y.next()){var h=_.value;if(h[0]===x)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(3,h[2],e):r.processFixedAI(3,h[1],e)}}catch(I){a={error:I}}finally{try{_&&!_.done&&(i=y.return)&&i.call(y)}finally{if(a)throw a.error}}try{for(var A=vr(r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),w=A.next();!w.done;w=A.next()){var h=w.value;if(h[0]===x)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,h[2],e):r.processFixedAI(4,h[1],e)}}catch(I){o={error:I}}finally{try{w&&!w.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}if(e.length<4)throw new b;var C=e.substring(0,4);try{for(var p=vr(r.FOUR_DIGIT_DATA_LENGTH),S=p.next();!S.done;S=p.next()){var h=S.value;if(h[0]===C)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,h[2],e):r.processFixedAI(4,h[1],e)}}catch(I){c={error:I}}finally{try{S&&!S.done&&(f=p.return)&&f.call(p)}finally{if(c)throw c.error}}throw new b},r.processFixedAI=function(e,t,n){if(n.length<e)throw new b;var a=n.substring(0,e);if(n.length<e+t)throw new b;var i=n.substring(e,e+t),o=n.substring(e+t),s="("+a+")"+i,c=r.parseFieldsInGeneralPurpose(o);return c==null?s:s+c},r.processVariableAI=function(e,t,n){var a=n.substring(0,e),i;n.length<e+t?i=n.length:i=e+t;var o=n.substring(e,i),s=n.substring(i),c="("+a+")"+o,f=r.parseFieldsInGeneralPurpose(s);return f==null?c:c+f},r.VARIABLE_LENGTH=[],r.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",r.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",r.VARIABLE_LENGTH,20],["22",r.VARIABLE_LENGTH,29],["30",r.VARIABLE_LENGTH,8],["37",r.VARIABLE_LENGTH,8],["90",r.VARIABLE_LENGTH,30],["91",r.VARIABLE_LENGTH,30],["92",r.VARIABLE_LENGTH,30],["93",r.VARIABLE_LENGTH,30],["94",r.VARIABLE_LENGTH,30],["95",r.VARIABLE_LENGTH,30],["96",r.VARIABLE_LENGTH,30],["97",r.VARIABLE_LENGTH,3],["98",r.VARIABLE_LENGTH,30],["99",r.VARIABLE_LENGTH,30]],r.THREE_DIGIT_DATA_LENGTH=[["240",r.VARIABLE_LENGTH,30],["241",r.VARIABLE_LENGTH,30],["242",r.VARIABLE_LENGTH,6],["250",r.VARIABLE_LENGTH,30],["251",r.VARIABLE_LENGTH,30],["253",r.VARIABLE_LENGTH,17],["254",r.VARIABLE_LENGTH,20],["400",r.VARIABLE_LENGTH,30],["401",r.VARIABLE_LENGTH,30],["402",17],["403",r.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",r.VARIABLE_LENGTH,20],["421",r.VARIABLE_LENGTH,15],["422",3],["423",r.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",r.VARIABLE_LENGTH,15],["391",r.VARIABLE_LENGTH,18],["392",r.VARIABLE_LENGTH,15],["393",r.VARIABLE_LENGTH,18],["703",r.VARIABLE_LENGTH,30]],r.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",r.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",r.VARIABLE_LENGTH,20],["8003",r.VARIABLE_LENGTH,30],["8004",r.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",r.VARIABLE_LENGTH,30],["8008",r.VARIABLE_LENGTH,12],["8018",18],["8020",r.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",r.VARIABLE_LENGTH,70],["8200",r.VARIABLE_LENGTH,70]],r}(),Ar=function(){function r(e){this.buffer=new $,this.information=e}return r.prototype.decodeAllCodes=function(e,t){var n=t,a=null;do{var i=this.decodeGeneralPurposeField(n,a),o=Zi.parseFieldsInGeneralPurpose(i.getNewString());if(o!=null&&e.append(o),i.isRemaining()?a=""+i.getRemainingValue():a=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()},r.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},r.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Xt(this.information.getSize(),Xt.FNC1,Xt.FNC1):new Xt(this.information.getSize(),t-1,Xt.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,i=(n-8)%11;return new Xt(e+7,a,i)},r.prototype.extractNumericValueFromBitArray=function(e,t){return r.extractNumericValueFromBitArray(this.information,e,t)},r.extractNumericValueFromBitArray=function(e,t,n){for(var a=0,i=0;i<n;++i)e.get(t+i)&&(a|=1<<n-i-1);return a},r.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new kt(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new kt(this.current.getPosition(),this.buffer.toString())},r.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return t.getDecodedInformation()},r.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new kt(this.current.getPosition(),this.buffer.toString()):t=new kt(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Lt(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new kt(this.current.getPosition(),this.buffer.toString());return new Lt(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Lt(!1)},r.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new kt(this.current.getPosition(),this.buffer.toString());return new Lt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Lt(!1)},r.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new kt(this.current.getPosition(),this.buffer.toString());return new Lt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Lt(!1)},r.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},r.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new pt(e+5,pt.FNC1);if(t>=5&&t<15)return new pt(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new pt(e+7,""+(n+1));if(n>=90&&n<116)return new pt(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),i;switch(a){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new T}return new pt(e+8,i)},r.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},r.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new pt(e+5,pt.FNC1);if(t>=5&&t<15)return new pt(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new pt(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new fr("Decoding invalid alphanumeric value: "+n)}return new pt(e+6,a)},r.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},r.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},r.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},r}(),xa=function(){function r(e){this.information=e,this.generalDecoder=new Ar(e)}return r.prototype.getInformation=function(){return this.information},r.prototype.getGeneralDecoder=function(){return this.generalDecoder},r}(),Qi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gt=function(r){Qi(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,n){t.append("(01)");var a=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(t,n,a){for(var i=0;i<4;++i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,a)},e.appendCheckDigit=function(t,n){for(var a=0,i=0;i<13;i++){var o=t.charAt(i+n).charCodeAt(0)-48;a+=i&1?o:3*o}a=10-a%10,a===10&&(a=0),t.append(a)},e.GTIN_SIZE=40,e}(xa),Ki=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ji=function(r){Ki(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new $;t.append("(01)");var n=t.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(a),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(gt),qi=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),eo=function(r){qi(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new $;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(xa),to=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Cr=function(r){to(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,n,a){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(t,i);for(var o=this.checkWeight(i),s=1e5,c=0;c<5;++c)o/s===0&&t.append("0"),s/=10;t.append(o)},e}(gt),ro=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pa=function(r){ro(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Cr.GTIN_SIZE+e.WEIGHT_SIZE)throw new b;var t=new $;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Cr.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Cr),no=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ao=function(r){no(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(pa),io=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),oo=function(r){io(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){n<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(pa),so=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),co=function(r){so(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+gt.GTIN_SIZE)throw new b;var t=new $;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+gt.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+gt.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(gt),fo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),uo=function(r){fo(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+gt.GTIN_SIZE)throw new b;var t=new $;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+gt.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+gt.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&t.append("0"),a/10===0&&t.append("0"),t.append(a);var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+gt.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(gt),lo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nt=function(r){lo(e,r);function e(t,n,a){var i=r.call(this,t)||this;return i.dateCode=a,i.firstAIdigits=n,i}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new b;var t=new $;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){t.append("("),t.append(this.dateCode),t.append(")");var i=a%32;a/=32;var o=a%12+1;a/=12;var s=a;s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o),i/10===0&&t.append("0"),t.append(i)}},e.prototype.addWeightCode=function(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Cr);function ho(r){try{if(r.get(1))return new Ji(r);if(!r.get(2))return new eo(r);var e=Ar.extractNumericValueFromBitArray(r,1,4);switch(e){case 4:return new ao(r);case 5:return new oo(r)}var t=Ar.extractNumericValueFromBitArray(r,1,5);switch(t){case 12:return new co(r);case 13:return new uo(r)}var n=Ar.extractNumericValueFromBitArray(r,1,7);switch(n){case 56:return new Nt(r,"310","11");case 57:return new Nt(r,"320","11");case 58:return new Nt(r,"310","13");case 59:return new Nt(r,"320","13");case 60:return new Nt(r,"310","15");case 61:return new Nt(r,"320","15");case 62:return new Nt(r,"310","17");case 63:return new Nt(r,"320","17")}}catch(a){throw console.log(a),new fr("unknown decoder: "+r)}}var jn=function(){function r(e,t,n,a){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=a}return r.prototype.mayBeLast=function(){return this.maybeLast},r.prototype.getLeftChar=function(){return this.leftchar},r.prototype.getRightChar=function(){return this.rightchar},r.prototype.getFinderPattern=function(){return this.finderpattern},r.prototype.mustBeLast=function(){return this.rightchar==null},r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},r.equals=function(e,t){return e instanceof r?r.equalsOrNull(e.leftchar,t.leftchar)&&r.equalsOrNull(e.rightchar,t.rightchar)&&r.equalsOrNull(e.finderpattern,t.finderpattern):!1},r.equalsOrNull=function(e,t){return e===null?t===null:r.equals(e,t)},r.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},r}(),vo=function(){function r(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return r.prototype.getPairs=function(){return this.pairs},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.isReversed=function(){return this.wasReversed},r.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},r.prototype.toString=function(){return"{ "+this.pairs+" }"},r.prototype.equals=function(e,t){return e instanceof r?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},r.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var n;return e.forEach(function(a,i){t.forEach(function(o){a.getLeftChar().getValue()===o.getLeftChar().getValue()&&a.getRightChar().getValue()===o.getRightChar().getValue()&&a.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},r}(),xo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ot=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},po=function(r){xo(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,t))}catch(s){if(s instanceof b){if(!this.pairs.length)throw new b;a=!0}}if(this.checkChecksum())return this.pairs;var i;if(this.rows.length?i=!0:i=!1,this.storeRow(t,!1),i){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new b},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return t&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(t,n){for(var a,i,o=n;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var c=(a=void 0,Ot(t)),f=c.next();!f.done;f=c.next()){var u=f.value;this.pairs.push(u.getPairs())}}catch(d){a={error:d}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var l=new Array(t);l.push(s);try{return this.checkRows(l,o+1)}catch(d){console.log(d)}}}throw new b},e.isValidSequence=function(t){var n,a;try{for(var i=Ot(e.FINDER_PATTERN_SEQUENCES),o=i.next();!o.done;o=i.next()){var s=o.value;if(!(t.length>s.length)){for(var c=!0,f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!==s[f]){c=!1;break}if(c)return!0}}}catch(u){n={error:u}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(t,n){for(var a=0,i=!1,o=!1;a<this.rows.length;){var s=this.rows[a];if(s.getRowNumber()>t){o=s.isEquivalent(this.pairs);break}i=s.isEquivalent(this.pairs),a++}o||i||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new vo(this.pairs,t,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,n){var a,i,o,s,c,f;try{for(var u=Ot(n),l=u.next();!l.done;l=u.next()){var d=l.value;if(d.getPairs().length!==t.length){var h=!0;try{for(var x=(o=void 0,Ot(d.getPairs())),y=x.next();!y.done;y=x.next()){var _=y.value,A=!1;try{for(var w=(c=void 0,Ot(t)),C=w.next();!C.done;C=w.next()){var p=C.value;if(jn.equals(_,p)){A=!0;break}}}catch(S){c={error:S}}finally{try{C&&!C.done&&(f=w.return)&&f.call(w)}finally{if(c)throw c.error}}A||(h=!1)}}catch(S){o={error:S}}finally{try{y&&!y.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}}}}catch(S){a={error:S}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}},e.isPartialRow=function(t,n){var a,i,o,s,c,f;try{for(var u=Ot(n),l=u.next();!l.done;l=u.next()){var d=l.value,h=!0;try{for(var x=(o=void 0,Ot(t)),y=x.next();!y.done;y=x.next()){var _=y.value,A=!1;try{for(var w=(c=void 0,Ot(d.getPairs())),C=w.next();!C.done;C=w.next()){var p=C.value;if(_.equals(p)){A=!0;break}}}catch(S){c={error:S}}finally{try{C&&!C.done&&(f=w.return)&&f.call(w)}finally{if(c)throw c.error}}if(!A){h=!1;break}}}catch(S){o={error:S}}finally{try{y&&!y.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}if(h)return!0}}catch(S){a={error:S}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var n=Wi.buildBitArray(t),a=ho(n),i=a.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),s=t[t.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],s[0],s[1]];return new Ye(i,null,null,c,F.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),n=t.getLeftChar(),a=t.getRightChar();if(a===null)return!1;for(var i=a.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var c=this.pairs.get(s);i+=c.getLeftChar().getChecksumPortion(),o++;var f=c.getRightChar();f!=null&&(i+=f.getChecksumPortion(),o++)}i%=211;var u=211*(o-4)+i;return u===n.getValue()},e.getNextSecondBar=function(t,n){var a;return t.get(n)?(a=t.getNextUnset(n),a=t.getNextSet(a)):(a=t.getNextSet(n),a=t.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(t,n,a){var i=n.length%2===0;this.startFromEven&&(i=!i);var o,s=!0,c=-1;do this.findNextPair(t,n,c),o=this.parseFoundFinderPattern(t,a,i),o===null?c=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var f=this.decodeDataCharacter(t,o,i,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new b;var u;try{u=this.decodeDataCharacter(t,o,i,!1)}catch(l){u=null,console.log(l)}return new jn(f,u,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,n,a){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var o=t.getSize(),s;if(a>=0)s=a;else if(this.isEmptyPair(n))s=0;else{var c=n[n.length-1];s=c.getFinderPattern().getStartEnd()[1]}var f=n.length%2!==0;this.startFromEven&&(f=!f);for(var u=!1;s<o&&(u=!t.get(s),!!u);)s++;for(var l=0,d=s,h=s;h<o;h++)if(t.get(h)!==u)i[l]++;else{if(l===3){if(f&&e.reverseCounters(i),e.isFinderPattern(i)){this.startEnd[0]=d,this.startEnd[1]=h;return}f&&e.reverseCounters(i),d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,u=!u}throw new b},e.reverseCounters=function(t){for(var n=t.length,a=0;a<n/2;++a){var i=t[a];t[a]=t[n-a-1],t[n-a-1]=i}},e.prototype.parseFoundFinderPattern=function(t,n,a){var i,o,s;if(a){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,i=this.startEnd[0]-c,o=c,s=this.startEnd[1]}else o=this.startEnd[0],s=t.getNextUnset(this.startEnd[1]+1),i=s-this.startEnd[1];var f=this.getDecodeFinderCounters();xe.arraycopy(f,0,f,1,f.length-1),f[0]=i;var u;try{u=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new va(u,[o,s],o,s,n)},e.prototype.decodeDataCharacter=function(t,n,a,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)e.recordPatternInReverse(t,n.getStartEnd()[0],o);else{e.recordPattern(t,n.getStartEnd()[1],o);for(var c=0,f=o.length-1;c<f;c++,f--){var u=o[c];o[c]=o[f],o[f]=u}}var l=17,d=te.sum(new Int32Array(o))/l,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(d-h)/h>.3)throw new b;for(var x=this.getOddCounts(),y=this.getEvenCounts(),_=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var w=1*o[c]/d,C=w+.5;if(C<1){if(w<.3)throw new b;C=1}else if(C>8){if(w>8.7)throw new b;C=8}var p=c/2;c&1?(y[p]=C,A[p]=w-C):(x[p]=C,_[p]=w-C)}this.adjustOddEvenCounts(l);for(var S=4*n.getValue()+(a?0:2)+(i?0:1)-1,I=0,N=0,c=x.length-1;c>=0;c--){if(e.isNotA1left(n,a,i)){var R=e.WEIGHTS[S][2*c];N+=x[c]*R}I+=x[c]}for(var k=0,c=y.length-1;c>=0;c--)if(e.isNotA1left(n,a,i)){var R=e.WEIGHTS[S][2*c+1];k+=y[c]*R}var B=N+k;if(I&1||I>13||I<4)throw new b;var ue=(13-I)/2,W=e.SYMBOL_WIDEST[ue],ie=9-W,Re=zt.getRSSvalue(x,W,!0),Le=zt.getRSSvalue(y,ie,!1),Ct=e.EVEN_TOTAL_SUBSET[ue],Et=e.GSUM[ue],qe=Re*Ct+Le+Et;return new Sr(qe,B)},e.isNotA1left=function(t,n,a){return!(t.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(t){var n=te.sum(new Int32Array(this.getOddCounts())),a=te.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1;n>13?o=!0:n<4&&(i=!0);var s=!1,c=!1;a>13?c=!0:a<4&&(s=!0);var f=n+a-t,u=(n&1)===1,l=(a&1)===0;if(f===1)if(u){if(l)throw new b;o=!0}else{if(!l)throw new b;c=!0}else if(f===-1)if(u){if(l)throw new b;i=!0}else{if(!l)throw new b;s=!0}else if(f===0){if(u){if(!l)throw new b;n<a?(i=!0,c=!0):(o=!0,s=!0)}else if(l)throw new b}else throw new b;if(i){if(o)throw new b;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(c)throw new b;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(jt),go=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yo=function(r){go(e,r);function e(t,n,a){var i=r.call(this,t,n)||this;return i.count=0,i.finderPattern=a,i}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Sr),mo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ur=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Un=function(r){mo(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,n,a){var i,o,s,c,f=this.decodePair(n,!1,t,a);e.addOrTally(this.possibleLeftPairs,f),n.reverse();var u=this.decodePair(n,!0,t,a);e.addOrTally(this.possibleRightPairs,u),n.reverse();try{for(var l=Ur(this.possibleLeftPairs),d=l.next();!d.done;d=l.next()){var h=d.value;if(h.getCount()>1)try{for(var x=(s=void 0,Ur(this.possibleRightPairs)),y=x.next();!y.done;y=x.next()){var _=y.value;if(_.getCount()>1&&e.checkChecksum(h,_))return e.constructResult(h,_)}}catch(A){s={error:A}}finally{try{y&&!y.done&&(c=x.return)&&c.call(x)}finally{if(s)throw s.error}}}}catch(A){i={error:A}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}throw new b},e.addOrTally=function(t,n){var a,i;if(n!=null){var o=!1;try{for(var s=Ur(t),c=s.next();!c.done;c=s.next()){var f=c.value;if(f.getValue()===n.getValue()){f.incrementCount(),o=!0;break}}}catch(u){a={error:u}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}o||t.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,n){for(var a=4537077*t.getValue()+n.getValue(),i=new String(a).toString(),o=new $,s=13-i.length;s>0;s--)o.append("0");o.append(i);for(var c=0,s=0;s<13;s++){var f=o.charAt(s).charCodeAt(0)-48;c+=s&1?f:3*f}c=10-c%10,c===10&&(c=0),o.append(c.toString());var u=t.getFinderPattern().getResultPoints(),l=n.getFinderPattern().getResultPoints();return new Ye(o.toString(),null,0,[u[0],u[1],l[0],l[1]],F.RSS_14,new Date().getTime())},e.checkChecksum=function(t,n){var a=(t.getChecksumPortion()+16*n.getChecksumPortion())%79,i=9*t.getFinderPattern().getValue()+n.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,a===i},e.prototype.decodePair=function(t,n,a,i){try{var o=this.findFinderPattern(t,n),s=this.parseFoundFinderPattern(t,a,n,o),c=i==null?null:i.get(fe.NEED_RESULT_POINT_CALLBACK);if(c!=null){var f=(o[0]+o[1])/2;n&&(f=t.getSize()-1-f),c.foundPossibleResultPoint(new M(f,a))}var u=this.decodeDataCharacter(t,s,!0),l=this.decodeDataCharacter(t,s,!1);return new yo(1597*u.getValue()+l.getValue(),u.getChecksumPortion()+4*l.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(t,n,a){for(var i=this.getDataCharacterCounters(),o=0;o<i.length;o++)i[o]=0;if(a)Te.recordPatternInReverse(t,n.getStartEnd()[0],i);else{Te.recordPattern(t,n.getStartEnd()[1]+1,i);for(var s=0,c=i.length-1;s<c;s++,c--){var f=i[s];i[s]=i[c],i[c]=f}}for(var u=a?16:15,l=te.sum(new Int32Array(i))/u,d=this.getOddCounts(),h=this.getEvenCounts(),x=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),s=0;s<i.length;s++){var _=i[s]/l,A=Math.floor(_+.5);A<1?A=1:A>8&&(A=8);var w=Math.floor(s/2);s&1?(h[w]=A,y[w]=_-A):(d[w]=A,x[w]=_-A)}this.adjustOddEvenCounts(a,u);for(var C=0,p=0,s=d.length-1;s>=0;s--)p*=9,p+=d[s],C+=d[s];for(var S=0,I=0,s=h.length-1;s>=0;s--)S*=9,S+=h[s],I+=h[s];var N=p+3*S;if(a){if(C&1||C>12||C<4)throw new b;var R=(12-C)/2,k=e.OUTSIDE_ODD_WIDEST[R],B=9-k,ue=zt.getRSSvalue(d,k,!1),W=zt.getRSSvalue(h,B,!0),ie=e.OUTSIDE_EVEN_TOTAL_SUBSET[R],Re=e.OUTSIDE_GSUM[R];return new Sr(ue*ie+W+Re,N)}else{if(I&1||I>10||I<4)throw new b;var R=(10-I)/2,k=e.INSIDE_ODD_WIDEST[R],B=9-k,ue=zt.getRSSvalue(d,k,!0),W=zt.getRSSvalue(h,B,!1),Le=e.INSIDE_ODD_TOTAL_SUBSET[R],Re=e.INSIDE_GSUM[R];return new Sr(W*Le+ue+Re,N)}},e.prototype.findFinderPattern=function(t,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=t.getSize(),o=!1,s=0;s<i&&(o=!t.get(s),n!==o);)s++;for(var c=0,f=s,u=s;u<i;u++)if(t.get(u)!==o)a[c]++;else{if(c===3){if(jt.isFinderPattern(a))return[f,u];f+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,o=!o}throw new b},e.prototype.parseFoundFinderPattern=function(t,n,a,i){for(var o=t.get(i[0]),s=i[0]-1;s>=0&&o!==t.get(s);)s--;s++;var c=i[0]-s,f=this.getDecodeFinderCounters(),u=new Int32Array(f.length);xe.arraycopy(f,0,u,1,f.length-1),u[0]=c;var l=this.parseFinderValue(u,e.FINDER_PATTERNS),d=s,h=i[1];return a&&(d=t.getSize()-1-d,h=t.getSize()-1-h),new va(l,[s,i[1]],d,h,n)},e.prototype.adjustOddEvenCounts=function(t,n){var a=te.sum(new Int32Array(this.getOddCounts())),i=te.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,c=!1,f=!1;t?(a>12?s=!0:a<4&&(o=!0),i>12?f=!0:i<4&&(c=!0)):(a>11?s=!0:a<5&&(o=!0),i>10?f=!0:i<4&&(c=!0));var u=a+i-n,l=(a&1)===(t?1:0),d=(i&1)===1;if(u===1)if(l){if(d)throw new b;s=!0}else{if(!d)throw new b;f=!0}else if(u===-1)if(l){if(d)throw new b;o=!0}else{if(!d)throw new b;c=!0}else if(u===0){if(l){if(!d)throw new b;a<i?(o=!0,f=!0):(s=!0,c=!0)}else if(d)throw new b}else throw new b;if(o){if(s)throw new b;jt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&jt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new b;jt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&jt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(jt),wo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$t=function(r){wo(e,r);function e(t){var n=r.call(this)||this;n.readers=[];var a=t?t.get(fe.POSSIBLE_FORMATS):null,i=t&&t.get(fe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(fe.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(F.EAN_13)||a.includes(F.UPC_A)||a.includes(F.EAN_8)||a.includes(F.UPC_E))&&n.readers.push(new jr(t)),a.includes(F.CODE_39)&&n.readers.push(new Tn(i,o)),a.includes(F.CODE_93)&&n.readers.push(new Rn),a.includes(F.CODE_128)&&n.readers.push(new On),a.includes(F.ITF)&&n.readers.push(new Dn),a.includes(F.CODABAR)&&n.readers.push(new Vi),a.includes(F.RSS_14)&&n.readers.push(new Un),a.includes(F.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new po))),n.readers.length===0&&(n.readers.push(new jr(t)),n.readers.push(new Tn),n.readers.push(new Rn),n.readers.push(new jr(t)),n.readers.push(new On),n.readers.push(new Dn),n.readers.push(new Un)),n}return e.prototype.decodeRow=function(t,n,a){for(var i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(t,n,a)}catch{}throw new b},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Te),_o=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){_o(e,r);function e(t,n){return t===void 0&&(t=500),r.call(this,new $t(n),t,n)||this}return e})(Kt);var Vn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oe=function(){function r(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return r.prototype.getECCodewords=function(){return this.ecCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r}(),re=function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r}(),Ao=function(){function r(e,t,n,a,i,o){var s,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=i,this.ecBlocks=o;var f=0,u=o.getECCodewords(),l=o.getECBlocks();try{for(var d=Vn(l),h=d.next();!h.done;h=d.next()){var x=h.value;f+=x.getCount()*(x.getDataCodewords()+u)}}catch(y){s={error:y}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(s)throw s.error}}this.totalCodewords=f}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r.getVersionForDimensions=function(e,t){var n,a;if(e&1||t&1)throw new T;try{for(var i=Vn(r.VERSIONS),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===t)return s}}catch(c){n={error:c}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}throw new T},r.prototype.toString=function(){return""+this.versionNumber},r.buildVersions=function(){return[new r(1,10,10,8,8,new oe(5,new re(1,3))),new r(2,12,12,10,10,new oe(7,new re(1,5))),new r(3,14,14,12,12,new oe(10,new re(1,8))),new r(4,16,16,14,14,new oe(12,new re(1,12))),new r(5,18,18,16,16,new oe(14,new re(1,18))),new r(6,20,20,18,18,new oe(18,new re(1,22))),new r(7,22,22,20,20,new oe(20,new re(1,30))),new r(8,24,24,22,22,new oe(24,new re(1,36))),new r(9,26,26,24,24,new oe(28,new re(1,44))),new r(10,32,32,14,14,new oe(36,new re(1,62))),new r(11,36,36,16,16,new oe(42,new re(1,86))),new r(12,40,40,18,18,new oe(48,new re(1,114))),new r(13,44,44,20,20,new oe(56,new re(1,144))),new r(14,48,48,22,22,new oe(68,new re(1,174))),new r(15,52,52,24,24,new oe(42,new re(2,102))),new r(16,64,64,14,14,new oe(56,new re(2,140))),new r(17,72,72,16,16,new oe(36,new re(4,92))),new r(18,80,80,18,18,new oe(48,new re(4,114))),new r(19,88,88,20,20,new oe(56,new re(4,144))),new r(20,96,96,22,22,new oe(68,new re(4,174))),new r(21,104,104,24,24,new oe(56,new re(6,136))),new r(22,120,120,18,18,new oe(68,new re(6,175))),new r(23,132,132,20,20,new oe(62,new re(8,163))),new r(24,144,144,22,22,new oe(62,new re(8,156),new re(2,155))),new r(25,8,18,6,16,new oe(7,new re(1,5))),new r(26,8,32,6,14,new oe(11,new re(1,10))),new r(27,12,26,10,24,new oe(14,new re(1,16))),new r(28,12,36,10,16,new oe(18,new re(1,22))),new r(29,16,36,14,16,new oe(24,new re(1,32))),new r(30,16,48,14,22,new oe(28,new re(1,49)))]},r.VERSIONS=r.buildVersions(),r}(),Co=function(){function r(e){var t=e.getHeight();if(t<8||t>144||t&1)throw new T;this.version=r.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new At(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return r.prototype.getVersion=function(){return this.version},r.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return Ao.getVersionForDimensions(t,n)},r.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,a=0,i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,c=!1,f=!1,u=!1;do if(n===i&&a===0&&!s)e[t++]=this.readCorner1(i,o)&255,n-=2,a+=2,s=!0;else if(n===i-2&&a===0&&o&3&&!c)e[t++]=this.readCorner2(i,o)&255,n-=2,a+=2,c=!0;else if(n===i+4&&a===2&&!(o&7)&&!f)e[t++]=this.readCorner3(i,o)&255,n-=2,a+=2,f=!0;else if(n===i-2&&a===0&&(o&7)===4&&!u)e[t++]=this.readCorner4(i,o)&255,n-=2,a+=2,u=!0;else{do n<i&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[t++]=this.readUtah(n,a,i,o)&255),n-=2,a+=2;while(n>=0&&a<o);n+=1,a+=3;do n>=0&&a<o&&!this.readMappingMatrix.get(a,n)&&(e[t++]=this.readUtah(n,a,i,o)&255),n+=2,a-=2;while(n<i&&a>=0);n+=3,a+=1}while(n<i||a<o);if(t!==this.version.getTotalCodewords())throw new T;return e},r.prototype.readModule=function(e,t,n,a){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},r.prototype.readUtah=function(e,t,n,a){var i=0;return this.readModule(e-2,t-2,n,a)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,a)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,t,n,a)&&(i|=1),i<<=1,this.readModule(e,t-2,n,a)&&(i|=1),i<<=1,this.readModule(e,t-1,n,a)&&(i|=1),i<<=1,this.readModule(e,t,n,a)&&(i|=1),i},r.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new j("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/a|0,s=n/i|0,c=o*a,f=s*i,u=new At(f,c),l=0;l<o;++l)for(var d=l*a,h=0;h<s;++h)for(var x=h*i,y=0;y<a;++y)for(var _=l*(a+2)+1+y,A=d+y,w=0;w<i;++w){var C=h*(i+2)+1+w;if(e.get(C,_)){var p=x+w;u.set(p,A)}}return u},r}(),Hn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Eo=function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t){var n,a,i,o,s=t.getECBlocks(),c=0,f=s.getECBlocks();try{for(var u=Hn(f),l=u.next();!l.done;l=u.next()){var d=l.value;c+=d.getCount()}}catch(Re){n={error:Re}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}var h=new Array(c),x=0;try{for(var y=Hn(f),_=y.next();!_.done;_=y.next())for(var d=_.value,A=0;A<d.getCount();A++){var w=d.getDataCodewords(),C=s.getECCodewords()+w;h[x++]=new r(w,new Uint8Array(C))}}catch(Re){i={error:Re}}finally{try{_&&!_.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}for(var p=h[0].codewords.length,S=p-s.getECCodewords(),I=S-1,N=0,A=0;A<I;A++)for(var R=0;R<x;R++)h[R].codewords[A]=e[N++];for(var k=t.getVersionNumber()===24,B=k?8:x,R=0;R<B;R++)h[R].codewords[S-1]=e[N++];for(var ue=h[0].codewords.length,A=S;A<ue;A++)for(var R=0;R<x;R++){var W=k?(R+8)%x:R,ie=k&&W>7?A-1:A;h[W].codewords[ie]=e[N++]}if(N!==e.length)throw new j;return h},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r}(),ga=function(){function r(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return r.prototype.getBitOffset=function(){return this.bitOffset},r.prototype.getByteOffset=function(){return this.byteOffset},r.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new j(""+e);var t=0,n=this.bitOffset,a=this.byteOffset,i=this.bytes;if(n>0){var o=8-n,s=e<o?e:o,c=o-s,f=255>>8-s<<c;t=(i[a]&f)>>c,e-=s,n+=s,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)t=t<<8|i[a]&255,a++,e-=8;if(e>0){var c=8-e,f=255>>c<<c;t=t<<e|(i[a]&f)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,t},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r}(),be;(function(r){r[r.PAD_ENCODE=0]="PAD_ENCODE",r[r.ASCII_ENCODE=1]="ASCII_ENCODE",r[r.C40_ENCODE=2]="C40_ENCODE",r[r.TEXT_ENCODE=3]="TEXT_ENCODE",r[r.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",r[r.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",r[r.BASE256_ENCODE=6]="BASE256_ENCODE"})(be||(be={}));var bo=function(){function r(){}return r.decode=function(e){var t=new ga(e),n=new $,a=new $,i=new Array,o=be.ASCII_ENCODE;do if(o===be.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,a);else{switch(o){case be.C40_ENCODE:this.decodeC40Segment(t,n);break;case be.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case be.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case be.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case be.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new T}o=be.ASCII_ENCODE}while(o!==be.PAD_ENCODE&&t.available()>0);return a.length()>0&&n.append(a.toString()),new Dr(e,n.toString(),i.length===0?null:i,null)},r.decodeAsciiSegment=function(e,t,n){var a=!1;do{var i=e.readBits(8);if(i===0)throw new T;if(i<=128)return a&&(i+=128),t.append(String.fromCharCode(i-1)),be.ASCII_ENCODE;if(i===129)return be.PAD_ENCODE;if(i<=229){var o=i-130;o<10&&t.append("0"),t.append(""+o)}else switch(i){case 230:return be.C40_ENCODE;case 231:return be.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return be.ANSIX12_ENCODE;case 239:return be.TEXT_ENCODE;case 240:return be.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new T;break}}while(e.available()>0);return be.ASCII_ENCODE},r.decodeC40Segment=function(e,t){var n=!1,a=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var s=0;s<3;s++){var c=a[s];switch(i){case 0:if(c<3)i=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[c];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else throw new T;break;case 1:n?(t.append(String.fromCharCode(c+128)),n=!1):t.append(String.fromCharCode(c)),i=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[c];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:n=!0;break;default:throw new T}i=0;break;case 3:n?(t.append(String.fromCharCode(c+224)),n=!1):t.append(String.fromCharCode(c+96)),i=0;break;default:throw new T}}}while(e.available()>0)},r.decodeTextSegment=function(e,t){var n=!1,a=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var s=0;s<3;s++){var c=a[s];switch(i){case 0:if(c<3)i=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[c];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else throw new T;break;case 1:n?(t.append(String.fromCharCode(c+128)),n=!1):t.append(String.fromCharCode(c)),i=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[c];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:n=!0;break;default:throw new T}i=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[c];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f),i=0}else throw new T;break;default:throw new T}}}while(e.available()>0)},r.decodeAnsiX12Segment=function(e,t){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var i=0;i<3;i++){var o=n[i];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new T;break}}}while(e.available()>0)},r.parseTwoBytes=function(e,t,n){var a=(e<<8)+t-1,i=Math.floor(a/1600);n[0]=i,a-=i*1600,i=Math.floor(a/40),n[1]=i,n[2]=a-i*40},r.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var i=8-e.getBitOffset();i!==8&&e.readBits(i);return}a&32||(a|=64),t.append(String.fromCharCode(a))}}while(e.available()>0)},r.decodeBase256Segment=function(e,t,n){var a=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),a++),o;if(i===0?o=e.available()/8|0:i<250?o=i:o=250*(i-249)+this.unrandomize255State(e.readBits(8),a++),o<0)throw new T;for(var s=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new T;s[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(s);try{t.append(ht.decode(s,J.ISO88591))}catch(f){throw new fr("Platform does not support required encoding: "+f.message)}},r.unrandomize255State=function(e,t){var n=149*t%255+1,a=e-n;return a>=0?a:a+256},r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r.TEXT_SHIFT2_SET_CHARS=r.C40_SHIFT2_SET_CHARS,r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],r}(),So=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Io=function(){function r(){this.rsDecoder=new Pr(at.DATA_MATRIX_FIELD_256)}return r.prototype.decode=function(e){var t,n,a=new Co(e),i=a.getVersion(),o=a.readCodewords(),s=Eo.getDataBlocks(o,i),c=0;try{for(var f=So(s),u=f.next();!u.done;u=f.next()){var l=u.value;c+=l.getNumDataCodewords()}}catch(C){t={error:C}}finally{try{u&&!u.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}for(var d=new Uint8Array(c),h=s.length,x=0;x<h;x++){var y=s[x],_=y.getCodewords(),A=y.getNumDataCodewords();this.correctErrors(_,A);for(var w=0;w<A;w++)d[w*h+x]=_[w]}return bo.decode(d)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Ae}for(var a=0;a<t;a++)e[a]=n[a]},r}(),No=function(){function r(e){this.image=e,this.rectangleDetector=new Qr(this.image)}return r.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new b;t=this.shiftToModuleCenter(t);var n=t[0],a=t[1],i=t[2],o=t[3],s=this.transitionsBetween(n,o)+1,c=this.transitionsBetween(i,o)+1;(s&1)===1&&(s+=1),(c&1)===1&&(c+=1),4*s<7*c&&4*c<7*s&&(s=c=Math.max(s,c));var f=r.sampleGrid(this.image,n,a,i,o,s,c);return new nn(f,[n,a,i,o])},r.shiftPoint=function(e,t,n){var a=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new M(e.getX()+a,e.getY()+i)},r.moveAway=function(e,t,n){var a=e.getX(),i=e.getY();return a<t?a-=1:a+=1,i<n?i-=1:i+=1,new M(a,i)},r.prototype.detectSolid1=function(e){var t=e[0],n=e[1],a=e[3],i=e[2],o=this.transitionsBetween(t,n),s=this.transitionsBetween(n,a),c=this.transitionsBetween(a,i),f=this.transitionsBetween(i,t),u=o,l=[i,t,n,a];return u>s&&(u=s,l[0]=t,l[1]=n,l[2]=a,l[3]=i),u>c&&(u=c,l[0]=n,l[1]=a,l[2]=i,l[3]=t),u>f&&(l[0]=a,l[1]=i,l[2]=t,l[3]=n),l},r.prototype.detectSolid2=function(e){var t=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(t,i),s=r.shiftPoint(n,a,(o+1)*4),c=r.shiftPoint(a,n,(o+1)*4),f=this.transitionsBetween(s,t),u=this.transitionsBetween(c,i);return f<u?(e[0]=t,e[1]=n,e[2]=a,e[3]=i):(e[0]=n,e[1]=a,e[2]=i,e[3]=t),e},r.prototype.correctTopRight=function(e){var t=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(t,i),s=this.transitionsBetween(n,i),c=r.shiftPoint(t,n,(s+1)*4),f=r.shiftPoint(a,n,(o+1)*4);o=this.transitionsBetween(c,i),s=this.transitionsBetween(f,i);var u=new M(i.getX()+(a.getX()-n.getX())/(o+1),i.getY()+(a.getY()-n.getY())/(o+1)),l=new M(i.getX()+(t.getX()-n.getX())/(s+1),i.getY()+(t.getY()-n.getY())/(s+1));if(!this.isValid(u))return this.isValid(l)?l:null;if(!this.isValid(l))return u;var d=this.transitionsBetween(c,u)+this.transitionsBetween(f,u),h=this.transitionsBetween(c,l)+this.transitionsBetween(f,l);return d>h?u:l},r.prototype.shiftToModuleCenter=function(e){var t=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(t,i)+1,s=this.transitionsBetween(a,i)+1,c=r.shiftPoint(t,n,s*4),f=r.shiftPoint(a,n,o*4);o=this.transitionsBetween(c,i)+1,s=this.transitionsBetween(f,i)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var u=(t.getX()+n.getX()+a.getX()+i.getX())/4,l=(t.getY()+n.getY()+a.getY()+i.getY())/4;t=r.moveAway(t,u,l),n=r.moveAway(n,u,l),a=r.moveAway(a,u,l),i=r.moveAway(i,u,l);var d,h;return c=r.shiftPoint(t,n,s*4),c=r.shiftPoint(c,i,o*4),d=r.shiftPoint(n,t,s*4),d=r.shiftPoint(d,a,o*4),f=r.shiftPoint(a,i,s*4),f=r.shiftPoint(f,n,o*4),h=r.shiftPoint(i,a,s*4),h=r.shiftPoint(h,t,o*4),[c,d,f,h]},r.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},r.sampleGrid=function(e,t,n,a,i,o,s){var c=an.getInstance();return c.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),i.getX(),i.getY(),a.getX(),a.getY(),n.getX(),n.getY())},r.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-a)>Math.abs(i-n);if(s){var c=n;n=a,a=c,c=i,i=o,o=c}for(var f=Math.abs(i-n),u=Math.abs(o-a),l=-f/2,d=a<o?1:-1,h=n<i?1:-1,x=0,y=this.image.get(s?a:n,s?n:a),_=n,A=a;_!==i;_+=h){var w=this.image.get(s?A:_,s?_:A);if(w!==y&&(x++,y=w),l+=u,l>0){if(A===o)break;A+=d,l-=f}}return x},r}(),Ir=function(){function r(){this.decoder=new Io}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n,a;if(t!=null&&t.has(fe.PURE_BARCODE)){var i=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(i),a=r.NO_POINTS}else{var o=new No(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),a=o.getPoints()}var s=n.getRawBytes(),c=new Ye(n.getText(),s,8*s.length,a,F.DATA_MATRIX,xe.currentTimeMillis()),f=n.getByteSegments();f!=null&&c.putMetadata(Ve.BYTE_SEGMENTS,f);var u=n.getECLevel();return u!=null&&c.putMetadata(Ve.ERROR_CORRECTION_LEVEL,u),c},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new b;var a=this.moduleSize(t,e),i=t[1],o=n[1],s=t[0],c=n[0],f=(c-s+1)/a,u=(o-i+1)/a;if(f<=0||u<=0)throw new b;var l=a/2;i+=l,s+=l;for(var d=new At(f,u),h=0;h<u;h++)for(var x=i+h*a,y=0;y<f;y++)e.get(s+y*a,x)&&d.set(y,h);return d},r.moduleSize=function(e,t){for(var n=t.getWidth(),a=e[0],i=e[1];a<n&&t.get(a,i);)a++;if(a===n)throw new b;var o=a-e[0];if(o===0)throw new b;return o},r.NO_POINTS=[],r}(),Oo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){Oo(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Ir,t)||this}return e})(Kt);var Yt;(function(r){r[r.L=0]="L",r[r.M=1]="M",r[r.Q=2]="Q",r[r.H=3]="H"})(Yt||(Yt={}));var To=function(){function r(e,t,n){this.value=e,this.stringValue=t,this.bits=n,r.FOR_BITS.set(n,this),r.FOR_VALUE.set(e,this)}return r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.fromString=function(e){switch(e){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new _e(e+"not available")}},r.prototype.toString=function(){return this.stringValue},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.forBits=function(e){if(e<0||e>=r.FOR_BITS.size)throw new j;return r.FOR_BITS.get(e)},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.L=new r(Yt.L,"L",1),r.M=new r(Yt.M,"M",0),r.Q=new r(Yt.Q,"Q",3),r.H=new r(Yt.H,"H",2),r}(),Ro=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ya=function(){function r(e){this.errorCorrectionLevel=To.forBits(e>>3&3),this.dataMask=e&7}return r.numBitsDiffering=function(e,t){return Y.bitCount(e^t)},r.decodeFormatInformation=function(e,t){var n=r.doDecodeFormatInformation(e,t);return n!==null?n:r.doDecodeFormatInformation(e^r.FORMAT_INFO_MASK_QR,t^r.FORMAT_INFO_MASK_QR)},r.doDecodeFormatInformation=function(e,t){var n,a,i=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=Ro(r.FORMAT_INFO_DECODE_LOOKUP),c=s.next();!c.done;c=s.next()){var f=c.value,u=f[0];if(u===e||u===t)return new r(f[1]);var l=r.numBitsDiffering(e,u);l<i&&(o=f[1],i=l),e!==t&&(l=r.numBitsDiffering(t,u),l<i&&(o=f[1],i=l))}}catch(d){n={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return i<=3?new r(o):null},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getDataMask=function(){return this.dataMask},r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},r.FORMAT_INFO_MASK_QR=21522,r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],r}(),Do=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},E=function(){function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},r.prototype.getNumBlocks=function(){var e,t,n=0,a=this.ecBlocks;try{for(var i=Do(a),o=i.next();!o.done;o=i.next()){var s=o.value;n+=s.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},r.prototype.getECBlocks=function(){return this.ecBlocks},r}(),g=function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r}(),Po=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vt=function(){function r(e,t){for(var n,a,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=i;var s=0,c=i[0].getECCodewordsPerBlock(),f=i[0].getECBlocks();try{for(var u=Po(f),l=u.next();!l.done;l=u.next()){var d=l.value;s+=d.getCount()*(d.getDataCodewords()+c)}}catch(h){n={error:h}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}this.totalCodewords=s}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},r.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},r.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new T;try{return this.getVersionForNumber((e-17)/4)}catch{throw new T}},r.getVersionForNumber=function(e){if(e<1||e>40)throw new j;return r.VERSIONS[e-1]},r.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,n=0,a=0;a<r.VERSION_DECODE_INFO.length;a++){var i=r.VERSION_DECODE_INFO[a];if(i===e)return r.getVersionForNumber(a+7);var o=ya.numBitsDiffering(e,i);o<t&&(n=a+7,t=o)}return t<=3?r.getVersionForNumber(n):null},r.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new At(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var i=this.alignmentPatternCenters[a]-2,o=0;o<n;o++)a===0&&(o===0||o===n-1)||a===n-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,i,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},r.prototype.toString=function(){return""+this.versionNumber},r.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),r.VERSIONS=[new r(1,new Int32Array(0),new E(7,new g(1,19)),new E(10,new g(1,16)),new E(13,new g(1,13)),new E(17,new g(1,9))),new r(2,Int32Array.from([6,18]),new E(10,new g(1,34)),new E(16,new g(1,28)),new E(22,new g(1,22)),new E(28,new g(1,16))),new r(3,Int32Array.from([6,22]),new E(15,new g(1,55)),new E(26,new g(1,44)),new E(18,new g(2,17)),new E(22,new g(2,13))),new r(4,Int32Array.from([6,26]),new E(20,new g(1,80)),new E(18,new g(2,32)),new E(26,new g(2,24)),new E(16,new g(4,9))),new r(5,Int32Array.from([6,30]),new E(26,new g(1,108)),new E(24,new g(2,43)),new E(18,new g(2,15),new g(2,16)),new E(22,new g(2,11),new g(2,12))),new r(6,Int32Array.from([6,34]),new E(18,new g(2,68)),new E(16,new g(4,27)),new E(24,new g(4,19)),new E(28,new g(4,15))),new r(7,Int32Array.from([6,22,38]),new E(20,new g(2,78)),new E(18,new g(4,31)),new E(18,new g(2,14),new g(4,15)),new E(26,new g(4,13),new g(1,14))),new r(8,Int32Array.from([6,24,42]),new E(24,new g(2,97)),new E(22,new g(2,38),new g(2,39)),new E(22,new g(4,18),new g(2,19)),new E(26,new g(4,14),new g(2,15))),new r(9,Int32Array.from([6,26,46]),new E(30,new g(2,116)),new E(22,new g(3,36),new g(2,37)),new E(20,new g(4,16),new g(4,17)),new E(24,new g(4,12),new g(4,13))),new r(10,Int32Array.from([6,28,50]),new E(18,new g(2,68),new g(2,69)),new E(26,new g(4,43),new g(1,44)),new E(24,new g(6,19),new g(2,20)),new E(28,new g(6,15),new g(2,16))),new r(11,Int32Array.from([6,30,54]),new E(20,new g(4,81)),new E(30,new g(1,50),new g(4,51)),new E(28,new g(4,22),new g(4,23)),new E(24,new g(3,12),new g(8,13))),new r(12,Int32Array.from([6,32,58]),new E(24,new g(2,92),new g(2,93)),new E(22,new g(6,36),new g(2,37)),new E(26,new g(4,20),new g(6,21)),new E(28,new g(7,14),new g(4,15))),new r(13,Int32Array.from([6,34,62]),new E(26,new g(4,107)),new E(22,new g(8,37),new g(1,38)),new E(24,new g(8,20),new g(4,21)),new E(22,new g(12,11),new g(4,12))),new r(14,Int32Array.from([6,26,46,66]),new E(30,new g(3,115),new g(1,116)),new E(24,new g(4,40),new g(5,41)),new E(20,new g(11,16),new g(5,17)),new E(24,new g(11,12),new g(5,13))),new r(15,Int32Array.from([6,26,48,70]),new E(22,new g(5,87),new g(1,88)),new E(24,new g(5,41),new g(5,42)),new E(30,new g(5,24),new g(7,25)),new E(24,new g(11,12),new g(7,13))),new r(16,Int32Array.from([6,26,50,74]),new E(24,new g(5,98),new g(1,99)),new E(28,new g(7,45),new g(3,46)),new E(24,new g(15,19),new g(2,20)),new E(30,new g(3,15),new g(13,16))),new r(17,Int32Array.from([6,30,54,78]),new E(28,new g(1,107),new g(5,108)),new E(28,new g(10,46),new g(1,47)),new E(28,new g(1,22),new g(15,23)),new E(28,new g(2,14),new g(17,15))),new r(18,Int32Array.from([6,30,56,82]),new E(30,new g(5,120),new g(1,121)),new E(26,new g(9,43),new g(4,44)),new E(28,new g(17,22),new g(1,23)),new E(28,new g(2,14),new g(19,15))),new r(19,Int32Array.from([6,30,58,86]),new E(28,new g(3,113),new g(4,114)),new E(26,new g(3,44),new g(11,45)),new E(26,new g(17,21),new g(4,22)),new E(26,new g(9,13),new g(16,14))),new r(20,Int32Array.from([6,34,62,90]),new E(28,new g(3,107),new g(5,108)),new E(26,new g(3,41),new g(13,42)),new E(30,new g(15,24),new g(5,25)),new E(28,new g(15,15),new g(10,16))),new r(21,Int32Array.from([6,28,50,72,94]),new E(28,new g(4,116),new g(4,117)),new E(26,new g(17,42)),new E(28,new g(17,22),new g(6,23)),new E(30,new g(19,16),new g(6,17))),new r(22,Int32Array.from([6,26,50,74,98]),new E(28,new g(2,111),new g(7,112)),new E(28,new g(17,46)),new E(30,new g(7,24),new g(16,25)),new E(24,new g(34,13))),new r(23,Int32Array.from([6,30,54,78,102]),new E(30,new g(4,121),new g(5,122)),new E(28,new g(4,47),new g(14,48)),new E(30,new g(11,24),new g(14,25)),new E(30,new g(16,15),new g(14,16))),new r(24,Int32Array.from([6,28,54,80,106]),new E(30,new g(6,117),new g(4,118)),new E(28,new g(6,45),new g(14,46)),new E(30,new g(11,24),new g(16,25)),new E(30,new g(30,16),new g(2,17))),new r(25,Int32Array.from([6,32,58,84,110]),new E(26,new g(8,106),new g(4,107)),new E(28,new g(8,47),new g(13,48)),new E(30,new g(7,24),new g(22,25)),new E(30,new g(22,15),new g(13,16))),new r(26,Int32Array.from([6,30,58,86,114]),new E(28,new g(10,114),new g(2,115)),new E(28,new g(19,46),new g(4,47)),new E(28,new g(28,22),new g(6,23)),new E(30,new g(33,16),new g(4,17))),new r(27,Int32Array.from([6,34,62,90,118]),new E(30,new g(8,122),new g(4,123)),new E(28,new g(22,45),new g(3,46)),new E(30,new g(8,23),new g(26,24)),new E(30,new g(12,15),new g(28,16))),new r(28,Int32Array.from([6,26,50,74,98,122]),new E(30,new g(3,117),new g(10,118)),new E(28,new g(3,45),new g(23,46)),new E(30,new g(4,24),new g(31,25)),new E(30,new g(11,15),new g(31,16))),new r(29,Int32Array.from([6,30,54,78,102,126]),new E(30,new g(7,116),new g(7,117)),new E(28,new g(21,45),new g(7,46)),new E(30,new g(1,23),new g(37,24)),new E(30,new g(19,15),new g(26,16))),new r(30,Int32Array.from([6,26,52,78,104,130]),new E(30,new g(5,115),new g(10,116)),new E(28,new g(19,47),new g(10,48)),new E(30,new g(15,24),new g(25,25)),new E(30,new g(23,15),new g(25,16))),new r(31,Int32Array.from([6,30,56,82,108,134]),new E(30,new g(13,115),new g(3,116)),new E(28,new g(2,46),new g(29,47)),new E(30,new g(42,24),new g(1,25)),new E(30,new g(23,15),new g(28,16))),new r(32,Int32Array.from([6,34,60,86,112,138]),new E(30,new g(17,115)),new E(28,new g(10,46),new g(23,47)),new E(30,new g(10,24),new g(35,25)),new E(30,new g(19,15),new g(35,16))),new r(33,Int32Array.from([6,30,58,86,114,142]),new E(30,new g(17,115),new g(1,116)),new E(28,new g(14,46),new g(21,47)),new E(30,new g(29,24),new g(19,25)),new E(30,new g(11,15),new g(46,16))),new r(34,Int32Array.from([6,34,62,90,118,146]),new E(30,new g(13,115),new g(6,116)),new E(28,new g(14,46),new g(23,47)),new E(30,new g(44,24),new g(7,25)),new E(30,new g(59,16),new g(1,17))),new r(35,Int32Array.from([6,30,54,78,102,126,150]),new E(30,new g(12,121),new g(7,122)),new E(28,new g(12,47),new g(26,48)),new E(30,new g(39,24),new g(14,25)),new E(30,new g(22,15),new g(41,16))),new r(36,Int32Array.from([6,24,50,76,102,128,154]),new E(30,new g(6,121),new g(14,122)),new E(28,new g(6,47),new g(34,48)),new E(30,new g(46,24),new g(10,25)),new E(30,new g(2,15),new g(64,16))),new r(37,Int32Array.from([6,28,54,80,106,132,158]),new E(30,new g(17,122),new g(4,123)),new E(28,new g(29,46),new g(14,47)),new E(30,new g(49,24),new g(10,25)),new E(30,new g(24,15),new g(46,16))),new r(38,Int32Array.from([6,32,58,84,110,136,162]),new E(30,new g(4,122),new g(18,123)),new E(28,new g(13,46),new g(32,47)),new E(30,new g(48,24),new g(14,25)),new E(30,new g(42,15),new g(32,16))),new r(39,Int32Array.from([6,26,54,82,110,138,166]),new E(30,new g(20,117),new g(4,118)),new E(28,new g(40,47),new g(7,48)),new E(30,new g(43,24),new g(22,25)),new E(30,new g(10,15),new g(67,16))),new r(40,Int32Array.from([6,30,58,86,114,142,170]),new E(30,new g(19,118),new g(6,119)),new E(28,new g(18,47),new g(31,48)),new E(30,new g(34,24),new g(34,25)),new E(30,new g(20,15),new g(61,16)))],r}(),Me;(function(r){r[r.DATA_MASK_000=0]="DATA_MASK_000",r[r.DATA_MASK_001=1]="DATA_MASK_001",r[r.DATA_MASK_010=2]="DATA_MASK_010",r[r.DATA_MASK_011=3]="DATA_MASK_011",r[r.DATA_MASK_100=4]="DATA_MASK_100",r[r.DATA_MASK_101=5]="DATA_MASK_101",r[r.DATA_MASK_110=6]="DATA_MASK_110",r[r.DATA_MASK_111=7]="DATA_MASK_111"})(Me||(Me={}));var Gn=function(){function r(e,t){this.value=e,this.isMasked=t}return r.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var a=0;a<t;a++)this.isMasked(n,a)&&e.flip(a,n)},r.values=new Map([[Me.DATA_MASK_000,new r(Me.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Me.DATA_MASK_001,new r(Me.DATA_MASK_001,function(e,t){return(e&1)===0})],[Me.DATA_MASK_010,new r(Me.DATA_MASK_010,function(e,t){return t%3===0})],[Me.DATA_MASK_011,new r(Me.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Me.DATA_MASK_100,new r(Me.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Me.DATA_MASK_101,new r(Me.DATA_MASK_101,function(e,t){return e*t%6===0})],[Me.DATA_MASK_110,new r(Me.DATA_MASK_110,function(e,t){return e*t%6<3})],[Me.DATA_MASK_111,new r(Me.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),r}(),Mo=function(){function r(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new T;this.bitMatrix=e}return r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),i=0,o=a-7,n=a-1;n>=o;n--)i=this.copyBit(8,n,i);for(var t=a-8;t<a;t++)i=this.copyBit(t,8,i);if(this.parsedFormatInfo=ya.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new T},r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Vt.getVersionForNumber(t);for(var n=0,a=e-11,i=5;i>=0;i--)for(var o=e-9;o>=a;o--)n=this.copyBit(o,i,n);var s=Vt.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var o=5;o>=0;o--)for(var i=e-9;i>=a;i--)n=this.copyBit(o,i,n);if(s=Vt.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new T},r.prototype.copyBit=function(e,t,n){var a=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return a?n<<1|1:n<<1},r.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=Gn.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var i=t.buildFunctionPattern(),o=!0,s=new Uint8Array(t.getTotalCodewords()),c=0,f=0,u=0,l=a-1;l>0;l-=2){l===6&&l--;for(var d=0;d<a;d++)for(var h=o?a-1-d:d,x=0;x<2;x++)i.get(l-x,h)||(u++,f<<=1,this.bitMatrix.get(l-x,h)&&(f|=1),u===8&&(s[c++]=f,u=0,f=0));o=!o}if(c!==t.getTotalCodewords())throw new T;return s},r.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Gn.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},r.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},r.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var a=t+1,i=e.getHeight();a<i;a++)e.get(t,a)!==e.get(a,t)&&(e.flip(a,t),e.flip(t,a))},r}(),Xn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bo=function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t,n){var a,i,o,s;if(e.length!==t.getTotalCodewords())throw new j;var c=t.getECBlocksForLevel(n),f=0,u=c.getECBlocks();try{for(var l=Xn(u),d=l.next();!d.done;d=l.next()){var h=d.value;f+=h.getCount()}}catch(ie){a={error:ie}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}var x=new Array(f),y=0;try{for(var _=Xn(u),A=_.next();!A.done;A=_.next())for(var h=A.value,w=0;w<h.getCount();w++){var C=h.getDataCodewords(),p=c.getECCodewordsPerBlock()+C;x[y++]=new r(C,new Uint8Array(p))}}catch(ie){o={error:ie}}finally{try{A&&!A.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}for(var S=x[0].codewords.length,I=x.length-1;I>=0;){var N=x[I].codewords.length;if(N===S)break;I--}I++;for(var R=S-c.getECCodewordsPerBlock(),k=0,w=0;w<R;w++)for(var B=0;B<y;B++)x[B].codewords[w]=e[k++];for(var B=I;B<y;B++)x[B].codewords[R]=e[k++];for(var ue=x[0].codewords.length,w=R;w<ue;w++)for(var B=0;B<y;B++){var W=B<I?w:w+1;x[B].codewords[W]=e[k++]}return x},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r}(),lt;(function(r){r[r.TERMINATOR=0]="TERMINATOR",r[r.NUMERIC=1]="NUMERIC",r[r.ALPHANUMERIC=2]="ALPHANUMERIC",r[r.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",r[r.BYTE=4]="BYTE",r[r.ECI=5]="ECI",r[r.KANJI=6]="KANJI",r[r.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",r[r.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",r[r.HANZI=9]="HANZI"})(lt||(lt={}));var ge=function(){function r(e,t,n,a){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=a,r.FOR_BITS.set(a,this),r.FOR_VALUE.set(e,this)}return r.forBits=function(e){var t=r.FOR_BITS.get(e);if(t===void 0)throw new j;return t},r.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]},r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.toString=function(){return this.stringValue},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.TERMINATOR=new r(lt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),r.NUMERIC=new r(lt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),r.ALPHANUMERIC=new r(lt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),r.STRUCTURED_APPEND=new r(lt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),r.BYTE=new r(lt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),r.ECI=new r(lt.ECI,"ECI",Int32Array.from([0,0,0]),7),r.KANJI=new r(lt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),r.FNC1_FIRST_POSITION=new r(lt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),r.FNC1_SECOND_POSITION=new r(lt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),r.HANZI=new r(lt.HANZI,"HANZI",Int32Array.from([8,10,12]),13),r}(),Fo=function(){function r(){}return r.decode=function(e,t,n,a){var i=new ga(e),o=new $,s=new Array,c=-1,f=-1;try{var u=null,l=!1,d=void 0;do{if(i.available()<4)d=ge.TERMINATOR;else{var h=i.readBits(4);d=ge.forBits(h)}switch(d){case ge.TERMINATOR:break;case ge.FNC1_FIRST_POSITION:case ge.FNC1_SECOND_POSITION:l=!0;break;case ge.STRUCTURED_APPEND:if(i.available()<16)throw new T;c=i.readBits(8),f=i.readBits(8);break;case ge.ECI:var x=r.parseECIValue(i);if(u=Ne.getCharacterSetECIByValue(x),u===null)throw new T;break;case ge.HANZI:var y=i.readBits(4),_=i.readBits(d.getCharacterCountBits(t));y===r.GB2312_SUBSET&&r.decodeHanziSegment(i,o,_);break;default:var A=i.readBits(d.getCharacterCountBits(t));switch(d){case ge.NUMERIC:r.decodeNumericSegment(i,o,A);break;case ge.ALPHANUMERIC:r.decodeAlphanumericSegment(i,o,A,l);break;case ge.BYTE:r.decodeByteSegment(i,o,A,u,s,a);break;case ge.KANJI:r.decodeKanjiSegment(i,o,A);break;default:throw new T}break}}while(d!==ge.TERMINATOR)}catch{throw new T}return new Dr(e,o.toString(),s.length===0?null:s,n===null?null:n.toString(),c,f)},r.decodeHanziSegment=function(e,t,n){if(n*13>e.available())throw new T;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,a[i]=s>>8&255,a[i+1]=s&255,i+=2,n--}try{t.append(ht.decode(a,J.GB2312))}catch(c){throw new T(c)}},r.decodeKanjiSegment=function(e,t,n){if(n*13>e.available())throw new T;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,a[i]=s>>8,a[i+1]=s,i+=2,n--}try{t.append(ht.decode(a,J.SHIFT_JIS))}catch(c){throw new T(c)}},r.decodeByteSegment=function(e,t,n,a,i,o){if(8*n>e.available())throw new T;for(var s=new Uint8Array(n),c=0;c<n;c++)s[c]=e.readBits(8);var f;a===null?f=J.guessEncoding(s,o):f=a.getName();try{t.append(ht.decode(s,f))}catch(u){throw new T(u)}i.push(s)},r.toAlphaNumericChar=function(e){if(e>=r.ALPHANUMERIC_CHARS.length)throw new T;return r.ALPHANUMERIC_CHARS[e]},r.decodeAlphanumericSegment=function(e,t,n,a){for(var i=t.length();n>1;){if(e.available()<11)throw new T;var o=e.readBits(11);t.append(r.toAlphaNumericChar(Math.floor(o/45))),t.append(r.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new T;t.append(r.toAlphaNumericChar(e.readBits(6)))}if(a)for(var s=i;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))},r.decodeNumericSegment=function(e,t,n){for(;n>=3;){if(e.available()<10)throw new T;var a=e.readBits(10);if(a>=1e3)throw new T;t.append(r.toAlphaNumericChar(Math.floor(a/100))),t.append(r.toAlphaNumericChar(Math.floor(a/10)%10)),t.append(r.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new T;var i=e.readBits(7);if(i>=100)throw new T;t.append(r.toAlphaNumericChar(Math.floor(i/10))),t.append(r.toAlphaNumericChar(i%10))}else if(n===1){if(e.available()<4)throw new T;var o=e.readBits(4);if(o>=10)throw new T;t.append(r.toAlphaNumericChar(o))}},r.parseECIValue=function(e){var t=e.readBits(8);if(!(t&128))return t&127;if((t&192)===128){var n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){var a=e.readBits(16);return(t&31)<<16&4294967295|a}throw new T},r.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.GB2312_SUBSET=1,r}(),ma=function(){function r(e){this.mirrored=e}return r.prototype.isMirrored=function(){return this.mirrored},r.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},r}(),Wn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lo=function(){function r(){this.rsDecoder=new Pr(at.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(At.parseFromBooleanArray(e),t)},r.prototype.decodeBitMatrix=function(e,t){var n=new Mo(e),a=null;try{return this.decodeBitMatrixParser(n,t)}catch(o){a=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var i=this.decodeBitMatrixParser(n,t);return i.setOther(new ma(!0)),i}catch(o){throw a!==null?a:o}},r.prototype.decodeBitMatrixParser=function(e,t){var n,a,i,o,s=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),u=Bo.getDataBlocks(f,s,c),l=0;try{for(var d=Wn(u),h=d.next();!h.done;h=d.next()){var x=h.value;l+=x.getNumDataCodewords()}}catch(I){n={error:I}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var y=new Uint8Array(l),_=0;try{for(var A=Wn(u),w=A.next();!w.done;w=A.next()){var x=w.value,C=x.getCodewords(),p=x.getNumDataCodewords();this.correctErrors(C,p);for(var S=0;S<p;S++)y[_++]=C[S]}}catch(I){i={error:I}}finally{try{w&&!w.done&&(o=A.return)&&o.call(A)}finally{if(i)throw i.error}}return Fo.decode(y,s,c,t)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Ae}for(var a=0;a<t;a++)e[a]=n[a]},r}(),ko=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jo=function(r){ko(e,r);function e(t,n,a){var i=r.call(this,t,n)||this;return i.estimatedModuleSize=a,i}return e.prototype.aboutEquals=function(t,n,a){if(Math.abs(n-this.getY())<=t&&Math.abs(a-this.getX())<=t){var i=Math.abs(t-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,a){var i=(this.getX()+n)/2,o=(this.getY()+t)/2,s=(this.estimatedModuleSize+a)/2;return new e(i,o,s)},e}(M),Uo=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vo=function(){function r(e,t,n,a,i,o,s){this.image=e,this.startX=t,this.startY=n,this.width=a,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return r.prototype.find=function(){for(var e=this.startX,t=this.height,n=this.width,a=e+n,i=this.startY+t/2,o=new Int32Array(3),s=this.image,c=0;c<t;c++){var f=i+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var u=e;u<a&&!s.get(u,f);)u++;for(var l=0;u<a;){if(s.get(u,f))if(l===1)o[1]++;else if(l===2){if(this.foundPatternCross(o)){var d=this.handlePossibleCenter(o,f,u);if(d!==null)return d}o[0]=o[2],o[1]=1,o[2]=0,l=1}else o[++l]++;else l===1&&l++,o[l]++;u++}if(this.foundPatternCross(o)){var d=this.handlePossibleCenter(o,f,a);if(d!==null)return d}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new b},r.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},r.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,a=0;a<3;a++)if(Math.abs(t-e[a])>=n)return!1;return!0},r.prototype.crossCheckVertical=function(e,t,n,a){var i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var c=e;c>=0&&i.get(t,c)&&s[1]<=n;)s[1]++,c--;if(c<0||s[1]>n)return NaN;for(;c>=0&&!i.get(t,c)&&s[0]<=n;)s[0]++,c--;if(s[0]>n)return NaN;for(c=e+1;c<o&&i.get(t,c)&&s[1]<=n;)s[1]++,c++;if(c===o||s[1]>n)return NaN;for(;c<o&&!i.get(t,c)&&s[2]<=n;)s[2]++,c++;if(s[2]>n)return NaN;var f=s[0]+s[1]+s[2];return 5*Math.abs(f-a)>=2*a?NaN:this.foundPatternCross(s)?r.centerFromEnd(s,c):NaN},r.prototype.handlePossibleCenter=function(e,t,n){var a,i,o=e[0]+e[1]+e[2],s=r.centerFromEnd(e,n),c=this.crossCheckVertical(t,s,2*e[1],o);if(!isNaN(c)){var f=(e[0]+e[1]+e[2])/3;try{for(var u=Uo(this.possibleCenters),l=u.next();!l.done;l=u.next()){var d=l.value;if(d.aboutEquals(f,c,s))return d.combineEstimate(c,s,f)}}catch(x){a={error:x}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}var h=new jo(s,c,f);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},r}(),Ho=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Go=function(r){Ho(e,r);function e(t,n,a,i){var o=r.call(this,t,n)||this;return o.estimatedModuleSize=a,o.count=i,i===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,n,a){if(Math.abs(n-this.getY())<=t&&Math.abs(a-this.getX())<=t){var i=Math.abs(t-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,a){var i=this.count+1,o=(this.count*this.getX()+n)/i,s=(this.count*this.getY()+t)/i,c=(this.count*this.estimatedModuleSize+a)/i;return new e(o,s,c,i)},e}(M),Xo=function(){function r(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r}(),tr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wo=function(){function r(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return r.prototype.getImage=function(){return this.image},r.prototype.getPossibleCenters=function(){return this.possibleCenters},r.prototype.find=function(e){var t=e!=null&&e.get(fe.TRY_HARDER)!==void 0,n=e!=null&&e.get(fe.PURE_BARCODE)!==void 0,a=this.image,i=a.getHeight(),o=a.getWidth(),s=Math.floor(3*i/(4*r.MAX_MODULES));(s<r.MIN_SKIP||t)&&(s=r.MIN_SKIP);for(var c=!1,f=new Int32Array(5),u=s-1;u<i&&!c;u+=s){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var l=0,d=0;d<o;d++)if(a.get(d,u))(l&1)===1&&l++,f[l]++;else if(l&1)f[l]++;else if(l===4)if(r.foundPatternCross(f)){var h=this.handlePossibleCenter(f,u,d,n);if(h===!0)if(s=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>f[2]&&(u+=x-f[2]-s,d=o-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,l=3;continue}l=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,l=3;else f[++l]++;if(r.foundPatternCross(f)){var h=this.handlePossibleCenter(f,u,o,n);h===!0&&(s=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var y=this.selectBestPatterns();return M.orderBestPatterns(y),new Xo(y)},r.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},r.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;t+=a}if(t<7)return!1;var i=t/7,o=i/2;return Math.abs(i-e[0])<o&&Math.abs(i-e[1])<o&&Math.abs(3*i-e[2])<3*o&&Math.abs(i-e[3])<o&&Math.abs(i-e[4])<o},r.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},r.prototype.crossCheckDiagonal=function(e,t,n,a){for(var i=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&t>=o&&s.get(t-o,e-o);)i[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!s.get(t-o,e-o)&&i[1]<=n;)i[1]++,o++;if(e<o||t<o||i[1]>n)return!1;for(;e>=o&&t>=o&&s.get(t-o,e-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;var c=s.getHeight(),f=s.getWidth();for(o=1;e+o<c&&t+o<f&&s.get(t+o,e+o);)i[2]++,o++;if(e+o>=c||t+o>=f)return!1;for(;e+o<c&&t+o<f&&!s.get(t+o,e+o)&&i[3]<n;)i[3]++,o++;if(e+o>=c||t+o>=f||i[3]>=n)return!1;for(;e+o<c&&t+o<f&&s.get(t+o,e+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;var u=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(u-a)<2*a&&r.foundPatternCross(i)},r.prototype.crossCheckVertical=function(e,t,n,a){for(var i=this.image,o=i.getHeight(),s=this.getCrossCheckStateCount(),c=e;c>=0&&i.get(t,c);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!i.get(t,c)&&s[1]<=n;)s[1]++,c--;if(c<0||s[1]>n)return NaN;for(;c>=0&&i.get(t,c)&&s[0]<=n;)s[0]++,c--;if(s[0]>n)return NaN;for(c=e+1;c<o&&i.get(t,c);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!i.get(t,c)&&s[3]<n;)s[3]++,c++;if(c===o||s[3]>=n)return NaN;for(;c<o&&i.get(t,c)&&s[4]<n;)s[4]++,c++;if(s[4]>=n)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-a)>=2*a?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,c):NaN},r.prototype.crossCheckHorizontal=function(e,t,n,a){for(var i=this.image,o=i.getWidth(),s=this.getCrossCheckStateCount(),c=e;c>=0&&i.get(c,t);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!i.get(c,t)&&s[1]<=n;)s[1]++,c--;if(c<0||s[1]>n)return NaN;for(;c>=0&&i.get(c,t)&&s[0]<=n;)s[0]++,c--;if(s[0]>n)return NaN;for(c=e+1;c<o&&i.get(c,t);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!i.get(c,t)&&s[3]<n;)s[3]++,c++;if(c===o||s[3]>=n)return NaN;for(;c<o&&i.get(c,t)&&s[4]<n;)s[4]++,c++;if(s[4]>=n)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-a)>=a?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,c):NaN},r.prototype.handlePossibleCenter=function(e,t,n,a){var i=e[0]+e[1]+e[2]+e[3]+e[4],o=r.centerFromEnd(e,n),s=this.crossCheckVertical(t,Math.floor(o),e[2],i);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],i),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],i)))){for(var c=i/7,f=!1,u=this.possibleCenters,l=0,d=u.length;l<d;l++){var h=u[l];if(h.aboutEquals(c,s,o)){u[l]=h.combineEstimate(s,o,c),f=!0;break}}if(!f){var x=new Go(o,s,c);u.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},r.prototype.findRowSkip=function(){var e,t,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var i=tr(this.possibleCenters),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.getCount()>=r.CENTER_QUORUM)if(a==null)a=s;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-s.getX())-Math.abs(a.getY()-s.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return 0},r.prototype.haveMultiplyConfirmedCenters=function(){var e,t,n,a,i=0,o=0,s=this.possibleCenters.length;try{for(var c=tr(this.possibleCenters),f=c.next();!f.done;f=c.next()){var u=f.value;u.getCount()>=r.CENTER_QUORUM&&(i++,o+=u.getEstimatedModuleSize())}}catch(y){e={error:y}}finally{try{f&&!f.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(i<3)return!1;var l=o/s,d=0;try{for(var h=tr(this.possibleCenters),x=h.next();!x.done;x=h.next()){var u=x.value;d+=Math.abs(u.getEstimatedModuleSize()-l)}}catch(y){n={error:y}}finally{try{x&&!x.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}return d<=.05*o},r.prototype.selectBestPatterns=function(){var e,t,n,a,i=this.possibleCenters.length;if(i<3)throw new b;var o=this.possibleCenters,s;if(i>3){var c=0,f=0;try{for(var u=tr(this.possibleCenters),l=u.next();!l.done;l=u.next()){var d=l.value,h=d.getEstimatedModuleSize();c+=h,f+=h*h}}catch(S){e={error:S}}finally{try{l&&!l.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}s=c/i;var x=Math.sqrt(f/i-s*s);o.sort(function(S,I){var N=Math.abs(I.getEstimatedModuleSize()-s),R=Math.abs(S.getEstimatedModuleSize()-s);return N<R?-1:N>R?1:0});for(var y=Math.max(.2*s,x),_=0;_<o.length&&o.length>3;_++){var A=o[_];Math.abs(A.getEstimatedModuleSize()-s)>y&&(o.splice(_,1),_--)}}if(o.length>3){var c=0;try{for(var w=tr(o),C=w.next();!C.done;C=w.next()){var p=C.value;c+=p.getEstimatedModuleSize()}}catch(I){n={error:I}}finally{try{C&&!C.done&&(a=w.return)&&a.call(w)}finally{if(n)throw n.error}}s=c/o.length,o.sort(function(I,N){if(N.getCount()===I.getCount()){var R=Math.abs(N.getEstimatedModuleSize()-s),k=Math.abs(I.getEstimatedModuleSize()-s);return R<k?1:R>k?-1:0}else return N.getCount()-I.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},r.CENTER_QUORUM=2,r.MIN_SKIP=3,r.MAX_MODULES=57,r}(),zo=function(){function r(e){this.image=e}return r.prototype.getImage=function(){return this.image},r.prototype.getResultPointCallback=function(){return this.resultPointCallback},r.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(fe.NEED_RESULT_POINT_CALLBACK);var t=new Wo(this.image,this.resultPointCallback),n=t.find(e);return this.processFinderPatternInfo(n)},r.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),i=this.calculateModuleSize(t,n,a);if(i<1)throw new b("No pattern found in proccess finder.");var o=r.computeDimension(t,n,a,i),s=Vt.getProvisionalVersionForDimension(o),c=s.getDimensionForVersion()-7,f=null;if(s.getAlignmentPatternCenters().length>0)for(var u=n.getX()-t.getX()+a.getX(),l=n.getY()-t.getY()+a.getY(),d=1-3/c,h=Math.floor(t.getX()+d*(u-t.getX())),x=Math.floor(t.getY()+d*(l-t.getY())),y=4;y<=16;y<<=1)try{f=this.findAlignmentInRegion(i,h,x,y);break}catch(C){if(!(C instanceof b))throw C}var _=r.createTransform(t,n,a,f,o),A=r.sampleGrid(this.image,_,o),w;return f===null?w=[a,t,n]:w=[a,t,n,f],new nn(A,w)},r.createTransform=function(e,t,n,a,i){var o=i-3.5,s,c,f,u;return a!==null?(s=a.getX(),c=a.getY(),f=o-3,u=f):(s=t.getX()-e.getX()+n.getX(),c=t.getY()-e.getY()+n.getY(),f=o,u=o),ha.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,f,u,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,c,n.getX(),n.getY())},r.sampleGrid=function(e,t,n){var a=an.getInstance();return a.sampleGridWithTransform(e,n,n,t)},r.computeDimension=function(e,t,n,a){var i=te.round(M.distance(e,t)/a),o=te.round(M.distance(e,n)/a),s=Math.floor((i+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new b("Dimensions could be not found.")}return s},r.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},r.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,a){var i=this.sizeOfBlackWhiteBlackRun(e,t,n,a),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var c=Math.floor(t-(a-t)*o);return o=1,c<0?(o=t/(t-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,t,s,c),i-1},r.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,a){var i=Math.abs(a-t)>Math.abs(n-e);if(i){var o=e;e=t,t=o,o=n,n=a,a=o}for(var s=Math.abs(n-e),c=Math.abs(a-t),f=-s/2,u=e<n?1:-1,l=t<a?1:-1,d=0,h=n+u,x=e,y=t;x!==h;x+=u){var _=i?y:x,A=i?x:y;if(d===1===this.image.get(_,A)){if(d===2)return te.distance(x,y,e,t);d++}if(f+=c,f>0){if(y===a)break;y+=l,f-=s}}return d===2?te.distance(n+u,a,e,t):NaN},r.prototype.findAlignmentInRegion=function(e,t,n,a){var i=Math.floor(a*e),o=Math.max(0,t-i),s=Math.min(this.image.getWidth()-1,t+i);if(s-o<e*3)throw new b("Alignment top exceeds estimated module size.");var c=Math.max(0,n-i),f=Math.min(this.image.getHeight()-1,n+i);if(f-c<e*3)throw new b("Alignment bottom exceeds estimated module size.");var u=new Vo(this.image,o,c,s-o,f-c,e,this.resultPointCallback);return u.find()},r}(),Nr=function(){function r(){this.decoder=new Lo}return r.prototype.getDecoder=function(){return this.decoder},r.prototype.decode=function(e,t){var n,a;if(t!=null&&t.get(fe.PURE_BARCODE)!==void 0){var i=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,t),a=r.NO_POINTS}else{var o=new zo(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(o.getBits(),t),a=o.getPoints()}n.getOther()instanceof ma&&n.getOther().applyMirroredCorrection(a);var s=new Ye(n.getText(),n.getRawBytes(),void 0,a,F.QR_CODE,void 0),c=n.getByteSegments();c!==null&&s.putMetadata(Ve.BYTE_SEGMENTS,c);var f=n.getECLevel();return f!==null&&s.putMetadata(Ve.ERROR_CORRECTION_LEVEL,f),n.hasStructuredAppend()&&(s.putMetadata(Ve.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(Ve.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new b;var a=this.moduleSize(t,e),i=t[1],o=n[1],s=t[0],c=n[0];if(s>=c||i>=o)throw new b;if(o-i!==c-s&&(c=s+(o-i),c>=e.getWidth()))throw new b;var f=Math.round((c-s+1)/a),u=Math.round((o-i+1)/a);if(f<=0||u<=0)throw new b;if(u!==f)throw new b;var l=Math.floor(a/2);i+=l,s+=l;var d=s+Math.floor((f-1)*a)-c;if(d>0){if(d>l)throw new b;s-=d}var h=i+Math.floor((u-1)*a)-o;if(h>0){if(h>l)throw new b;i-=h}for(var x=new At(f,u),y=0;y<u;y++)for(var _=i+Math.floor(y*a),A=0;A<f;A++)e.get(s+Math.floor(A*a),_)&&x.set(A,y);return x},r.moduleSize=function(e,t){for(var n=t.getHeight(),a=t.getWidth(),i=e[0],o=e[1],s=!0,c=0;i<a&&o<n;){if(s!==t.get(i,o)){if(++c===5)break;s=!s}i++,o++}if(i===a||o===n)throw new b;return(i-e[0])/7},r.NO_POINTS=new Array,r}(),$o=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q=function(){function r(){}return r.prototype.PDF417Common=function(){},r.getBitCountSum=function(e){return te.sum(e)},r.toIntArray=function(e){var t,n;if(e==null||!e.length)return r.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),i=0;try{for(var o=$o(e),s=o.next();!s.done;s=o.next()){var c=s.value;a[i++]=c}}catch(f){t={error:f}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a},r.getCodeword=function(e){var t=Oe.binarySearch(r.SYMBOL_TABLE,e&262143);return t<0?-1:(r.CODEWORD_TABLE[t]-1)%r.NUMBER_OF_CODEWORDS},r.NUMBER_OF_CODEWORDS=929,r.MAX_CODEWORDS_IN_BARCODE=r.NUMBER_OF_CODEWORDS-1,r.MIN_ROWS_IN_BARCODE=3,r.MAX_ROWS_IN_BARCODE=90,r.MODULES_IN_CODEWORD=17,r.MODULES_IN_STOP_PATTERN=18,r.BARS_IN_MODULE=8,r.EMPTY_INT_ARRAY=new Int32Array([]),r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),r}(),Yo=function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r}(),Zo=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qo=function(){function r(){}return r.detectMultiple=function(e,t,n){var a=e.getBlackMatrix(),i=r.detect(n,a);return i.length||(a=a.clone(),a.rotate180(),i=r.detect(n,a)),new Yo(a,i)},r.detect=function(e,t){for(var n,a,i=new Array,o=0,s=0,c=!1;o<t.getHeight();){var f=r.findVertices(t,o,s);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,s=0;try{for(var u=(n=void 0,Zo(i)),l=u.next();!l.done;l=u.next()){var d=l.value;d[1]!=null&&(o=Math.trunc(Math.max(o,d[1].getY()))),d[3]!=null&&(o=Math.max(o,Math.trunc(d[3].getY())))}}catch(h){n={error:h}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}o+=r.ROW_STEP;continue}if(c=!0,i.push(f),!e)break;f[2]!=null?(s=Math.trunc(f[2].getX()),o=Math.trunc(f[2].getY())):(s=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY()))}return i},r.findVertices=function(e,t,n){var a=e.getHeight(),i=e.getWidth(),o=new Array(8);return r.copyToResult(o,r.findRowsWithPattern(e,a,i,t,n,r.START_PATTERN),r.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),r.copyToResult(o,r.findRowsWithPattern(e,a,i,t,n,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN),o},r.copyToResult=function(e,t,n){for(var a=0;a<n.length;a++)e[n[a]]=t[a]},r.findRowsWithPattern=function(e,t,n,a,i,o){for(var s=new Array(4),c=!1,f=new Int32Array(o.length);a<t;a+=r.ROW_STEP){var u=r.findGuardPattern(e,i,a,n,!1,o,f);if(u!=null){for(;a>0;){var l=r.findGuardPattern(e,i,--a,n,!1,o,f);if(l!=null)u=l;else{a++;break}}s[0]=new M(u[0],a),s[1]=new M(u[1],a),c=!0;break}}var d=a+1;if(c){for(var h=0,l=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);d<t;d++){var u=r.findGuardPattern(e,l[0],d,n,!1,o,f);if(u!=null&&Math.abs(l[0]-u[0])<r.MAX_PATTERN_DRIFT&&Math.abs(l[1]-u[1])<r.MAX_PATTERN_DRIFT)l=u,h=0;else{if(h>r.SKIPPED_ROW_COUNT_MAX)break;h++}}d-=h+1,s[2]=new M(l[0],d),s[3]=new M(l[1],d)}return d-a<r.BARCODE_MIN_HEIGHT&&Oe.fill(s,null),s},r.findGuardPattern=function(e,t,n,a,i,o,s){Oe.fillWithin(s,0,s.length,0);for(var c=t,f=0;e.get(c,n)&&c>0&&f++<r.MAX_PIXEL_DRIFT;)c--;for(var u=c,l=0,d=o.length,h=i;u<a;u++){var x=e.get(u,n);if(x!==h)s[l]++;else{if(l===d-1){if(r.patternMatchVariance(s,o,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE)return new Int32Array([c,u]);c+=s[0]+s[1],xe.arraycopy(s,2,s,0,l-1),s[l-1]=0,s[l]=0,l--}else l++;s[l]=1,h=!h}}return l===d-1&&r.patternMatchVariance(s,o,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE?new Int32Array([c,u-1]):null},r.patternMatchVariance=function(e,t,n){for(var a=e.length,i=0,o=0,s=0;s<a;s++)i+=e[s],o+=t[s];if(i<o)return 1/0;var c=i/o;n*=c;for(var f=0,u=0;u<a;u++){var l=e[u],d=t[u]*c,h=l>d?l-d:d-l;if(h>n)return 1/0;f+=h}return f/i},r.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),r.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),r.MAX_AVG_VARIANCE=.42,r.MAX_INDIVIDUAL_VARIANCE=.8,r.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),r.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),r.MAX_PIXEL_DRIFT=3,r.MAX_PATTERN_DRIFT=5,r.SKIPPED_ROW_COUNT_MAX=25,r.ROW_STEP=5,r.BARCODE_MIN_HEIGHT=10,r}(),Ko=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ut=function(){function r(e,t){if(t.length===0)throw new j;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var a=1;a<n&&t[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),xe.arraycopy(t,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){var t,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var i=Ko(this.coefficients),o=i.next();!o.done;o=i.next()){var s=o.value;a=this.field.add(a,s)}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a}for(var c=this.coefficients[0],f=this.coefficients.length,u=1;u<f;u++)c=this.field.add(this.field.multiply(e,c),this.coefficients[u]);return c},r.prototype.add=function(e){if(!this.field.equals(e.field))throw new j("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var a=t;t=n,n=a}var i=new Int32Array(n.length),o=n.length-t.length;xe.arraycopy(n,0,i,0,o);for(var s=o;s<n.length;s++)i[s]=this.field.add(t[s-o],n[s]);return new r(this.field,i)},r.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new j("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},r.prototype.multiply=function(e){return e instanceof r?this.multiplyOther(e):this.multiplyScalar(e)},r.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new j("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new r(this.field,new Int32Array([0]));for(var t=this.coefficients,n=t.length,a=e.coefficients,i=a.length,o=new Int32Array(n+i-1),s=0;s<n;s++)for(var c=t[s],f=0;f<i;f++)o[s+f]=this.field.add(o[s+f],this.field.multiply(c,a[f]));return new r(this.field,o)},r.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new r(this.field,t)},r.prototype.multiplyScalar=function(e){if(e===0)return new r(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,n=new Int32Array(t),a=0;a<t;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new r(this.field,n)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new j;if(t===0)return new r(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),i=0;i<n;i++)a[i]=this.field.multiply(this.coefficients[i],t);return new r(this.field,a)},r.prototype.toString=function(){for(var e=new $,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},r}(),Jo=function(){function r(){}return r.prototype.add=function(e,t){return(e+t)%this.modulus},r.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new j;return this.logTable[e]},r.prototype.inverse=function(e){if(e===0)throw new da;return this.expTable[this.modulus-this.logTable[e]-1]},r.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},r.prototype.getSize=function(){return this.modulus},r.prototype.equals=function(e){return e===this},r}(),qo=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),es=function(r){qo(e,r);function e(t,n){var a=r.call(this)||this;a.modulus=t,a.expTable=new Int32Array(t),a.logTable=new Int32Array(t);for(var i=1,o=0;o<t;o++)a.expTable[o]=i,i=i*n%t;for(var o=0;o<t-1;o++)a.logTable[a.expTable[o]]=o;return a.zero=new Ut(a,new Int32Array([0])),a.one=new Ut(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new j;if(n===0)return this.zero;var a=new Int32Array(t+1);return a[0]=n,new Ut(this,a)},e.PDF417_GF=new e(q.NUMBER_OF_CODEWORDS,3),e}(Jo),ts=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rs=function(){function r(){this.field=es.PDF417_GF}return r.prototype.decode=function(e,t,n){for(var a,i,o=new Ut(this.field,e),s=new Int32Array(t),c=!1,f=t;f>0;f--){var u=o.evaluateAt(this.field.exp(f));s[t-f]=u,u!==0&&(c=!0)}if(!c)return 0;var l=this.field.getOne();if(n!=null)try{for(var d=ts(n),h=d.next();!h.done;h=d.next()){var x=h.value,y=this.field.exp(e.length-1-x),_=new Ut(this.field,new Int32Array([this.field.subtract(0,y),1]));l=l.multiply(_)}}catch(R){a={error:R}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}for(var A=new Ut(this.field,s),w=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),A,t),C=w[0],p=w[1],S=this.findErrorLocations(C),I=this.findErrorMagnitudes(p,C,S),f=0;f<S.length;f++){var N=e.length-1-this.field.log(S[f]);if(N<0)throw Ae.getChecksumInstance();e[N]=this.field.subtract(e[N],I[f])}return S.length},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var a=e;e=t,t=a}for(var i=e,o=t,s=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(n/2);){var f=i,u=s;if(i=o,s=c,i.isZero())throw Ae.getChecksumInstance();o=f;for(var l=this.field.getZero(),d=i.getCoefficient(i.getDegree()),h=this.field.inverse(d);o.getDegree()>=i.getDegree()&&!o.isZero();){var x=o.getDegree()-i.getDegree(),y=this.field.multiply(o.getCoefficient(o.getDegree()),h);l=l.add(this.field.buildMonomial(x,y)),o=o.subtract(i.multiplyByMonomial(x,y))}c=l.multiply(s).subtract(u).negative()}var _=c.getCoefficient(0);if(_===0)throw Ae.getChecksumInstance();var A=this.field.inverse(_),w=c.multiply(A),C=o.multiply(A);return[w,C]},r.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),a=0,i=1;i<this.field.getSize()&&a<t;i++)e.evaluateAt(i)===0&&(n[a]=this.field.inverse(i),a++);if(a!==t)throw Ae.getChecksumInstance();return n},r.prototype.findErrorMagnitudes=function(e,t,n){for(var a=t.getDegree(),i=new Int32Array(a),o=1;o<=a;o++)i[a-o]=this.field.multiply(o,t.getCoefficient(o));for(var s=new Ut(this.field,i),c=n.length,f=new Int32Array(c),o=0;o<c;o++){var u=this.field.inverse(n[o]),l=this.field.subtract(0,e.evaluateAt(u)),d=this.field.inverse(s.evaluateAt(u));f[o]=this.field.multiply(l,d)}return f},r}(),Jr=function(){function r(e,t,n,a,i){e instanceof r?this.constructor_2(e):this.constructor_1(e,t,n,a,i)}return r.prototype.constructor_1=function(e,t,n,a,i){var o=t==null||n==null,s=a==null||i==null;if(o&&s)throw new b;o?(t=new M(0,a.getY()),n=new M(0,i.getY())):s&&(a=new M(e.getWidth()-1,t.getY()),i=new M(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=a,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))},r.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},r.merge=function(e,t){return e==null?t:t==null?e:new r(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},r.prototype.addMissingRows=function(e,t,n){var a=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,f=Math.trunc(c.getY()-e);f<0&&(f=0);var u=new M(c.getX(),f);n?a=u:o=u}if(t>0){var l=n?this.bottomLeft:this.bottomRight,d=Math.trunc(l.getY()+t);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var h=new M(l.getX(),d);n?i=h:s=h}return new r(this.image,a,i,o,s)},r.prototype.getMinX=function(){return this.minX},r.prototype.getMaxX=function(){return this.maxX},r.prototype.getMinY=function(){return this.minY},r.prototype.getMaxY=function(){return this.maxY},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getBottomRight=function(){return this.bottomRight},r}(),ns=function(){function r(e,t,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return r.prototype.getColumnCount=function(){return this.columnCount},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getRowCount=function(){return this.rowCount},r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},r}(),sn=function(){function r(){this.buffer=""}return r.form=function(e,t){var n=-1;function a(o,s,c,f,u,l){if(o==="%%")return"%";if(t[++n]!==void 0){o=f?parseInt(f.substr(1)):void 0;var d=u?parseInt(u.substr(1)):void 0,h;switch(l){case"s":h=t[n];break;case"c":h=t[n][0];break;case"f":h=parseFloat(t[n]).toFixed(o);break;case"p":h=parseFloat(t[n]).toPrecision(o);break;case"e":h=parseFloat(t[n]).toExponential(o);break;case"x":h=parseInt(t[n]).toString(d||16);break;case"d":h=parseFloat(parseInt(t[n],d||10).toPrecision(o)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(d);for(var x=parseInt(c),y=c&&c[0]+""=="0"?"0":" ";h.length<x;)h=s!==void 0?h+y:y+h;return h}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,a)},r.prototype.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.buffer+=r.form(e,t)},r.prototype.toString=function(){return this.buffer},r}(),as=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wa=function(){function r(e){this.boundingBox=new Jr(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return r.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var n=1;n<r.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(t=this.codewords[a],t!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(t=this.codewords[a],t!=null)))return t}return null},r.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},r.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},r.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.getCodewords=function(){return this.codewords},r.prototype.toString=function(){var e,t,n=new sn,a=0;try{for(var i=as(this.codewords),o=i.next();!o.done;o=i.next()){var s=o.value;if(s==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,s.getRowNumber(),s.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n.toString()},r.MAX_NEARBY_DISTANCE=5,r}(),is=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},os=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return i},ir=function(){function r(){this.values=new Map}return r.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},r.prototype.getValue=function(){var e,t,n=-1,a=new Array,i=function(l,d){var h={getKey:function(){return l},getValue:function(){return d}};h.getValue()>n?(n=h.getValue(),a=[],a.push(h.getKey())):h.getValue()===n&&a.push(h.getKey())};try{for(var o=is(this.values.entries()),s=o.next();!s.done;s=o.next()){var c=os(s.value,2),f=c[0],u=c[1];i(f,u)}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return q.toIntArray(a)},r.prototype.getConfidence=function(e){return this.values.get(e)},r}(),ss=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zn=function(r){ss(e,r);function e(t,n){var a=r.call(this,t)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var t,n;try{for(var a=Vr(this.getCodewords()),i=a.next();!i.done;i=a.next()){var o=i.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,t);for(var a=this.getBoundingBox(),i=this._isLeft?a.getTopLeft():a.getTopRight(),o=this._isLeft?a.getBottomLeft():a.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=-1,u=1,l=0,d=s;d<c;d++)if(n[d]!=null){var h=n[d],x=h.getRowNumber()-f;if(x===0)l++;else if(x===1)u=Math.max(u,l),l=1,f=h.getRowNumber();else if(x<0||h.getRowNumber()>=t.getRowCount()||x>d)n[d]=null;else{var y=void 0;u>2?y=(u-2)*x:y=x;for(var _=y>=d,A=1;A<=y&&!_;A++)_=n[d-A]!=null;_?n[d]=null:(f=h.getRowNumber(),l=1)}}},e.prototype.getRowHeights=function(){var t,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var i=new Int32Array(a.getRowCount());try{for(var o=Vr(this.getCodewords()),s=o.next();!s.done;s=o.next()){var c=s.value;if(c!=null){var f=c.getRowNumber();if(f>=i.length)continue;i[f]++}}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.getCodewords(),f=-1,u=o;u<s;u++)if(c[u]!=null){var l=c[u];l.setRowNumberAsRowIndicatorColumn();var d=l.getRowNumber()-f;d===0||(d===1?f=l.getRowNumber():l.getRowNumber()>=t.getRowCount()?c[u]=null:f=l.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,n,a=this.getCodewords(),i=new ir,o=new ir,s=new ir,c=new ir;try{for(var f=Vr(a),u=f.next();!u.done;u=f.next()){var l=u.value;if(l!=null){l.setRowNumberAsRowIndicatorColumn();var d=l.getValue()%30,h=l.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:o.setValue(d*3+1);break;case 1:c.setValue(d/3),s.setValue(d%3);break;case 2:i.setValue(d+1);break}}}}catch(y){t={error:y}}finally{try{u&&!u.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}if(i.getValue().length===0||o.getValue().length===0||s.getValue().length===0||c.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<q.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>q.MAX_ROWS_IN_BARCODE)return null;var x=new ns(i.getValue()[0],o.getValue()[0],s.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,x),x},e.prototype.removeIncorrectCodewords=function(t,n){for(var a=0;a<t.length;a++){var i=t[a];if(t[a]!=null){var o=i.getValue()%30,s=i.getRowNumber();if(s>n.getRowCount()){t[a]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(t[a]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(t[a]=null);break;case 2:o+1!==n.getColumnCount()&&(t[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+r.prototype.toString.call(this)},e}(wa),cs=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fs=function(){function r(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=q.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},r.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},r.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(t,a,n));return e},r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},r.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var i=this.detectionResultColumns[a].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var a=t[n].getRowNumber(),i=0,o=this.barcodeColumnCount+1;o>0&&i<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=r.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||e++)}return e},r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var a=t[n].getRowNumber(),i=0,o=1;o<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=r.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||e++)}return e},r.adjustRowNumberIfValid=function(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},r.prototype.adjustRowNumbers=function(e,t,n){var a,i;if(this.detectionResultColumns[e-1]!=null){var o=n[t],s=this.detectionResultColumns[e-1].getCodewords(),c=s;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=s[t],f[3]=c[t],t>0&&(f[0]=n[t-1],f[4]=s[t-1],f[5]=c[t-1]),t>1&&(f[8]=n[t-2],f[10]=s[t-2],f[11]=c[t-2]),t<n.length-1&&(f[1]=n[t+1],f[6]=s[t+1],f[7]=c[t+1]),t<n.length-2&&(f[9]=n[t+2],f[12]=s[t+2],f[13]=c[t+2]);try{for(var u=cs(f),l=u.next();!l.done;l=u.next()){var d=l.value;if(r.adjustRowNumber(o,d))return}}catch(h){a={error:h}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}}},r.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},r.prototype.setBoundingBox=function(e){this.boundingBox=e},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},r.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},r.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new sn,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){t.format("    |   ");continue}var i=this.detectionResultColumns[a].getCodewords()[n];if(i==null){t.format("    |   ");continue}t.format(" %3d|%3d",i.getRowNumber(),i.getValue())}t.format("%n")}return t.toString()},r}(),us=function(){function r(e,t,n,a){this.rowNumber=r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},r.prototype.isValidRowNumber=function(e){return e!==r.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},r.prototype.getWidth=function(){return this.endX-this.startX},r.prototype.getStartX=function(){return this.startX},r.prototype.getEndX=function(){return this.endX},r.prototype.getBucket=function(){return this.bucket},r.prototype.getValue=function(){return this.value},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.setRowNumber=function(e){this.rowNumber=e},r.prototype.toString=function(){return this.rowNumber+"|"+this.value},r.BARCODE_ROW_UNKNOWN=-1,r}(),ls=function(){function r(){}return r.initialize=function(){for(var e=0;e<q.SYMBOL_TABLE.length;e++)for(var t=q.SYMBOL_TABLE[e],n=t&1,a=0;a<q.BARS_IN_MODULE;a++){for(var i=0;(t&1)===n;)i+=1,t>>=1;n=t&1,r.RATIOS_TABLE[e]||(r.RATIOS_TABLE[e]=new Array(q.BARS_IN_MODULE)),r.RATIOS_TABLE[e][q.BARS_IN_MODULE-a-1]=Math.fround(i/q.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},r.getDecodedValue=function(e){var t=r.getDecodedCodewordValue(r.sampleBitCounts(e));return t!==-1?t:r.getClosestDecodedValue(e)},r.sampleBitCounts=function(e){for(var t=te.sum(e),n=new Int32Array(q.BARS_IN_MODULE),a=0,i=0,o=0;o<q.MODULES_IN_CODEWORD;o++){var s=t/(2*q.MODULES_IN_CODEWORD)+o*t/q.MODULES_IN_CODEWORD;i+e[a]<=s&&(i+=e[a],a++),n[a]++}return n},r.getDecodedCodewordValue=function(e){var t=r.getBitValue(e);return q.getCodeword(t)===-1?-1:t},r.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},r.getClosestDecodedValue=function(e){var t=te.sum(e),n=new Array(q.BARS_IN_MODULE);if(t>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/t);var i=Zr.MAX_VALUE,o=-1;this.bSymbolTableReady||r.initialize();for(var s=0;s<r.RATIOS_TABLE.length;s++){for(var c=0,f=r.RATIOS_TABLE[s],u=0;u<q.BARS_IN_MODULE;u++){var l=Math.fround(f[u]-n[u]);if(c+=Math.fround(l*l),c>=i)break}c<i&&(i=c,o=q.SYMBOL_TABLE[s])}return o},r.bSymbolTableReady=!1,r.RATIOS_TABLE=new Array(q.SYMBOL_TABLE.length).map(function(e){return new Array(q.BARS_IN_MODULE)}),r}(),ds=function(){function r(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return r.prototype.getSegmentIndex=function(){return this.segmentIndex},r.prototype.setSegmentIndex=function(e){this.segmentIndex=e},r.prototype.getFileId=function(){return this.fileId},r.prototype.setFileId=function(e){this.fileId=e},r.prototype.getOptionalData=function(){return this.optionalData},r.prototype.setOptionalData=function(e){this.optionalData=e},r.prototype.isLastSegment=function(){return this.lastSegment},r.prototype.setLastSegment=function(e){this.lastSegment=e},r.prototype.getSegmentCount=function(){return this.segmentCount},r.prototype.setSegmentCount=function(e){this.segmentCount=e},r.prototype.getSender=function(){return this.sender||null},r.prototype.setSender=function(e){this.sender=e},r.prototype.getAddressee=function(){return this.addressee||null},r.prototype.setAddressee=function(e){this.addressee=e},r.prototype.getFileName=function(){return this.fileName},r.prototype.setFileName=function(e){this.fileName=e},r.prototype.getFileSize=function(){return this.fileSize},r.prototype.setFileSize=function(e){this.fileSize=e},r.prototype.getChecksum=function(){return this.checksum},r.prototype.setChecksum=function(e){this.checksum=e},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.setTimestamp=function(e){this.timestamp=e},r}(),$n=function(){function r(){}return r.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r}(),hs=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vs=function(r){hs(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="NullPointerException",e}(it),xs=function(){function r(){}return r.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},r.prototype.writeBytesOffset=function(e,t,n){if(e==null)throw new vs;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new rn;if(n===0)return;for(var a=0;a<n;a++)this.write(e[t+a])},r.prototype.flush=function(){},r.prototype.close=function(){},r}(),ps=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gs=function(r){ps(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(it),ys=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ms=function(r){ys(e,r);function e(t){t===void 0&&(t=32);var n=r.call(this)||this;if(n.count=0,t<0)throw new j("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var n=this.buf.length,a=n<<1;if(a-t<0&&(a=t),a<0){if(t<0)throw new gs;a=Y.MAX_VALUE}this.buf=Oe.copyOfUint8Array(this.buf,a)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,n,a){if(n<0||n>t.length||a<0||n+a-t.length>0)throw new rn;this.ensureCapacity(this.count+a),xe.arraycopy(t,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Oe.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(xs),de;(function(r){r[r.ALPHA=0]="ALPHA",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.PUNCT=3]="PUNCT",r[r.ALPHA_SHIFT=4]="ALPHA_SHIFT",r[r.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(de||(de={}));function _a(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var xr;function Tt(r){if(typeof xr>"u"&&(xr=_a()),xr===null)throw new Error("BigInt is not supported!");return xr(r)}function ws(){var r=[];r[0]=Tt(1);var e=Tt(900);r[1]=e;for(var t=2;t<16;t++)r[t]=r[t-1]*e;return r}var _s=function(){function r(){}return r.decode=function(e,t){var n=new $(""),a=Ne.ISO8859_1;n.enableDecoding(a);for(var i=1,o=e[i++],s=new ds;i<e[0];){switch(o){case r.TEXT_COMPACTION_MODE_LATCH:i=r.textCompaction(e,i,n);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:i=r.byteCompaction(o,e,a,i,n);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:i=r.numericCompaction(e,i,n);break;case r.ECI_CHARSET:Ne.getCharacterSetECIByValue(e[i++]);break;case r.ECI_GENERAL_PURPOSE:i+=2;break;case r.ECI_USER_DEFINED:i++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=r.decodeMacroBlock(e,i,s);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new T;default:i--,i=r.textCompaction(e,i,n);break}if(i<e.length)o=e[i++];else throw T.getFormatInstance()}if(n.length()===0)throw T.getFormatInstance();var c=new Dr(null,n.toString(),null,t);return c.setOther(s),c},r.decodeMacroBlock=function(e,t,n){if(t+r.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw T.getFormatInstance();for(var a=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<r.NUMBER_OF_SEQUENCE_CODEWORDS;i++,t++)a[i]=e[t];n.setSegmentIndex(Y.parseInt(r.decodeBase900toBase10(a,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new $;t=r.textCompaction(e,t,o),n.setFileId(o.toString());var s=-1;for(e[t]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new $;t=r.textCompaction(e,t+1,c),n.setFileName(c.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new $;t=r.textCompaction(e,t+1,f),n.setSender(f.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var u=new $;t=r.textCompaction(e,t+1,u),n.setAddressee(u.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var l=new $;t=r.numericCompaction(e,t+1,l),n.setSegmentCount(Y.parseInt(l.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new $;t=r.numericCompaction(e,t+1,d),n.setTimestamp($n.parseLong(d.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new $;t=r.numericCompaction(e,t+1,h),n.setChecksum(Y.parseInt(h.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new $;t=r.numericCompaction(e,t+1,x),n.setFileSize($n.parseLong(x.toString()));break;default:throw T.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw T.getFormatInstance()}if(s!==-1){var y=t-s;n.isLastSegment()&&y--,n.setOptionalData(Oe.copyOfRange(e,s,s+y))}return t},r.textCompaction=function(e,t,n){for(var a=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),o=0,s=!1;t<e[0]&&!s;){var c=e[t++];if(c<r.TEXT_COMPACTION_MODE_LATCH)a[o]=c/30,a[o+1]=c%30,o+=2;else switch(c){case r.TEXT_COMPACTION_MODE_LATCH:a[o++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],i[o]=c,o++;break}}return r.decodeTextCompaction(a,i,o,n),t},r.decodeTextCompaction=function(e,t,n,a){for(var i=de.ALPHA,o=de.ALPHA,s=0;s<n;){var c=e[s],f="";switch(i){case de.ALPHA:if(c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case r.LL:i=de.LOWER;break;case r.ML:i=de.MIXED;break;case r.PS:o=i,i=de.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=de.ALPHA;break}break;case de.LOWER:if(c<26)f=String.fromCharCode(97+c);else switch(c){case 26:f=" ";break;case r.AS:o=i,i=de.ALPHA_SHIFT;break;case r.ML:i=de.MIXED;break;case r.PS:o=i,i=de.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=de.ALPHA;break}break;case de.MIXED:if(c<r.PL)f=r.MIXED_CHARS[c];else switch(c){case r.PL:i=de.PUNCT;break;case 26:f=" ";break;case r.LL:i=de.LOWER;break;case r.AL:i=de.ALPHA;break;case r.PS:o=i,i=de.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=de.ALPHA;break}break;case de.PUNCT:if(c<r.PAL)f=r.PUNCT_CHARS[c];else switch(c){case r.PAL:i=de.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=de.ALPHA;break}break;case de.ALPHA_SHIFT:if(i=o,c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:i=de.ALPHA;break}break;case de.PUNCT_SHIFT:if(i=o,c<r.PAL)f=r.PUNCT_CHARS[c];else switch(c){case r.PAL:i=de.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=de.ALPHA;break}break}f!==""&&a.append(f),s++}},r.byteCompaction=function(e,t,n,a,i){var o=new ms,s=0,c=0,f=!1;switch(e){case r.BYTE_COMPACTION_MODE_LATCH:for(var u=new Int32Array(6),l=t[a++];a<t[0]&&!f;)switch(u[s++]=l,c=900*c+l,l=t[a++],l){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:a--,f=!0;break;default:if(s%5===0&&s>0){for(var d=0;d<6;++d)o.write(Number(Tt(c)>>Tt(8*(5-d))));c=0,s=0}break}a===t[0]&&l<r.TEXT_COMPACTION_MODE_LATCH&&(u[s++]=l);for(var h=0;h<s;h++)o.write(u[h]);break;case r.BYTE_COMPACTION_MODE_LATCH_6:for(;a<t[0]&&!f;){var x=t[a++];if(x<r.TEXT_COMPACTION_MODE_LATCH)s++,c=900*c+x;else switch(x){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:a--,f=!0;break}if(s%5===0&&s>0){for(var d=0;d<6;++d)o.write(Number(Tt(c)>>Tt(8*(5-d))));c=0,s=0}}break}return i.append(ht.decode(o.toByteArray(),n)),a},r.numericCompaction=function(e,t,n){for(var a=0,i=!1,o=new Int32Array(r.MAX_NUMERIC_CODEWORDS);t<e[0]&&!i;){var s=e[t++];if(t===e[0]&&(i=!0),s<r.TEXT_COMPACTION_MODE_LATCH)o[a]=s,a++;else switch(s){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,i=!0;break}(a%r.MAX_NUMERIC_CODEWORDS===0||s===r.NUMERIC_COMPACTION_MODE_LATCH||i)&&a>0&&(n.append(r.decodeBase900toBase10(o,a)),a=0)}return t},r.decodeBase900toBase10=function(e,t){for(var n=Tt(0),a=0;a<t;a++)n+=r.EXP900[t-a-1]*Tt(e[a]);var i=n.toString();if(i.charAt(0)!=="1")throw new T;return i.substring(1)},r.TEXT_COMPACTION_MODE_LATCH=900,r.BYTE_COMPACTION_MODE_LATCH=901,r.NUMERIC_COMPACTION_MODE_LATCH=902,r.BYTE_COMPACTION_MODE_LATCH_6=924,r.ECI_USER_DEFINED=925,r.ECI_GENERAL_PURPOSE=926,r.ECI_CHARSET=927,r.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,r.MACRO_PDF417_TERMINATOR=922,r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,r.MAX_NUMERIC_CODEWORDS=15,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,r.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,r.PL=25,r.LL=27,r.AS=27,r.ML=28,r.AL=28,r.PS=29,r.PAL=29,r.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,r.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",r.EXP900=_a()?ws():[],r.NUMBER_OF_SEQUENCE_CODEWORDS=2,r}(),rr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},As=function(){function r(){}return r.decode=function(e,t,n,a,i,o,s){for(var c=new Jr(e,t,n,a,i),f=null,u=null,l,d=!0;;d=!1){if(t!=null&&(f=r.getRowIndicatorColumn(e,c,t,!0,o,s)),a!=null&&(u=r.getRowIndicatorColumn(e,c,a,!1,o,s)),l=r.merge(f,u),l==null)throw b.getNotFoundInstance();var h=l.getBoundingBox();if(d&&h!=null&&(h.getMinY()<c.getMinY()||h.getMaxY()>c.getMaxY()))c=h;else break}l.setBoundingBox(c);var x=l.getBarcodeColumnCount()+1;l.setDetectionResultColumn(0,f),l.setDetectionResultColumn(x,u);for(var y=f!=null,_=1;_<=x;_++){var A=y?_:x-_;if(l.getDetectionResultColumn(A)===void 0){var w=void 0;A===0||A===x?w=new zn(c,A===0):w=new wa(c),l.setDetectionResultColumn(A,w);for(var C=-1,p=C,S=c.getMinY();S<=c.getMaxY();S++){if(C=r.getStartColumn(l,A,S,y),C<0||C>c.getMaxX()){if(p===-1)continue;C=p}var I=r.detectCodeword(e,c.getMinX(),c.getMaxX(),y,C,S,o,s);I!=null&&(w.setCodeword(S,I),p=C,o=Math.min(o,I.getWidth()),s=Math.max(s,I.getWidth()))}}}return r.createDecoderResult(l)},r.merge=function(e,t){if(e==null&&t==null)return null;var n=r.getBarcodeMetadata(e,t);if(n==null)return null;var a=Jr.merge(r.adjustBoundingBox(e),r.adjustBoundingBox(t));return new fs(n,a)},r.adjustBoundingBox=function(e){var t,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var i=r.getMax(a),o=0;try{for(var s=rr(a),c=s.next();!c.done;c=s.next()){var f=c.value;if(o+=i-f,f>0)break}}catch(h){t={error:h}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}for(var u=e.getCodewords(),l=0;o>0&&u[l]==null;l++)o--;for(var d=0,l=a.length-1;l>=0&&(d+=i-a[l],!(a[l]>0));l--);for(var l=u.length-1;d>0&&u[l]==null;l--)d--;return e.getBoundingBox().addMissingRows(o,d,e.isLeft())},r.getMax=function(e){var t,n,a=-1;try{for(var i=rr(e),o=i.next();!o.done;o=i.next()){var s=o.value;a=Math.max(a,s)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},r.getBarcodeMetadata=function(e,t){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var a;return t==null||(a=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},r.getRowIndicatorColumn=function(e,t,n,a,i,o){for(var s=new zn(t,a),c=0;c<2;c++)for(var f=c===0?1:-1,u=Math.trunc(Math.trunc(n.getX())),l=Math.trunc(Math.trunc(n.getY()));l<=t.getMaxY()&&l>=t.getMinY();l+=f){var d=r.detectCodeword(e,0,e.getWidth(),a,u,l,i,o);d!=null&&(s.setCodeword(l,d),a?u=d.getStartX():u=d.getEndX())}return s},r.adjustCodewordCount=function(e,t){var n=t[0][1],a=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-r.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(i<1||i>q.MAX_CODEWORDS_IN_BARCODE)throw b.getNotFoundInstance();n.setValue(i)}else a[0]!==i&&n.setValue(i)},r.createDecoderResult=function(e){var t=r.createBarcodeMatrix(e);r.adjustCodewordCount(e,t);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var c=0;c<e.getBarcodeColumnCount();c++){var f=t[s][c+1].getValue(),u=s*e.getBarcodeColumnCount()+c;f.length===0?n.push(u):f.length===1?a[u]=f[0]:(o.push(u),i.push(f))}for(var l=new Array(i.length),d=0;d<l.length;d++)l[d]=i[d];return r.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,q.toIntArray(n),q.toIntArray(o),l)},r.createDecoderResultFromAmbiguousValues=function(e,t,n,a,i){for(var o=new Int32Array(a.length),s=100;s-- >0;){for(var c=0;c<o.length;c++)t[a[c]]=i[c][o[c]];try{return r.decodeCodewords(t,e,n)}catch(u){var f=u instanceof Ae;if(!f)throw u}if(o.length===0)throw Ae.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<i[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw Ae.getChecksumInstance()}throw Ae.getChecksumInstance()},r.createBarcodeMatrix=function(e){for(var t,n,a,i,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var c=0;c<o[s].length;c++)o[s][c]=new ir;var f=0;try{for(var u=rr(e.getDetectionResultColumns()),l=u.next();!l.done;l=u.next()){var d=l.value;if(d!=null)try{for(var h=(a=void 0,rr(d.getCodewords())),x=h.next();!x.done;x=h.next()){var y=x.value;if(y!=null){var _=y.getRowNumber();if(_>=0){if(_>=o.length)continue;o[_][f].setValue(y.getValue())}}}}catch(A){a={error:A}}finally{try{x&&!x.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}f++}}catch(A){t={error:A}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o},r.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},r.getStartColumn=function(e,t,n,a){var i,o,s=a?1:-1,c=null;if(r.isValidBarcodeColumn(e,t-s)&&(c=e.getDetectionResultColumn(t-s).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(r.isValidBarcodeColumn(e,t-s)&&(c=e.getDetectionResultColumn(t-s).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var f=0;r.isValidBarcodeColumn(e,t-s);){t-=s;try{for(var u=(i=void 0,rr(e.getDetectionResultColumn(t).getCodewords())),l=u.next();!l.done;l=u.next()){var d=l.value;if(d!=null)return(a?d.getEndX():d.getStartX())+s*f*(d.getEndX()-d.getStartX())}}catch(h){i={error:h}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}f++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},r.detectCodeword=function(e,t,n,a,i,o,s,c){i=r.adjustCodewordStartColumn(e,t,n,a,i,o);var f=r.getModuleBitCount(e,t,n,a,i,o);if(f==null)return null;var u,l=te.sum(f);if(a)u=i+l;else{for(var d=0;d<f.length/2;d++){var h=f[d];f[d]=f[f.length-1-d],f[f.length-1-d]=h}u=i,i=u-l}if(!r.checkCodewordSkew(l,s,c))return null;var x=ls.getDecodedValue(f),y=q.getCodeword(x);return y===-1?null:new us(i,u,r.getCodewordBucketNumber(x),y)},r.getModuleBitCount=function(e,t,n,a,i,o){for(var s=i,c=new Int32Array(8),f=0,u=a?1:-1,l=a;(a?s<n:s>=t)&&f<c.length;)e.get(s,o)===l?(c[f]++,s+=u):(f++,l=!l);return f===c.length||s===(a?n:t)&&f===c.length-1?c:null},r.getNumberOfECCodeWords=function(e){return 2<<e},r.adjustCodewordStartColumn=function(e,t,n,a,i,o){for(var s=i,c=a?-1:1,f=0;f<2;f++){for(;(a?s>=t:s<n)&&a===e.get(s,o);){if(Math.abs(i-s)>r.CODEWORD_SKEW_SIZE)return i;s+=c}c=-c,a=!a}return s},r.checkCodewordSkew=function(e,t,n){return t-r.CODEWORD_SKEW_SIZE<=e&&e<=n+r.CODEWORD_SKEW_SIZE},r.decodeCodewords=function(e,t,n){if(e.length===0)throw T.getFormatInstance();var a=1<<t+1,i=r.correctErrors(e,n,a);r.verifyCodewordCount(e,a);var o=_s.decode(e,""+t);return o.setErrorsCorrected(i),o.setErasures(n.length),o},r.correctErrors=function(e,t,n){if(t!=null&&t.length>n/2+r.MAX_ERRORS||n<0||n>r.MAX_EC_CODEWORDS)throw Ae.getChecksumInstance();return r.errorCorrection.decode(e,n,t)},r.verifyCodewordCount=function(e,t){if(e.length<4)throw T.getFormatInstance();var n=e[0];if(n>e.length)throw T.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw T.getFormatInstance()},r.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,a=t.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)t[a]++,e>>=1;return t},r.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},r.getCodewordBucketNumber_number=function(e){return r.getCodewordBucketNumber(r.getBitCountForCodeword(e))},r.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},r.toString=function(e){for(var t=new sn,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var i=e[n][a];i.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()},r.CODEWORD_SKEW_SIZE=2,r.MAX_ERRORS=3,r.MAX_EC_CODEWORDS=512,r.errorCorrection=new rs,r}(),Cs=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Or=function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=r.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw b.getNotFoundInstance();return n[0]},r.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return r.decode(e,t,!0)}catch(n){throw n instanceof T||n instanceof Ae?b.getNotFoundInstance():n}},r.decode=function(e,t,n){var a,i,o=new Array,s=Qo.detectMultiple(e,t,n);try{for(var c=Cs(s.getPoints()),f=c.next();!f.done;f=c.next()){var u=f.value,l=As.decode(s.getBits(),u[4],u[5],u[6],u[7],r.getMinCodewordWidth(u),r.getMaxCodewordWidth(u)),d=new Ye(l.getText(),l.getRawBytes(),void 0,u,F.PDF_417);d.putMetadata(Ve.ERROR_CORRECTION_LEVEL,l.getECLevel());var h=l.getOther();h!=null&&d.putMetadata(Ve.PDF417_EXTRA_METADATA,h),o.push(d)}}catch(x){a={error:x}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}return o.map(function(x){return x})},r.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMinWidth=function(e,t){return e==null||t==null?Y.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(r.getMaxWidth(e[0],e[4]),r.getMaxWidth(e[6],e[2])*q.MODULES_IN_CODEWORD/q.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(e[1],e[5]),r.getMaxWidth(e[7],e[3])*q.MODULES_IN_CODEWORD/q.MODULES_IN_STOP_PATTERN)))},r.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(r.getMinWidth(e[0],e[4]),r.getMinWidth(e[6],e[2])*q.MODULES_IN_CODEWORD/q.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(e[1],e[5]),r.getMinWidth(e[7],e[3])*q.MODULES_IN_CODEWORD/q.MODULES_IN_STOP_PATTERN)))},r.prototype.reset=function(){},r}(),Es=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yn=function(r){Es(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReaderException",e}(it),Zn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Aa=function(){function r(){}return r.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},r.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},r.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(fe.TRY_HARDER)!==void 0,n=e==null?null:e.get(fe.POSSIBLE_FORMATS),a=new Array;if(n!=null){var i=n.some(function(o){return o===F.UPC_A||o===F.UPC_E||o===F.EAN_13||o===F.EAN_8||o===F.CODABAR||o===F.CODE_39||o===F.CODE_93||o===F.CODE_128||o===F.ITF||o===F.RSS_14||o===F.RSS_EXPANDED});i&&!t&&a.push(new $t(e)),n.includes(F.QR_CODE)&&a.push(new Nr),n.includes(F.DATA_MATRIX)&&a.push(new Ir),n.includes(F.AZTEC)&&a.push(new br),n.includes(F.PDF_417)&&a.push(new Or),i&&t&&a.push(new $t(e))}a.length===0&&(t||a.push(new $t(e)),a.push(new Nr),a.push(new Ir),a.push(new br),a.push(new Or),t&&a.push(new $t(e))),this.readers=a},r.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var n=Zn(this.readers),a=n.next();!a.done;a=n.next()){var i=a.value;i.reset()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.decodeInternal=function(e){var t,n;if(this.readers===null)throw new Yn("No readers where selected, nothing can be read.");try{for(var a=Zn(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof Yn)continue}}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}throw new b("No MultiFormat Readers were able to detect the code.")},r}(),bs=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ss=function(r){bs(e,r);function e(t,n){t===void 0&&(t=null),n===void 0&&(n=500);var a=this,i=new Aa;return i.setHints(t),a=r.call(this,i,n)||this,a}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(Kt),Is=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){Is(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Or,t)||this}return e})(Kt);var Ns=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){Ns(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Nr,t)||this}return e})(Kt);var qr;(function(r){r[r.ERROR_CORRECTION=0]="ERROR_CORRECTION",r[r.CHARACTER_SET=1]="CHARACTER_SET",r[r.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",r[r.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",r[r.MIN_SIZE=4]="MIN_SIZE",r[r.MAX_SIZE=5]="MAX_SIZE",r[r.MARGIN=6]="MARGIN",r[r.PDF417_COMPACT=7]="PDF417_COMPACT",r[r.PDF417_COMPACTION=8]="PDF417_COMPACTION",r[r.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",r[r.AZTEC_LAYERS=10]="AZTEC_LAYERS",r[r.QR_VERSION=11]="QR_VERSION",r[r.GS1_FORMAT=12]="GS1_FORMAT",r[r.FORCE_C40=13]="FORCE_C40"})(qr||(qr={}));const pr=qr;var Ca=function(){function r(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Rt(e,Int32Array.from([1])))}return r.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],a=this.field,i=t.length;i<=e;i++){var o=n.multiply(new Rt(a,Int32Array.from([1,a.exp(i-1+a.getGeneratorBase())])));t.push(o),n=o}return t[e]},r.prototype.encode=function(e,t){if(t===0)throw new j("No error correction bytes");var n=e.length-t;if(n<=0)throw new j("No data bytes provided");var a=this.buildGenerator(t),i=new Int32Array(n);xe.arraycopy(e,0,i,0,n);var o=new Rt(this.field,i);o=o.multiplyByMonomial(t,1);for(var s=o.divide(a)[1],c=s.getCoefficients(),f=t-c.length,u=0;u<f;u++)e[n+u]=0;xe.arraycopy(c,0,e,n+f,c.length)},r}(),or=function(){function r(){}return r.applyMaskPenaltyRule1=function(e){return r.applyMaskPenaltyRule1Internal(e,!0)+r.applyMaskPenaltyRule1Internal(e,!1)},r.applyMaskPenaltyRule2=function(e){for(var t=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i-1;o++)for(var s=n[o],c=0;c<a-1;c++){var f=s[c];f===s[c+1]&&f===n[o+1][c]&&f===n[o+1][c+1]&&t++}return r.N2*t},r.applyMaskPenaltyRule3=function(e){for(var t=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var s=0;s<a;s++){var c=n[o];s+6<a&&c[s]===1&&c[s+1]===0&&c[s+2]===1&&c[s+3]===1&&c[s+4]===1&&c[s+5]===0&&c[s+6]===1&&(r.isWhiteHorizontal(c,s-4,s)||r.isWhiteHorizontal(c,s+7,s+11))&&t++,o+6<i&&n[o][s]===1&&n[o+1][s]===0&&n[o+2][s]===1&&n[o+3][s]===1&&n[o+4][s]===1&&n[o+5][s]===0&&n[o+6][s]===1&&(r.isWhiteVertical(n,s,o-4,o)||r.isWhiteVertical(n,s,o+7,o+11))&&t++}return t*r.N3},r.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var a=t;a<n;a++)if(e[a]===1)return!1;return!0},r.isWhiteVertical=function(e,t,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var i=n;i<a;i++)if(e[i][t]===1)return!1;return!0},r.applyMaskPenaltyRule4=function(e){for(var t=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var s=n[o],c=0;c<a;c++)s[c]===1&&t++;var f=e.getHeight()*e.getWidth(),u=Math.floor(Math.abs(t*2-f)*10/f);return u*r.N4},r.getDataMaskBit=function(e,t,n){var a,i;switch(e){case 0:a=n+t&1;break;case 1:a=n&1;break;case 2:a=t%3;break;case 3:a=(n+t)%3;break;case 4:a=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,a=(i&1)+i%3;break;case 6:i=n*t,a=(i&1)+i%3&1;break;case 7:i=n*t,a=i%3+(n+t&1)&1;break;default:throw new j("Invalid mask pattern: "+e)}return a===0},r.applyMaskPenaltyRule1Internal=function(e,t){for(var n=0,a=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<a;s++){for(var c=0,f=-1,u=0;u<i;u++){var l=t?o[s][u]:o[u][s];l===f?c++:(c>=5&&(n+=r.N1+(c-5)),c=1,f=l)}c>=5&&(n+=r.N1+(c-5))}return n},r.N1=3,r.N2=3,r.N3=40,r.N4=10,r}(),Os=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ts=function(){function r(e,t){this.width=e,this.height=t;for(var n=new Array(t),a=0;a!==t;a++)n[a]=new Uint8Array(e);this.bytes=n}return r.prototype.getHeight=function(){return this.height},r.prototype.getWidth=function(){return this.width},r.prototype.get=function(e,t){return this.bytes[t][e]},r.prototype.getArray=function(){return this.bytes},r.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},r.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},r.prototype.clear=function(e){var t,n;try{for(var a=Os(this.bytes),i=a.next();!i.done;i=a.next()){var o=i.value;Oe.fill(o,e)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var i=this.bytes[n],o=t.bytes[n],s=0,c=this.width;s<c;++s)if(i[s]!==o[s])return!1;return!0},r.prototype.toString=function(){for(var e=new $,t=0,n=this.height;t<n;++t){for(var a=this.bytes[t],i=0,o=this.width;i<o;++i)switch(a[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},r}(),en=function(){function r(){this.maskPattern=-1}return r.prototype.getMode=function(){return this.mode},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getVersion=function(){return this.version},r.prototype.getMaskPattern=function(){return this.maskPattern},r.prototype.getMatrix=function(){return this.matrix},r.prototype.toString=function(){var e=new $;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},r.prototype.setMode=function(e){this.mode=e},r.prototype.setECLevel=function(e){this.ecLevel=e},r.prototype.setVersion=function(e){this.version=e},r.prototype.setMaskPattern=function(e){this.maskPattern=e},r.prototype.setMatrix=function(e){this.matrix=e},r.isValidMaskPattern=function(e){return e>=0&&e<r.NUM_MASK_PATTERNS},r.NUM_MASK_PATTERNS=8,r}(),Rs=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pe=function(r){Rs(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="WriterException",e}(it),Qn=function(){function r(){}return r.clearMatrix=function(e){e.clear(255)},r.buildMatrix=function(e,t,n,a,i){r.clearMatrix(i),r.embedBasicPatterns(n,i),r.embedTypeInfo(t,a,i),r.maybeEmbedVersionInfo(n,i),r.embedDataBits(e,a,i)},r.embedBasicPatterns=function(e,t){r.embedPositionDetectionPatternsAndSeparators(t),r.embedDarkDotAtLeftBottomCorner(t),r.maybeEmbedPositionAdjustmentPatterns(e,t),r.embedTimingPatterns(t)},r.embedTypeInfo=function(e,t,n){var a=new Fe;r.makeTypeInfoBits(e,t,a);for(var i=0,o=a.getSize();i<o;++i){var s=a.get(a.getSize()-1-i),c=r.TYPE_INFO_COORDINATES[i],f=c[0],u=c[1];if(n.setBoolean(f,u,s),i<8){var l=n.getWidth()-i-1,d=8;n.setBoolean(l,d,s)}else{var l=8,d=n.getHeight()-7+(i-8);n.setBoolean(l,d,s)}}},r.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var n=new Fe;r.makeVersionInfoBits(e,n);for(var a=6*3-1,i=0;i<6;++i)for(var o=0;o<3;++o){var s=n.get(a);a--,t.setBoolean(i,t.getHeight()-11+o,s),t.setBoolean(t.getHeight()-11+o,i,s)}}},r.embedDataBits=function(e,t,n){for(var a=0,i=-1,o=n.getWidth()-1,s=n.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<n.getHeight();){for(var c=0;c<2;++c){var f=o-c;if(r.isEmpty(n.get(f,s))){var u=void 0;a<e.getSize()?(u=e.get(a),++a):u=!1,t!==255&&or.getDataMaskBit(t,f,s)&&(u=!u),n.setBoolean(f,s,u)}}s+=i}i=-i,s+=i,o-=2}if(a!==e.getSize())throw new pe("Not all bits consumed: "+a+"/"+e.getSize())},r.findMSBSet=function(e){return 32-Y.numberOfLeadingZeros(e)},r.calculateBCHCode=function(e,t){if(t===0)throw new j("0 polynomial");var n=r.findMSBSet(t);for(e<<=n-1;r.findMSBSet(e)>=n;)e^=t<<r.findMSBSet(e)-n;return e},r.makeTypeInfoBits=function(e,t,n){if(!en.isValidMaskPattern(t))throw new pe("Invalid mask pattern");var a=e.getBits()<<3|t;n.appendBits(a,5);var i=r.calculateBCHCode(a,r.TYPE_INFO_POLY);n.appendBits(i,10);var o=new Fe;if(o.appendBits(r.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new pe("should not happen but we got: "+n.getSize())},r.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var n=r.calculateBCHCode(e.getVersionNumber(),r.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new pe("should not happen but we got: "+t.getSize())},r.isEmpty=function(e){return e===255},r.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var n=(t+1)%2;r.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),r.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}},r.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new pe;e.setNumber(8,e.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(e,t,n){for(var a=0;a<8;++a){if(!r.isEmpty(n.get(e+a,t)))throw new pe;n.setNumber(e+a,t,0)}},r.embedVerticalSeparationPattern=function(e,t,n){for(var a=0;a<7;++a){if(!r.isEmpty(n.get(e,t+a)))throw new pe;n.setNumber(e,t+a,0)}},r.embedPositionAdjustmentPattern=function(e,t,n){for(var a=0;a<5;++a)for(var i=r.POSITION_ADJUSTMENT_PATTERN[a],o=0;o<5;++o)n.setNumber(e+o,t+a,i[o])},r.embedPositionDetectionPattern=function(e,t,n){for(var a=0;a<7;++a)for(var i=r.POSITION_DETECTION_PATTERN[a],o=0;o<7;++o)n.setNumber(e+o,t+a,i[o])},r.embedPositionDetectionPatternsAndSeparators=function(e){var t=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,e),r.embedPositionDetectionPattern(e.getWidth()-t,0,e),r.embedPositionDetectionPattern(0,e.getWidth()-t,e);var n=8;r.embedHorizontalSeparationPattern(0,n-1,e),r.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),r.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;r.embedVerticalSeparationPattern(a,0,e),r.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),r.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},r.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],i=0,o=a.length;i!==o;i++){var s=a[i];if(s>=0)for(var c=0;c!==o;c++){var f=a[c];f>=0&&r.isEmpty(t.get(f,s))&&r.embedPositionAdjustmentPattern(f-2,s-2,t)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r}(),Ds=function(){function r(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return r.prototype.getDataBytes=function(){return this.dataBytes},r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},r}(),Kn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.calculateMaskPenalty=function(e){return or.applyMaskPenaltyRule1(e)+or.applyMaskPenaltyRule2(e)+or.applyMaskPenaltyRule3(e)+or.applyMaskPenaltyRule4(e)},r.encode=function(e,t,n){n===void 0&&(n=null);var a=r.DEFAULT_BYTE_MODE_ENCODING,i=n!==null&&n.get(pr.CHARACTER_SET)!==void 0;i&&(a=n.get(pr.CHARACTER_SET).toString());var o=this.chooseMode(e,a),s=new Fe;if(o===ge.BYTE&&(i||r.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=Ne.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,s)}this.appendModeInfo(o,s);var f=new Fe;this.appendBytes(e,o,f,a);var u;if(n!==null&&n.get(pr.QR_VERSION)!==void 0){var l=Number.parseInt(n.get(pr.QR_VERSION).toString(),10);u=Vt.getVersionForNumber(l);var d=this.calculateBitsNeeded(o,s,f,u);if(!this.willFit(d,u,t))throw new pe("Data too big for requested version")}else u=this.recommendVersion(t,o,s,f);var h=new Fe;h.appendBitArray(s);var x=o===ge.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(x,u,o,h),h.appendBitArray(f);var y=u.getECBlocksForLevel(t),_=u.getTotalCodewords()-y.getTotalECCodewords();this.terminateBits(_,h);var A=this.interleaveWithECBytes(h,u.getTotalCodewords(),_,y.getNumBlocks()),w=new en;w.setECLevel(t),w.setMode(o),w.setVersion(u);var C=u.getDimensionForVersion(),p=new Ts(C,C),S=this.chooseMaskPattern(A,t,u,p);return w.setMaskPattern(S),Qn.buildMatrix(A,t,u,S,p),w.setMatrix(p),w},r.recommendVersion=function(e,t,n,a){var i=this.calculateBitsNeeded(t,n,a,Vt.getVersionForNumber(1)),o=this.chooseVersion(i,e),s=this.calculateBitsNeeded(t,n,a,o);return this.chooseVersion(s,e)},r.calculateBitsNeeded=function(e,t,n,a){return t.getSize()+e.getCharacterCountBits(a)+n.getSize()},r.getAlphanumericCode=function(e){return e<r.ALPHANUMERIC_TABLE.length?r.ALPHANUMERIC_TABLE[e]:-1},r.chooseMode=function(e,t){if(t===void 0&&(t=null),Ne.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return ge.KANJI;for(var n=!1,a=!1,i=0,o=e.length;i<o;++i){var s=e.charAt(i);if(r.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)a=!0;else return ge.BYTE}return a?ge.ALPHANUMERIC:n?ge.NUMERIC:ge.BYTE},r.isOnlyDoubleByteKanji=function(e){var t;try{t=ht.encode(e,Ne.SJIS)}catch{return!1}var n=t.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var i=t[a]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0},r.chooseMaskPattern=function(e,t,n,a){for(var i=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<en.NUM_MASK_PATTERNS;s++){Qn.buildMatrix(e,t,n,s,a);var c=this.calculateMaskPenalty(a);c<i&&(i=c,o=s)}return o},r.chooseVersion=function(e,t){for(var n=1;n<=40;n++){var a=Vt.getVersionForNumber(n);if(r.willFit(e,a,t))return a}throw new pe("Data too big")},r.willFit=function(e,t,n){var a=t.getTotalCodewords(),i=t.getECBlocksForLevel(n),o=i.getTotalECCodewords(),s=a-o,c=(e+7)/8;return s>=c},r.terminateBits=function(e,t){var n=e*8;if(t.getSize()>n)throw new pe("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var a=0;a<4&&t.getSize()<n;++a)t.appendBit(!1);var i=t.getSize()&7;if(i>0)for(var a=i;a<8;a++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),a=0;a<o;++a)t.appendBits(a&1?17:236,8);if(t.getSize()!==n)throw new pe("Bits size does not equal capacity")},r.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,a,i,o){if(a>=n)throw new pe("Block ID too large");var s=e%n,c=n-s,f=Math.floor(e/n),u=f+1,l=Math.floor(t/n),d=l+1,h=f-l,x=u-d;if(h!==x)throw new pe("EC bytes mismatch");if(n!==c+s)throw new pe("RS blocks mismatch");if(e!==(l+h)*c+(d+x)*s)throw new pe("Total bytes mismatch");a<c?(i[0]=l,o[0]=h):(i[0]=d,o[0]=x)},r.interleaveWithECBytes=function(e,t,n,a){var i,o,s,c;if(e.getSizeInBytes()!==n)throw new pe("Number of bits and data bytes does not match");for(var f=0,u=0,l=0,d=new Array,h=0;h<a;++h){var x=new Int32Array(1),y=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(t,n,a,h,x,y);var _=x[0],A=new Uint8Array(_);e.toBytes(8*f,A,0,_);var w=r.generateECBytes(A,y[0]);d.push(new Ds(A,w)),u=Math.max(u,_),l=Math.max(l,w.length),f+=x[0]}if(n!==f)throw new pe("Data bytes does not match offset");for(var C=new Fe,h=0;h<u;++h)try{for(var p=(i=void 0,Kn(d)),S=p.next();!S.done;S=p.next()){var I=S.value,A=I.getDataBytes();h<A.length&&C.appendBits(A[h],8)}}catch(B){i={error:B}}finally{try{S&&!S.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}for(var h=0;h<l;++h)try{for(var N=(s=void 0,Kn(d)),R=N.next();!R.done;R=N.next()){var I=R.value,w=I.getErrorCorrectionBytes();h<w.length&&C.appendBits(w[h],8)}}catch(B){s={error:B}}finally{try{R&&!R.done&&(c=N.return)&&c.call(N)}finally{if(s)throw s.error}}if(t!==C.getSizeInBytes())throw new pe("Interleaving error: "+t+" and "+C.getSizeInBytes()+" differ.");return C},r.generateECBytes=function(e,t){for(var n=e.length,a=new Int32Array(n+t),i=0;i<n;i++)a[i]=e[i]&255;new Ca(at.QR_CODE_FIELD_256).encode(a,t);for(var o=new Uint8Array(t),i=0;i<t;i++)o[i]=a[n+i];return o},r.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},r.appendLengthInfo=function(e,t,n,a){var i=n.getCharacterCountBits(t);if(e>=1<<i)throw new pe(e+" is bigger than "+((1<<i)-1));a.appendBits(e,i)},r.appendBytes=function(e,t,n,a){switch(t){case ge.NUMERIC:r.appendNumericBytes(e,n);break;case ge.ALPHANUMERIC:r.appendAlphanumericBytes(e,n);break;case ge.BYTE:r.append8BitBytes(e,n,a);break;case ge.KANJI:r.appendKanjiBytes(e,n);break;default:throw new pe("Invalid mode: "+t)}},r.getDigit=function(e){return e.charCodeAt(0)-48},r.isDigit=function(e){var t=r.getDigit(e);return t>=0&&t<=9},r.appendNumericBytes=function(e,t){for(var n=e.length,a=0;a<n;){var i=r.getDigit(e.charAt(a));if(a+2<n){var o=r.getDigit(e.charAt(a+1)),s=r.getDigit(e.charAt(a+2));t.appendBits(i*100+o*10+s,10),a+=3}else if(a+1<n){var o=r.getDigit(e.charAt(a+1));t.appendBits(i*10+o,7),a+=2}else t.appendBits(i,4),a++}},r.appendAlphanumericBytes=function(e,t){for(var n=e.length,a=0;a<n;){var i=r.getAlphanumericCode(e.charCodeAt(a));if(i===-1)throw new pe;if(a+1<n){var o=r.getAlphanumericCode(e.charCodeAt(a+1));if(o===-1)throw new pe;t.appendBits(i*45+o,11),a+=2}else t.appendBits(i,6),a++}},r.append8BitBytes=function(e,t,n){var a;try{a=ht.encode(e,n)}catch(c){throw new pe(c)}for(var i=0,o=a.length;i!==o;i++){var s=a[i];t.appendBits(s,8)}},r.appendKanjiBytes=function(e,t){var n;try{n=ht.encode(e,Ne.SJIS)}catch(l){throw new pe(l)}for(var a=n.length,i=0;i<a;i+=2){var o=n[i]&255,s=n[i+1]&255,c=o<<8&4294967295|s,f=-1;if(c>=33088&&c<=40956?f=c-33088:c>=57408&&c<=60351&&(f=c-49472),f===-1)throw new pe("Invalid byte sequence");var u=(f>>8)*192+(f&255);t.appendBits(u,13)}},r.appendECI=function(e,t){t.appendBits(ge.ECI.getBits(),4),t.appendBits(e.getValue(),8)},r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),r.DEFAULT_BYTE_MODE_ENCODING=Ne.UTF8.getName(),r})();var Ps=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){Ps(e,r);function e(t,n,a,i,o,s,c,f){var u=r.call(this,s,c)||this;if(u.yuvData=t,u.dataWidth=n,u.dataHeight=a,u.left=i,u.top=o,i+s>n||o+c>a)throw new j("Crop rectangle does not fit within image data.");return f&&u.reverseHorizontal(s,c),u}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new j("Requested row is outside the image: "+t);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(t+this.top)*this.dataWidth+this.left;return xe.arraycopy(this.yuvData,i,n,0,a),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=t*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return xe.arraycopy(this.yuvData,o,i,0,a),i;for(var s=0;s<n;s++){var c=s*t;xe.arraycopy(this.yuvData,o,i,c,t),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,a,i,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(t*n),i=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var c=s*t,f=0;f<t;f++){var u=i[o+f*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+f]=4278190080|u*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,n){for(var a=this.yuvData,i=0,o=this.top*this.dataWidth+this.left;i<n;i++,o+=this.dataWidth)for(var s=o+t/2,c=o,f=o+t-1;c<s;c++,f--){var u=a[c];a[c]=a[f],a[f]=u}},e.prototype.invert=function(){return new Rr(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(cr);var Ms=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){Ms(e,r);function e(t,n,a,i,o,s,c){var f=r.call(this,n,a)||this;if(f.dataWidth=i,f.dataHeight=o,f.left=s,f.top=c,t.BYTES_PER_ELEMENT===4){for(var u=n*a,l=new Uint8ClampedArray(u),d=0;d<u;d++){var h=t[d],x=h>>16&255,y=h>>7&510,_=h&255;l[d]=(x+y+_)/4&255}f.luminances=l}else f.luminances=t;if(i===void 0&&(f.dataWidth=n),o===void 0&&(f.dataHeight=a),s===void 0&&(f.left=0),c===void 0&&(f.top=0),f.left+n>f.dataWidth||f.top+a>f.dataHeight)throw new j("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new j("Requested row is outside the image: "+t);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(t+this.top)*this.dataWidth+this.left;return xe.arraycopy(this.luminances,i,n,0,a),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=t*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return xe.arraycopy(this.luminances,o,i,0,a),i;for(var s=0;s<n;s++){var c=s*t;xe.arraycopy(this.luminances,o,i,c,t),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return new e(this.luminances,a,i,this.dataWidth,this.dataHeight,this.left+t,this.top+n)},e.prototype.invert=function(){return new Rr(this)},e})(cr);var Bs=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fs=function(r){Bs(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Ne),Ls=function(){function r(){}return r.ISO_8859_1=Ne.ISO8859_1,r}(),tn,ks=301,js=function(r,e){for(var t=1,n=0;n<255;n++)e[n]=t,r[t]=n,t*=2,t>=256&&(t^=ks);return{LOG:r,ALOG:e}};tn=js([],[]),tn.LOG;tn.ALOG;var Jn;(function(r){r[r.FORCE_NONE=0]="FORCE_NONE",r[r.FORCE_SQUARE=1]="FORCE_SQUARE",r[r.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Jn||(Jn={}));var qn=129,Ea=230,Us=231,Vs=235,Hs=236,Gs=237,Xs=238,Ws=239,zs=240,Hr=254,$s=254,ea="[)>05",ta="[)>06",ra="",ce=0,Ue=1,Je=2,Se=3,Be=4,ze=5,Ys=function(){function r(){}return r.prototype.getEncodingMode=function(){return ce},r.prototype.encode=function(e){var t=yt.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=yt.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case ze:e.writeCodeword(Us),e.signalEncoderChange(ze);return;case Ue:e.writeCodeword(Ea),e.signalEncoderChange(Ue);return;case Se:e.writeCodeword(Xs),e.signalEncoderChange(Se);break;case Je:e.writeCodeword(Ws),e.signalEncoderChange(Je);break;case Be:e.writeCodeword(zs),e.signalEncoderChange(Be);break;default:throw new Error("Illegal mode: "+a)}else yt.isExtendedASCII(n)?(e.writeCodeword(Vs),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},r.prototype.encodeASCIIDigits=function(e,t){if(yt.isDigit(e)&&yt.isDigit(t)){var n=(e-48)*10+(t-48);return n+130}throw new Error("not digits: "+e+t)},r}(),Zs=function(){function r(){}return r.prototype.getEncodingMode=function(){return ze},r.prototype.encode=function(e){var t=new $;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();t.append(n),e.pos++;var a=yt.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(ce);break}}var i=t.length()-1,o=1,s=e.getCodewordCount()+i+o;e.updateSymbolInfo(s);var c=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||c)if(i<=249)t.setCharAt(0,J.getCharAt(i));else if(i<=1555)t.setCharAt(0,J.getCharAt(Math.floor(i/250)+249)),t.insert(1,J.getCharAt(i%250));else throw new Error("Message length not in valid ranges: "+i);for(var f=0,n=t.length();f<n;f++)e.writeCodeword(this.randomize255State(t.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},r.prototype.randomize255State=function(e,t){var n=149*t%255+1,a=e+n;return a<=255?a:a-256},r}(),cn=function(){function r(){}return r.prototype.getEncodingMode=function(){return Ue},r.prototype.encodeMaximal=function(e){for(var t=new $,n=0,a=e.pos,i=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,t),t.length()%3===0&&(a=e.pos,i=t.length())}if(i!==t.length()){var s=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(c);var f=e.getSymbolInfo().getDataCapacity()-c,u=Math.floor(t.length()%3);(u===2&&f!==2||u===1&&(n>3||f!==1))&&(e.pos=a)}t.length()>0&&e.writeCodeword(Ea),this.handleEOD(e,t)},r.prototype.encode=function(e){for(var t=new $;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,t),i=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+i;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new $;for(t.length()%3===2&&s!==2&&(a=this.backtrackOneCharacter(e,t,c,a));t.length()%3===1&&(a>3||s!==1);)a=this.backtrackOneCharacter(e,t,c,a);break}var f=t.length();if(f%3===0){var u=yt.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){e.signalEncoderChange(ce);break}}}this.handleEOD(e,t)},r.prototype.backtrackOneCharacter=function(e,t,n,a){var i=t.length(),o=t.toString().substring(0,i-a);t.setLengthToZero(),t.append(o),e.pos--;var s=e.getCurrentChar();return a=this.encodeChar(s,n),e.resetSymbolInfo(),a},r.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},r.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),a=t.length()%3,i=e.getCodewordCount()+n;e.updateSymbolInfo(i);var o=e.getSymbolInfo().getDataCapacity()-i;if(a===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Hr)}else if(o===1&&a===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Hr),e.pos--}else if(a===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(Hr)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(ce)},r.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var n=2;return n+=this.encodeChar(e-128,t),n},r.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,a=t%256,i=new $;return i.append(n),i.append(a),i.toString()},r}(),Qs=function(){function r(){}return r.prototype.getEncodingMode=function(){return Be},r.prototype.encode=function(e){for(var t=new $;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,t),e.pos++;var a=t.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var i=t.toString().substring(4);t.setLengthToZero(),t.append(i);var o=yt.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(ce);break}}}t.append(J.getCharAt(31)),this.handleEOD(e,t)},r.prototype.handleEOD=function(e,t){try{var n=t.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),i=e.getRemainingCharacters();if(i>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),i<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,s=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),f=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}f?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(ce)}},r.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(J.getCharAt(e-64)):yt.illegalCharacter(J.getCharAt(e))},r.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=t>=2?e.charAt(1).charCodeAt(0):0,i=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(a<<12)+(i<<6)+o,c=s>>16&255,f=s>>8&255,u=s&255,l=new $;return l.append(c),t>=2&&l.append(f),t>=3&&l.append(u),l.toString()},r}(),Ks=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Js=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ne=function(){function r(e,t,n,a,i,o,s,c){s===void 0&&(s=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=i,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=c}return r.lookup=function(e,t,n,a,i){var o,s;t===void 0&&(t=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!0);try{for(var c=Js(e0),f=c.next();!f.done;f=c.next()){var u=f.value;if(!(t===1&&u.rectangular)&&!(t===2&&!u.rectangular)&&!(n!=null&&(u.getSymbolWidth()<n.getWidth()||u.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(u.getSymbolWidth()>a.getWidth()||u.getSymbolHeight()>a.getHeight()))&&e<=u.dataCapacity)return u}}catch(l){o={error:l}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}if(i)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},r.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},r.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},r.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},r.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},r.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},r.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},r.prototype.getDataCapacity=function(){return this.dataCapacity},r.prototype.getErrorCodewords=function(){return this.errorCodewords},r.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},r.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},r}(),qs=function(r){Ks(e,r);function e(){return r.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(ne),e0=[new ne(!1,3,5,8,8,1),new ne(!1,5,7,10,10,1),new ne(!0,5,7,16,6,1),new ne(!1,8,10,12,12,1),new ne(!0,10,11,14,6,2),new ne(!1,12,12,14,14,1),new ne(!0,16,14,24,10,1),new ne(!1,18,14,16,16,1),new ne(!1,22,18,18,18,1),new ne(!0,22,18,16,10,2),new ne(!1,30,20,20,20,1),new ne(!0,32,24,16,14,2),new ne(!1,36,24,22,22,1),new ne(!1,44,28,24,24,1),new ne(!0,49,28,22,14,2),new ne(!1,62,36,14,14,4),new ne(!1,86,42,16,16,4),new ne(!1,114,48,18,18,4),new ne(!1,144,56,20,20,4),new ne(!1,174,68,22,22,4),new ne(!1,204,84,24,24,4,102,42),new ne(!1,280,112,14,14,16,140,56),new ne(!1,368,144,16,16,16,92,36),new ne(!1,456,192,18,18,16,114,48),new ne(!1,576,224,20,20,16,144,56),new ne(!1,696,272,22,22,16,174,68),new ne(!1,816,336,24,24,16,136,56),new ne(!1,1050,408,18,18,36,175,68),new ne(!1,1304,496,20,20,36,163,62),new qs],t0=function(){function r(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(s){return s.charCodeAt(0)}),n=new $,a=0,i=t.length;a<i;a++){var o=String.fromCharCode(t[a]&255);if(o==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new $,this.newEncoding=-1}return r.prototype.setSymbolShape=function(e){this.shape=e},r.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},r.prototype.getMessage=function(){return this.msg},r.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},r.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCodewords=function(){return this.codewords},r.prototype.writeCodewords=function(e){this.codewords.append(e)},r.prototype.writeCodeword=function(e){this.codewords.append(e)},r.prototype.getCodewordCount=function(){return this.codewords.length()},r.prototype.getNewEncoding=function(){return this.newEncoding},r.prototype.signalEncoderChange=function(e){this.newEncoding=e},r.prototype.resetEncoderSignal=function(){this.newEncoding=-1},r.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},r.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},r.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},r.prototype.getSymbolInfo=function(){return this.symbolInfo},r.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ne.lookup(e,this.shape,this.minSize,this.maxSize,!0))},r.prototype.resetSymbolInfo=function(){this.symbolInfo=null},r}(),r0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),n0=function(r){r0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Se},e.prototype.encode=function(t){for(var n=new $;t.hasMoreCharacters();){var a=t.getCurrentChar();t.pos++,this.encodeChar(a,n);var i=n.length();if(i%3===0){this.writeNextTriplet(t,n);var o=yt.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(ce);break}}}this.handleEOD(t,n)},e.prototype.encodeChar=function(t,n){switch(t){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:t>=48&&t<=57?n.append(t-48+4):t>=65&&t<=90?n.append(t-65+14):yt.illegalCharacter(J.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,n){t.updateSymbolInfo();var a=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),i=n.length();t.pos-=i,(t.getRemainingCharacters()>1||a>1||t.getRemainingCharacters()!==a)&&t.writeCodeword($s),t.getNewEncoding()<0&&t.signalEncoderChange(ce)},e}(cn),a0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),i0=function(r){a0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Je},e.prototype.encodeChar=function(t,n){if(t===32)return n.append(3),1;if(t>=48&&t<=57)return n.append(t-48+4),1;if(t>=97&&t<=122)return n.append(t-97+14),1;if(t<32)return n.append(0),n.append(t),2;if(t<=47)return n.append(1),n.append(t-33),2;if(t<=64)return n.append(1),n.append(t-58+15),2;if(t>=91&&t<=95)return n.append(1),n.append(t-91+22),2;if(t===96)return n.append(2),n.append(0),2;if(t<=90)return n.append(2),n.append(t-65+1),2;if(t<=127)return n.append(2),n.append(t-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(t-128,n),a},e}(cn),yt=function(){function r(){}return r.randomize253State=function(e){var t=149*e%253+1,n=qn+t;return n<=254?n:n-254},r.encodeHighLevel=function(e,t,n,a,i){t===void 0&&(t=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!1);var o=new cn,s=[new Ys,o,new i0,new n0,new Qs,new Zs],c=new t0(e);c.setSymbolShape(t),c.setSizeConstraints(n,a),e.startsWith(ea)&&e.endsWith(ra)?(c.writeCodeword(Hs),c.setSkipAtEnd(2),c.pos+=ea.length):e.startsWith(ta)&&e.endsWith(ra)&&(c.writeCodeword(Gs),c.setSkipAtEnd(2),c.pos+=ta.length);var f=ce;for(i&&(o.encodeMaximal(c),f=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)s[f].encode(c),c.getNewEncoding()>=0&&(f=c.getNewEncoding(),c.resetEncoderSignal());var u=c.getCodewordCount();c.updateSymbolInfo();var l=c.getSymbolInfo().getDataCapacity();u<l&&f!==ce&&f!==ze&&f!==Be&&c.writeCodeword("þ");var d=c.getCodewords();for(d.length()<l&&d.append(qn);d.length()<l;)d.append(this.randomize253State(d.length()+1));return c.getCodewords().toString()},r.lookAheadTest=function(e,t,n){var a=this.lookAheadTestIntern(e,t,n);if(n===Se&&a===Se){for(var i=Math.min(t+3,e.length),o=t;o<i;o++)if(!this.isNativeX12(e.charCodeAt(o)))return ce}else if(n===Be&&a===Be){for(var i=Math.min(t+4,e.length),o=t;o<i;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return ce}return a},r.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var a;n===ce?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var i=0,o=new Uint8Array(6),s=[];;){if(t+i===e.length){Oe.fill(o,0),Oe.fill(s,0);var c=this.findMinimums(a,s,Y.MAX_VALUE,o),f=this.getMinimumCount(o);if(s[ce]===c)return ce;if(f===1){if(o[ze]>0)return ze;if(o[Be]>0)return Be;if(o[Je]>0)return Je;if(o[Se]>0)return Se}return Ue}var u=e.charCodeAt(t+i);if(i++,this.isDigit(u)?a[ce]+=.5:this.isExtendedASCII(u)?(a[ce]=Math.ceil(a[ce]),a[ce]+=2):(a[ce]=Math.ceil(a[ce]),a[ce]++),this.isNativeC40(u)?a[Ue]+=2/3:this.isExtendedASCII(u)?a[Ue]+=8/3:a[Ue]+=4/3,this.isNativeText(u)?a[Je]+=2/3:this.isExtendedASCII(u)?a[Je]+=8/3:a[Je]+=4/3,this.isNativeX12(u)?a[Se]+=2/3:this.isExtendedASCII(u)?a[Se]+=13/3:a[Se]+=10/3,this.isNativeEDIFACT(u)?a[Be]+=3/4:this.isExtendedASCII(u)?a[Be]+=17/4:a[Be]+=13/4,this.isSpecialB256(u)?a[ze]+=4:a[ze]++,i>=4){if(Oe.fill(o,0),Oe.fill(s,0),this.findMinimums(a,s,Y.MAX_VALUE,o),s[ce]<this.min(s[ze],s[Ue],s[Je],s[Se],s[Be]))return ce;if(s[ze]<s[ce]||s[ze]+1<this.min(s[Ue],s[Je],s[Se],s[Be]))return ze;if(s[Be]+1<this.min(s[ze],s[Ue],s[Je],s[Se],s[ce]))return Be;if(s[Je]+1<this.min(s[ze],s[Ue],s[Be],s[Se],s[ce]))return Je;if(s[Se]+1<this.min(s[ze],s[Ue],s[Be],s[Je],s[ce]))return Se;if(s[Ue]+1<this.min(s[ce],s[ze],s[Be],s[Je])){if(s[Ue]<s[Se])return Ue;if(s[Ue]===s[Se]){for(var l=t+i+1;l<e.length;){var d=e.charCodeAt(l);if(this.isX12TermSep(d))return Se;if(!this.isNativeX12(d))break;l++}return Ue}}}}},r.min=function(e,t,n,a,i){var o=Math.min(e,Math.min(t,Math.min(n,a)));return i===void 0?o:Math.min(o,i)},r.findMinimums=function(e,t,n,a){for(var i=0;i<6;i++){var o=t[i]=Math.ceil(e[i]);n>o&&(n=o,Oe.fill(a,0)),n===o&&(a[i]=a[i]+1)}return n},r.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},r.isDigit=function(e){return e>=48&&e<=57},r.isExtendedASCII=function(e){return e>=128&&e<=255},r.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},r.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},r.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},r.isX12TermSep=function(e){return e===13||e===42||e===62},r.isNativeEDIFACT=function(e){return e>=32&&e<=94},r.isSpecialB256=function(e){return!1},r.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var n=e.length,a=t;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-t},r.illegalCharacter=function(e){var t=Y.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},r}(),Gr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},na=function(){function r(e){this.charset=e,this.name=e.name}return r.prototype.canEncode=function(e){try{return ht.encode(e,this.charset)!=null}catch{return!1}},r}(),o0=function(){function r(e,t,n){var a,i,o,s,c,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(k){return new na(Fs.forName(k))}),this.encoders=[];var u=[];u.push(new na(Ls.ISO_8859_1));for(var l=t!=null&&t.name.startsWith("UTF"),d=0;d<e.length;d++){var h=!1;try{for(var x=(a=void 0,Gr(u)),y=x.next();!y.done;y=x.next()){var _=y.value,A=e.charAt(d),w=A.charCodeAt(0);if(w===n||_.canEncode(A)){h=!0;break}}}catch(k){a={error:k}}finally{try{y&&!y.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}if(!h)try{for(var C=(o=void 0,Gr(this.ENCODERS)),p=C.next();!p.done;p=C.next()){var _=p.value;if(_.canEncode(e.charAt(d))){u.push(_),h=!0;break}}}catch(k){o={error:k}}finally{try{p&&!p.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}h||(l=!0)}if(u.length===1&&!l)this.encoders=[u[0]];else{this.encoders=[];var S=0;try{for(var I=Gr(u),N=I.next();!N.done;N=I.next()){var _=N.value;this.encoders[S++]=_}}catch(k){c={error:k}}finally{try{N&&!N.done&&(f=I.return)&&f.call(I)}finally{if(c)throw c.error}}}var R=-1;if(t!=null){for(var d=0;d<this.encoders.length;d++)if(this.encoders[d]!=null&&t.name===this.encoders[d].name){R=d;break}}this.priorityEncoderIndex=R}return r.prototype.length=function(){return this.encoders.length},r.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},r.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},r.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},r.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},r.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},r.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return ht.encode(J.getCharAt(e),this.encoders[t].name)},r}(),s0=3,c0=function(){function r(e,t,n){this.fnc1=n;var a=new o0(e,t,n);if(a.length()===1)for(var i=0;i<this.bytes.length;i++){var o=e.charAt(i).charCodeAt(0);this.bytes[i]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,a,n)}return r.prototype.getFNC1Character=function(){return this.fnc1},r.prototype.length=function(){return this.bytes.length},r.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},r.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},r.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new $,a=e;a<t;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},r.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},r.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},r.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},r.prototype.addEdge=function(e,t,n){(e[t][n.encoderIndex]==null||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},r.prototype.addEdges=function(e,t,n,a,i,o){var s=e.charAt(a).charCodeAt(0),c=0,f=t.length();t.getPriorityEncoderIndex()>=0&&(s===o||t.canEncode(s,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),f=c+1);for(var u=c;u<f;u++)(s===o||t.canEncode(s,u))&&this.addEdge(n,a+1,new aa(s,t,u,i,o))},r.prototype.encodeMinimally=function(e,t,n){var a=e.length,i=new aa[a+1][t.length()];this.addEdges(e,t,i,0,null,n);for(var o=1;o<=a;o++){for(var s=0;s<t.length();s++)i[o][s]!=null&&o<a&&this.addEdges(e,t,i,o,i[o][s],n);for(var s=0;s<t.length();s++)i[o-1][s]=null}for(var c=-1,f=Y.MAX_VALUE,s=0;s<t.length();s++)if(i[a][s]!=null){var u=i[a][s];u.cachedTotalSize<f&&(f=u.cachedTotalSize,c=s)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var l=[],d=i[a][c];d!=null;){if(d.isFNC1())l.unshift(1e3);else for(var h=t.encode(d.c,d.encoderIndex),o=h.length-1;o>=0;o--)l.unshift(h[o]&255);var x=d.previous===null?0:d.previous.encoderIndex;x!==d.encoderIndex&&l.unshift(256+t.getECIValue(d.encoderIndex)),d=d.previous}for(var y=[],o=0;o<y.length;o++)y[o]=l[o];return y},r}(),aa=function(){function r(e,t,n,a,i){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=a,this.fnc1=i,this.c=e===i?1e3:e;var o=this.isFNC1()?1:t.encode(e,n).length,s=a===null?0:a.encoderIndex;s!==n&&(o+=s0),a!=null&&(o+=a.cachedTotalSize),this.cachedTotalSize=o}return r.prototype.isFNC1=function(){return this.c===1e3},r}(),f0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();var ia;(function(r){r[r.ASCII=0]="ASCII",r[r.C40=1]="C40",r[r.TEXT=2]="TEXT",r[r.X12=3]="X12",r[r.EDF=4]="EDF",r[r.B256=5]="B256"})(ia||(ia={}));(function(r){f0(e,r);function e(t,n,a,i,o){var s=r.call(this,t,n,a)||this;return s.shape=i,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(c0);var u0=function(){function r(){}return r.prototype.isCompact=function(){return this.compact},r.prototype.setCompact=function(e){this.compact=e},r.prototype.getSize=function(){return this.size},r.prototype.setSize=function(e){this.size=e},r.prototype.getLayers=function(){return this.layers},r.prototype.setLayers=function(e){this.layers=e},r.prototype.getCodeWords=function(){return this.codeWords},r.prototype.setCodeWords=function(e){this.codeWords=e},r.prototype.getMatrix=function(){return this.matrix},r.prototype.setMatrix=function(e){this.matrix=e},r}(),oa=function(){function r(){}return r.singletonList=function(e){return[e]},r.min=function(e,t){return e.sort(t)[0]},r}(),l0=function(){function r(e){this.previous=e}return r.prototype.getPrevious=function(){return this.previous},r}(),d0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fn=function(r){d0(e,r);function e(t,n,a){var i=r.call(this,t)||this;return i.value=n,i.bitCount=a,i}return e.prototype.appendTo=function(t,n){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,n){return new e(this,t,n)},e.prototype.addBinaryShift=function(t,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,n)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Y.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(l0),h0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),v0=function(r){h0(e,r);function e(t,n,a){var i=r.call(this,t,0,0)||this;return i.binaryShiftStart=n,i.binaryShiftByteCount=a,i}return e.prototype.appendTo=function(t,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):a===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(t,n){return new e(this,t,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(fn);function x0(r,e,t){return new v0(r,e,t)}function nr(r,e,t){return new fn(r,e,t)}var p0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Dt=0,Tr=1,dt=2,ba=3,_t=4,g0=new fn(null,0,0),Xr=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],y0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function m0(r){var e,t;try{for(var n=y0(r),a=n.next();!a.done;a=n.next()){var i=a.value;Oe.fill(i,-1)}}catch(o){e={error:o}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r[Dt][_t]=0,r[Tr][_t]=0,r[Tr][Dt]=28,r[ba][_t]=0,r[dt][_t]=0,r[dt][Dt]=15,r}var Sa=m0(Oe.createInt32Array(6,6)),w0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_0=function(){function r(e,t,n,a){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=a}return r.prototype.getMode=function(){return this.mode},r.prototype.getToken=function(){return this.token},r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},r.prototype.getBitCount=function(){return this.bitCount},r.prototype.latchAndAppend=function(e,t){var n=this.bitCount,a=this.token;if(e!==this.mode){var i=Xr[this.mode][e];a=nr(a,i&65535,i>>16),n+=i>>16}var o=e===dt?4:5;return a=nr(a,t,o),new r(a,e,0,n+o)},r.prototype.shiftAndAppend=function(e,t){var n=this.token,a=this.mode===dt?4:5;return n=nr(n,Sa[this.mode][e],a),n=nr(n,t,5),new r(n,this.mode,0,this.bitCount+a+5)},r.prototype.addBinaryShiftChar=function(e){var t=this.token,n=this.mode,a=this.bitCount;if(this.mode===_t||this.mode===dt){var i=Xr[n][Dt];t=nr(t,i&65535,i>>16),a+=i>>16,n=Dt}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new r(t,n,this.binaryShiftByteCount+1,a+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},r.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=x0(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new r(t,this.mode,0,this.bitCount)},r.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Xr[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=r.calculateBinaryShiftCost(e)-r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},r.prototype.toBitArray=function(e){for(var t,n,a=[],i=this.endBinaryShift(e.length).token;i!==null;i=i.getPrevious())a.unshift(i);var o=new Fe;try{for(var s=w0(a),c=s.next();!c.done;c=s.next()){var f=c.value;f.appendTo(o,e)}}catch(u){t={error:u}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},r.prototype.toString=function(){return J.format("%s bits=%d bytes=%d",p0[this.mode],this.bitCount,this.binaryShiftByteCount)},r.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},r.INITIAL_STATE=new r(g0,Dt,0,0),r}();function A0(r){var e=J.getCharCode(" "),t=J.getCharCode("."),n=J.getCharCode(",");r[Dt][e]=1;for(var a=J.getCharCode("Z"),i=J.getCharCode("A"),o=i;o<=a;o++)r[Dt][o]=o-i+2;r[Tr][e]=1;for(var s=J.getCharCode("z"),c=J.getCharCode("a"),o=c;o<=s;o++)r[Tr][o]=o-c+2;r[dt][e]=1;for(var f=J.getCharCode("9"),u=J.getCharCode("0"),o=u;o<=f;o++)r[dt][o]=o-u+2;r[dt][n]=12,r[dt][t]=13;for(var l=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],d=0;d<l.length;d++)r[ba][J.getCharCode(l[d])]=d;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<h.length;d++)J.getCharCode(h[d])>0&&(r[_t][J.getCharCode(h[d])]=d);return r}var Wr=A0(Oe.createInt32Array(5,256)),gr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C0=function(){function r(e){this.text=e}return r.prototype.encode=function(){for(var e=J.getCharCode(" "),t=J.getCharCode(`
`),n=oa.singletonList(_0.INITIAL_STATE),a=0;a<this.text.length;a++){var i=void 0,o=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case J.getCharCode("\r"):i=o===t?2:0;break;case J.getCharCode("."):i=o===e?3:0;break;case J.getCharCode(","):i=o===e?4:0;break;case J.getCharCode(":"):i=o===e?5:0;break;default:i=0}i>0?(n=r.updateStateListForPair(n,a,i),a++):n=this.updateStateListForChar(n,a)}var s=oa.min(n,function(c,f){return c.getBitCount()-f.getBitCount()});return s.toBitArray(this.text)},r.prototype.updateStateListForChar=function(e,t){var n,a,i=[];try{for(var o=gr(e),s=o.next();!s.done;s=o.next()){var c=s.value;this.updateStateForChar(c,t,i)}}catch(f){n={error:f}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return r.simplifyStates(i)},r.prototype.updateStateForChar=function(e,t,n){for(var a=this.text[t]&255,i=Wr[e.getMode()][a]>0,o=null,s=0;s<=_t;s++){var c=Wr[s][a];if(c>0){if(o==null&&(o=e.endBinaryShift(t)),!i||s===e.getMode()||s===dt){var f=o.latchAndAppend(s,c);n.push(f)}if(!i&&Sa[e.getMode()][s]>=0){var u=o.shiftAndAppend(s,c);n.push(u)}}}if(e.getBinaryShiftByteCount()>0||Wr[e.getMode()][a]===0){var l=e.addBinaryShiftChar(t);n.push(l)}},r.updateStateListForPair=function(e,t,n){var a,i,o=[];try{for(var s=gr(e),c=s.next();!c.done;c=s.next()){var f=c.value;this.updateStateForPair(f,t,n,o)}}catch(u){a={error:u}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}return this.simplifyStates(o)},r.updateStateForPair=function(e,t,n,a){var i=e.endBinaryShift(t);if(a.push(i.latchAndAppend(_t,n)),e.getMode()!==_t&&a.push(i.shiftAndAppend(_t,n)),n===3||n===4){var o=i.latchAndAppend(dt,16-n).latchAndAppend(dt,1);a.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);a.push(s)}},r.simplifyStates=function(e){var t,n,a,i,o=[];try{for(var s=gr(e),c=s.next();!c.done;c=s.next()){var f=c.value,u=!0,l=function(_){if(_.isBetterThanOrEqualTo(f))return u=!1,"break";f.isBetterThanOrEqualTo(_)&&(o=o.filter(function(A){return A!==_}))};try{for(var d=(a=void 0,gr(o)),h=d.next();!h.done;h=d.next()){var x=h.value,y=l(x);if(y==="break")break}}catch(_){a={error:_}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}u&&o.push(f)}}catch(_){t={error:_}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},r}(),E0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.encodeBytes=function(e){return r.encode(e,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)},r.encode=function(e,t,n){var a=new C0(e).encode(),i=Y.truncDivision(a.getSize()*t,100)+11,o=a.getSize()+i,s,c,f,u,l;if(n!==r.DEFAULT_AZTEC_LAYERS){if(s=n<0,c=Math.abs(n),c>(s?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS))throw new j(J.format("Illegal value %s for layers",n));f=r.totalBitsInLayer(c,s),u=r.WORD_SIZE[c];var d=f-f%u;if(l=r.stuffBits(a,u),l.getSize()+i>d)throw new j("Data to large for user specified layer");if(s&&l.getSize()>u*64)throw new j("Data to large for user specified layer")}else{u=0,l=null;for(var h=0;;h++){if(h>r.MAX_NB_BITS)throw new j("Data too large for an Aztec code");if(s=h<=3,c=s?h+1:h,f=r.totalBitsInLayer(c,s),!(o>f)){(l==null||u!==r.WORD_SIZE[c])&&(u=r.WORD_SIZE[c],l=r.stuffBits(a,u));var d=f-f%u;if(!(s&&l.getSize()>u*64)&&l.getSize()+i<=d)break}}}var x=r.generateCheckWords(l,f,u),y=l.getSize()/u,_=r.generateModeMessage(s,c,y),A=(s?11:14)+c*4,w=new Int32Array(A),C;if(s){C=A;for(var h=0;h<w.length;h++)w[h]=h}else{C=A+1+2*Y.truncDivision(Y.truncDivision(A,2)-1,15);for(var p=Y.truncDivision(A,2),S=Y.truncDivision(C,2),h=0;h<p;h++){var I=h+Y.truncDivision(h,15);w[p-h-1]=S-I-1,w[p+h]=S+I+1}}for(var N=new At(C),h=0,R=0;h<c;h++){for(var k=(c-h)*4+(s?9:12),B=0;B<k;B++)for(var ue=B*2,W=0;W<2;W++)x.get(R+ue+W)&&N.set(w[h*2+W],w[h*2+B]),x.get(R+k*2+ue+W)&&N.set(w[h*2+B],w[A-1-h*2-W]),x.get(R+k*4+ue+W)&&N.set(w[A-1-h*2-W],w[A-1-h*2-B]),x.get(R+k*6+ue+W)&&N.set(w[A-1-h*2-B],w[h*2+W]);R+=k*8}if(r.drawModeMessage(N,s,C,_),s)r.drawBullsEye(N,Y.truncDivision(C,2),5);else{r.drawBullsEye(N,Y.truncDivision(C,2),7);for(var h=0,B=0;h<Y.truncDivision(A,2)-1;h+=15,B+=16)for(var W=Y.truncDivision(C,2)&1;W<C;W+=2)N.set(Y.truncDivision(C,2)-B,W),N.set(Y.truncDivision(C,2)+B,W),N.set(W,Y.truncDivision(C,2)-B),N.set(W,Y.truncDivision(C,2)+B)}var ie=new u0;return ie.setCompact(s),ie.setSize(C),ie.setLayers(c),ie.setCodeWords(y),ie.setMatrix(N),ie},r.drawBullsEye=function(e,t,n){for(var a=0;a<n;a+=2)for(var i=t-a;i<=t+a;i++)e.set(i,t-a),e.set(i,t+a),e.set(t-a,i),e.set(t+a,i);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},r.generateModeMessage=function(e,t,n){var a=new Fe;return e?(a.appendBits(t-1,2),a.appendBits(n-1,6),a=r.generateCheckWords(a,28,4)):(a.appendBits(t-1,5),a.appendBits(n-1,11),a=r.generateCheckWords(a,40,4)),a},r.drawModeMessage=function(e,t,n,a){var i=Y.truncDivision(n,2);if(t)for(var o=0;o<7;o++){var s=i-3+o;a.get(o)&&e.set(s,i-5),a.get(o+7)&&e.set(i+5,s),a.get(20-o)&&e.set(s,i+5),a.get(27-o)&&e.set(i-5,s)}else for(var o=0;o<10;o++){var s=i-5+o+Y.truncDivision(o,5);a.get(o)&&e.set(s,i-7),a.get(o+10)&&e.set(i+7,s),a.get(29-o)&&e.set(s,i+7),a.get(39-o)&&e.set(i-7,s)}},r.generateCheckWords=function(e,t,n){var a,i,o=e.getSize()/n,s=new Ca(r.getGF(n)),c=Y.truncDivision(t,n),f=r.bitsToWords(e,n,c);s.encode(f,c-o);var u=t%n,l=new Fe;l.appendBits(0,u);try{for(var d=E0(Array.from(f)),h=d.next();!h.done;h=d.next()){var x=h.value;l.appendBits(x,n)}}catch(y){a={error:y}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}return l},r.bitsToWords=function(e,t,n){var a=new Int32Array(n),i,o;for(i=0,o=e.getSize()/t;i<o;i++){for(var s=0,c=0;c<t;c++)s|=e.get(i*t+c)?1<<t-c-1:0;a[i]=s}return a},r.getGF=function(e){switch(e){case 4:return at.AZTEC_PARAM;case 6:return at.AZTEC_DATA_6;case 8:return at.AZTEC_DATA_8;case 10:return at.AZTEC_DATA_10;case 12:return at.AZTEC_DATA_12;default:throw new j("Unsupported word size "+e)}},r.stuffBits=function(e,t){for(var n=new Fe,a=e.getSize(),i=(1<<t)-2,o=0;o<a;o+=t){for(var s=0,c=0;c<t;c++)(o+c>=a||e.get(o+c))&&(s|=1<<t-1-c);(s&i)===i?(n.appendBits(s&i,t),o--):s&i?n.appendBits(s,t):(n.appendBits(s|1,t),o--)}return n},r.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.DEFAULT_EC_PERCENT=33,r.DEFAULT_AZTEC_LAYERS=0,r.MAX_NB_BITS=32,r.MAX_NB_BITS_COMPACT=4,r.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),r})();var b0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),S0=function(r){b0(e,r);function e(t){var n=r.call(this,t.width,t.height)||this;return n.canvas=t,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(t),n}return e.makeBufferFromCanvasImageData=function(t){var n;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(a.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,n,a){for(var i=new Uint8ClampedArray(n*a),o=0,s=0,c=t.length;o<c;o+=4,s++){var f=void 0,u=t[o+3];if(u===0)f=255;else{var l=t[o],d=t[o+1],h=t[o+2];f=306*l+601*d+117*h+512>>10}i[s]=f}return i},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new j("Requested row is outside the image: "+t);var a=this.getWidth(),i=t*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return r.prototype.crop.call(this,t,n,a,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Rr(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=t*e.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(a))*i+Math.abs(Math.sin(a))*o),c=Math.ceil(Math.abs(Math.sin(a))*i+Math.abs(Math.cos(a))*o);n.width=s,n.height=c;var f=n.getContext("2d");if(!f)throw new Error("Could not create a Canvas Context element.");return f.translate(s/2,c/2),f.rotate(a),f.drawImage(this.canvas,i/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(cr);function Ia(){return typeof navigator<"u"}function I0(){return Ia()&&!!navigator.mediaDevices}function N0(){return!!(I0()&&navigator.mediaDevices.enumerateDevices)}var Zt=function(){return Zt=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Zt.apply(this,arguments)},ye=function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function s(u){try{f(n.next(u))}catch(l){o(l)}}function c(u){try{f(n.throw(u))}catch(l){o(l)}}function f(u){u.done?i(u.value):a(u.value).then(s,c)}f((n=n.apply(r,e||[])).next())})},me=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(u){return c([f,u])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,a&&(i=f[0]&2?a.return:f[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,f[1])).done)return i;switch(a=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(u){f=[6,u],a=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},zr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O0={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Jt=function(){function r(e,t,n){t===void 0&&(t=new Map),n===void 0&&(n={}),this.reader=e,this.hints=t,this.options=Zt(Zt({},O0),n)}return Object.defineProperty(r.prototype,"possibleFormats",{set:function(e){this.hints.set(fe.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),r.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},r.mediaStreamSetTorch=function(e,t){return ye(this,void 0,void 0,function(){return me(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return n.sent(),[2]}})})},r.mediaStreamIsTorchCompatible=function(e){var t,n,a=e.getVideoTracks();try{for(var i=zr(a),o=i.next();!o.done;o=i.next()){var s=o.value;if(r.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!1},r.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},r.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},r.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new _e("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new _e("element with id '".concat(e,"' must be an ").concat(t," element"));return n},r.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return r.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},r.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return r.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},r.prepareVideoElement=function(e){var t=r.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.createBinaryBitmapFromCanvas=function(e){var t=new S0(e),n=new la(t);return new ua(n)},r.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},r.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},r.createCaptureCanvas=function(e){if(!e)throw new _e("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),n=r.getMediaElementDimensions(e),a=n.width,i=n.height;return t.style.width=a+"px",t.style.height=i+"px",t.width=a,t.height=i,t},r.tryPlayVideo=function(e){return ye(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(r.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return t=n.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},r.createCanvasFromMediaElement=function(e){var t=r.createCaptureCanvas(e),n=t.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return r.drawImageOnCanvas(n,e),t},r.createBinaryBitmapFromMediaElem=function(e){var t=r.createCanvasFromMediaElement(e);return r.createBinaryBitmapFromCanvas(t)},r.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},r.listVideoInputDevices=function(){return ye(this,void 0,void 0,function(){var e,t,n,a,i,o,s,c,f,u,l,d;return me(this,function(h){switch(h.label){case 0:if(!Ia())throw new Error("Can't enumerate devices, navigator is not present.");if(!N0())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=zr(e),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(s=i.deviceId||i.id,c=i.label||"Video device ".concat(t.length+1),f=i.groupId,u={deviceId:s,label:c,kind:o,groupId:f},t.push(u))}catch(x){l={error:x}}finally{try{a&&!a.done&&(d=n.return)&&d.call(n)}finally{if(l)throw l.error}}return[2,t]}})})},r.findDeviceById=function(e){return ye(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:return[4,r.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(a){return a.deviceId===e})]:[2]}})})},r.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},r.releaseAllStreams=function(){r.streamTracker.length!==0&&r.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),r.streamTracker=[]},r.playVideoOnLoadAsync=function(e,t){return ye(this,void 0,void 0,function(){var n;return me(this,function(a){switch(a.label){case 0:return[4,r.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(i,o){var s=setTimeout(function(){r.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",c))},t),c=function(){r.tryPlayVideo(e).then(function(f){clearTimeout(s),e.removeEventListener("canplay",c),i(f)})};e.addEventListener("canplay",c)})]}})})},r.attachStreamToVideo=function(e,t,n){return n===void 0&&(n=5e3),ye(this,void 0,void 0,function(){var a;return me(this,function(i){switch(i.label){case 0:return a=r.prepareVideoElement(t),r.addVideoSource(a,e),[4,r.playVideoOnLoadAsync(a,n)];case 1:return i.sent(),[2,a]}})})},r._waitImageLoad=function(e){return new Promise(function(t,n){var a=1e4,i=setTimeout(function(){r.isImageLoaded(e)||(e.removeEventListener("load",o),n())},a),o=function(){clearTimeout(i),e.removeEventListener("load",o),t()};e.addEventListener("load",o)})},r.checkCallbackFnOrThrow=function(e){if(!e)throw new _e("`callbackFn` is a required parameter, you cannot capture results without it.")},r.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},r.prototype.decode=function(e){var t=r.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},r.prototype.decodeFromCanvas=function(e){var t=r.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},r.prototype.decodeFromImageElement=function(e){return ye(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:if(!e)throw new _e("An image element must be provided.");return t=r.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeFromImageUrl=function(e){return ye(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:if(!e)throw new _e("An URL must be provided.");t=r.prepareImageElement(),t.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,n.sent()];case 3:return r.destroyImageElement(t),[7];case 4:return[2]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return ye(this,void 0,void 0,function(){var a,i;return me(this,function(o){switch(o.label){case 0:return r.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(a,t,n)];case 3:return[2,o.sent()];case 4:throw i=o.sent(),r.disposeMediaStream(a),i;case 5:return[2]}})})},r.prototype.decodeFromStream=function(e,t,n){return ye(this,void 0,void 0,function(){var a,i,o,s,c,f,u,l,d,h=this;return me(this,function(x){switch(x.label){case 0:return r.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,r.attachStreamToVideo(e,t,a)];case 1:return i=x.sent(),o=function(){r.disposeMediaStream(e),r.cleanVideoSource(i)},s=this.scan(i,n,o),c=e.getVideoTracks(),f=Zt(Zt({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(y,_){return ye(this,void 0,void 0,function(){var A,w,C,p,S,I,N;return me(this,function(R){switch(R.label){case 0:A=_?c.filter(_):c,R.label=1;case 1:R.trys.push([1,6,7,8]),w=zr(A),C=w.next(),R.label=2;case 2:return C.done?[3,5]:(p=C.value,[4,p.applyConstraints(y)]);case 3:R.sent(),R.label=4;case 4:return C=w.next(),[3,2];case 5:return[3,8];case 6:return S=R.sent(),I={error:S},[3,8];case 7:try{C&&!C.done&&(N=w.return)&&N.call(w)}finally{if(I)throw I.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(y){return c.find(y).getConstraints()},streamVideoSettingsGet:function(y){return c.find(y).getSettings()},streamVideoCapabilitiesGet:function(y){return c.find(y).getCapabilities()}}),u=r.mediaStreamIsTorchCompatible(e),u&&(l=c==null?void 0:c.find(function(y){return r.mediaStreamIsTorchCompatibleTrack(y)}),d=function(y){return ye(h,void 0,void 0,function(){return me(this,function(_){switch(_.label){case 0:return[4,r.mediaStreamSetTorch(l,y)];case 1:return _.sent(),[2]}})})},f.switchTorch=d,f.stop=function(){return ye(h,void 0,void 0,function(){return me(this,function(y){switch(y.label){case 0:return s.stop(),[4,d(!1)];case 1:return y.sent(),[2]}})})}),[2,f]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return ye(this,void 0,void 0,function(){var a,i;return me(this,function(o){switch(o.label){case 0:return r.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,t,n)];case 1:return[2,o.sent()]}})})},r.prototype.decodeFromVideoElement=function(e,t){return ye(this,void 0,void 0,function(){var n,a;return me(this,function(i){switch(i.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new _e("A video element must be provided.");return n=r.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,a)];case 1:return i.sent(),[2,this.scan(n,t)]}})})},r.prototype.decodeFromVideoUrl=function(e,t){return ye(this,void 0,void 0,function(){var n,a,i,o;return me(this,function(s){switch(s.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new _e("An URL must be provided.");return n=r.prepareVideoElement(),n.src=e,a=function(){r.cleanVideoSource(n)},i=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,i)];case 1:return s.sent(),o=this.scan(n,t,a),[2,o]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return ye(this,void 0,void 0,function(){var n;return me(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,a.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return ye(this,void 0,void 0,function(){var n,a,i;return me(this,function(o){switch(o.label){case 0:return n=!!t,[4,r.attachStreamToVideo(e,t)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return i=o.sent(),[2,i];case 4:return n||r.cleanVideoSource(a),[7];case 5:return[2]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return ye(this,void 0,void 0,function(){var n,a;return me(this,function(i){switch(i.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,t)];case 1:return[2,i.sent()]}})})},r.prototype.decodeOnceFromVideoElement=function(e){return ye(this,void 0,void 0,function(){var t,n;return me(this,function(a){switch(a.label){case 0:if(!e)throw new _e("A video element must be provided.");return t=r.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(t,n)];case 1:return a.sent(),[4,this.scanOneResult(t)];case 2:return[2,a.sent()]}})})},r.prototype.decodeOnceFromVideoUrl=function(e){return ye(this,void 0,void 0,function(){var t,n;return me(this,function(a){switch(a.label){case 0:if(!e)throw new _e("An URL must be provided.");t=r.prepareVideoElement(),t.src=e,n=this.decodeOnceFromVideoElement(t),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return r.cleanVideoSource(t),[7];case 4:return[2]}})})},r.prototype.scanOneResult=function(e,t,n,a){var i=this;return t===void 0&&(t=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(o,s){i.scan(e,function(c,f,u){if(c){o(c),u.stop();return}if(f){if(f instanceof b&&t||f instanceof Ae&&n||f instanceof T&&a)return;u.stop(),s(f)}})})},r.prototype.scan=function(e,t,n){var a=this;r.checkCallbackFnOrThrow(t);var i=r.createCaptureCanvas(e),o;try{o=i.getContext("2d",{willReadFrequently:!0})}catch{o=i.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){o=void 0,i=void 0},c=!1,f,u=function(){c=!0,clearTimeout(f),s(),n&&n()},l={stop:u},d=function(){if(!c)try{r.drawImageOnCanvas(o,e);var h=a.decodeFromCanvas(i);t(h,void 0,l),f=setTimeout(d,a.options.delayBetweenScanSuccess)}catch(A){t(void 0,A,l);var x=A instanceof Ae,y=A instanceof T,_=A instanceof b;if(x||y||_){f=setTimeout(d,a.options.delayBetweenScanAttempts);return}s(),n&&n(A)}};return d(),l},r.prototype._decodeOnLoadImage=function(e){return ye(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:return t=r.isImageLoaded(e),t?[3,2]:[4,r._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},r.prototype.getUserMedia=function(e){return ye(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=n.sent(),r.streamTracker.push(t),[2,t]}})})},r.streamTracker=[],r}(),T0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){T0(e,r);function e(t,n){return r.call(this,new br,t,n)||this}return e})(Jt);var R0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){R0(e,r);function e(t,n){return r.call(this,new $t(t),t,n)||this}return e})(Jt);var D0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){D0(e,r);function e(t,n){return r.call(this,new Ir,t,n)||this}return e})(Jt);var P0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){P0(e,r);function e(t,n){var a=this,i=new Aa;return i.setHints(t),a=r.call(this,i,t,n)||this,a.reader=i,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(fe.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(Jt);var M0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){M0(e,r);function e(t,n){return r.call(this,new Or,t,n)||this}return e})(Jt);var B0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sa=function(r){B0(e,r);function e(t,n){return r.call(this,new Nr,t,n)||this}return e}(Jt);const G0=()=>{const{user:r,logout:e}=ca(),[t,n]=U.useState(!1),[a,i]=U.useState(!1),[o,s]=U.useState(null),[c,f]=U.useState(null),[u,l]=U.useState(!1),[d,h]=U.useState([]),[x,y]=U.useState([]),[_,A]=U.useState("scanner"),[w,C]=U.useState(!1),[p,S]=U.useState({}),[I,N]=U.useState({}),[R,k]=U.useState(new Set),[B,ue]=U.useState({}),[W,ie]=U.useState([]),[Re,Le]=U.useState(!1),[Ct,Et]=U.useState(""),qe=U.useRef(null),ct=U.useRef(null),ft=U.useRef(null),Ht=U.useRef(null),St=U.useRef(null),Pt=U.useRef(null),G=m=>R.has(m),He=m=>B[m]||null;U.useEffect(()=>{if(console.log("🔍 [SecretaryDashboard] User role check:",r==null?void 0:r.role),r&&r.role!=="secretary"){console.log("❌ [SecretaryDashboard] User is not secretary, showing error"),ae.error("Δεν έχετε δικαίωμα πρόσβασης σε αυτή τη σελίδα");return}console.log("✅ [SecretaryDashboard] User is secretary, proceeding")},[r]),U.useEffect(()=>{bt()},[]),U.useEffect(()=>{_==="membership-requests"?ot():_==="ultimate-installments"&&ut()},[_]),U.useEffect(()=>{t&&(console.log("🎬 [UI] Video container rendering - isScanning:",t,"isVideoReady:",a,"cameraError:",o),console.log("🎬 [UI] webcamRef.current:",qe.current))},[t,a,o]);const bt=async()=>{try{const{data:m,error:O}=await $e.from("scan_audit_logs").select("*").order("created_at",{ascending:!1}).limit(10);if(O)throw O;const D=(m==null?void 0:m.map(z=>z.user_id))||[],{data:P,error:V}=await $e.from("user_profiles").select("user_id, first_name, last_name, email").in("user_id",D);if(V)throw V;const X=(m==null?void 0:m.map(z=>({...z,user_profiles:P==null?void 0:P.find(he=>he.user_id===z.user_id)})))||[];h(X)}catch(m){console.error("Error loading recent scans:",m)}},ot=async()=>{try{C(!0);const m=await Fr();y(m)}catch(m){console.error("Error loading membership requests:",m),ae.error("Σφάλμα κατά τη φόρτωση των αιτημάτων")}finally{C(!1)}},Gt=async()=>{try{Le(!0);const O=(await Fr()).filter(D=>{var P;return((P=D.package)==null?void 0:P.name)==="Ultimate"&&D.has_installments});ie(O)}catch(m){console.error("Error loading installment requests:",m),ae.error("Σφάλμα κατά τη φόρτωση των αιτημάτων δόσεων")}finally{Le(!1)}},Mt=async(m,O,D,P,V,X,z,he,Ce,ke)=>{try{const L={installment_1_amount:O,installment_2_amount:D,installment_3_amount:P,installment_1_payment_method:V,installment_2_payment_method:X,installment_3_payment_method:z};he&&(L.installment_1_due_date=he),Ce&&(L.installment_2_due_date=Ce),ke&&(L.installment_3_due_date=ke);const{error:Q}=await $e.from("membership_requests").update(L).eq("id",m);if(Q)throw Q;ae.success("Οι δόσεις και ημερομηνίες ενημερώθηκαν επιτυχώς"),await Gt()}catch(L){console.error("Error updating installment amounts:",L),ae.error("Σφάλμα κατά την ενημέρωση των δόσεων")}},ut=async()=>{try{Le(!0);const O=(await Fr()).filter(D=>{var P;return((P=D.package)==null?void 0:P.name)==="Ultimate"});ie(O)}catch(m){console.error("Error loading ultimate requests:",m),ae.error("Σφάλμα κατά τη φόρτωση των Ultimate αιτημάτων")}finally{Le(!1)}},Bt=async m=>{try{const{error:O}=await $e.from("membership_requests").delete().eq("id",m);if(O)throw O;ae.success("Το Ultimate αίτημα διαγράφηκε επιτυχώς"),await ut()}catch(O){console.error("Error deleting ultimate request:",O),ae.error("Σφάλμα κατά τη διαγραφή του Ultimate αιτήματος")}},Z=async m=>{var O;try{C(!0);const P=[...x,...W].find(X=>X.id===m);if(((O=P==null?void 0:P.package)==null?void 0:O.name)==="Ultimate"){const{approveUltimateMembershipRequest:X}=await dr(async()=>{const{approveUltimateMembershipRequest:he}=await import("./membershipApi-CZzjnGWn.js");return{approveUltimateMembershipRequest:he}},__vite__mapDeps([0,1,2]));await X(m)&&(ae.success("Το Ultimate αίτημα εγκρίθηκε επιτυχώς! Δημιουργήθηκαν 2 συνδρομές: Pilates + Open Gym"),_==="ultimate-installments"?ut():ot())}else await Pa(m)&&(ae.success("Το αίτημα εγκρίθηκε επιτυχώς!"),ot())}catch(D){console.error("Error approving request:",D),ae.error("Σφάλμα κατά την έγκριση του αιτήματος")}finally{C(!1)}},et=async m=>{const O=prompt("Παρακαλώ εισάγετε τον λόγο απόρριψης:");if(O)try{C(!0),await Ma(m,O)&&(ae.success("Το αίτημα απορρίφθηκε επιτυχώς!"),_==="ultimate-installments"?ut():ot())}catch(D){console.error("Error rejecting request:",D),ae.error("Σφάλμα κατά την απόρριψη του αιτήματος")}finally{C(!1)}},Ze=(m,O,D)=>{S(P=>({...P,[m]:{...P[m],[O]:D}}))},tt=(m,O)=>{N(D=>({...D,[m]:O}))},mt=async m=>{const O=I[m];if(O==="none"||!r){ae.error("Παρακαλώ επιλέξτε μια κατάσταση έγκρισης");return}try{C(!0);const D=p[m];if(!D){ae.error("Δεν υπάρχουν επιλογές για αυτό το αίτημα");return}const P=x.find(X=>X.id===m);if(!P){ae.error("Αίτημα δεν βρέθηκε");return}if(await Fa(P.user_id,O,{oldMembersUsed:D.oldMembers||!1,kettlebellPoints:D.kettlebellPoints?parseInt(D.kettlebellPoints):0,cashAmount:D.cashAmount||0,posAmount:D.posAmount||0,createdBy:r.id,notes:`Program options saved for membership request ${m} with ${O} status`})){if(console.log(`Program approval state saved for membership request: ${m}`),O==="pending"){const z=new Set(R),he={...B};z.add(m),he[m]=D,k(z),ue(he),ae("Program Options τοποθετήθηκαν στην αναμονή - οι επιλογές παγώθηκαν",{icon:"⏳"})}else if(O==="approved"&&await It(m,P.user_id,D),G(m)){const z=new Set(R),he={...B};z.delete(m),delete he[m],k(z),ue(he)}N(z=>({...z,[m]:"none"}));const X={approved:"εγκρίθηκε και εκτελέστηκαν οι ενέργειες",rejected:"απορρίφθηκε",pending:"τοποθετήθηκε στην αναμονή"};ae.success(`Program Options ${X[O]} επιτυχώς!`)}else ae.error("Σφάλμα κατά την αποθήκευση των Program Options")}catch(D){console.error("Error saving request program options:",D),ae.error("Σφάλμα κατά την αποθήκευση των Program Options")}finally{C(!1)}},It=async(m,O,D)=>{console.log("Executing approved program actions for membership request:",m),console.log("User Options received:",D),console.log("User ID:",O);try{D.oldMembers&&(await ja(O,(r==null?void 0:r.id)||"")?console.log(`[APPROVED] Old Members marked as used for membership request: ${m}`):console.warn(`[APPROVED] Failed to mark Old Members as used for membership request: ${m}`)),D.kettlebellPoints&&parseInt(D.kettlebellPoints)>0&&(await ka(O,parseInt(D.kettlebellPoints),void 0,(r==null?void 0:r.id)||"")?console.log(`[APPROVED] Kettlebell Points saved for membership request: ${m}, Points: ${D.kettlebellPoints}`):console.warn(`[APPROVED] Failed to save Kettlebell Points for membership request: ${m}`)),console.log("Checking cash amount:",D.cashAmount,"Type:",typeof D.cashAmount),D.cashAmount&&D.cashAmount>0?(console.log("Attempting to save cash transaction..."),await bn(O,D.cashAmount,"cash",void 0,(r==null?void 0:r.id)||"","Cash transaction from approved membership request")?console.log(`[APPROVED] Cash transaction saved for membership request: ${m}, Amount: €${D.cashAmount}`):console.warn(`[APPROVED] Failed to save Cash transaction for membership request: ${m}`)):console.log("No cash amount to save or amount is 0"),console.log("Checking POS amount:",D.posAmount,"Type:",typeof D.posAmount),D.posAmount&&D.posAmount>0?(console.log("Attempting to save POS transaction..."),await bn(O,D.posAmount,"pos",void 0,(r==null?void 0:r.id)||"","POS transaction from approved membership request")?console.log(`[APPROVED] POS transaction saved for membership request: ${m}, Amount: €${D.posAmount}`):console.warn(`[APPROVED] Failed to save POS transaction for membership request: ${m}`)):console.log("No POS amount to save or amount is 0"),ae.success("Έγιναν όλες οι απαραίτητες ενέργειες για το εγκεκριμένο αίτημα!")}catch(P){console.error("Error executing approved program actions for membership request:",P),ae.error("Σφάλμα κατά την εκτέλεση των ενεργειών")}},K=()=>{try{console.log("🎥 [Camera] Starting camera initialization..."),console.log("🎥 [Camera] Current states - isScanning:",t,"isVideoReady:",a,"cameraError:",o),s(null),i(!1),n(!0),f(null),l(!1),console.log("🎥 [Camera] Initializing ZXing continuous reader..."),setTimeout(()=>{rt()},500)}catch(m){console.error("❌ [Camera] Error starting scanning:",m);const O=m instanceof Error?m.message:"Άγνωστο σφάλμα";s(`Δεν ήταν δυνατή η έναρξη της σάρωσης: ${O}`),ae.error("Δεν ήταν δυνατή η έναρξη της σάρωσης")}},De=()=>{var m;console.log("🛑 [Camera] Stopping scanning..."),ct.current&&(clearInterval(ct.current),ct.current=null),n(!1),i(!1),s(null);try{try{(m=St.current)==null||m.stop()}catch{}const O=ft.current,D=O==null?void 0:O.srcObject;D==null||D.getTracks().forEach(P=>P.stop()),O&&(O.srcObject=null)}catch(O){console.log("🧹 [Camera] Cleanup error:",O)}},rt=async()=>{try{if(console.log("🔍 [QR Scanner] Starting continuous ZXing via BrowserQRCodeReader..."),!ft.current){console.log("❌ [QR Scanner] videoRef not available");return}const m=new sa;Ht.current=m;const O=await sa.listVideoInputDevices();console.log("🎥 [Camera] Found devices:",O.map(V=>{var X;return{id:(X=V.deviceId)==null?void 0:X.slice(-6),label:V.label}}));const D=O.find(V=>/back|rear|environment/i.test(V.label))||O[O.length-1],P=(D==null?void 0:D.deviceId)||void 0;P||console.warn("⚠️ [Camera] No camera deviceId resolved, falling back to default."),await m.decodeFromVideoDevice(P,ft.current,async(V,X,z)=>{var he;if(St.current=z,V){const Ce=V.getText();console.log("✅ [QR Scanner] ZXing stream detected:",Ce);try{const ke=((he=V==null?void 0:V.getResultPoints)==null?void 0:he.call(V))||[];ke&&ke.length>=3?Ft(ke.map(L=>({x:L.getX?L.getX():L.x,y:L.getY?L.getY():L.y})),"rgba(16,185,129,0.9)"):er("rgba(16,185,129,0.9)")}catch{}await st(Ce),z.stop(),De()}else X&&Date.now()%2e3<50&&console.log("ℹ️ [QR Scanner] No code in frame yet. err:",(X==null?void 0:X.name)||X)}),i(!0),ct.current||vt()}catch(m){console.error("❌ [QR Scanner] Error starting continuous ZXing:",m),s("Αποτυχία εκκίνησης ZXing reader")}},vt=()=>{if(console.log("🔍 [QR Scanner] Starting scan loop with ZXing..."),!ft.current){console.log("❌ [QR Scanner] Video element not available");return}ct.current&&clearInterval(ct.current);const m=new Map;m.set(fe.POSSIBLE_FORMATS,[F.QR_CODE]);const O=new Ss(m,100);O.timeBetweenDecodingAttempts=80,ct.current=setInterval(async()=>{var D;if(!ft.current){console.log("🔍 [QR Scanner] Video element not available, stopping scan");return}try{const P=ft.current;if(!P||P.readyState<2){console.log("🔍 [QR Scanner] Video element not ready");return}const V=P.videoWidth,X=P.videoHeight;if(!V||!X){console.log("🔍 [QR Scanner] Invalid video dimensions");return}const z=document.createElement("canvas"),he=z.getContext("2d",{willReadFrequently:!0});if(z.width=V,z.height=X,!he){console.log("🔍 [QR Scanner] Canvas 2D context not available");return}he.drawImage(P,0,0,V,X);const Ce=he.getImageData(0,0,V,X),ke=new ImageData(new Uint8ClampedArray(Ce.data),Ce.width,Ce.height);console.log("🔍 [QR Scanner] Captured frame from video:",V,"x",X);try{const L=Ce.data;let Q=0;for(let H=0;H<L.length;H+=4){const we=L[H],Ee=L[H+1],ve=L[H+2],Xe=we*.299+Ee*.587+ve*.114|0;L[H]=Xe,L[H+1]=Xe,L[H+2]=Xe,Q+=Xe}const le=Q/(L.length/4),ee=le*.9;for(let H=0;H<L.length;H+=4){const we=L[H]>ee?255:0;L[H]=we,L[H+1]=we,L[H+2]=we}he.putImageData(Ce,0,0),console.log("🔍 [QR Scanner] Applied grayscale+threshold. Avg:",Math.round(le),"Threshold:",Math.round(ee))}catch(L){console.log("🔍 [QR Scanner] Preprocess error (grayscale/threshold):",L)}try{const Q=(await dr(()=>import("./jsQR-qox8XAHS.js").then(ee=>ee.j),__vite__mapDeps([3,1,2]))).default;console.log("🔍 [QR Scanner] jsQR analyzing ORIGINAL (dontInvert/attemptBoth)...");const le=["dontInvert","attemptBoth"];for(const ee of le){const H=Q(ke.data,V,X,{inversionAttempts:ee});if(H&&H.data){try{Ft([H.location.topLeftCorner,H.location.topRightCorner,H.location.bottomRightCorner,H.location.bottomLeftCorner],"rgba(16,185,129,0.9)",V,X)}catch{}console.log(`✅ [QR Scanner] jsQR ORIGINAL detected (${ee}):`,H.data),await st(H.data);return}}}catch(L){console.log("🔍 [QR Scanner] jsQR ORIGINAL error:",L)}try{const Q=(await dr(()=>import("./jsQR-qox8XAHS.js").then(ee=>ee.j),__vite__mapDeps([3,1,2]))).default;console.log("🔍 [QR Scanner] jsQR analyzing PREPROCESSED (dontInvert/attemptBoth)...");const le=["dontInvert","attemptBoth"];for(const ee of le){const H=Q(Ce.data,V,X,{inversionAttempts:ee});if(H&&H.data){try{Ft([H.location.topLeftCorner,H.location.topRightCorner,H.location.bottomRightCorner,H.location.bottomLeftCorner],"rgba(16,185,129,0.9)",V,X)}catch{}console.log(`✅ [QR Scanner] jsQR PREPROCESSED detected (${ee}):`,H.data),await st(H.data);return}}console.log("🔍 [QR Scanner] jsQR did not detect, falling back to ZXing...")}catch(L){console.log("🔍 [QR Scanner] jsQR PREPROCESSED error:",L)}try{const L=document.createElement("canvas"),Q=L.getContext("2d"),le=Math.floor(V*.6),ee=Math.floor(X*.6),H=Math.floor((V-le)/2),we=Math.floor((X-ee)/2);L.width=le,L.height=ee,Q==null||Q.drawImage(z,H,we,le,ee,0,0,le,ee);const Ee=new Image;await new Promise((Xe,xt)=>{Ee.onload=()=>Xe(),Ee.onerror=xt,Ee.src=L.toDataURL("image/png")});const ve=await O.decodeFromImage(Ee);if(ve&&ve.getText){const Xe=ve.getText();try{const xt=((D=ve==null?void 0:ve.getResultPoints)==null?void 0:D.call(ve))||[];xt&&xt.length>=3?Ft(xt.map(We=>({x:We.getX?We.getX():We.x,y:We.getY?We.getY():We.y})),"rgba(16,185,129,0.9)"):er("rgba(16,185,129,0.9)")}catch{}console.log("✅ [QR Scanner] ZXing detected from CENTER CROP image:",Xe),await st(Xe);return}console.log("🔍 [QR Scanner] ZXing returned empty result from center crop")}catch(L){console.log("🔍 [QR Scanner] ZXing image decode error:",L),console.log("🔍 [QR Scanner] No QR code found in this frame");try{const Q=document.createElement("canvas"),le=Q.getContext("2d"),ee=Math.floor(V*.6),H=Math.floor(X*.6),we=Math.floor((V-ee)/2),Ee=Math.floor((X-H)/2);le&&(Q.width=512,Q.height=Math.floor(512*(H/ee)),le.drawImage(z,we,Ee,ee,H,0,0,Q.width,Q.height),console.log("🔍 [QR Scanner] Debug crop data URL:",Q.toDataURL("image/png").slice(0,100)+"..."))}catch(Q){console.log("🔍 [QR Scanner] Debug crop error:",Q)}}try{const L=[.8,.6,.5,.4];for(const Q of L){const le=Math.max(160,Math.floor(V*Q)),ee=Math.max(120,Math.floor(X*Q)),H=document.createElement("canvas"),we=H.getContext("2d");H.width=le,H.height=ee,we==null||we.drawImage(z,0,0,V,X,0,0,le,ee);const Ee=new Image;await new Promise((ve,Xe)=>{Ee.onload=()=>ve(),Ee.onerror=Xe,Ee.src=H.toDataURL("image/png")});try{const ve=await O.decodeFromImage(Ee);if(ve&&ve.getText){console.log(`✅ [QR Scanner] ZXing detected at scale ${Q}:`,ve.getText()),await st(ve.getText());return}}catch{}try{const Xe=(await dr(()=>import("./jsQR-qox8XAHS.js").then(We=>We.j),__vite__mapDeps([3,1,2]))).default,xt=we==null?void 0:we.getImageData(0,0,le,ee);if(xt){const We=Xe(xt.data,le,ee,{inversionAttempts:"attemptBoth"});if(We&&We.data){console.log(`✅ [QR Scanner] jsQR detected at scale ${Q}:`,We.data),await st(We.data);return}}}catch{}}console.log("🔍 [QR Scanner] Multi-scale attempts completed without detection")}catch(L){console.log("🔍 [QR Scanner] Multi-scale error:",L)}}catch(P){console.error("❌ [QR Scanner] Error capturing image:",P)}},1e3)},wt=async m=>{console.log("🔍 [Ultra Simple QR] Processing ultra simple QR format"),console.log("🔍 [Ultra Simple QR] QR Data:",m);const{data:O,error:D}=await $e.from("qr_codes").select("*").eq("qr_token",m).eq("status","active").maybeSingle();if(console.log("🔍 [Ultra Simple QR] Database query result:",O?"Found":"Not found",D?"Error":"No error"),console.log("🔍 [Ultra Simple QR] QR Code data:",O),console.log("🔍 [Ultra Simple QR] QR Error:",D),D||!O){console.log("❌ [Ultra Simple QR] QR code validation failed"),f({success:!1,message:"Μη έγκυρο QR Code",reason:"QR Code δεν βρέθηκε ή είναι ανενεργό"}),l(!0),De();return}const{data:P,error:V}=await $e.from("user_profiles").select("id, email, first_name, last_name").eq("user_id",O.user_id).maybeSingle();if(console.log("🔍 [Ultra Simple QR] User profile query result:",P?"Found":"Not found",V?"Error":"No error"),console.log("🔍 [Ultra Simple QR] User profile data:",P),console.log("🔍 [Ultra Simple QR] User profile error:",V),O.expires_at&&new Date(O.expires_at)<new Date){console.log("❌ [Ultra Simple QR] QR code is expired"),f({success:!1,message:"QR Code έχει λήξει",reason:"Το QR Code έχει λήξει και δεν είναι πλέον έγκυρο"}),l(!0),De();return}console.log("✅ [Ultra Simple QR] QR code validated successfully for user:",P==null?void 0:P.first_name,P==null?void 0:P.last_name),console.log("✅ [Ultra Simple QR] Full user profile data:",P),console.log("✅ [Ultra Simple QR] QR code data:",O),f({success:!0,message:"Επιτυχής είσοδος!",userData:{id:(P==null?void 0:P.id)||"unknown",email:(P==null?void 0:P.email)||"unknown@email.com",name:`${(P==null?void 0:P.first_name)||""} ${(P==null?void 0:P.last_name)||""}`.trim()||"Άγνωστος",category:O.category}}),l(!0),De(),bt()},qt=async m=>{console.log("🔍 [URL QR] Processing URL QR format:",m),console.log("🔍 [URL QR] Checking if QR code exists in database...");const{data:O,error:D}=await $e.from("qr_codes").select("*, user_profiles!inner(id, email, first_name, last_name)").eq("qr_token",m).eq("status","active").single();if(D||!O)console.log("🔍 [URL QR] QR code not found in database, treating as external"),f({success:!0,message:"Εξωτερικό QR Code σαρώθηκε!",userData:{id:"external",email:"External QR Code",name:"Εξωτερικό QR Code",category:"external"}});else{console.log("🔍 [URL QR] QR code found in database, processing as valid user QR");const P=O.user_profiles;f({success:!0,message:"Επιτυχής είσοδος!",userData:{id:P.id,email:P.email,name:`${P.first_name} ${P.last_name}`.trim()||"Άγνωστος",category:O.category}})}l(!0),De(),bt()},st=async m=>{try{if(console.log("🔍 [QR Process] Processing QR data:",m),console.log("🔍 [QR Process] QR data length:",m.length),console.log("🔍 [QR Process] QR data type:",typeof m),/^[A-Za-z0-9]{6,64}$/.test(m))console.log("🔍 [QR Process] Opaque short token detected"),await wt(m);else if(m.includes("__")&&m.length>36)console.log("🔍 [QR Process] Ultra simple QR format detected (userId__category__timestamp)"),console.log("🔍 [QR Process] QR Data:",m),await wt(m);else if(m.includes("_")&&m.length>36)console.log("🔍 [QR Process] Old QR format detected (userId_category_timestamp)"),console.log("🔍 [QR Process] QR Data:",m),await wt(m);else if(m.includes("-")&&m.length>36)console.log("🔍 [QR Process] Old QR format detected (userId-category-timestamp)"),console.log("🔍 [QR Process] QR Data:",m),await wt(m);else if(m.includes(":")&&m.length>50)console.log("🔍 [QR Process] Complex QR format detected (id:userId:category:timestamp:hash)"),console.log("🔍 [QR Process] QR Data:",m),await wt(m);else if(m.startsWith("https://"))console.log("🔍 [QR Process] URL format detected"),await qt(m);else throw console.log("❌ [QR Process] Unknown QR code format"),new Error("Unknown QR code format")}catch(O){console.error("Error processing QR code:",O),f({success:!1,message:"Σφάλμα επεξεργασίας QR Code",reason:"Μη έγκυρο ή απροσδιόριστο QR Code format"}),l(!0),De()}},Ge=m=>{switch(m){case"free_gym":return"Ελεύθερο Gym";case"pilates":return"Pilates";case"personal":return"Personal Training";default:return m}},er=m=>{const O=Pt.current;if(!O)return;const D=O.getContext("2d");D&&(D.strokeStyle=m,D.lineWidth=3,D.strokeRect(8,8,O.width-16,O.height-16))},Ft=(m,O,D,P)=>{const V=Pt.current,X=ft.current;if(!V||!X||!(m!=null&&m.length))return;const z=V.getContext("2d");if(!z)return;const he=D?V.width/D:1,Ce=P?V.height/P:1;z.clearRect(0,0,V.width,V.height),z.beginPath(),z.strokeStyle=O,z.lineWidth=3,m.forEach((ke,L)=>{const Q=ke.x*he,le=ke.y*Ce;L===0?z.moveTo(Q,le):z.lineTo(Q,le)}),z.closePath(),z.stroke()},ur=()=>{l(!1),f(null)};return!r||r.role!=="secretary"?v.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx(Ta,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),v.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Δεν έχετε δικαίωμα πρόσβασης"}),v.jsx("p",{className:"text-gray-600",children:"Αυτή η σελίδα είναι διαθέσιμη μόνο για γραμματεία"})]})}):v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:[v.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 shadow-2xl border-b border-gray-700",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[v.jsxs("div",{className:"flex justify-between items-center py-6",children:[v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsx("img",{src:"/logo.png",alt:"Get Fit Logo",className:"h-32 w-32 rounded-lg object-contain"}),v.jsxs("div",{children:[v.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Secretary Dashboard"}),v.jsx("p",{className:"text-gray-300 mt-1",children:_==="scanner"?"🔍 Σαρώστε QR codes για είσοδο/έξοδο":_==="membership-requests"?"📋 Διαχείριση αιτημάτων συνδρομών":_==="ultimate-installments"?"👑 Διαχείριση Ultimate συνδρομών και δόσεων":_==="personal-training"?"🏋️‍♂️ Διαχείριση Personal Training προγραμμάτων":"💳 Διαχείριση δόσεων για πακέτα Ultimate"})]})]}),v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsxs("button",{onClick:_==="scanner"?bt:_==="membership-requests"?ot:ut,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[v.jsx(En,{className:"h-4 w-4"}),v.jsx("span",{className:"font-medium",children:"Ανανέωση"})]}),v.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-xl hover:from-gray-700 hover:to-gray-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[v.jsx(Er,{className:"h-4 w-4"}),v.jsx("span",{className:"font-medium",children:"Αποσύνδεση"})]})]})]}),v.jsx("div",{className:"border-t border-gray-600",children:v.jsxs("nav",{className:"flex space-x-2 p-2",children:[v.jsx("button",{onClick:()=>A("scanner"),className:`py-4 px-6 rounded-xl font-medium text-sm transition-all duration-200 transform hover:scale-105 ${_==="scanner"?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-lg border-2 border-blue-400":"text-gray-300 hover:text-white hover:bg-gray-700 border-2 border-transparent"}`,children:v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(Mr,{className:"h-5 w-5"}),v.jsx("span",{children:"🔍 QR Scanner"})]})}),v.jsx("button",{onClick:()=>A("membership-requests"),className:`py-4 px-6 rounded-xl font-medium text-sm transition-all duration-200 transform hover:scale-105 ${_==="membership-requests"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg border-2 border-green-400":"text-gray-300 hover:text-white hover:bg-gray-700 border-2 border-transparent"}`,children:v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(mr,{className:"h-5 w-5"}),v.jsx("span",{children:"📋 Αιτήματα Συνδρομών"})]})}),v.jsx("button",{onClick:()=>A("ultimate-installments"),className:`py-4 px-6 rounded-xl font-medium text-sm transition-all duration-200 transform hover:scale-105 ${_==="ultimate-installments"?"bg-gradient-to-r from-orange-600 to-orange-700 text-white shadow-lg border-2 border-orange-400":"text-gray-300 hover:text-white hover:bg-gray-700 border-2 border-transparent"}`,children:v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("span",{className:"text-orange-400 text-lg",children:"👑"}),v.jsx("span",{children:"Ultimate Συνδρομές"})]})}),v.jsx("button",{onClick:()=>A("personal-training"),className:`py-4 px-6 rounded-xl font-medium text-sm transition-all duration-200 transform hover:scale-105 ${_==="personal-training"?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg border-2 border-purple-400":"text-gray-300 hover:text-white hover:bg-gray-700 border-2 border-transparent"}`,children:v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("span",{className:"text-purple-400 text-lg",children:"🏋️‍♂️"}),v.jsx("span",{children:"Personal Training"})]})})]})})]})}),v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:_==="scanner"?v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-8",children:[v.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl shadow-2xl border border-gray-600 p-6 backdrop-blur-sm",children:[v.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[v.jsx("span",{className:"text-2xl mr-2",children:"🔍"}),"QR Code Scanner"]}),v.jsx("div",{className:"space-y-4",children:t?v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",style:{aspectRatio:"16/9",minHeight:"200px"},"data-scanning":t?"true":"false",children:[v.jsx("canvas",{ref:Pt,className:"absolute inset-0 w-full h-full pointer-events-none"}),v.jsx("video",{ref:ft,className:"w-full h-full object-contain bg-black",playsInline:!0,muted:!0,autoPlay:!0}),!a&&!o&&v.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800",children:v.jsxs("div",{className:"text-center text-white",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),v.jsx("p",{className:"text-sm",children:"Φόρτωση κάμερας..."})]})}),o&&v.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900 bg-opacity-90",children:v.jsxs("div",{className:"text-center text-white p-4",children:[v.jsx(lr,{className:"h-12 w-12 mx-auto mb-4 text-red-300"}),v.jsx("p",{className:"text-sm font-medium mb-2",children:"Σφάλμα κάμερας"}),v.jsx("p",{className:"text-xs text-red-200",children:o})]})}),a&&!o&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"absolute inset-0 border-2 border-blue-500 rounded-lg pointer-events-none",children:v.jsx("div",{className:"absolute top-2 left-2 right-2 bg-blue-500 text-white text-center py-1 rounded text-sm",children:"Σαρώστε QR Code εδώ"})}),v.jsxs("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-75 text-white text-xs p-2 rounded",children:["Camera Status: ",a?"Ready":"Loading"]})]})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("button",{onClick:()=>De(),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[v.jsx(lr,{className:"h-4 w-4 inline mr-2"}),"Σταματήστε σάρωση"]}),o&&v.jsxs("button",{onClick:K,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[v.jsx(Br,{className:"h-4 w-4 inline mr-2"}),"Δοκιμάστε ξανά"]})]})]}):v.jsxs("div",{className:"text-center py-12",children:[v.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-full p-4 w-20 h-20 mx-auto mb-4 shadow-lg",children:v.jsx(Br,{className:"h-12 w-12 text-white"})}),v.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Ξεκινήστε τη σάρωση"}),v.jsx("p",{className:"text-gray-300 mb-6",children:"Πατήστε το κουμπί για να ανοίξετε την κάμερα"}),v.jsxs("button",{onClick:()=>{console.log("🎯 [UI] Start scanning button clicked"),K()},className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 font-medium",children:[v.jsx(Br,{className:"h-5 w-5 inline mr-2"}),"Ξεκινήστε σάρωση"]})]})})]}),v.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl shadow-2xl border border-gray-600 p-6 backdrop-blur-sm",children:[v.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[v.jsx("span",{className:"text-2xl mr-2",children:"📋"}),"Πρόσφατες σαρώσεις"]}),d.length===0?v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-full p-3 w-16 h-16 mx-auto mb-4 shadow-lg",children:v.jsx(Mr,{className:"h-10 w-10 text-gray-300"})}),v.jsx("p",{className:"text-gray-300",children:"Δεν υπάρχουν πρόσφατες σαρώσεις"})]}):v.jsx("div",{className:"space-y-3",children:d.map((m,O)=>v.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-700 to-gray-800 rounded-xl border border-gray-600 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-102",children:[v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsx("div",{className:`p-3 rounded-full shadow-lg ${m.status==="approved"?"bg-gradient-to-r from-green-500 to-green-600":"bg-gradient-to-r from-red-500 to-red-600"}`,children:m.status==="approved"?v.jsx(An,{className:"h-5 w-5 text-white"}):v.jsx(lr,{className:"h-5 w-5 text-white"})}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-white",children:m.user_profiles?`${m.user_profiles.first_name} ${m.user_profiles.last_name}`:"Άγνωστος"}),v.jsxs("p",{className:"text-sm text-gray-300",children:[Ge(m.category)," • ",m.scan_type]})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsx("p",{className:"text-sm text-gray-300",children:new Date(m.created_at).toLocaleTimeString("el-GR")}),v.jsx("p",{className:`text-xs font-medium px-2 py-1 rounded-full ${m.status==="approved"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:m.status==="approved"?"Εγκεκριμένο":"Απορριφθέν"})]})]},O))})]})]}):_==="membership-requests"?v.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl shadow-2xl border border-gray-600 p-6 backdrop-blur-sm",children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center",children:[v.jsx("span",{className:"text-3xl mr-3",children:"📋"}),"Αιτήματα Συνδρομών"]}),v.jsxs("button",{onClick:ot,className:"px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 font-medium",children:[v.jsx(En,{className:"h-4 w-4 inline mr-2"}),"Ανανέωση"]})]}),w?v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-400 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-300 font-medium",children:"Φόρτωση αιτημάτων..."})]}):x.length===0?v.jsxs("div",{className:"text-center py-12",children:[v.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-purple-600 rounded-full p-4 w-20 h-20 mx-auto mb-4 shadow-lg",children:v.jsx(mr,{className:"h-12 w-12 text-white"})}),v.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Δεν υπάρχουν αιτήματα"}),v.jsx("p",{className:"text-gray-300",children:"Δεν υπάρχουν αιτήματα συνδρομών για επεξεργασία"})]}):v.jsx("div",{className:"space-y-4",children:x.filter(m=>{var O,D;return((O=m.package)==null?void 0:O.name)==="Free Gym"||((D=m.package)==null?void 0:D.name)==="Pilates"}).filter(m=>m.status==="pending"||m.status==="approved"&&G(m.id)||m.status==="rejected"&&G(m.id)).map(m=>{var O,D,P,V,X,z,he,Ce,ke,L,Q,le,ee,H,we,Ee,ve,Xe,xt,We,un,ln,dn,hn,vn,xn,pn,gn,yn,mn,wn;return v.jsxs("div",{className:"bg-gradient-to-r from-gray-700 to-gray-800 border border-gray-600 rounded-2xl p-6 hover:from-gray-600 hover:to-gray-700 transition-all duration-200 shadow-lg hover:shadow-2xl transform hover:scale-102",children:[v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsxs("div",{className:"flex-1",children:[v.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[v.jsx("div",{className:"flex-shrink-0",children:(O=m.user)!=null&&O.profile_photo?v.jsxs("div",{className:"w-12 h-12 rounded-xl overflow-hidden shadow-lg border-2 border-blue-400",children:[v.jsx("img",{src:m.user.profile_photo,alt:`${(D=m.user)==null?void 0:D.first_name} ${(P=m.user)==null?void 0:P.last_name}`,className:"w-full h-full object-cover",onError:Pe=>{Pe.currentTarget.style.display="none";const _n=Pe.currentTarget.nextElementSibling;_n&&(_n.style.display="flex")}}),v.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center hidden",children:v.jsx(sr,{className:"h-6 w-6 text-white"})})]}):v.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:v.jsx(sr,{className:"h-6 w-6 text-white"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-semibold text-white text-lg",children:(V=m.user)!=null&&V.first_name&&((X=m.user)!=null&&X.last_name)?`${m.user.first_name} ${m.user.last_name}`:"Άγνωστος χρήστης"}),v.jsx("p",{className:"text-sm text-gray-300",children:((z=m.user)==null?void 0:z.email)||"Δεν υπάρχει email"})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[v.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500/20 to-blue-600/20 rounded-lg p-3 border border-blue-500/30",children:[v.jsx(mr,{className:"h-5 w-5 text-blue-400"}),v.jsxs("span",{className:"text-sm text-gray-200",children:[v.jsx("span",{className:"font-medium text-blue-300",children:"Πακέτο:"})," ",((he=m.package)==null?void 0:he.name)||"Άγνωστο πακέτο"]})]}),v.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-purple-500/20 to-purple-600/20 rounded-lg p-3 border border-purple-500/30",children:[v.jsx(Ra,{className:"h-5 w-5 text-purple-400"}),v.jsxs("span",{className:"text-sm text-gray-200",children:[v.jsx("span",{className:"font-medium text-purple-300",children:"Διάρκεια:"})," ",fa(m.duration_type)]})]}),v.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-green-500/20 to-green-600/20 rounded-lg p-3 border border-green-500/30",children:[v.jsx(La,{className:"h-5 w-5 text-green-400"}),v.jsxs("span",{className:"text-sm text-gray-200",children:[v.jsx("span",{className:"font-medium text-green-300",children:"Τιμή:"})," ",wr(m.requested_price)]})]})]}),m.classes_count&&m.classes_count>0&&v.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-pink-500/20 to-pink-600/20 border border-pink-500/30 rounded-xl",children:v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("span",{className:"text-2xl",children:"🧘"}),v.jsxs("span",{className:"text-sm font-medium text-pink-300",children:["Μαθήματα Pilates: ",m.classes_count]})]})}),v.jsxs("div",{className:"mt-4 text-sm text-gray-300 bg-gray-600/30 rounded-lg p-3",children:[v.jsx("span",{className:"font-medium text-gray-200",children:"📅 Ημερομηνία αίτησης:"})," ",new Date(m.created_at).toLocaleDateString("el-GR")]})]}),v.jsxs("div",{className:"flex flex-col space-y-3 ml-4",children:[v.jsxs("button",{onClick:()=>Z(m.id),className:"px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl transform hover:scale-105",children:[v.jsx(Da,{className:"h-4 w-4 inline mr-2"}),"✅ Έγκριση"]}),v.jsxs("button",{onClick:()=>{prompt("Λόγος απόρριψης:")&&et(m.id)},className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl transform hover:scale-105",children:[v.jsx(Er,{className:"h-4 w-4 inline mr-2"}),"❌ Απόρριψη"]})]})]}),(m.status==="pending"||m.status==="approved"&&G(m.id)||m.status==="rejected"&&G(m.id))&&v.jsxs("div",{className:`mt-6 p-6 rounded-2xl border shadow-lg ${G(m.id)?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border-yellow-500/30":"bg-gradient-to-r from-purple-500/20 to-pink-500/20 border-purple-500/30"}`,children:[v.jsxs("h5",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[v.jsx("span",{className:"text-2xl mr-2",children:"⚙️"}),"Program Options",G(m.id)&&v.jsx("span",{className:"ml-2 text-yellow-400",children:"🔒"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[((Ce=m.package)==null?void 0:Ce.name)!=="Pilates"&&v.jsx("div",{className:`p-3 rounded-lg border ${G(m.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:v.jsx("button",{onClick:()=>{var Pe;if(G(m.id)){ae("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}Ze(m.id,"oldMembers",!((Pe=p[m.id])!=null&&Pe.oldMembers))},className:`w-full p-3 rounded-lg text-left transition-colors ${(ke=p[m.id])!=null&&ke.oldMembers||(L=He(m.id))!=null&&L.oldMembers?"bg-green-100 text-green-800 border-2 border-green-300":G(m.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:"font-medium",children:[G(m.id)&&"🔒 ","👴 Παλαιά μέλη"]}),(((Q=p[m.id])==null?void 0:Q.oldMembers)||((le=He(m.id))==null?void 0:le.oldMembers))&&v.jsx("span",{className:"text-green-600",children:"✓"})]})})}),((ee=m.package)==null?void 0:ee.name)!=="Pilates"&&v.jsxs("div",{className:`p-3 rounded-lg border ${G(m.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[G(m.id)&&"🔒 ","🏋️ Kettlebell Points"]}),v.jsx("input",{type:"number",value:G(m.id)?((H=He(m.id))==null?void 0:H.kettlebellPoints)||"":((we=p[m.id])==null?void 0:we.kettlebellPoints)||"",onChange:Pe=>{G(m.id)||Ze(m.id,"kettlebellPoints",Pe.target.value)},placeholder:"Εισάγετε πόντους",className:`w-full p-2 border rounded-lg ${G(m.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,disabled:G(m.id)})]}),v.jsxs("div",{className:`p-3 rounded-lg border ${G(m.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[v.jsx("button",{onClick:()=>{var Pe;if(G(m.id)){ae("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}Ze(m.id,"cash",!((Pe=p[m.id])!=null&&Pe.cash))},className:`w-full p-3 rounded-lg text-left transition-colors ${(Ee=p[m.id])!=null&&Ee.cash||(ve=He(m.id))!=null&&ve.cash?"bg-green-100 text-green-800 border-2 border-green-300":G(m.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:"font-medium",children:[G(m.id)&&"🔒 ","💰 Μετρητά"]}),(((Xe=p[m.id])==null?void 0:Xe.cash)||((xt=He(m.id))==null?void 0:xt.cash))&&v.jsx("span",{className:"text-green-600",children:"✓"})]})}),(((We=p[m.id])==null?void 0:We.cash)||((un=He(m.id))==null?void 0:un.cash))&&v.jsxs("div",{className:"mt-2",children:[v.jsx("input",{type:"number",value:G(m.id)?((ln=He(m.id))==null?void 0:ln.cashAmount)||"":((dn=p[m.id])==null?void 0:dn.cashAmount)||"",onChange:Pe=>{G(m.id)||Ze(m.id,"cashAmount",parseFloat(Pe.target.value)||0)},placeholder:"Ποσό σε €",className:`w-full p-2 border rounded-lg ${G(m.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500"}`,disabled:G(m.id)}),v.jsx("button",{onClick:()=>{G(m.id)},className:`mt-2 w-full px-3 py-1 text-sm rounded-lg ${G(m.id)?"bg-yellow-200 text-yellow-700 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,disabled:G(m.id),children:"✓ Επιλογή"})]})]}),v.jsxs("div",{className:`p-3 rounded-lg border ${G(m.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[v.jsx("button",{onClick:()=>{var Pe;if(G(m.id)){ae("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}Ze(m.id,"pos",!((Pe=p[m.id])!=null&&Pe.pos))},className:`w-full p-3 rounded-lg text-left transition-colors ${(hn=p[m.id])!=null&&hn.pos||(vn=He(m.id))!=null&&vn.pos?"bg-blue-100 text-blue-800 border-2 border-blue-300":G(m.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:"font-medium",children:[G(m.id)&&"🔒 ","💳 POS"]}),(((xn=p[m.id])==null?void 0:xn.pos)||((pn=He(m.id))==null?void 0:pn.pos))&&v.jsx("span",{className:"text-blue-600",children:"✓"})]})}),(((gn=p[m.id])==null?void 0:gn.pos)||((yn=He(m.id))==null?void 0:yn.pos))&&v.jsxs("div",{className:"mt-2",children:[v.jsx("input",{type:"number",value:G(m.id)?((mn=He(m.id))==null?void 0:mn.posAmount)||"":((wn=p[m.id])==null?void 0:wn.posAmount)||"",onChange:Pe=>{G(m.id)||Ze(m.id,"posAmount",parseFloat(Pe.target.value)||0)},placeholder:"Ποσό σε €",className:`w-full p-2 border rounded-lg ${G(m.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,disabled:G(m.id)}),v.jsx("button",{onClick:()=>{G(m.id)},className:`mt-2 w-full px-3 py-1 text-sm rounded-lg ${G(m.id)?"bg-yellow-200 text-yellow-700 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:G(m.id),children:"✓ Επιλογή"})]})]})]}),v.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[v.jsx("button",{onClick:()=>tt(m.id,"approved"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${I[m.id]==="approved"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:"✅ Έγκριση"}),v.jsx("button",{onClick:()=>tt(m.id,"rejected"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${I[m.id]==="rejected"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:"❌ Απόρριψη"}),v.jsx("button",{onClick:()=>tt(m.id,"pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${I[m.id]==="pending"?"bg-yellow-600 text-white":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"}`,children:"⏳ Αναμονή"}),v.jsxs("button",{onClick:()=>mt(m.id),disabled:w||I[m.id]==="none",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[w?v.jsx(yr,{className:"h-4 w-4 animate-spin mr-2"}):v.jsx($r,{className:"h-4 w-4 mr-2"}),"Αποθήκευση Program Options"]})]})]})]},m.id)})})]}):_==="ultimate-installments"?v.jsx(Ua,{ultimateRequests:W,ultimateLoading:Re,ultimateSearchTerm:Ct,setUltimateSearchTerm:Et,selectedRequestOptions:p,handleRequestOptionChange:Ze,updateInstallmentAmounts:Mt,deleteUltimateRequest:Bt,loadUltimateRequests:ut,handleApproveRequest:Z,handleRejectRequest:et,loading:w,requestProgramApprovalStatus:I,handleRequestProgramApprovalChange:tt,handleSaveRequestProgramOptions:mt,requestPendingUsers:R,requestFrozenOptions:B}):_==="personal-training"?v.jsx(Va,{userRole:"secretary"}):null}),u&&c&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:`mx-auto flex items-center justify-center h-16 w-16 rounded-full mb-4 ${c.success?"bg-green-100":"bg-red-100"}`,children:c.success?v.jsx(An,{className:"h-8 w-8 text-green-600"}):v.jsx(lr,{className:"h-8 w-8 text-red-600"})}),v.jsx("h3",{className:`text-lg font-semibold mb-2 ${c.success?"text-green-900":"text-red-900"}`,children:c.message}),c.userData&&v.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[v.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[v.jsx(sr,{className:"h-4 w-4 text-gray-600"}),v.jsx("span",{className:"font-medium",children:c.userData.name})]}),v.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[v.jsx(Wt,{className:"h-4 w-4 text-gray-600"}),v.jsx("span",{className:"text-sm text-gray-600",children:c.userData.email})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(Mr,{className:"h-4 w-4 text-gray-600"}),v.jsx("span",{className:"text-sm text-gray-600",children:Ge(c.userData.category)})]})]}),c.reason&&v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:c.reason}),v.jsx("button",{onClick:ur,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Κλείσιμο"})]})})})]})};export{G0 as default};
