const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/membershipApi-CZzjnGWn.js","assets/index-D1F5Dm1t.js","assets/index-C5u_S0_l.css"])))=>i.map(i=>d[i]);
var jl=Object.defineProperty;var vl=(o,g,j)=>g in o?jl(o,g,{enumerable:!0,configurable:!0,writable:!0,value:j}):o[g]=j;var Ks=(o,g,j)=>vl(o,typeof g!="symbol"?g+"":g,j);import{d as Hs,r as d,z as b,j as e,t as Oe,v as ot,e as wl,m as Nl,s as R,X as as,U as Ce,w as _r,b as ke,T as Cs,o as Bs,C as mt,M as _l,R as Pr,x as As,h as Pl,u as kl,y as kr,_ as Sl}from"./index-D1F5Dm1t.js";import{g as Al,a as Sr,b as Cl,c as nt,d as Ar,f as Ss,r as $l,v as Dl,e as Ul,s as Tl,h as Ml,i as Cr,j as Il}from"./groupAssignmentApi-BOwc-9Vh.js";import{s as El,g as Ll,a as Rl,b as Gl}from"./pilatesScheduleApi-BT126d48.js";import{R as xt}from"./refresh-cw-Dn7fOdWs.js";import{S as $e}from"./search-Bn7g1gX9.js";import{P as $s}from"./plus-CnjVsdDO.js";import{G as Ol,s as $r}from"./programApprovalApi-BCmRNKrH.js";import{getDurationLabel as gt,formatPrice as Fe,getMembershipPackages as Fl,getPilatesPackageDurations as zl,getMembershipRequests as Dr,updatePilatesPackagePricing as Kl,updateMembershipPackageDuration as Wl,approveUltimateMembershipRequest as Vl,approveMembershipRequest as Bl,rejectMembershipRequest as Ur,getMembershipPackageDurations as Hl}from"./membershipApi-CZzjnGWn.js";import{A as Ws}from"./award-BXkgH5gM.js";import"./groupTrainingCalendarApi-CPHiZ7y6.js";import"./chevron-right-DwW40yBp.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=Hs("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=Hs("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=Hs("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=Hs("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ql=()=>{const[o,g]=d.useState([]),[j,_]=d.useState(!1),[m,A]=d.useState(!1),[M,I]=d.useState({}),[he,ae]=d.useState({}),[K,oe]=d.useState(()=>{const r=new Date("2025-09-13T00:00:00.000Z");return console.log("Admin: Using fixed week - 13 Sep:",r.toISOString()),r}),[te,Q]=d.useState(null),[k,Z]=d.useState(!1),y=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00"];d.useEffect(()=>{console.log("Admin: useEffect triggered - currentWeek changed to:",K.toISOString()),N();const r=El(()=>{N()});return()=>{try{r.unsubscribe()}catch{}}},[K]);const N=async()=>{try{_(!0);const r=await Ll();g(r);const i={},S=C();console.log("Loading slots for week:",S),console.log("Existing slots from DB:",r.length),S.forEach(v=>{y.forEach(ne=>{const ie=`${v}-${ne}`,ue=r.find(De=>De.date===v&&De.start_time===`${ne}:00`);i[ie]=ue?ue.is_active:!0,Object.keys(i).length<=5&&console.log(`Grid key: ${ie}, existingSlot: ${!!ue}, is_active: ${ue==null?void 0:ue.is_active}, final: ${i[ie]}`)})}),console.log("All existing slots for this week:"),r.forEach(v=>{console.log(`  - ${v.date} ${v.start_time} (active: ${v.is_active})`)}),console.log("Initialized grid with slots:",Object.keys(i).length),console.log("Grid state sample:",Object.entries(i).slice(0,5));const P=Object.values(i).filter(Boolean).length,V=Object.values(i).filter(v=>!v).length;console.log(`Grid summary: ${P} active, ${V} inactive`),I(i);const F=S[0],B=S[S.length-1],q=await Rl(F,B),x={};q.forEach(v=>{const ne=`${v.date}-${v.start_time.slice(0,5)}`;x[ne]={booked:v.booked_count||0,cap:v.max_capacity}}),ae(x)}catch(r){console.error("Error loading slots:",r),b.error("Σφάλμα φόρτωσης προγράμματος pilates")}finally{_(!1)}},C=()=>{const r=[],i=new Date(K);console.log("Admin: getWeekDates - currentWeek:",i);for(let S=0;S<14;S++){const P=new Date(i);P.setDate(i.getDate()+S),r.push(P.toISOString().split("T")[0]),console.log(`Admin: Day ${S}: ${P.toISOString().split("T")[0]}`)}return r},U=r=>{const i=new Date(r);return["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"][i.getDay()]},le=(r,i)=>{const S=`${r}-${i}`;I(P=>({...P,[S]:!P[S]}))},T=async()=>{try{A(!0);const r=[],i=C();i.forEach(B=>{y.forEach(q=>{const x=`${B}-${q}`;r.push({date:B,time:q,is_active:M[x]||!1})})}),console.log("=== SAVE SCHEDULE START ==="),console.log("Saving schedule with all slots:",r.length),console.log("Week dates:",i),console.log("Current grid state sample:",Object.entries(M).slice(0,10));const{data:S,error:P}=await R.from("pilates_schedule_slots").select("*").in("date",i);if(P)throw console.error("Error fetching existing slots:",P),P;if(console.log("Found existing slots:",(S==null?void 0:S.length)||0),S&&S.length>0&&console.log("Sample existing slots:",S.slice(0,3)),S&&S.length>0){const{error:B}=await R.from("pilates_schedule_slots").delete().in("date",i);if(B)throw console.error("Error deleting existing slots:",B),B;console.log("✅ Deleted existing slots for week")}else console.log("ℹ️ No existing slots to delete");const V=r.map(B=>({date:B.date,start_time:B.time,end_time:u(B.time),max_capacity:4,is_active:B.is_active}));console.log("Creating all slots:",V.slice(0,3)),console.log("Active slots count:",V.filter(B=>B.is_active).length),console.log("Inactive slots count:",V.filter(B=>!B.is_active).length);const{error:F}=await R.from("pilates_schedule_slots").insert(V);if(F)throw console.error("Error creating new slots:",F),F;console.log("✅ Created all slots:",V.length),console.log("=== SAVE SCHEDULE COMPLETE ==="),b.success("Πρόγραμμα αποθηκεύθηκε επιτυχώς!"),await N()}catch(r){console.error("Error saving schedule:",r),b.error("Σφάλμα αποθήκευσης προγράμματος")}finally{A(!1)}},u=r=>{const[i,S]=r.split(":").map(Number),P=new Date;return P.setHours(i+1,S),P.toTimeString().slice(0,5)},J=r=>{const i=new Date(K);r==="prev"?i.setDate(i.getDate()-14):i.setDate(i.getDate()+14),oe(i)},l=r=>new Date(r).toLocaleDateString("el-GR",{day:"numeric",month:"short"}),E=async(r,i,S)=>{try{Z(!0);const P=await Gl(r);Q({slotId:r,date:i,time:S,bookings:P})}catch(P){console.error("Error loading slot info:",P),b.error("Σφάλμα φόρτωσης πληροφοριών slot")}finally{Z(!1)}};if(j)return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});const W=C();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Πρόγραμμα Pilates"}),e.jsx("p",{className:"text-gray-600",children:"Κάντε κλικ στις ώρες που δεν θέλετε να είναι διαθέσιμες"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{const r=new Date,i=r.getDay(),S=new Date(r),P=i===0?-6:1-i;S.setDate(r.getDate()+P),S.setHours(0,0,0,0),oe(S),console.log("Admin: Force refreshed currentWeek to:",S.toISOString())},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"🔄 Refresh"}),e.jsx("button",{onClick:()=>J("prev"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"← Προηγούμενη"}),e.jsx("button",{onClick:()=>J("next"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Επόμενη →"}),e.jsxs("button",{onClick:T,disabled:m,className:"flex items-center space-x-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[e.jsx(Oe,{className:"h-5 w-5"}),e.jsx("span",{children:m?"Αποθήκευση...":"Αποθήκευση"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:["2 εβδομάδες: ",l(W[0])," - ",l(W[13])]}),e.jsx("p",{className:"text-sm text-blue-700",children:"Κάντε κλικ στις κόκκινες ώρες για να τις απενεργοποιήσετε (δεν θα εμφανίζονται στους χρήστες)"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 border-r border-gray-200 min-w-[100px]",children:"Ώρα"}),W.map((r,i)=>e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-500 border-r border-gray-200 min-w-[120px]",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-bold",children:U(r)}),e.jsx("span",{className:"text-xs text-gray-400",children:l(r)})]})},r))]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:y.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 border-r border-gray-200 bg-gray-50",children:r}),W.map((i,S)=>{const P=`${i}-${r}`,V=M[P],F=new Date(i).getDay(),B=F===0||F===6,q=he[P],x=(q==null?void 0:q.booked)??0,v=(q==null?void 0:q.cap)??4;return e.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-200",children:B?e.jsx("div",{className:"w-full h-8 bg-gray-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-400",children:"Σαβ/Κυρ"})}):e.jsxs("div",{className:"relative w-full h-8",children:[e.jsx("button",{onClick:()=>le(i,r),className:`w-full h-8 rounded transition-all duration-200 flex items-center justify-center ${V?x>=v?"bg-red-100 text-red-800 border-2 border-red-300":"bg-green-100 text-green-800 hover:bg-green-200 border-2 border-green-300":"bg-red-100 text-red-800 hover:bg-red-200 border-2 border-red-300"}`,children:V?e.jsxs("span",{className:"text-xs font-semibold",children:[x,"/",v]}):e.jsx(ot,{className:"h-5 w-5"})}),V&&x>0&&x<v&&e.jsx("button",{onClick:ne=>{ne.stopPropagation();const ie=o.find(ue=>ue.date===i&&ue.start_time===`${r}:00`);ie&&E(ie.id,i,r)},className:"absolute top-0 right-0 w-4 h-4 bg-blue-500 hover:bg-blue-600 rounded-full flex items-center justify-center text-white text-xs transition-colors",title:"Πληροφορίες κρατήσεων",children:e.jsx(Jl,{size:10})})]})},P)})]},r))})]})})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Εξήγηση"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 border-2 border-green-300 rounded flex items-center justify-center",children:e.jsx(wl,{className:"h-5 w-5 text-green-800"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Διαθέσιμο"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Οι χρήστες μπορούν να κλείσουν μαθήματα"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 border-2 border-red-300 rounded flex items-center justify-center",children:e.jsx(ot,{className:"h-5 w-5 text-red-800"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Απενεργοποιημένο"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Δεν εμφανίζεται στους χρήστες"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-400",children:"Σαβ/Κυρ"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Σαββατοκύριακο"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Δεν υπάρχουν μαθήματα"})]})]})]})]}),te&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Κρατήσεις για ",l(te.date)," στις ",te.time]}),e.jsx("button",{onClick:()=>Q(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ot,{size:20})})]}),k?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Φόρτωση..."})]}):e.jsx("div",{className:"space-y-3",children:te.bookings.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[te.bookings.length," κρατήσεις:"]}),te.bookings.map((r,i)=>{var S,P,V;return e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[(S=r.user)==null?void 0:S.first_name," ",(P=r.user)==null?void 0:P.last_name]}),e.jsx("p",{className:"text-sm text-gray-600",children:(V=r.user)==null?void 0:V.email})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Κράτηση: ",new Date(r.booking_date).toLocaleDateString("el-GR")]})]},r.id||i)})]}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Δεν υπάρχουν κρατήσεις για αυτό το slot"})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Nl,{className:"h-5 w-5 text-blue-400 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Σημαντικές Πληροφορίες"}),e.jsxs("ul",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[e.jsx("li",{children:"• Κάθε ώρα έχει χωρητικότητα 4 χρήστες (4 κρεβάτια pilates)"}),e.jsx("li",{children:"• Κάντε κλικ στις ώρες που δεν θέλετε να δουλεύετε"}),e.jsx("li",{children:"• Το πρόγραμμα εμφανίζεται στους χρήστες με ενεργή pilates συνδρομή"}),e.jsx("li",{children:"• Μην ξεχάσετε να αποθηκεύσετε τις αλλαγές!"}),e.jsx("li",{children:'• Κάντε κλικ στο μπλε κουμπί "i" για να δείτε τις κρατήσεις ενός slot'})]})]})]})})]})},Vs=async(o,g,j,_,m="",A)=>{try{console.log("[saveCashTransaction] Saving transaction:",{userId:o,amount:g,transactionType:j,programId:_,createdBy:m,notes:A});const{data:M,error:I}=await R.from("user_cash_transactions").insert({user_id:o,amount:g,transaction_type:j,program_id:_,created_by:m,notes:A}).select().single();return I?(console.error("[saveCashTransaction] Error saving transaction:",I),!1):(console.log("[saveCashTransaction] Transaction saved successfully:",M),!0)}catch(M){return console.error("[saveCashTransaction] Exception saving transaction:",M),!1}},Xl=async()=>{try{console.log("[getCashRegisterTotals] Fetching totals...");const{data:o,error:g}=await R.from("user_cash_transactions").select("amount, transaction_type");if(g)return console.error("[getCashRegisterTotals] Error fetching totals:",g),{total_cash:0,total_pos:0,total_transactions:0};const j=(o==null?void 0:o.reduce((_,m)=>(m.transaction_type==="cash"?_.total_cash+=m.amount:m.transaction_type==="pos"&&(_.total_pos+=m.amount),_.total_transactions+=1,_),{total_cash:0,total_pos:0,total_transactions:0}))||{total_cash:0,total_pos:0,total_transactions:0};return console.log("[getCashRegisterTotals] Totals calculated:",j),j}catch(o){return console.error("[getCashRegisterTotals] Exception fetching totals:",o),{total_cash:0,total_pos:0,total_transactions:0}}},Yl=async()=>{try{console.log("[getCashSummaryPerUser] Fetching user summaries...");const{data:o,error:g}=await R.from("user_cash_transactions").select(`
        user_id,
        amount,
        transaction_type,
        created_at,
        user_profiles!user_cash_transactions_user_id_fkey(
          first_name,
          last_name,
          email
        )
      `).order("created_at",{ascending:!1});if(g)return console.error("[getCashSummaryPerUser] Error fetching user summaries:",g),[];if(console.log("[getCashSummaryPerUser] Raw data received:",(o==null?void 0:o.length)||0,"records"),!o||o.length===0)return console.log("[getCashSummaryPerUser] No data found, returning empty array"),[];const j=new Map;o.forEach(m=>{const A=m.user_id,M=m.user_profiles;j.has(A)||j.set(A,{user_id:A,user_name:M?`${M.first_name||""} ${M.last_name||""}`.trim():`User ${A.slice(0,8)}`,user_email:(M==null?void 0:M.email)||"No email",cash_total:0,pos_total:0,cash_count:0,pos_count:0});const I=j.get(A);m.transaction_type==="cash"?(I.cash_total+=m.amount,I.cash_count+=1,(!I.last_cash_date||new Date(m.created_at)>new Date(I.last_cash_date))&&(I.last_cash_date=m.created_at)):m.transaction_type==="pos"&&(I.pos_total+=m.amount,I.pos_count+=1,(!I.last_pos_date||new Date(m.created_at)>new Date(I.last_pos_date))&&(I.last_pos_date=m.created_at))});const _=Array.from(j.values()).sort((m,A)=>A.cash_total+A.pos_total-(m.cash_total+m.pos_total));return console.log("[getCashSummaryPerUser] Processed summaries:",_),_}catch(o){return console.error("[getCashSummaryPerUser] Exception fetching user summaries:",o),[]}},Zl=()=>{const[o,g]=d.useState({total_cash:0,total_pos:0,total_transactions:0}),[j,_]=d.useState([]),[m,A]=d.useState(!1),[M,I]=d.useState(""),[he,ae]=d.useState([]),K=async()=>{try{A(!0);const[k,Z]=await Promise.all([Xl(),Yl()]);g(k),_(Z)}catch(k){console.error("Error loading cash register data:",k),b.error("Σφάλμα κατά τη φόρτωση των δεδομένων ταμείου")}finally{A(!1)}};d.useEffect(()=>{K()},[]);const oe=k=>{if(!k.trim()){ae([]);return}const Z=j.filter(y=>y.user_name.toLowerCase().includes(k.toLowerCase())||y.user_email.toLowerCase().includes(k.toLowerCase()));ae(Z)},te=k=>{I(k),oe(k)},Q=M?he:j;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 rounded-xl p-4 sm:p-6 text-white mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-2",children:"💰 Ταμείο"}),e.jsx("p",{className:"text-green-100 text-sm sm:text-base",children:"Συνολικά ποσά και ανάλυση χρηστών"})]}),e.jsxs("button",{onClick:K,disabled:m,className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg text-sm disabled:opacity-50",children:[e.jsx(xt,{className:`h-4 w-4 ${m?"animate-spin":""}`}),e.jsx("span",{children:"🔄 Ανανέωση"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-green-800 mb-2",children:"💵 Συνολικά Μετρητά"}),e.jsx("p",{className:"text-green-600",children:"Όλοι οι χρήστες συνολικά"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-4xl font-bold text-green-900",children:["€",o.total_cash.toFixed(2)]}),e.jsx("div",{className:"text-sm text-green-600",children:"ευρώ"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-2",children:"💳 Συνολικά POS"}),e.jsx("p",{className:"text-blue-600",children:"Όλοι οι χρήστες συνολικά"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-4xl font-bold text-blue-900",children:["€",o.total_pos.toFixed(2)]}),e.jsx("div",{className:"text-sm text-blue-600",children:"ευρώ"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-2",children:"📊 Συνολικές Συναλλαγές"}),e.jsx("p",{className:"text-purple-600",children:"Όλες οι συναλλαγές"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-4xl font-bold text-purple-900",children:o.total_transactions}),e.jsx("div",{className:"text-sm text-purple-600",children:"συναλλαγές"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"👥 Ανάλυση Χρηστών"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Μετρητά και POS ανά χρήστη"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx($e,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Αναζήτηση χρήστη...",value:M,onChange:k=>te(k.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"})]}),M&&e.jsx("button",{onClick:()=>te(""),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(as,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"p-6",children:m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(xt,{className:"h-8 w-8 mx-auto mb-4 text-gray-400 animate-spin"}),e.jsx("p",{className:"text-gray-500",children:"Φόρτωση δεδομένων..."})]}):Q.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ut,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Δεν υπάρχουν συναλλαγές ακόμα"}),e.jsx("p",{className:"text-sm mt-2",children:"Οι συναλλαγές θα εμφανιστούν εδώ όταν δημιουργηθούν"})]}):e.jsxs("div",{className:"space-y-4",children:[Q.map((k,Z)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:k.user_name.split(" ").map(y=>y[0]).join("").slice(0,2)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:k.user_name}),e.jsx("p",{className:"text-sm text-gray-600",children:k.user_email}),e.jsxs("div",{className:"flex space-x-4 text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:["💵 ",k.cash_count," μετρητά"]}),e.jsxs("span",{children:["💳 ",k.pos_count," POS"]})]})]})]}),e.jsx("div",{className:"text-right space-y-2",children:e.jsxs("div",{className:"flex space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["€",k.cash_total.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Μετρητά"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:["€",k.pos_total.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500",children:"POS"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:["€",(k.cash_total+k.pos_total).toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Σύνολο"})]})]})})]})},k.user_id)),M&&he.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx($e,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Δεν βρέθηκαν χρήστες με αυτό το όνομα"}),e.jsx("p",{className:"text-sm mt-2",children:"Δοκιμάστε ένα διαφορετικό όρο αναζήτησης"})]})]})})]})]})},ql=({selectedUser:o,programId:g,weeklyFrequency:j,onAssignmentComplete:_})=>{const[m,A]=d.useState([]),[M,I]=d.useState([]),[he,ae]=d.useState(null),[K,oe]=d.useState(null),[te,Q]=d.useState([]),[k,Z]=d.useState(!1),[y,N]=d.useState(""),[C,U]=d.useState([]);d.useEffect(()=>{le()},[o.id,g]);const le=async()=>{Z(!0);try{await Promise.all([T(),u(),J()])}catch(x){console.error("Failed to load group assignment data:",x),b.error("Σφάλμα κατά τη φόρτωση των δεδομένων")}finally{Z(!1)}},T=async()=>{try{const x=await Al(he||void 0);A(x)}catch(x){throw console.error("Failed to load available slots:",x),x}},u=async()=>{try{const x=await Sr(o.id,g);I(x)}catch(x){throw console.error("Failed to load user assignments:",x),x}},J=async()=>{try{const x=await Cl(o.id,g);U(x)}catch(x){throw console.error("Failed to load weekly assignment summary:",x),x}},l=async x=>{try{const v=await Ml(x);Q(v)}catch(v){console.error("Failed to load slot assignments:",v),b.error("Σφάλμα κατά τη φόρτωση των αναθέσεων")}},E=async x=>{oe(x),await l(x.groupIdentifier)},W=async()=>{if(!K){b.error("Παρακαλώ επιλέξτε μια ομαδική θέση");return}try{Z(!0);const x=await Dl(o.id,g,K.groupIdentifier,K.dayOfWeek,K.startTime,K.endTime,j);if(!x.isValid){b.error(`Δεν είναι δυνατή η ανάθεση: ${x.errorMessage}`);return}const v=await Ul(g,o.id,K.groupIdentifier,j,y);if(v.success){b.success("Η ανάθεση δημιουργήθηκε επιτυχώς!"),N(""),await le(),await l(K.groupIdentifier);const ne=await Sr(o.id,g);ne.length>=j&&await Tl(o.id,g,ne)&&b.success(`🎉 Το πρόγραμμα ολοκληρώθηκε! Ο χρήστης ${o.firstName} ${o.lastName} θα λάβει ενημέρωση.`),_&&_()}else b.error(`Σφάλμα: ${v.message}`)}catch(x){console.error("Failed to assign user:",x),b.error("Σφάλμα κατά τη δημιουργία της ανάθεσης")}finally{Z(!1)}},r=async x=>{if(confirm("Είστε σίγουροι ότι θέλετε να αφαιρέσετε αυτή την ανάθεση;"))try{Z(!0),await $l(x)?(b.success("Η ανάθεση αφαιρέθηκε επιτυχώς"),await le(),K&&await l(K.groupIdentifier)):b.error("Σφάλμα κατά την αφαίρεση της ανάθεσης")}catch(v){console.error("Failed to remove assignment:",v),b.error("Σφάλμα κατά την αφαίρεση της ανάθεσης")}finally{Z(!1)}},i=()=>M.length,S=()=>Math.max(0,j-i()),P=()=>i()>=j,V=()=>{const x=i(),v=j;return x===0?`Δεν έχουν γίνει αναθέσεις ακόμα. Απαιτούνται ${v} αναθέσεις.`:x<v?`Έχουν γίνει ${x} από ${v} απαιτούμενες αναθέσεις. Απομένουν ${v-x}.`:"✅ Ολοκληρώθηκαν όλες οι αναθέσεις! Ο χρήστης θα λάβει ενημέρωση για το πρόγραμμά του."},F=()=>[{value:null,label:"Όλες οι ημέρες"},{value:1,label:"Δευτέρα"},{value:2,label:"Τρίτη"},{value:3,label:"Τετάρτη"},{value:4,label:"Πέμπτη"},{value:5,label:"Παρασκευή"},{value:6,label:"Σάββατο"}],B=x=>x.isFull?"bg-red-100 border-red-300 text-red-700":x.availableSpots<=1?"bg-yellow-100 border-yellow-300 text-yellow-700":"bg-green-100 border-green-300 text-green-700",q=x=>M.some(v=>v.groupIdentifier===x.groupIdentifier);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ce,{className:"h-6 w-6 text-blue-600"}),e.jsxs("h3",{className:"text-xl font-bold text-blue-800",children:["Ανάθεση Ομαδικών Θέσεων - ",o.firstName," ",o.lastName]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:P()?e.jsxs("div",{className:"flex items-center space-x-2 bg-green-100 px-3 py-1 rounded-full",children:[e.jsx(_r,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Ολοκληρώθηκε"})]}):e.jsxs("div",{className:"flex items-center space-x-2 bg-orange-100 px-3 py-1 rounded-full",children:[e.jsx(bt,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-700",children:"Σε εξέλιξη"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Στόχος Εβδομάδας"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:j})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Τρέχουσες Αναθέσεις"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i()})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Υπολείπονται"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:S()})]})]}),e.jsx("div",{className:`mt-4 p-4 rounded-lg ${P()?"bg-green-50 border border-green-200":"bg-blue-50 border border-blue-200"}`,children:e.jsx("p",{className:`text-sm font-medium ${P()?"text-green-700":"text-blue-700"}`,children:V()})})]}),M.length>0&&e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(ke,{className:"h-5 w-5 mr-2 text-blue-600"}),"Τρέχουσες Αναθέσεις"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:M.map(x=>e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-blue-800",children:[nt(x.dayOfWeek)," - ",Ar(x.groupType)]}),e.jsxs("div",{className:"text-sm text-blue-600",children:[Ss(x.startTime)," - ",Ss(x.endTime)]}),e.jsxs("div",{className:"text-sm text-blue-600",children:["Προπονητής: ",x.trainer]})]}),e.jsx("button",{onClick:()=>r(x.id),className:"text-red-600 hover:text-red-800 p-1",title:"Αφαίρεση ανάθεσης",children:e.jsx(Cs,{className:"h-4 w-4"})})]}),x.notes&&e.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Σημειώσεις: ",x.notes]})]},x.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsx(Bs,{className:"h-5 w-5 mr-2 text-green-600"}),"Διαθέσιμες Ομαδικές Θέσεις"]}),e.jsx("select",{value:he||"",onChange:x=>{const v=x.target.value?parseInt(x.target.value):null;ae(v),T()},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:F().map(x=>e.jsx("option",{value:x.value||"",children:x.label},x.value||"all"))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(x=>{const v=q(x),ne=!v&&!x.isFull&&!P();return e.jsxs("div",{className:`rounded-lg p-4 border-2 cursor-pointer transition-all ${(K==null?void 0:K.id)===x.id?"border-blue-500 bg-blue-50":`border-gray-200 hover:border-gray-300 ${B(x)}`} ${ne?"":"opacity-60"}`,onClick:()=>ne&&E(x),children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:nt(x.dayOfWeek)}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center mt-1",children:[e.jsx(mt,{className:"h-4 w-4 mr-1"}),Ss(x.startTime)," - ",Ss(x.endTime)]}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center mt-1",children:[e.jsx(_l,{className:"h-4 w-4 mr-1"}),x.trainer," - ",x.room]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-800",children:Ar(x.groupType)}),e.jsxs("div",{className:"text-xs text-gray-600",children:[x.currentAssignments,"/",x.maxCapacity]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x.isFull?"bg-red-100 text-red-800":x.availableSpots<=1?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:x.isFull?"Πλήρες":`${x.availableSpots} διαθέσιμες`})}),v&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Ανατεθειμένο"})]})]},x.id)})})]}),K&&!P()&&e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx($s,{className:"h-5 w-5 mr-2 text-green-600"}),"Ανάθεση στη θέση: ",nt(K.dayOfWeek)," - ",Ss(K.startTime)]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Σημειώσεις (προαιρετικό)"}),e.jsx("textarea",{value:y,onChange:x=>N(x.target.value),placeholder:"Προσθέστε σημειώσεις για αυτή την ανάθεση...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),te.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Τρέχοντα μέλη αυτής της ομάδας:"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:te.map(x=>{var v,ne;return e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["• ",(v=x.userInfo)==null?void 0:v.first_name," ",(ne=x.userInfo)==null?void 0:ne.last_name]},x.id)})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:W,disabled:k,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:[e.jsx($s,{className:"h-4 w-4 mr-2"}),k?"Δημιουργία...":"Δημιουργία Ανάθεσης"]}),e.jsx("button",{onClick:()=>oe(null),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Ακύρωση"})]})]})]}),P()&&e.jsx("div",{className:"bg-green-50 rounded-xl p-6 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(_r,{className:"h-8 w-8 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-green-800",children:"Οι αναθέσεις ολοκληρώθηκαν!"}),e.jsxs("p",{className:"text-green-600",children:["Ο χρήστης έχει ανατεθεί σε ",i()," ομαδικές θέσεις αυτή την εβδομάδα."]})]})]})})]})},ea=({selectedGroupRoom:o,weeklyFrequency:g,monthlyTotal:j,selectedUserIds:_,onSlotsChange:m})=>{const[A,M]=d.useState({}),I=g*4,he=d.useRef("");d.useEffect(()=>{const y=`${JSON.stringify(_)}-${g}-${o}`;if(he.current===y){console.log("[GroupAssignmentInterface] Configuration unchanged, skipping initialization");return}console.log("[GroupAssignmentInterface] Initializing sessions...",{selectedUserIds:_,weeklyFrequency:g,selectedGroupRoom:o,monthlySessions:I});const N={};_.forEach(C=>{N[C]=Array.from({length:I},(U,le)=>({id:`session-${C}-${le}`,date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",trainer:"Mike",room:"Αίθουσα Mike",groupType:parseInt(o),notes:""}))}),M(N),he.current=y,m&&setTimeout(()=>{console.log("[GroupAssignmentInterface] Notifying parent after initialization..."),m(N)},100)},[_,g,o,I,m]);const ae=async(y,N,C,U)=>{var u;console.log("[GroupAssignmentInterface] Updating session:",{userId:y,sessionId:N,field:C,value:U});const le=(u=A[y])==null?void 0:u.find(J=>J.id===N);if(!le){console.error("[GroupAssignmentInterface] Current session not found:",{userId:y,sessionId:N});return}const T={...le,[C]:U};if(C==="date"||C==="startTime"||C==="endTime"||C==="room"||C==="groupType")try{const J=await Cr(T.date,T.startTime,T.endTime,T.room,T.groupType,y);if(!J.isAvailable){b.error(`❌ Η αίθουσα ${T.room} είναι γεμάτη για ${T.date} ${T.startTime}-${T.endTime}. Χωρητικότητα: ${J.currentOccupancy+1}/${J.maxCapacity}. Παρακαλώ επιλέξτε διαφορετική ώρα, ημερομηνία ή αίθουσα.`);return}}catch(J){console.error("Error checking room capacity:",J),console.warn("[GroupAssignmentInterface] Capacity check failed, but allowing change to proceed")}M(J=>{const l={...J,[y]:J[y].map(E=>E.id===N?T:E)};return console.log("[GroupAssignmentInterface] Session updated successfully:",{userId:y,sessionId:N,field:C,value:U}),m&&setTimeout(()=>{console.log("[GroupAssignmentInterface] Notifying parent of session update..."),m(l)},50),l})},K=async y=>{if((A[y]||[]).length>=I){b.error(`Ο χρήστης μπορεί να έχει μέγιστο ${I} σεσίες τον μήνα (${g} φορές/εβδομάδα × 4 εβδομάδες)`);return}const C={id:`session-${y}-${Date.now()}`,date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",trainer:"Mike",room:"Αίθουσα Mike",groupType:parseInt(o),notes:""};try{const U=await Cr(C.date,C.startTime,C.endTime,C.room,C.groupType);if(!U.isAvailable){b.error(`❌ Η αίθουσα ${C.room} είναι γεμάτη για ${C.date} ${C.startTime}-${C.endTime}. Χωρητικότητα: ${U.currentOccupancy}/${U.maxCapacity}. Παρακαλώ επιλέξτε διαφορετική ώρα ή ημερομηνία.`);return}}catch(U){console.error("Error checking room capacity for new session:",U)}M(U=>{const le={...U,[y]:[...U[y]||[],C]};return m&&setTimeout(()=>{console.log("[GroupAssignmentInterface] Notifying parent of session addition..."),m(le)},50),le})},oe=(y,N)=>{M(C=>{const U={...C,[y]:C[y].filter(le=>le.id!==N)};return m&&setTimeout(()=>{console.log("[GroupAssignmentInterface] Notifying parent of session removal..."),m(U)},50),U})},te=y=>{var N;return((N=A[y])==null?void 0:N.length)||0},Q=y=>te(y)===I,k=["Mike","Jordan"],Z=["Αίθουσα Mike","Αίθουσα Jordan"];return e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-blue-800 flex items-center",children:[e.jsx(Bs,{className:"h-5 w-5 mr-2"}),"Διαχείριση Ομαδικών Αναθέσεων"]}),e.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["Προσθέστε σεσίες για κάθε χρήστη (",I," σεσίες/μήνα = ",g," φορές/εβδομάδα × 4 εβδομάδες)",e.jsx("br",{}),e.jsx("span",{className:"text-purple-600 font-medium",children:"💡 Μπορείτε να επιλέξετε διαφορετικό Group Size για κάθε σεσία (2, 3, ή 6 άτομα)"})]})]})}),e.jsx("div",{className:"space-y-6",children:_.map(y=>{const N=A[y]||[],C=Q(y);return e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-blue-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${C?"bg-green-100":"bg-orange-100"}`,children:e.jsx(Bs,{className:`h-4 w-4 ${C?"text-green-600":"text-orange-600"}`})}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-gray-800",children:["Χρήστης ",y.slice(-8)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[N.length,"/",I," σεσίες προγραμματισμένες"]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-7 gap-0 text-sm font-semibold text-gray-700",children:[e.jsx("div",{className:"p-3 border-r border-gray-200",children:"📅 Ημερομηνία"}),e.jsx("div",{className:"p-3 border-r border-gray-200",children:"🕐 Έναρξη"}),e.jsx("div",{className:"p-3 border-r border-gray-200",children:"🕕 Λήξη"}),e.jsx("div",{className:"p-3 border-r border-gray-200",children:"👤 Προπονητής"}),e.jsx("div",{className:"p-3 border-r border-gray-200",children:"🏠 Αίθουσα"}),e.jsx("div",{className:"p-3 border-r border-gray-200",children:"👥 Group Size"}),e.jsx("div",{className:"p-3",children:"🗑️"})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:N.map((U,le)=>e.jsxs("div",{className:"grid grid-cols-7 gap-0 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"p-2 border-r border-gray-200",children:e.jsx("input",{type:"date",value:U.date,onChange:T=>ae(y,U.id,"date",T.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:ring-1 focus:ring-blue-500"})}),e.jsx("div",{className:"p-2 border-r border-gray-200",children:e.jsx("input",{type:"time",value:U.startTime,onChange:T=>ae(y,U.id,"startTime",T.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:ring-1 focus:ring-blue-500"})}),e.jsx("div",{className:"p-2 border-r border-gray-200",children:e.jsx("input",{type:"time",value:U.endTime,onChange:T=>ae(y,U.id,"endTime",T.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:ring-1 focus:ring-blue-500"})}),e.jsx("div",{className:"p-2 border-r border-gray-200",children:e.jsx("select",{value:U.trainer,onChange:T=>ae(y,U.id,"trainer",T.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:ring-1 focus:ring-blue-500",children:k.map(T=>e.jsx("option",{value:T,children:T},T))})}),e.jsx("div",{className:"p-2 border-r border-gray-200",children:e.jsx("select",{value:U.room,onChange:T=>ae(y,U.id,"room",T.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:ring-1 focus:ring-blue-500",children:Z.map(T=>e.jsx("option",{value:T,children:T},T))})}),e.jsx("div",{className:"p-2 border-r border-gray-200",children:e.jsxs("select",{value:U.groupType,onChange:T=>ae(y,U.id,"groupType",parseInt(T.target.value)),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:2,children:"2 άτομα"}),e.jsx("option",{value:3,children:"3 άτομα"}),e.jsx("option",{value:6,children:"6 άτομα"})]})}),e.jsx("div",{className:"p-2 flex items-center justify-center",children:e.jsx("button",{onClick:()=>oe(y,U.id),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"Διαγραφή σεσίας",children:e.jsx(Cs,{className:"h-4 w-4"})})})]},U.id))}),N.length<I&&e.jsx("div",{className:"border-t border-gray-200 bg-blue-50",children:e.jsx("div",{className:"p-3 text-center",children:e.jsxs("button",{onClick:()=>K(y),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors mx-auto text-sm",children:[e.jsx($s,{className:"h-4 w-4"}),e.jsx("span",{children:"Προσθήκη Σεσίας"})]})})})]})]},y)})}),e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-green-800",children:"Περίληψη Προγραμματισμού"}),e.jsxs("p",{className:"text-sm text-green-600",children:[_.filter(y=>Q(y)).length,"/",_.length," χρήστες έχουν ",I," σεσίες/μήνα"]})]}),e.jsx("div",{className:"text-2xl",children:_.every(y=>Q(y))?"✅":"⏳"})]}),!_.every(y=>Q(y))&&e.jsxs("div",{className:"mt-2 text-sm text-orange-600",children:["⚠️ Προσθέστε ",I," σεσίες για κάθε χρήστη (",g," φορές/εβδομάδα × 4 εβδομάδες)"]})]})]})},sa=({ultimateRequests:o,ultimateLoading:g,ultimateSearchTerm:j,setUltimateSearchTerm:_,selectedRequestOptions:m,handleRequestOptionChange:A,updateInstallmentAmounts:M,deleteUltimateRequest:I,loadUltimateRequests:he,handleApproveRequest:ae,handleRejectRequest:K,loading:oe,requestProgramApprovalStatus:te,handleRequestProgramApprovalChange:Q,handleSaveRequestProgramOptions:k,requestPendingUsers:Z,requestFrozenOptions:y})=>{const[N,C]=Pr.useState(1),U=50,le=100,T=()=>{const r=o.filter(i=>{var P,V,F;return j===""||`${((P=i.user)==null?void 0:P.first_name)||""} ${((V=i.user)==null?void 0:V.last_name)||""}`.toLowerCase().includes(j.toLowerCase())||(((F=i.user)==null?void 0:F.email)||"").toLowerCase().includes(j.toLowerCase())});if(r.length>le){const i=(N-1)*U,S=i+U;return r.slice(i,S)}return r},u=()=>o.filter(r=>{var S,P,V;return j===""||`${((S=r.user)==null?void 0:S.first_name)||""} ${((P=r.user)==null?void 0:P.last_name)||""}`.toLowerCase().includes(j.toLowerCase())||(((V=r.user)==null?void 0:V.email)||"").toLowerCase().includes(j.toLowerCase())}).length,J=()=>{const r=u();return Math.ceil(r/U)},l=()=>u()>le,E=r=>Z.has(r),W=r=>y[r]||{};return Pr.useEffect(()=>{C(1)},[j]),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center",children:[e.jsx("span",{className:"text-4xl mr-3",children:"👑"}),"Ultimate Συνδρομές"]}),e.jsx("p",{className:"text-gray-300 mt-2 text-lg",children:"Διαχείριση αιτημάτων για πακέτα Ultimate με και χωρίς δόσεις"})]}),e.jsxs("button",{onClick:he,disabled:g,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 disabled:opacity-50 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:scale-105 font-medium",children:[g?e.jsx(As,{className:"h-5 w-5 animate-spin"}):e.jsx($e,{className:"h-5 w-5"}),e.jsx("span",{children:"Ανανέωση"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-700 to-gray-800 rounded-2xl shadow-lg border border-gray-600 p-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx($e,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-blue-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"🔍 Αναζήτηση με όνομα χρήστη ή email...",value:j,onChange:r=>_(r.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-white placeholder-gray-400 text-lg font-medium"})]})}),j&&e.jsx("button",{onClick:()=>_(""),className:"px-4 py-4 text-gray-400 hover:text-white transition-colors bg-gray-600 rounded-xl hover:bg-gray-500",children:e.jsx(as,{className:"h-5 w-5"})})]})}),l()&&!g&&e.jsx("div",{className:"bg-gradient-to-r from-gray-700 to-gray-800 rounded-2xl shadow-lg border border-gray-600 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-white font-medium",children:["Σελίδα ",N," από ",J()," • Σύνολο: ",u()," αιτήματα"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>C(1),disabled:N===1,className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Πρώτη"}),e.jsx("button",{onClick:()=>C(r=>Math.max(r-1,1)),disabled:N===1,className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Προηγούμενη"}),e.jsxs("span",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium",children:[N," / ",J()]}),e.jsx("button",{onClick:()=>C(r=>Math.min(r+1,J())),disabled:N===J(),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Επόμενη"}),e.jsx("button",{onClick:()=>C(J()),disabled:N===J(),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Τελευταία"})]})]})}),g?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx(As,{className:"h-12 w-12 animate-spin text-blue-400 mx-auto mb-4"}),e.jsx("span",{className:"text-gray-300 font-medium text-lg",children:"Φόρτωση Ultimate αιτημάτων..."})]})}):T().length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-full p-6 w-24 h-24 mx-auto mb-6 shadow-2xl",children:e.jsx(Pl,{className:"h-12 w-12 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:j?"🔍 Δεν βρέθηκαν αποτελέσματα":"👑 Δεν υπάρχουν Ultimate αιτήματα"}),e.jsx("p",{className:"text-gray-300 text-lg",children:j?"Δοκιμάστε διαφορετικό όνομα για την αναζήτηση.":"Όταν οι χρήστες υποβάλουν αιτήματα για το πακέτο Ultimate, θα εμφανίζονται εδώ."})]}):e.jsx("div",{className:"grid gap-8",children:T().map(r=>{var i,S,P,V,F,B,q,x,v,ne,ie,ue,De,os,ze,Ke,ns,We,Ue,is,Te,ds,Ve,Be,He,Je,cs,ms,xs,gs,Me,je,Ie,we,Ds,Us,Ts,Ne,Ms,us,bs,_e,Ee,Pe;return e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl shadow-2xl border border-gray-600 p-8 hover:shadow-3xl transition-all duration-300 transform hover:scale-102",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-6 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsxs("div",{className:"relative",children:[(i=r.user)!=null&&i.profile_photo?e.jsxs("div",{className:"w-16 h-16 rounded-2xl overflow-hidden shadow-2xl border-3 border-blue-400",children:[e.jsx("img",{src:r.user.profile_photo,alt:`${(S=r.user)==null?void 0:S.first_name} ${(P=r.user)==null?void 0:P.last_name}`,className:"w-full h-full object-cover",onError:L=>{L.currentTarget.style.display="none";const Qe=L.currentTarget.nextElementSibling;Qe&&(Qe.style.display="flex")}}),e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center hidden",children:e.jsx(Ce,{className:"h-8 w-8 text-white"})})]}):e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-2xl",children:e.jsx(Ce,{className:"h-8 w-8 text-white"})}),r.status==="pending"&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-yellow-400 to-yellow-500 rounded-full border-2 border-white shadow-lg animate-pulse"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"text-2xl font-bold text-white mb-2",children:[(V=r.user)==null?void 0:V.first_name," ",(F=r.user)==null?void 0:F.last_name]}),e.jsxs("p",{className:"text-gray-300 mb-3 flex items-center text-lg",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mr-3"}),(B=r.user)==null?void 0:B.email]}),e.jsxs("div",{className:"flex items-center space-x-3 flex-wrap",children:[e.jsx("span",{className:"inline-flex items-center px-4 py-2 rounded-xl text-sm font-bold bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg",children:"👑 Ultimate Package"}),e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsx("span",{className:"text-gray-200 font-medium",children:gt(r.duration_type)}),r.has_installments&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-xl text-sm font-medium bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-lg",children:"💳 Με Δόσεις"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-green-400 to-green-500 bg-clip-text text-transparent mb-2",children:Fe(r.requested_price)}),e.jsxs("div",{className:"text-gray-300 flex items-center justify-end",children:[e.jsx(ke,{className:"h-4 w-4 mr-2 text-blue-400"}),e.jsx("span",{className:"font-medium",children:new Date(r.created_at).toLocaleDateString("el-GR")})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[r.status==="pending"&&e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("button",{onClick:()=>ae(r.id),disabled:oe,className:"px-8 py-4 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-2xl hover:from-green-700 hover:to-green-800 transition-all duration-200 text-lg font-bold shadow-2xl hover:shadow-3xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-3 transform hover:scale-110",children:[e.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"✅ Εγκρίνω"})]}),e.jsxs("button",{onClick:()=>K(r.id),disabled:oe,className:"px-8 py-4 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-2xl hover:from-red-700 hover:to-red-800 transition-all duration-200 text-lg font-bold shadow-2xl hover:shadow-3xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-3 transform hover:scale-110",children:[e.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),e.jsx("span",{children:"❌ Απορρίπτω"})]})]}),r.status==="approved"&&e.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-green-500/20 to-green-600/20 rounded-xl p-3 border border-green-500/30",children:[e.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl text-sm font-bold shadow-lg",children:"✅ Εγκεκριμένο"})]}),r.status==="rejected"&&e.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-red-500/20 to-red-600/20 rounded-xl p-3 border border-red-500/30",children:[e.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full animate-pulse"}),e.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl text-sm font-bold shadow-lg",children:"❌ Απορριφθέν"})]}),e.jsxs("button",{onClick:()=>{window.confirm("Είστε σίγουροι ότι θέλετε να διαγράψετε αυτό το Ultimate αίτημα; Αυτή η ενέργεια δεν μπορεί να αναιρεθεί.")&&I(r.id)},className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all duration-200 text-sm font-medium flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(Cs,{className:"h-4 w-4"}),e.jsx("span",{children:"🗑️ Διαγραφή"})]})]})]})]}),r.has_installments&&e.jsxs("div",{className:"mt-8 bg-gradient-to-r from-blue-500/20 to-blue-600/20 rounded-2xl p-6 border border-blue-500/30 shadow-xl",children:[e.jsxs("h4",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"text-3xl mr-3",children:"💳"}),"Διαχείριση Δόσεων"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-5 border border-gray-600 shadow-lg",children:[e.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"1️⃣"}),"1η Δόση"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"number",value:((q=m[r.id])==null?void 0:q.installment1Amount)||r.installment_1_amount||"",onChange:L=>A(r.id,"installment1Amount",L.target.value),placeholder:"Ποσό",className:"w-full p-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-white placeholder-gray-400 text-lg font-medium"}),e.jsxs("select",{value:((x=m[r.id])==null?void 0:x.installment1PaymentMethod)||r.installment_1_payment_method||"cash",onChange:L=>A(r.id,"installment1PaymentMethod",L.target.value),className:"w-full p-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-white text-lg font-medium",children:[e.jsx("option",{value:"cash",children:"💰 Μετρητά"}),e.jsx("option",{value:"pos",children:"💳 POS"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"📅 Ημερομηνία Πληρωμής"]}),e.jsx("input",{type:"date",value:((v=m[r.id])==null?void 0:v.installment1DueDate)||r.installment_1_due_date||"",onChange:L=>A(r.id,"installment1DueDate",L.target.value),className:"w-full p-3 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-white"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-5 border border-gray-600 shadow-lg",children:[e.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"2️⃣"}),"2η Δόση"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"number",value:((ne=m[r.id])==null?void 0:ne.installment2Amount)||r.installment_2_amount||"",onChange:L=>A(r.id,"installment2Amount",L.target.value),placeholder:"Ποσό",className:"w-full p-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-white placeholder-gray-400 text-lg font-medium"}),e.jsxs("select",{value:((ie=m[r.id])==null?void 0:ie.installment2PaymentMethod)||r.installment_2_payment_method||"cash",onChange:L=>A(r.id,"installment2PaymentMethod",L.target.value),className:"w-full p-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-white text-lg font-medium",children:[e.jsx("option",{value:"cash",children:"💰 Μετρητά"}),e.jsx("option",{value:"pos",children:"💳 POS"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"📅 Ημερομηνία Πληρωμής"]}),e.jsx("input",{type:"date",value:((ue=m[r.id])==null?void 0:ue.installment2DueDate)||r.installment_2_due_date||"",onChange:L=>A(r.id,"installment2DueDate",L.target.value),className:"w-full p-3 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-white"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-5 border border-gray-600 shadow-lg",children:[e.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"3️⃣"}),"3η Δόση"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"number",value:((De=m[r.id])==null?void 0:De.installment3Amount)||r.installment_3_amount||"",onChange:L=>A(r.id,"installment3Amount",L.target.value),placeholder:"Ποσό",className:"w-full p-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-white placeholder-gray-400 text-lg font-medium"}),e.jsxs("select",{value:((os=m[r.id])==null?void 0:os.installment3PaymentMethod)||r.installment_3_payment_method||"cash",onChange:L=>A(r.id,"installment3PaymentMethod",L.target.value),className:"w-full p-4 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-white text-lg font-medium",children:[e.jsx("option",{value:"cash",children:"💰 Μετρητά"}),e.jsx("option",{value:"pos",children:"💳 POS"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"📅 Ημερομηνία Πληρωμής"]}),e.jsx("input",{type:"date",value:((ze=m[r.id])==null?void 0:ze.installment3DueDate)||r.installment_3_due_date||"",onChange:L=>A(r.id,"installment3DueDate",L.target.value),className:"w-full p-3 bg-gray-800 border border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-white"})]})]})]})]}),e.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-blue-500/30 to-blue-600/30 rounded-2xl border border-blue-500/50 shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-blue-300 text-lg",children:"💰 Σύνολο Δόσεων:"}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-green-500 bg-clip-text text-transparent",children:Fe(Number(((Ke=m[r.id])==null?void 0:Ke.installment1Amount)||r.installment_1_amount||0)+Number(((ns=m[r.id])==null?void 0:ns.installment2Amount)||r.installment_2_amount||0)+Number(((We=m[r.id])==null?void 0:We.installment3Amount)||r.installment_3_amount||0))})]}),e.jsxs("div",{className:"text-blue-200 mt-2 font-medium",children:["📊 Από ",Fe(r.requested_price)," (Πακέτο Ultimate)"]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{onClick:()=>{var Ze,fs,Is,Es,Xs,Ys,Zs,qs,qe;const L=parseFloat(((Ze=m[r.id])==null?void 0:Ze.installment1Amount)||r.installment_1_amount||"0"),Qe=parseFloat(((fs=m[r.id])==null?void 0:fs.installment2Amount)||r.installment_2_amount||"0"),hs=parseFloat(((Is=m[r.id])==null?void 0:Is.installment3Amount)||r.installment_3_amount||"0"),Js=((Es=m[r.id])==null?void 0:Es.installment1PaymentMethod)||r.installment_1_payment_method||"cash",ps=((Xs=m[r.id])==null?void 0:Xs.installment2PaymentMethod)||r.installment_2_payment_method||"cash",xe=((Ys=m[r.id])==null?void 0:Ys.installment3PaymentMethod)||r.installment_3_payment_method||"cash",Xe=((Zs=m[r.id])==null?void 0:Zs.installment1DueDate)||r.installment_1_due_date,Ye=((qs=m[r.id])==null?void 0:qs.installment2DueDate)||r.installment_2_due_date,Qs=((qe=m[r.id])==null?void 0:qe.installment3DueDate)||r.installment_3_due_date;M(r.id,L,Qe,hs,Js,ps,xe,Xe,Ye,Qs)},className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-2xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 flex items-center space-x-3 shadow-2xl hover:shadow-3xl transform hover:scale-110 font-bold text-lg",children:[e.jsx(Oe,{className:"h-5 w-5"}),e.jsx("span",{children:"💾 Αποθήκευση Δόσεων & Ημερομηνιών"})]})})]}),e.jsxs("div",{className:"mt-8 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-2xl p-6 border border-purple-500/30 shadow-xl",children:[e.jsxs("h4",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"text-3xl mr-3",children:"⚙️"}),"Program Options"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx("button",{type:"button",onClick:()=>{var L;E(r.id)||A(r.id,"oldMembers",!((L=m[r.id])!=null&&L.oldMembers))},className:`w-full px-6 py-4 rounded-2xl font-bold transition-all duration-200 shadow-2xl transform hover:scale-105 text-lg ${E(r.id)?(Ue=W(r.id))!=null&&Ue.oldMembers?"bg-gradient-to-r from-green-600 to-green-700 text-white cursor-not-allowed border-2 border-yellow-400":"bg-gradient-to-r from-gray-600 to-gray-700 text-gray-300 cursor-not-allowed border-2 border-yellow-400":(is=m[r.id])!=null&&is.oldMembers?"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800 border-2 border-green-400":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 border-2 border-blue-400"}`,disabled:E(r.id),children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"👴 Παλαιά μέλη"}),(E(r.id)?(Te=W(r.id))==null?void 0:Te.oldMembers:(ds=m[r.id])==null?void 0:ds.oldMembers)&&e.jsx("span",{className:"text-green-200 text-xl",children:"✓"}),E(r.id)&&e.jsx("span",{className:"text-yellow-400",children:"🔒"})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-5 border border-gray-600 shadow-lg",children:[e.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"🏋️‍♂️"}),"Kettlebell Points",E(r.id)&&e.jsx("span",{className:"text-yellow-400 ml-2",children:"🔒"})]}),e.jsx("input",{type:"number",value:E(r.id)?((Ve=W(r.id))==null?void 0:Ve.kettlebellPoints)||"":((Be=m[r.id])==null?void 0:Be.kettlebellPoints)||"",onChange:L=>{E(r.id)||A(r.id,"kettlebellPoints",L.target.value)},className:`w-full px-4 py-4 border rounded-xl focus:outline-none focus:ring-2 text-lg font-medium ${E(r.id)?"border-yellow-500 bg-yellow-500/20 focus:ring-yellow-500 cursor-not-allowed text-yellow-200 placeholder-yellow-300":"border-gray-600 bg-gray-800 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-gray-400"}`,placeholder:"Εισάγετε αριθμό...",disabled:E(r.id)})]}),e.jsx("button",{type:"button",onClick:()=>{var L;E(r.id)||A(r.id,"cash",!((L=m[r.id])!=null&&L.cash))},className:`w-full px-6 py-4 rounded-2xl font-bold transition-all duration-200 shadow-2xl transform hover:scale-105 text-lg ${E(r.id)?(He=W(r.id))!=null&&He.cash?"bg-gradient-to-r from-green-600 to-green-700 text-white cursor-not-allowed border-2 border-yellow-400":"bg-gradient-to-r from-gray-600 to-gray-700 text-gray-300 cursor-not-allowed border-2 border-yellow-400":(Je=m[r.id])!=null&&Je.cash?"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800 border-2 border-green-400":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 border-2 border-blue-400"}`,disabled:E(r.id),children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"💰 Μετρητά"}),(E(r.id)?(cs=W(r.id))==null?void 0:cs.cash:(ms=m[r.id])==null?void 0:ms.cash)&&e.jsx("span",{className:"text-green-200 text-xl",children:"✓"}),E(r.id)&&e.jsx("span",{className:"text-yellow-400",children:"🔒"})]})}),e.jsx("button",{type:"button",onClick:()=>{var L;E(r.id)||A(r.id,"pos",!((L=m[r.id])!=null&&L.pos))},className:`w-full px-6 py-4 rounded-2xl font-bold transition-all duration-200 shadow-2xl transform hover:scale-105 text-lg ${E(r.id)?(xs=W(r.id))!=null&&xs.pos?"bg-gradient-to-r from-green-600 to-green-700 text-white cursor-not-allowed border-2 border-yellow-400":"bg-gradient-to-r from-gray-600 to-gray-700 text-gray-300 cursor-not-allowed border-2 border-yellow-400":(gs=m[r.id])!=null&&gs.pos?"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800 border-2 border-green-400":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 border-2 border-blue-400"}`,disabled:E(r.id),children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"💳 POS"}),(E(r.id)?(Me=W(r.id))==null?void 0:Me.pos:(je=m[r.id])==null?void 0:je.pos)&&e.jsx("span",{className:"text-green-200 text-xl",children:"✓"}),E(r.id)&&e.jsx("span",{className:"text-yellow-400",children:"🔒"})]})})]}),(((Ie=m[r.id])==null?void 0:Ie.cash)||((we=W(r.id))==null?void 0:we.cash))&&e.jsxs("div",{className:"mb-6 bg-gradient-to-r from-green-500/20 to-green-600/20 rounded-2xl p-5 border border-green-500/30",children:[e.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"💰"}),"Ποσό Μετρητών (€)",E(r.id)&&e.jsx("span",{className:"text-yellow-400 ml-2",children:"🔒"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:E(r.id)?((Us=(Ds=W(r.id))==null?void 0:Ds.cashAmount)==null?void 0:Us.toString())||"":((Ne=(Ts=m[r.id])==null?void 0:Ts.cashAmount)==null?void 0:Ne.toString())||"",onChange:L=>{E(r.id)||A(r.id,"cashAmount",parseFloat(L.target.value)||0)},className:`w-full px-4 py-4 border rounded-xl focus:outline-none focus:ring-2 text-lg font-medium ${E(r.id)?"border-yellow-500 bg-yellow-500/20 focus:ring-yellow-500 cursor-not-allowed text-yellow-200 placeholder-yellow-300":"border-gray-600 bg-gray-800 focus:ring-green-500 focus:border-green-500 text-white placeholder-gray-400"}`,placeholder:"Εισάγετε ποσό σε €...",disabled:E(r.id)})]}),(((Ms=m[r.id])==null?void 0:Ms.pos)||((us=W(r.id))==null?void 0:us.pos))&&e.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-500/20 to-blue-600/20 rounded-2xl p-5 border border-blue-500/30",children:[e.jsxs("label",{className:"block text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"💳"}),"Ποσό POS (€)",E(r.id)&&e.jsx("span",{className:"text-yellow-400 ml-2",children:"🔒"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:E(r.id)?((_e=(bs=W(r.id))==null?void 0:bs.posAmount)==null?void 0:_e.toString())||"":((Pe=(Ee=m[r.id])==null?void 0:Ee.posAmount)==null?void 0:Pe.toString())||"",onChange:L=>{E(r.id)||A(r.id,"posAmount",parseFloat(L.target.value)||0)},className:`w-full px-4 py-4 border rounded-xl focus:outline-none focus:ring-2 text-lg font-medium ${E(r.id)?"border-yellow-500 bg-yellow-500/20 focus:ring-yellow-500 cursor-not-allowed text-yellow-200 placeholder-yellow-300":"border-gray-600 bg-gray-800 focus:ring-blue-500 focus:border-blue-500 text-white placeholder-gray-400"}`,placeholder:"Εισάγετε ποσό σε €...",disabled:E(r.id)})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-4",children:[e.jsx("button",{onClick:()=>Q(r.id,"approved"),className:`px-6 py-3 rounded-2xl text-lg font-bold transition-all duration-200 shadow-xl transform hover:scale-105 ${te[r.id]==="approved"?"bg-gradient-to-r from-green-600 to-green-700 text-white border-2 border-green-400":"bg-gradient-to-r from-green-500/20 to-green-600/20 text-green-300 border-2 border-green-500/30 hover:from-green-500/30 hover:to-green-600/30"}`,children:"✅ Έγκριση"}),e.jsx("button",{onClick:()=>Q(r.id,"rejected"),className:`px-6 py-3 rounded-2xl text-lg font-bold transition-all duration-200 shadow-xl transform hover:scale-105 ${te[r.id]==="rejected"?"bg-gradient-to-r from-red-600 to-red-700 text-white border-2 border-red-400":"bg-gradient-to-r from-red-500/20 to-red-600/20 text-red-300 border-2 border-red-500/30 hover:from-red-500/30 hover:to-red-600/30"}`,children:"❌ Απόρριψη"}),e.jsx("button",{onClick:()=>Q(r.id,"pending"),className:`px-6 py-3 rounded-2xl text-lg font-bold transition-all duration-200 shadow-xl transform hover:scale-105 ${te[r.id]==="pending"?"bg-gradient-to-r from-yellow-600 to-yellow-700 text-white border-2 border-yellow-400":"bg-gradient-to-r from-yellow-500/20 to-yellow-600/20 text-yellow-300 border-2 border-yellow-500/30 hover:from-yellow-500/30 hover:to-yellow-600/30"}`,children:"⏳ Αναμονή"}),e.jsxs("button",{onClick:()=>k(r.id),disabled:oe||te[r.id]==="none",className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-2xl hover:from-purple-700 hover:to-purple-800 transition-all duration-200 text-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center shadow-2xl hover:shadow-3xl transform hover:scale-105",children:[oe?e.jsx(As,{className:"h-5 w-5 animate-spin mr-2"}):e.jsx(Oe,{className:"h-5 w-5 mr-2"}),"💾 Αποθήκευση Program Options"]})]})]})]},r.id)})})]})};class ta extends d.Component{constructor(){super(...arguments);Ks(this,"state",{hasError:!1});Ks(this,"handleRefresh",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.reload()});Ks(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})})}static getDerivedStateFromError(j){return{hasError:!0,error:j}}componentDidCatch(j,_){console.error("ErrorBoundary caught an error:",j,_),this.setState({error:j,errorInfo:_}),console.error("Production error:",{error:j,errorInfo:_})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(bt,{className:"h-8 w-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Κάτι πήγε στραβά"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Παρουσιάστηκε ένα απροσδόκητο σφάλμα στην εφαρμογή. Παρακαλώ δοκιμάστε να ανανεώσετε τη σελίδα."}),!1,e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:this.handleReset,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium",children:"Δοκιμή Ξανά"}),e.jsxs("button",{onClick:this.handleRefresh,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center space-x-2",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsx("span",{children:"Ανανέωση Σελίδας"})]})]})]})}):this.props.children}}const dt=async(o,g)=>{try{const{error:j}=await R.from("user_old_members_usage").insert({user_id:o,created_by:g});return j?(console.error("Error marking old members as used:",j),!1):!0}catch(j){return console.error("Exception marking old members as used:",j),!1}},ct=async(o,g,j,_)=>{try{if(g<=0)return!0;const{error:m}=await R.from("user_kettlebell_points").insert({user_id:o,points:g,program_id:j,created_by:_});return m?(console.error("Error saving kettlebell points:",m),!1):!0}catch(m){return console.error("Exception saving kettlebell points:",m),!1}},ra=async()=>{try{console.log("[getTotalKettlebellPoints] Starting to fetch total points...");const{data:o,error:g}=await R.from("user_kettlebell_points").select("points");if(g)return console.error("[getTotalKettlebellPoints] Error getting total kettlebell points:",g),0;const j=(o==null?void 0:o.reduce((_,m)=>_+m.points,0))||0;return console.log("[getTotalKettlebellPoints] Total points calculated:",j,"from",(o==null?void 0:o.length)||0,"records"),j}catch(o){return console.error("[getTotalKettlebellPoints] Exception getting total kettlebell points:",o),0}},la=async()=>{try{console.log("[getKettlebellPointsSummary] Starting to fetch kettlebell points...");const{data:o,error:g}=await R.from("user_kettlebell_points").select(`
        user_id,
        points,
        created_at,
        user_profiles!user_kettlebell_points_user_id_fkey(
          first_name,
          last_name,
          email
        )
      `).order("created_at",{ascending:!1});if(g)return console.error("[getKettlebellPointsSummary] Error getting kettlebell points summary:",g),[];if(console.log("[getKettlebellPointsSummary] Raw data received:",(o==null?void 0:o.length)||0,"records"),console.log("[getKettlebellPointsSummary] Sample data:",o==null?void 0:o.slice(0,2)),!o||o.length===0)return console.log("[getKettlebellPointsSummary] No data found, returning empty array"),[];const j=new Map;o.forEach(m=>{const A=m.user_id,M=m.user_profiles;j.has(A)||j.set(A,{user_id:A,user_name:M?`${M.first_name||""} ${M.last_name||""}`.trim():`User ${A.slice(0,8)}`,user_email:(M==null?void 0:M.email)||"No email",total_points:0,points_count:0,last_updated:m.created_at});const I=j.get(A);I.total_points+=m.points,I.points_count+=1,new Date(m.created_at)>new Date(I.last_updated)&&(I.last_updated=m.created_at)});const _=Array.from(j.values()).sort((m,A)=>A.total_points-m.total_points);return console.log("[getKettlebellPointsSummary] Processed summary:",_),_}catch(o){return console.error("[getKettlebellPointsSummary] Exception getting kettlebell points summary:",o),[]}},aa=async o=>{try{const{data:g,error:j}=await R.from("user_kettlebell_points").select("*").eq("user_id",o).order("created_at",{ascending:!1});return j?(console.error("Error getting user kettlebell points:",j),[]):g||[]}catch(g){return console.error("Exception getting user kettlebell points:",g),[]}},Tr=["Mike","Jordan"],oa=100,ya=()=>{var At,Ct,$t,Dt,Ut,Tt,Mt,It,Et,Lt,Rt,Gt,Ot,Ft,zt,Kt;const{user:o}=kl(),[g,j]=d.useState("personal-training"),[_,m]=d.useState([]),[A,M]=d.useState([]),[I,he]=d.useState(1),[ae]=d.useState(10),[K,oe]=d.useState({"personal-training":!1,"membership-packages":!1,"ultimate-subscriptions":!1,"pilates-schedule":!1,"kettlebell-points":!1,"cash-register":!1}),te=d.useMemo(()=>{const s=(I-1)*ae,t=s+ae;return _.slice(s,t)},[_,I,ae]);Math.ceil(_.length/ae);const[Q]=d.useState(null),[k,Z]=d.useState(null),[y,N]=d.useState(!1),[C,U]=d.useState(!1),[le,T]=d.useState(!1),[u,J]=d.useState({code:"",selectedUserId:""}),[l,E]=d.useState("individual"),[W,r]=d.useState("personal"),[i,S]=d.useState([]),[P,V]=d.useState(null),[F,B]=d.useState(null),[q,x]=d.useState(0),[v,ne]=d.useState(1),[ie,ue]=d.useState(2),[De,os]=d.useState(!1),[ze,Ke]=d.useState(null),[ns,We]=d.useState(null),[Ue,is]=d.useState({}),[Te,ds]=d.useState(""),[Ve,Be]=d.useState("dropdown"),[He]=d.useState(""),[Je]=d.useState("all"),[cs]=d.useState(!0),[ms,xs]=d.useState(new Set),[gs,Me]=d.useState(""),[je,Ie]=d.useState({}),[we,Ds]=d.useState([]),[Us,Ts]=d.useState(0),[Ne,Ms]=d.useState(""),[us,bs]=d.useState([]),[_e,Ee]=d.useState(""),[Pe,L]=d.useState(""),[Qe,hs]=d.useState(!1),[Js,ps]=d.useState(!1),[xe,Xe]=d.useState("none"),[Ye,Qs]=d.useState([]),[Ze,fs]=d.useState(!1),[Is,Es]=d.useState(""),[Xs,Ys]=d.useState(!1),[Zs,qs]=d.useState(1),[qe,ht]=d.useState(new Set),[et,pt]=d.useState({}),w=s=>qe.has(s),fe=s=>et[s]||null,h=s=>Rs.has(s),ee=s=>Gs[s]||null;d.useEffect(()=>{x(F?F*4:0)},[F]),d.useEffect(()=>{l==="individual"&&(V(null),B(null),x(0)),l==="combination"&&r("personal")},[l]),d.useEffect(()=>{(l==="group"&&i.length>0||l==="combination"&&u.selectedUserId)&&(P||(console.log("[AdminPanel] Auto-setting default group room to 3 for",l),V("3")))},[l,i.length,u.selectedUserId]),d.useEffect(()=>{var s,t;if((l==="individual"||l==="combination")&&u.selectedUserId){const a=fe(u.selectedUserId);a&&(Me(a.kettlebellPoints||""),Ee(((s=a.cashAmount)==null?void 0:s.toString())||""),L(((t=a.posAmount)==null?void 0:t.toString())||""))}},[u.selectedUserId,l]);const[ye,pe]=d.useState([{id:"tmp-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:""}]),[Mr,Ir]=d.useState([]),[Er,st]=d.useState([]),[ve,Lr]=d.useState(null),[Se,Ls]=d.useState(null),[tt,ys]=d.useState(""),[rt,Rr]=d.useState([]),[Ae,es]=d.useState(1),[ss,Gr]=d.useState(""),js=6,[H,Or]=d.useState({}),[ts,ft]=d.useState({}),[Rs,yt]=d.useState(new Set),[Gs,jt]=d.useState({}),[Fr,vt]=d.useState([]),zr=[{id:"personal-training",name:"Personal Training Πρόγραμμα",icon:ke},{id:"membership-packages",name:"Πακέτα Συνδρομών",icon:it},{id:"ultimate-subscriptions",name:"👑 Ultimate Συνδρομές",icon:Ce},{id:"pilates-schedule",name:"Πρόγραμμα Pilates",icon:mt},{id:"kettlebell-points",name:"Kettlebell Points",icon:Ws},{id:"cash-register",name:"Ταμείο",icon:ut}],Kr=["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],Wr=s=>{const t=["user1@freegym.gr","user2@freegym.gr"],a=["PERSONAL2024","KICKBOX2024"],n=!!s.email&&t.includes(s.email),c=!!s.personalTrainingCode&&a.includes(s.personalTrainingCode);return n||c},wt=_.filter(s=>{if(!Te)return!0;const t=Te.toLowerCase();return s.firstName.toLowerCase().includes(t)||s.lastName.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)||`${s.firstName} ${s.lastName}`.toLowerCase().includes(t)});A.filter(s=>{const t=!He||(()=>{const n=He.toLowerCase();return s.user.firstName.toLowerCase().includes(n)||s.user.lastName.toLowerCase().includes(n)||s.user.email.toLowerCase().includes(n)||`${s.user.firstName} ${s.user.lastName}`.toLowerCase().includes(n)})(),a=Je==="all"||s.status===Je;return t&&a}),d.useEffect(()=>{he(1)},[He,Je]);const Nt=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00"],Vr=async()=>{try{console.log("[AdminPanel] Checking admin role in database...");const{data:s,error:t}=await R.from("user_profiles").select("user_id, role, first_name, last_name, email").eq("user_id",o==null?void 0:o.id).single();return t?(console.error("[AdminPanel] Error checking admin profile:",t),!1):(console.log("[AdminPanel] Admin profile in database:",s),console.log("[AdminPanel] Admin role in database:",s==null?void 0:s.role),(s==null?void 0:s.role)==="admin")}catch(s){return console.error("[AdminPanel] Exception checking admin role:",s),!1}},Br=async()=>{try{console.log("[AdminPanel] Testing if we can create data...");const s={user_id:o==null?void 0:o.id,month:1,year:2e3,schedule_data:{sessions:[]},status:"pending",created_by:o==null?void 0:o.id},{data:t,error:a}=await R.from("personal_training_schedules").insert(s).select();return a?(console.log("[AdminPanel] Cannot create data - RLS blocking:",a.message),!1):t&&t.length>0?(await R.from("personal_training_schedules").delete().eq("id",t[0].id),console.log("[AdminPanel] Can create data - RLS working correctly"),!0):!1}catch(s){return console.error("[AdminPanel] Exception testing data creation:",s),!1}},Hr=async(s,t)=>{if(!t){console.log("[AdminPanel] No admin ID available for test data creation");return}try{console.log("[AdminPanel] Creating test schedule for user:",s.email);const a={user_id:s.id,month:new Date().getMonth()+1,year:new Date().getFullYear(),schedule_data:{sessions:[{id:"test-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",notes:"Test session created by admin"}],notes:"Test program created by admin",specialInstructions:"This is test data"},status:"pending",created_by:t},{data:n,error:c}=await R.from("personal_training_schedules").insert(a).select();c?console.error("[AdminPanel] Error creating test schedule:",c):(console.log("[AdminPanel] Test schedule created successfully:",n),setTimeout(()=>{lt()},1e3))}catch(a){console.error("[AdminPanel] Exception creating test schedule:",a)}},lt=d.useCallback(async()=>{console.log("[AdminPanel] ===== DATA LOADING STARTED ====="),console.log("[AdminPanel] Current user:",o==null?void 0:o.email,"Role:",o==null?void 0:o.role);try{N(!0),console.log("[AdminPanel] Querying user_profiles table...");const{data:s,error:t}=await R.from("user_profiles").select("*").order("created_at",{ascending:!1});if(console.log("[AdminPanel] User profiles query result - rows:",s==null?void 0:s.length,"error:",t),t)throw console.error("[AdminPanel] User profiles error:",t),t;console.log("[AdminPanel] Querying personal_training_schedules table..."),console.log("[AdminPanel] Current auth user ID:",o==null?void 0:o.id),console.log("[AdminPanel] Current auth user role:",o==null?void 0:o.role),console.log("[AdminPanel] Attempting to query personal_training_schedules...");let a=[],n=null;const{data:c,error:p}=await R.from("personal_training_schedules").select("id,user_id,month,year,schedule_data,status,created_by,created_at,updated_at,trainer_name,accepted_at,declined_at").order("created_at",{ascending:!1});if(p){console.log("[AdminPanel] Direct query failed:",p);const{data:f,error:Y}=await R.from("personal_training_schedules").select("id, user_id, status").limit(10);if(Y){console.log("[AdminPanel] Limited query also failed:",Y);const{count:be,error:re}=await R.from("personal_training_schedules").select("*",{count:"exact",head:!0});console.log("[AdminPanel] Count query result:",be,"error:",re)}else console.log("[AdminPanel] Limited query succeeded:",f),a=f||[]}else console.log("[AdminPanel] Direct query succeeded:",c),a=c||[];if(n=p,console.log("[AdminPanel] Schedules query result - rows:",a==null?void 0:a.length,"error:",n),(a==null?void 0:a.length)===0&&!n){console.log("[AdminPanel] Query succeeded but returned 0 rows - checking RLS policies...");const f=await Vr();console.log("[AdminPanel] Is admin in database:",f);const{count:Y,error:be}=await R.from("personal_training_schedules").select("*",{count:"exact",head:!0});console.log("[AdminPanel] Total rows in table (bypassing RLS):",Y,"error:",be),Y&&Y>0&&(console.warn("[AdminPanel] RLS is blocking access to existing data! Table has",Y,"rows but query returns 0."),console.warn("[AdminPanel] Admin role might not be properly configured in RLS policies."),console.warn("[AdminPanel] Please run the SQL script: database/fix_admin_rls_policies.sql"))}if(n){console.error("[AdminPanel] Schedules query failed with error:",n),console.log("[AdminPanel] Error code:",n.code),console.log("[AdminPanel] Error message:",n.message),console.log("[AdminPanel] Error details:",n.details),console.log("[AdminPanel] Error hint:",n.hint),console.log("[AdminPanel] Attempting to check table existence...");const{data:f,error:Y}=await R.from("personal_training_schedules").select("count").limit(1);console.log("[AdminPanel] Table check result:",f,"error:",Y)}if(n&&(console.error("[AdminPanel] Schedules error:",n),console.log("[AdminPanel] RLS might be blocking access. Checking if we can insert test data..."),console.log("[AdminPanel] Continuing with empty schedules due to RLS restrictions")),!s||s.length===0){console.log("[AdminPanel] No users found in database - setting empty states"),m([]),M([]);return}console.log("[AdminPanel] Transforming user profiles...");const D=s.map(f=>({id:f.user_id,email:f.email||`user-${f.user_id.slice(0,8)}@example.com`,firstName:f.first_name||"",lastName:f.last_name||"",profile_photo:f.profile_photo||"",profile_photo_locked:f.profile_photo_locked||!1,dob:f.dob||"",address:f.address||"",emergency_contact:f.emergency_contact||"",dob_locked:f.dob_locked||!1,hasPersonalTrainingCode:!1,personalTrainingCode:void 0,packageType:void 0}));console.log("[AdminPanel] Transformed users count:",D.length),m(D),oe(f=>({...f,"personal-training":!0})),console.log("[AdminPanel] Creating program statuses from schedules..."),console.log("[AdminPanel] Schedules data:",a);const de=(a||[]).map(f=>{console.log("[AdminPanel] Processing schedule:",f.id,"for user:",f.user_id);const Y=D.find(re=>re.id===f.user_id);if(!Y)return console.warn(`[AdminPanel] User not found for schedule ${f.id}, user_id: ${f.user_id}`),null;const be={user:Y,schedule:{id:f.id,userId:f.user_id,month:f.month,year:f.year,status:f.status,scheduleData:f.schedule_data,createdBy:f.created_by,createdAt:f.created_at,updatedAt:f.updated_at,acceptedAt:f.accepted_at,declinedAt:f.declined_at},status:f.status};return console.log("[AdminPanel] Created program status:",be),be}).filter(f=>f!==null);console.log("[AdminPanel] Final program statuses count:",de.length),de.length===0&&D.length>0&&(console.log("[AdminPanel] No schedules found. Creating test data to verify system..."),await Br()?await Hr(D[0],o==null?void 0:o.id):(console.warn("[AdminPanel] Cannot create test data due to RLS restrictions."),console.warn("[AdminPanel] Please fix RLS policies by running: database/fix_admin_rls_policies.sql"))),M(de),console.log("[AdminPanel] Checking personal training codes...");const{data:se,error:$}=await R.from("personal_training_codes").select("*").limit(5);console.log("[AdminPanel] Personal training codes check - rows:",se==null?void 0:se.length,"error:",$),await Jr(D),oe(f=>({...f,"personal-training":!0})),console.log("[AdminPanel] ===== DATA LOADING COMPLETED SUCCESSFULLY =====")}catch(s){console.error("[AdminPanel] ===== DATA LOADING FAILED ====="),console.error("[AdminPanel] Error details:",s);const t=s instanceof Error?s.message:"Unknown error";b.error(`Σφάλμα κατά τη φόρτωση των χρηστών: ${t}`),m([]),M([])}finally{N(!1)}},[o==null?void 0:o.email,o==null?void 0:o.role]),Jr=async s=>{try{const{data:t,error:a}=await R.from("personal_training_codes").select("user_id, code, package_type, sessions_remaining").eq("is_active",!0);if(a){console.error("Error fetching personal training codes:",a),m(s);return}const n=s.map(c=>{const p=t==null?void 0:t.find(D=>D.user_id===c.id);return p?{...c,hasPersonalTrainingCode:!0,personalTrainingCode:p.code,packageType:p.package_type}:c});m(n)}catch(t){console.error("Error checking personal training codes:",t)}},[Qr,rs]=d.useState({});d.useEffect(()=>{if(console.log("[AdminPanel] useEffect triggered - user:",o==null?void 0:o.email,"role:",o==null?void 0:o.role,"activeTab:",g),!o){console.log("[AdminPanel] No user logged in");return}if(o.role!=="admin"){console.warn("[AdminPanel] User is not admin! Role:",o.role,"Email:",o.email);return}if(Qr[g]){console.log(`[AdminPanel] ${g} is already loading, skipping...`);return}g==="personal-training"&&!K["personal-training"]?(console.log("[AdminPanel] Loading data for personal-training tab"),rs(s=>({...s,[g]:!0})),lt().finally(()=>rs(s=>({...s,[g]:!1})))):g==="membership-packages"&&!K["membership-packages"]?(console.log("[AdminPanel] Loading membership packages"),rs(s=>({...s,[g]:!0})),_t().finally(()=>rs(s=>({...s,[g]:!1})))):g==="kettlebell-points"&&!K["kettlebell-points"]?(console.log("[AdminPanel] Loading kettlebell points"),rs(s=>({...s,[g]:!0})),at().finally(()=>rs(s=>({...s,[g]:!1})))):console.log(`[AdminPanel] ${g} data already loaded, skipping reload`)},[o==null?void 0:o.id,g]);const Xr=()=>{if(!k)return;const s={id:Date.now().toString(),date:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"10:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",notes:""},t={...k,scheduleData:{...k.scheduleData,sessions:[...k.scheduleData.sessions,s]}};Z(t)},ls=(s,t,a)=>{if(!k)return;const n=k.scheduleData.sessions.map(p=>p.id===s?{...p,[t]:a}:p),c={...k,scheduleData:{...k.scheduleData,sessions:n}};Z(c)},Yr=s=>{if(!k)return;const t=k.scheduleData.sessions.filter(n=>n.id!==s),a={...k,scheduleData:{...k.scheduleData,sessions:t}};Z(a)},Zr=async()=>{if(!(!k||!Q))try{N(!0),b.success(`Το πρόγραμμα για τον ${Q.firstName} ${Q.lastName} αποθηκεύτηκε!`),U(!1)}catch{b.error("Σφάλμα κατά την αποθήκευση του προγράμματος")}finally{N(!1)}},qr=async()=>{if(xe==="none"||!o){b.error("Παρακαλώ επιλέξτε μια κατάσταση έγκρισης");return}try{N(!0);const s=l==="individual"||l==="combination"?[u.selectedUserId]:i;if(s.length===0){b.error("Δεν υπάρχουν επιλεγμένοι χρήστες");return}if(l==="group"){if(!P||!F){b.error("Παρακαλώ επιλέξτε Ομαδική Αίθουσα και συχνότητα εβδομάδας");return}if(i.length===0){b.error("Παρακαλώ επιλέξτε τουλάχιστον έναν χρήστη για το ομαδικό πρόγραμμα");return}}if(l==="combination"&&ie>0&&(!P||!F)){b.error("Για συνδυασμένο πρόγραμμα με ομαδικές σεσίες, παρακαλώ επιλέξτε Ομαδική Αίθουσα και συχνότητα εβδομάδας");return}for(const n of s){const c=w(n),p=c?fe(n):je[n];if(!p)continue;await $r(n,xe,{oldMembersUsed:p.oldMembers||!1,kettlebellPoints:p.kettlebellPoints?parseInt(p.kettlebellPoints):0,cashAmount:p.cashAmount||0,posAmount:p.posAmount||0,createdBy:o.id,groupRoomSize:l==="group"||l==="combination"?parseInt(P):null,weeklyFrequency:l==="group"||l==="combination"?F:null,monthlyTotal:l==="group"||l==="combination"?q:null,notes:`Program options saved with ${xe} status${c?" (from frozen state)":""}${l==="group"||l==="combination"?` - Ομαδική Αίθουσα: ${P} χρήστες, ${F} φορές/εβδομάδα`:""}`})?console.log(`Program approval state saved for user ${n}: ${xe}${c?" (from frozen state)":""}`):console.warn(`Failed to save program approval state for user ${n}`)}if(xe==="approved")await el(s);else if(xe==="rejected")console.log("Program options rejected - no actions executed"),b("Program Options απορρίφθηκαν - δεν εκτελέστηκαν ενέργειες",{icon:"ℹ️"});else if(xe==="pending"){console.log("Program options pending - saving locally and freezing UI");const n={...et},c=new Set(qe);for(const p of s){const D=je[p];D&&(n[p]={oldMembers:D.oldMembers,kettlebellPoints:D.kettlebellPoints,cash:D.cash,pos:D.pos,cashAmount:D.cashAmount,posAmount:D.posAmount,groupRoomSize:l==="group"||l==="combination"?parseInt(P):null,weeklyFrequency:l==="group"||l==="combination"?F:null,monthlyTotal:l==="group"||l==="combination"?q:null},c.add(p))}pt(n),ht(c),b("Program Options τοποθετήθηκαν στην αναμονή - οι επιλογές παγώθηκαν",{icon:"⏳"})}if(Xe("none"),xe==="approved"||xe==="rejected"){const n=new Set(qe),c={...et};for(const p of s)w(p)&&(n.delete(p),delete c[p]);ht(n),pt(c)}const t=s.some(n=>w(n)),a={approved:t?"εγκρίθηκε και εκτελέστηκαν οι ενέργειες (από frozen state)":"εγκρίθηκε και εκτελέστηκαν οι ενέργειες",rejected:t?"απορρίφθηκε (από frozen state)":"απορρίφθηκε",pending:"τοποθετήθηκε στην αναμονή"};b.success(`Program Options ${a[xe]} επιτυχώς!`)}catch(s){console.error("Error saving program options:",s),b.error("Σφάλμα κατά την αποθήκευση των Program Options")}finally{N(!1)}},el=async s=>{console.log("Executing approved program actions for users:",s);try{for(const t of s){const a=w(t),n=a?fe(t):je[t];n&&(n.oldMembers&&(await dt(t,(o==null?void 0:o.id)||"")?(console.log(`[APPROVED] Old Members marked as used for user: ${t}${a?" (from frozen state)":""}`),xs(p=>new Set([...p,t]))):console.warn(`[APPROVED] Failed to mark Old Members as used for user: ${t}${a?" (from frozen state)":""}`)),n.kettlebellPoints&&parseInt(n.kettlebellPoints)>0&&(await ct(t,parseInt(n.kettlebellPoints),void 0,(o==null?void 0:o.id)||"")?console.log(`[APPROVED] Kettlebell Points saved for user: ${t}, Points: ${n.kettlebellPoints}${a?" (from frozen state)":""}`):console.warn(`[APPROVED] Failed to save Kettlebell Points for user: ${t}${a?" (from frozen state)":""}`)),n.cashAmount&&n.cashAmount>0&&(await Vs(t,n.cashAmount,"cash",void 0,(o==null?void 0:o.id)||"","Cash transaction from approved program creation")?console.log(`[APPROVED] Cash transaction saved for user: ${t}, Amount: €${n.cashAmount}${a?" (from frozen state)":""}`):console.warn(`[APPROVED] Failed to save Cash transaction for user: ${t}${a?" (from frozen state)":""}`)),n.posAmount&&n.posAmount>0&&(await Vs(t,n.posAmount,"pos",void 0,(o==null?void 0:o.id)||"","POS transaction from approved program creation")?console.log(`[APPROVED] POS transaction saved for user: ${t}, Amount: €${n.posAmount}${a?" (from frozen state)":""}`):console.warn(`[APPROVED] Failed to save POS transaction for user: ${t}${a?" (from frozen state)":""}`)))}b.success("Έγιναν όλες οι απαραίτητες ενέργειες για τα εγκεκριμένα προγράμματα!")}catch(t){console.error("Error executing approved program actions:",t),b.error("Σφάλμα κατά την εκτέλεση των ενεργειών")}},sl=async()=>{var t,a,n;const s=l==="individual"||l==="combination"?[u.selectedUserId]:i;if(s.length===0){b.error("Παρακαλώ επιλέξτε χρήστη/ες");return}try{N(!0),console.log("[ADMIN] Starting to create personal training program..."),console.log("[ADMIN] User type:",W);for(const se of s){const $=_.find(G=>G.id===se);if(!$){b.error(`Δεν βρέθηκε ο χρήστης με ID: ${se}`);continue}console.log("[ADMIN] Selected user:",$.firstName,$.lastName,"ID:",$.id),console.log("[ADMIN] Admin user ID:",o==null?void 0:o.id);let f=[];if(l==="group")if(W==="paspartu"){const G=Ue[$.id]||[];G.length>0?f=G.map((z,X)=>({id:`group-session-${X+1}`,date:z.date,startTime:z.startTime,endTime:z.endTime,type:"personal",trainer:z.trainer||"Mike",room:z.room||"Αίθουσα Mike",notes:`Group Paspartu Session ${X+1} - ${z.notes||""}`})):(f=ye.map(z=>({id:z.id,date:z.date,startTime:z.startTime,endTime:z.endTime,type:z.type,trainer:z.trainer||"Mike",room:z.room,notes:z.notes+" (Group Paspartu)"})),console.log(`[ADMIN] Using ${f.length} program sessions for Group Paspartu user: ${$.email}`))}else f=[];else l==="combination"?f=ye.slice(0,v).map(G=>({id:G.id,date:G.date,startTime:G.startTime,endTime:G.endTime,type:G.type,trainer:G.trainer||"Mike",room:G.room,notes:G.notes+" (Personal - Συνδυασμός)"})):f=ye.map(G=>({id:G.id,date:G.date,startTime:G.startTime,endTime:G.endTime,type:G.type,trainer:G.trainer||"Mike",room:G.room,notes:G.notes}));const Y={user_id:$.id,trainer_name:l==="group"?"Mike":((t=f[0])==null?void 0:t.trainer)||"Mike",month:new Date().getMonth()+1,year:new Date().getFullYear(),schedule_data:{sessions:f,notes:l==="group"?"Group program - Οι σεσίες θα προστεθούν μέσω του Group Assignment Interface":l==="combination"?`Combination program - ${v} Personal + ${ie} Group sessions`:"",trainer:l==="group"?"Mike":((a=f[0])==null?void 0:a.trainer)||"Mike",specialInstructions:l==="group"?"Ομαδικό πρόγραμμα - Οι λεπτομέρειες των σεσίων διαχειρίζονται ξεχωριστά":l==="combination"?`Συνδυασμένο πρόγραμμα - Περιλαμβάνει ${v} ατομικές σεσίες και ${ie} ομαδικές σεσίες`:"",groupRoomSize:l==="group"||l==="combination"?parseInt(P):null,weeklyFrequency:l==="group"||l==="combination"?F:null,monthlyTotal:l==="group"||l==="combination"?q:null,combinationPersonalSessions:l==="combination"?v:null,combinationGroupSessions:l==="combination"?ie:null},status:"accepted",created_by:o==null?void 0:o.id,user_type:W,is_flexible:W==="paspartu",training_type:l,group_room_size:l==="group"||l==="combination"?parseInt(P):null,weekly_frequency:l==="group"||l==="combination"?F:null,monthly_total:l==="group"||l==="combination"?q:null};console.log("[ADMIN] Schedule payload:",Y),console.log("[ADMIN] Inserting schedule into personal_training_schedules...");const{data:be,error:re}=await R.from("personal_training_schedules").insert(Y).select().single();if(re)throw console.error("[ADMIN] Schedule insertion error:",re),re;if(console.log("[ADMIN] Schedule inserted successfully for user:",$.email),l==="combination"&&f.length>0){console.log("[ADMIN] Creating group_sessions for combination individual sessions...",f);const G=f.map(me=>({session_date:me.date,start_time:me.startTime,end_time:me.endTime,trainer:me.trainer,room:me.room,group_type:null,notes:me.notes+" (Individual - Combination Program)"}));console.log("[ADMIN] Individual group sessions to insert:",G);const{data:z,error:X}=await R.from("group_sessions").insert(G.map(me=>({program_id:be.id,user_id:$.id,session_date:me.session_date,start_time:me.start_time,end_time:me.end_time,trainer:me.trainer,room:me.room,group_type:me.group_type,notes:me.notes,is_active:!0,created_by:(o==null?void 0:o.id)||""})));X?(console.error("[ADMIN] Error creating group_sessions for combination individual sessions:",X),console.error("[ADMIN] Error details:",{message:X.message,details:X.details,hint:X.hint,code:X.code}),b.error("Σφάλμα κατά τη δημιουργία των ατομικών σεσίων του συνδυασμού")):(console.log("[ADMIN] Created group_sessions for combination individual sessions:",z),console.log("[ADMIN] Number of individual sessions created:",(z==null?void 0:z.length)||0))}else console.log("[ADMIN] Skipping individual sessions creation:",{trainingType:l,scheduleSessionsLength:f.length,willCreate:l==="combination"&&f.length>0});const ce=je[$.id];if(ce&&(ce.oldMembers&&(await dt($.id,(o==null?void 0:o.id)||"")?console.log("[ADMIN] Old Members marked as used for user:",$.email):console.warn("[ADMIN] Failed to mark Old Members as used for user:",$.email)),ce.kettlebellPoints&&parseInt(ce.kettlebellPoints)>0&&(await ct($.id,parseInt(ce.kettlebellPoints),be.id,(o==null?void 0:o.id)||"")?console.log("[ADMIN] Kettlebell Points saved for user:",$.email,"Points:",ce.kettlebellPoints):console.warn("[ADMIN] Failed to save Kettlebell Points for user:",$.email))),W==="paspartu"){console.log("[ADMIN] Handling Paspartu user - replacing old schedule and managing deposits...");const{error:G}=await R.rpc("replace_paspartu_schedule",{p_user_id:$.id,p_new_schedule_id:be.id});G?(console.error("[ADMIN] Error replacing old Paspartu schedule:",G),console.warn("[ADMIN] Failed to replace old schedule, but new schedule was created successfully")):console.log("[ADMIN] Old Paspartu schedule replaced successfully for user:",$.email);let z=5,X=0;l==="combination"?(X=v+ie,console.log(`[ADMIN] Combination Paspartu: ${v} personal + ${ie} group = ${X} used deposits`)):l==="individual"?(X=0,console.log("[ADMIN] Individual Paspartu: Credit 5 lessons, no deduction (original behavior)")):l==="group"&&(X=0,console.log("[ADMIN] Group Paspartu: Credit 5 lessons, no deduction (same as Individual)")),X>z&&(console.warn(`[ADMIN] Warning: Used deposits (${X}) exceeds total deposits (${z}). Setting to max.`),X=z);const{error:me}=await R.rpc("reset_lesson_deposit_for_new_program",{p_user_id:$.id,p_total_lessons:z,p_created_by:o==null?void 0:o.id});if(me)console.error("[ADMIN] Lesson deposit reset error:",me),console.warn("[ADMIN] Failed to reset lesson deposit, but schedule was created successfully");else if(console.log(`[ADMIN] Lesson deposit reset successfully for Paspartu user: ${$.email}`),console.log(`[ADMIN] Deposits: ${z} total, ${X} will be used, ${z-X} remaining`),X>0){const{error:ks}=await R.from("lesson_deposits").update({used_lessons:X,updated_at:new Date().toISOString()}).eq("user_id",$.id);ks?console.error("[ADMIN] Error updating used deposits:",ks):console.log(`[ADMIN] Updated used deposits to ${X} for user: ${$.email}`)}}if(W==="paspartu"){console.log("[ADMIN] Ensuring lesson deposit exists for Paspartu user:",$.email);const{data:G}=await R.from("lesson_deposits").select("id").eq("user_id",$.id).single();if(G)console.log("[ADMIN] Lesson deposit already exists for Paspartu user:",$.email);else{const{error:z}=await R.from("lesson_deposits").insert({user_id:$.id,total_lessons:5,used_lessons:0});z?console.error("[ADMIN] Error creating lesson deposit:",z):console.log("[ADMIN] Lesson deposit created successfully for Paspartu user:",$.email)}}console.log("[ADMIN] Creating Personal Training membership...");const{data:Ge,error:_s}=await R.from("membership_packages").select("id").eq("name","Personal Training").eq("is_active",!0).single();if(_s||!Ge){console.error("[ADMIN] Error finding Personal Training package:",_s),console.warn("[ADMIN] Personal Training package not found, skipping membership creation");continue}const zs={user_id:$.id,package_id:Ge.id,duration_type:"lesson",start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],is_active:!0,approved_by:o==null?void 0:o.id,approved_at:new Date().toISOString()},{error:Ps}=await R.from("memberships").insert(zs);Ps?(console.error("[ADMIN] Membership insertion error:",Ps),console.warn("[ADMIN] Failed to create membership, but schedule was created successfully")):console.log("[ADMIN] Personal Training membership created successfully for user:",$.email)}const c=s.map(se=>{const $=_.find(f=>f.id===se);return $?`${$.firstName} ${$.lastName}`:"Άγνωστος"}).join(", "),p=W==="personal"?"Personal":"Paspartu",D=l==="individual"?"Ατομικό":l==="combination"?"Συνδυασμένο":"Ομαδικό",de=l==="individual"||l==="combination"?"τον χρήστη":"τους χρήστες";if(b.success(`Το πρόγραμμα ${D} ${p} Training δημιουργήθηκε επιτυχώς για ${de}: ${c}!`),(l==="group"||l==="combination")&&s.length>0&&Object.keys(Ue).length>0){console.log("[AdminPanel] Creating group sessions for selected slots:",Ue);for(const se of s){const $=Ue[se];if($&&$.length>0){const{data:f}=await R.from("personal_training_schedules").select("id").eq("user_id",se).in("training_type",["group","combination"]).order("created_at",{ascending:!1}).limit(1);if(f&&f.length>0){const Y=f[0].id,be=$.map(ce=>({session_date:ce.date,start_time:ce.startTime,end_time:ce.endTime,trainer:ce.trainer,room:ce.room,group_type:ce.groupType,notes:ce.notes||"Group session created by admin"})),re=await Il(se,Y,be,(o==null?void 0:o.id)||"");if(re.success){if(console.log(`[AdminPanel] Created ${re.createdCount} group sessions for user ${se}`),re.blockedSessions&&re.blockedSessions.length>0){const ce=re.blockedSessions.length,Ge=re.createdCount||0;b.error(`Δημιουργήθηκαν ${Ge} σεσίες, αλλά ${ce} σεσίες αποκλείστηκαν λόγω γεμάτου capacity. Λεπτομέρειες: ${re.blockedSessions.slice(0,2).join(", ")}${ce>2?"...":""}`)}}else console.error("[AdminPanel] Error creating group sessions:",re.error),(n=re.error)!=null&&n.includes("capacity")?b.error(`Δεν μπορούν να δημιουργηθούν σεσίες: ${re.error}`):b.error(`Σφάλμα δημιουργίας σεσίων: ${re.error}`)}}}b.success("Το ομαδικό πρόγραμμα και οι αναθέσεις δημιουργήθηκαν επιτυχώς!")}else(l==="group"||l==="combination")&&s.length>0&&b(`Το ${l==="combination"?"συνδυασμένο":"ομαδικό"} πρόγραμμα δημιουργήθηκε. ${l==="combination"?"Μπορείτε να κάνετε ομαδικές αναθέσεις αργότερα από το Group Programs Overview.":"Μπορείτε να κάνετε αναθέσεις αργότερα από το Group Programs Overview."}`,{icon:"ℹ️"});T(!1),J({code:"",selectedUserId:""}),E("individual"),r("personal"),S([]),is({}),V(null),B(null),x(0),ds(""),Be("dropdown"),pe([{id:"tmp-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:""}]),lt()}catch(c){if(console.error("[ADMIN] Error creating personal training program:",c),c&&typeof c=="object"&&"code"in c){const p=c;p.code==="23505"?b.error("Το πρόγραμμα υπάρχει ήδη για αυτόν τον χρήστη."):p.code==="23503"?b.error("Πρόβλημα με τα δεδομένα χρήστη. Ελέγξτε ότι ο χρήστης υπάρχει."):p.code==="PGRST301"?b.error("Πρόβλημα αυθεντικοποίησης. Κάντε επανασύνδεση."):b.error(`Σφάλμα βάσης δεδομένων: ${p.message||"Άγνωστο σφάλμα"}`)}else b.error("Σφάλμα κατά τη δημιουργία του προγράμματος")}finally{N(!1)}};if(!o||o.role!=="admin")return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Δεν έχετε δικαίωμα πρόσβασης"}),e.jsx("p",{className:"text-gray-600",children:"Μόνο οι διαχειριστές μπορούν να έχουν πρόσβαση σε αυτή τη σελίδα."})]})});const _t=d.useCallback(async()=>{try{N(!0);const s=await Fl(),t=["Personal Training","Premium","Βασικό + προσωπική προπόνηση","VIP","Premium + όλα τα προνόμια","Όλα από το premium","Απεριόριστη προσωπική προπόνηση","Βασικό","Πρόσβαση σε όλες τις αίθουσες","Όλες οι ομαδικές τάξεις"],a=s.filter(c=>!t.includes(c.name)&&!t.some(p=>{var D;return(D=c.description)==null?void 0:D.includes(p)}));Ir(a),oe(c=>({...c,"membership-packages":!0}));const n=await zl();vt(n)}catch(s){console.error("Error loading membership packages:",s),b.error("Σφάλμα κατά τη φόρτωση των πακέτων")}finally{N(!1)}},[]),Pt=async s=>{try{const t=await Hl(s);st(t)}catch(t){console.error("Error loading package durations:",t),b.error("Σφάλμα κατά τη φόρτωση των επιλογών διάρκειας")}},Os=async()=>{try{const s=await Dr();Rr(s),es(1)}catch(s){console.error("Error loading membership requests:",s),b.error("Σφάλμα κατά τη φόρτωση των αιτημάτων")}},vs=()=>rt.filter(t=>{var c,p,D,de,se;const a=((c=t.package)==null?void 0:c.name)==="Free Gym"||((p=t.package)==null?void 0:p.name)==="Pilates"||((D=t.package)==null?void 0:D.name)==="Ultimate",n=ss===""||`${((de=t.user)==null?void 0:de.first_name)||""} ${((se=t.user)==null?void 0:se.last_name)||""}`.toLowerCase().includes(ss.toLowerCase());return a&&n}).sort((t,a)=>new Date(a.created_at).getTime()-new Date(t.created_at).getTime()),tl=()=>{const s=vs(),t=(Ae-1)*js,a=t+js;return s.slice(t,a)},Le=()=>{const s=vs();return Math.ceil(s.length/js)},rl=()=>{es(s=>Math.max(s-1,1))},ll=()=>{es(s=>Math.min(s+1,Le()))},al=()=>{es(1)},ol=()=>{es(Le())},nl=s=>{Gr(s.target.value),es(1)},il=s=>{Lr(s),s.name==="Pilates"?st(Fr):Pt(s.id)},dl=s=>{Ls(s),ys(s.price.toString())},cl=async()=>{if(!Se||!tt)return;const s=parseFloat(tt);if(isNaN(s)||s<0){b.error("Παρακαλώ εισάγετε έγκυρη τιμή");return}try{N(!0),(ve==null?void 0:ve.name)==="Pilates"?await Kl(Se.duration_type,s)&&(st(a=>a.map(n=>n.id===Se.id?{...n,price:s}:n)),vt(a=>a.map(n=>n.id===Se.id?{...n,price:s}:n)),Ls(null),ys(""),b.success("Η τιμή Pilates ενημερώθηκε επιτυχώς")):await Wl(Se.id,s)&&(Ls(null),ys(""),Pt((ve==null?void 0:ve.id)||""))}catch(t){console.error("Error updating price:",t)}finally{N(!1)}},ml=async s=>{var t;try{N(!0);const a=rt.find(c=>c.id===s);((t=a==null?void 0:a.package)==null?void 0:t.name)==="Ultimate"?await Vl(s)&&(b.success("Το Ultimate αίτημα εγκρίθηκε επιτυχώς! Δημιουργήθηκαν 2 συνδρομές: Pilates + Open Gym"),Os()):await Bl(s)&&(b.success("Το αίτημα εγκρίθηκε επιτυχώς!"),Os())}catch(a){console.error("Error approving request:",a),b.error("Σφάλμα κατά την έγκριση του αιτήματος")}finally{N(!1)}},xl=async s=>{const t=prompt("Παρακαλώ εισάγετε τον λόγο απόρριψης:");if(t)try{N(!0),await Ur(s,t)&&(b.success("Το αίτημα απορρίφθηκε επιτυχώς!"),Os())}catch(a){console.error("Error rejecting request:",a),b.error("Σφάλμα κατά την απόρριψη του αιτήματος")}finally{N(!1)}},ge=(s,t,a)=>{Or(n=>({...n,[s]:{...n[s],[t]:a}}))},Fs=(s,t)=>{ft(a=>({...a,[s]:t}))},kt=async s=>{const t=ts[s];if(t==="none"||!o){b.error("Παρακαλώ επιλέξτε μια κατάσταση έγκρισης");return}try{N(!0);const a=H[s];if(!a){b.error("Δεν υπάρχουν επιλογές για αυτό το αίτημα");return}const n=rt.find(p=>p.id===s);if(!n){b.error("Αίτημα δεν βρέθηκε");return}if(await $r(n.user_id,t,{oldMembersUsed:a.oldMembers||!1,kettlebellPoints:a.kettlebellPoints?parseInt(a.kettlebellPoints):0,cashAmount:a.cashAmount||0,posAmount:a.posAmount||0,createdBy:o.id,notes:`Program options saved for membership request ${s} with ${t} status`})){if(console.log(`Program approval state saved for membership request: ${s}`),t==="pending"){const D=new Set(Rs),de={...Gs};D.add(s),de[s]=a,yt(D),jt(de),b("Program Options τοποθετήθηκαν στην αναμονή - οι επιλογές παγώθηκαν",{icon:"⏳"})}else if(t==="approved"&&await gl(s,n.user_id,a),h(s)){const D=new Set(Rs),de={...Gs};D.delete(s),delete de[s],yt(D),jt(de)}ft(D=>({...D,[s]:"none"}));const p={approved:"εγκρίθηκε και εκτελέστηκαν οι ενέργειες",rejected:"απορρίφθηκε",pending:"τοποθετήθηκε στην αναμονή"};b.success(`Program Options ${p[t]} επιτυχώς!`)}else b.error("Σφάλμα κατά την αποθήκευση των Program Options")}catch(a){console.error("Error saving request program options:",a),b.error("Σφάλμα κατά την αποθήκευση των Program Options")}finally{N(!1)}},gl=async(s,t,a)=>{console.log("Executing approved program actions for membership request:",s);try{a.oldMembers&&(await dt(t,(o==null?void 0:o.id)||"")?console.log(`[APPROVED] Old Members marked as used for membership request: ${s}`):console.warn(`[APPROVED] Failed to mark Old Members as used for membership request: ${s}`)),a.kettlebellPoints&&parseInt(a.kettlebellPoints)>0&&(await ct(t,parseInt(a.kettlebellPoints),void 0,(o==null?void 0:o.id)||"")?console.log(`[APPROVED] Kettlebell Points saved for membership request: ${s}, Points: ${a.kettlebellPoints}`):console.warn(`[APPROVED] Failed to save Kettlebell Points for membership request: ${s}`)),a.cashAmount&&a.cashAmount>0&&(await Vs(t,a.cashAmount,"cash",void 0,(o==null?void 0:o.id)||"","Cash transaction from approved membership request")?console.log(`[APPROVED] Cash transaction saved for membership request: ${s}, Amount: €${a.cashAmount}`):console.warn(`[APPROVED] Failed to save Cash transaction for membership request: ${s}`)),a.posAmount&&a.posAmount>0&&(await Vs(t,a.posAmount,"pos",void 0,(o==null?void 0:o.id)||"","POS transaction from approved membership request")?console.log(`[APPROVED] POS transaction saved for membership request: ${s}, Amount: €${a.posAmount}`):console.warn(`[APPROVED] Failed to save POS transaction for membership request: ${s}`)),b.success("Έγιναν όλες οι απαραίτητες ενέργειες για το εγκεκριμένο αίτημα!")}catch(n){console.error("Error executing approved program actions for membership request:",n),b.error("Σφάλμα κατά την εκτέλεση των ενεργειών")}},at=d.useCallback(async()=>{try{N(!0);const[s,t]=await Promise.all([ra(),la()]);Ts(s),Ds(t),oe(a=>({...a,"kettlebell-points":!0}))}catch(s){console.error("Error loading kettlebell points data:",s),b.error("Σφάλμα κατά τη φόρτωση των Kettlebell Points")}finally{N(!1)}},[]),ul=async s=>{try{const a=(await aa(s)).reduce((n,c)=>n+c.points,0);Me(a.toString())}catch(t){console.error("Error loading user kettlebell points:",t),Me("")}},bl=s=>{if(!s.trim()){bs([]);return}const t=we.filter(a=>a.user_name.toLowerCase().includes(s.toLowerCase())||a.user_email.toLowerCase().includes(s.toLowerCase()));bs(t)},St=s=>{Ms(s),bl(s)};d.useEffect(()=>{g==="membership-packages"&&(_t(),Os())},[g]),d.useEffect(()=>{g==="kettlebell-points"&&at()},[g]),d.useEffect(()=>{(async()=>{if(o)try{const{data:t,error:a}=await R.from("user_old_members_usage").select("user_id");if(a){console.error("Error loading old members usage:",a);return}const n=new Set((t==null?void 0:t.map(c=>c.user_id))||[]);xs(n)}catch(t){console.error("Exception loading old members usage:",t)}})()},[o]);const Re=async()=>{try{fs(!0);const t=(await ws(()=>Dr(),"φόρτωση Ultimate αιτημάτων")).filter(a=>{var n;return((n=a.package)==null?void 0:n.name)==="Ultimate"});t.length>oa&&(console.log(`[AdminPanel] Large Ultimate dataset detected: ${t.length} items`),b(`Φορτώθηκαν ${t.length} Ultimate αιτήματα. Χρησιμοποιείται σελιδοποίηση.`,{icon:"👑"})),Qs(t),oe(a=>({...a,"ultimate-subscriptions":!0}))}catch(s){Ns(s,"φόρτωση Ultimate αιτημάτων")}finally{fs(!1)}},hl=async s=>{try{await ws(async()=>{const{error:t}=await R.from("membership_requests").delete().eq("id",s);if(t)throw t;return!0},"διαγραφή Ultimate αιτήματος"),b.success("Το Ultimate αίτημα διαγράφηκε επιτυχώς"),await Re()}catch(t){Ns(t,"διαγραφή Ultimate αιτήματος")}},pl=async s=>{var t;try{N(!0);const a=Ye.find(c=>c.id===s);((t=a==null?void 0:a.package)==null?void 0:t.name)==="Ultimate"&&(await ws(async()=>{const{approveUltimateMembershipRequest:c}=await Sl(async()=>{const{approveUltimateMembershipRequest:D}=await import("./membershipApi-CZzjnGWn.js");return{approveUltimateMembershipRequest:D}},__vite__mapDeps([0,1,2])),p=await c(s);if(!p)throw new Error("Approval failed");return p},"έγκριση Ultimate αιτήματος"),b.success("Το Ultimate αίτημα εγκρίθηκε επιτυχώς! Δημιουργήθηκαν 2 συνδρομές: Pilates + Open Gym"),Re())}catch(a){Ns(a,"έγκριση Ultimate αιτήματος")}finally{N(!1)}},fl=async s=>{const t=prompt("Παρακαλώ εισάγετε τον λόγο απόρριψης:");if(t)try{N(!0),await ws(async()=>{const a=await Ur(s,t);if(!a)throw new Error("Rejection failed");return a},"απόρριψη Ultimate αιτήματος"),b.success("Το Ultimate αίτημα απορρίφθηκε επιτυχώς!"),Re()}catch(a){Ns(a,"απόρριψη Ultimate αιτήματος")}finally{N(!1)}},yl=async(s,t,a,n,c,p,D,de,se,$)=>{try{const f={installment_1_amount:t,installment_2_amount:a,installment_3_amount:n,installment_1_payment_method:c,installment_2_payment_method:p,installment_3_payment_method:D};de&&(f.installment_1_due_date=de),se&&(f.installment_2_due_date=se),$&&(f.installment_3_due_date=$),await ws(async()=>{const{error:Y}=await R.from("membership_requests").update(f).eq("id",s);if(Y)throw Y;return!0},"ενημέρωση δόσεων"),b.success("Οι δόσεις και ημερομηνίες ενημερώθηκαν επιτυχώς"),await Re()}catch(f){Ns(f,"ενημέρωση δόσεων")}};d.useEffect(()=>{g==="ultimate-subscriptions"&&!K["ultimate-subscriptions"]&&(console.log("[AdminPanel] Loading Ultimate Subscriptions data..."),Re())},[g]),d.useEffect(()=>{g==="ultimate-subscriptions"&&Ye.length===0&&!Ze&&(console.log("[AdminPanel] Ultimate Subscriptions tab active but no data, reloading..."),Re())},[g,Ye.length,Ze]);const ws=async(s,t="operation",a=3)=>{for(let n=1;n<=a;n++)try{return await s()}catch(c){if(console.error(`[AdminPanel] Database ${t} failed (attempt ${n}/${a}):`,c),n===a){const D=`Σφάλμα σύνδεσης με τη βάση δεδομένων κατά ${t}. Παρακαλώ ελέγξτε τη σύνδεσή σας και δοκιμάστε ξανά.`;throw b.error(D),c}const p=1e3*n;console.log(`[AdminPanel] Retrying ${t} in ${p}ms...`),await new Promise(D=>setTimeout(D,p))}throw new Error(`Failed to complete ${t} after ${a} attempts`)},Ns=(s,t)=>{var a,n,c;console.error(`[AdminPanel] Database error in ${t}:`,s),(a=s.message)!=null&&a.includes("network")||(n=s.message)!=null&&n.includes("connection")?b.error("Πρόβλημα σύνδεσης δικτύου. Παρακαλώ ελέγξτε τη σύνδεσή σας."):(c=s.message)!=null&&c.includes("timeout")?b.error("Η λειτουργία διήρκησε πολύ. Παρακαλώ δοκιμάστε ξανά."):b.error(`Παρουσιάστηκε σφάλμα κατά ${t}. Παρακαλώ δοκιμάστε ξανά.`)};return d.useEffect(()=>{u.selectedUserId&&ul(u.selectedUserId)},[u.selectedUserId]),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-xl shadow-xl p-4 sm:p-8 text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-3xl font-bold mb-2",children:"🏋️‍♂️ Διαχείριση Γυμναστηρίου"}),e.jsxs("p",{className:"text-blue-100 text-sm sm:text-lg",children:["Καλώς ήρθες, ",e.jsx("span",{className:"font-semibold",children:o.firstName}),"!"]})]}),e.jsx("div",{className:"bg-white/20 rounded-xl p-3 sm:p-4 backdrop-blur-sm self-start sm:self-auto",children:e.jsx(Bs,{className:"h-8 w-8 sm:h-12 sm:w-12"})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex overflow-x-auto space-x-2 sm:space-x-8 px-3 sm:px-6",children:zr.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>j(s.id),className:`py-3 sm:py-4 px-2 sm:px-1 border-b-3 font-semibold text-xs sm:text-sm flex items-center space-x-2 sm:space-x-3 transition-all duration-200 whitespace-nowrap ${g===s.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(t,{className:`h-4 w-4 sm:h-5 sm:w-5 ${g===s.id?"text-blue-500":"text-gray-400"}`}),e.jsx("span",{className:"hidden sm:inline",children:s.name}),e.jsx("span",{className:"sm:hidden",children:s.name.split(" ")[0]})]},s.id)})})}),e.jsxs("div",{className:"p-3 sm:p-6",children:[y&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Φόρτωση δεδομένων χρήστη… Αυτό μπορεί να διαρκέσει λίγα δευτερόλεπτα."})]}),g==="personal-training"&&!y&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-4 sm:p-6 text-white mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-2",children:"💪 Personal Training Πρόγραμμα"}),e.jsx("p",{className:"text-purple-100 text-sm sm:text-base",children:"Διαχείριση προγραμμάτων προπόνησης"})]}),e.jsxs("button",{onClick:()=>T(!0),className:"flex items-center space-x-2 sm:space-x-3 px-4 sm:px-6 py-2 sm:py-3 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg text-sm sm:text-base",children:[e.jsx(ke,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{children:"🏋️‍♂️ Δημιουργία Προγράμματος"})]})]})}),Q&&k&&!Wr({email:Q.email,personalTrainingCode:Q.personalTrainingCode})&&e.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border-2 border-blue-200 rounded-xl shadow-xl p-4 sm:p-8",id:"schedule-editor",children:[e.jsxs("div",{className:"flex flex-col space-y-4 sm:space-y-0 sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 sm:p-6 rounded-xl shadow-lg flex-1 sm:flex-none",children:[e.jsxs("h3",{className:"text-lg sm:text-2xl font-bold mb-1 sm:mb-2",children:["🏋️‍♂️ Πρόγραμμα για ",Q.firstName," ",Q.lastName]}),e.jsxs("p",{className:"text-blue-100 text-sm sm:text-lg",children:["📅 ",Kr[k.month-1]," ",k.year]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 sm:space-x-2 sm:gap-0",children:C?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:Xr,className:"flex items-center space-x-1 px-3 py-2 bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors text-sm",children:[e.jsx($s,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Προσθήκη Σεσίας"}),e.jsx("span",{className:"sm:hidden",children:"Προσθήκη"})]}),e.jsxs("button",{onClick:Zr,className:"flex items-center space-x-1 px-3 py-2 bg-primary-100 text-primary-700 rounded-md hover:bg-primary-200 transition-colors text-sm",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Αποθήκευση"})]}),e.jsx("button",{onClick:()=>U(!1),className:"flex items-center space-x-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-sm",children:e.jsx("span",{children:"Ακύρωση"})})]}):e.jsxs("button",{onClick:()=>U(!0),className:"flex items-center space-x-1 px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors text-sm",children:[e.jsx(kr,{className:"h-4 w-4"}),e.jsx("span",{children:"Επεξεργασία"})]})})]}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:k.scheduleData.sessions.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Ημέρα"}),C?e.jsx("input",{type:"date",value:s.date,onChange:t=>ls(s.id,"date",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm"}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:new Date(s.date).toLocaleDateString("el-GR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Ώρα Έναρξης"}),C?e.jsx("select",{value:s.startTime,onChange:t=>ls(s.id,"startTime",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:Nt.map(t=>e.jsx("option",{value:t,children:t},t))}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.startTime})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Ώρα Λήξης"}),C?e.jsx("select",{value:s.endTime,onChange:t=>ls(s.id,"endTime",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:Nt.map(t=>e.jsx("option",{value:t,children:t},t))}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.endTime})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Τύπος"}),C?e.jsxs("select",{value:s.type,onChange:t=>ls(s.id,"type",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:[e.jsx("option",{value:"personal",children:"Personal Training"}),e.jsx("option",{value:"kickboxing",children:"Kick Boxing"}),e.jsx("option",{value:"combo",children:"Combo"})]}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900 capitalize",children:s.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Προπονητής"}),C?e.jsx("select",{value:s.trainer,onChange:t=>ls(s.id,"trainer",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:Tr.map(t=>e.jsx("option",{value:t,children:t},t))}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.trainer})]}),e.jsx("div",{className:"flex items-end sm:col-span-2 lg:col-span-1",children:C&&e.jsxs("button",{onClick:()=>Yr(s.id),className:"flex items-center space-x-1 px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors text-sm w-full sm:w-auto",children:[e.jsx(Cs,{className:"h-4 w-4"}),e.jsx("span",{children:"Διαγραφή"})]})})]}),s.notes&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Σημειώσεις"}),C?e.jsx("input",{type:"text",value:s.notes,onChange:t=>ls(s.id,"notes",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",placeholder:"Σημειώσεις για τη σέσια"}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.notes})]})]},s.id))}),e.jsxs("div",{className:"mt-4 sm:mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Γενικές Σημειώσεις"}),C?e.jsx("textarea",{value:k.scheduleData.notes||"",onChange:s=>{const t={...k,scheduleData:{...k.scheduleData,notes:s.target.value}};Z(t)},className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",rows:3,placeholder:"Γενικές σημειώσεις για το πρόγραμμα..."}):e.jsx("p",{className:"text-sm text-gray-900",children:k.scheduleData.notes||"Δεν υπάρχουν σημειώσεις"})]})]}),cs&&e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl shadow-lg border-2 border-green-200",children:e.jsx("div",{className:"p-4 sm:p-6",children:e.jsx(Ol,{featureEnabled:cs})})})]}),g==="membership-packages"&&!y&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Διαχείριση Πακέτων Συνδρομών"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Ενημερώστε τις τιμές για κάθε πακέτο και διάρκεια"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Mr.map(s=>e.jsxs("div",{className:`border-2 rounded-xl p-6 cursor-pointer transition-all duration-200 ${(ve==null?void 0:ve.id)===s.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>il(s),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[s.name==="Pilates"?e.jsx("span",{className:"text-2xl",children:"🧘"}):e.jsx(Ws,{className:"h-6 w-6 text-blue-500"}),e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:s.name})]}),e.jsx(it,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:s.description}),s.features&&e.jsx("ul",{className:"space-y-1",children:s.features.slice(0,3).map((t,a)=>e.jsxs("li",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full mr-2"}),t]},a))})]},s.id))})})]}),ve&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Τιμές για ",ve.name]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Ενημερώστε τις τιμές για κάθε διάρκεια"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Er.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(mt,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:gt(s.duration_type)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.duration_days," ημέρες"]})]})]}),e.jsx("button",{onClick:()=>dl(s),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(kr,{className:"h-4 w-4"})})]}),(Se==null?void 0:Se.id)===s.id?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"number",value:tt,onChange:t=>ys(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Νέα τιμή",step:"0.01",min:"0"})}),e.jsx("button",{onClick:cl,disabled:y,className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{Ls(null),ys("")},className:"px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:e.jsx(as,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Fe(s.price)}),e.jsx("div",{className:"text-sm text-gray-600",children:"EUR"})]})]},s.id))})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 px-8 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-white/10 rounded-xl backdrop-blur-sm",children:e.jsx(Ce,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Αιτήματα Συνδρομών"}),e.jsx("p",{className:"text-slate-200 mt-1",children:"Διαχειριστείτε τα αιτήματα συνδρομών από χρήστες"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx($e,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Αναζήτηση με όνομα χρήστη...",value:ss,onChange:nl,className:"pl-12 pr-6 py-3 bg-white/10 border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 w-full lg:w-80 text-white placeholder-slate-300 backdrop-blur-sm"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-slate-50 via-blue-50 to-indigo-50 border border-slate-200 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"h-6 w-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Οδηγίες Διαχείρισης Αιτημάτων"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx($e,{className:"h-3 w-3 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-800 mb-1",children:"Αναζήτηση & Πλοήγηση"}),e.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed",children:["Χρησιμοποιήστε το πεδίο αναζήτησης για να βρείτε γρήγορα αιτήματα με όνομα χρήστη. Η λίστα εμφανίζεται σε ",e.jsx("span",{className:"font-semibold text-blue-700",children:"6άδες"})," - ελέγξτε την επόμενη σελίδα αν δεν βρείτε το επιθυμητό αίτημα."]})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg p-4 border border-amber-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-amber-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(ut,{className:"h-3 w-3 text-amber-600"})}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-amber-800 mb-1 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-amber-500 rounded-full mr-2"}),"Σημαντική Προσοχή - Διαδικασία Πληρωμής"]}),e.jsxs("p",{className:"text-sm text-amber-700 leading-relaxed",children:[e.jsx("span",{className:"font-semibold",children:"ΠΡΩΤΑ"})," αποθηκεύουμε τα χρήματα στο σύστημα (Cash Register) και",e.jsx("span",{className:"font-semibold",children:" ΕΠΕΙΤΑ"})," επιλέγουμε για το αίτημα του χρήστη εάν εγκρίνεται ή απορρίπτεται."]})]})]})})]})]})]})}),e.jsx("div",{className:"p-8",children:vs().length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Ce,{className:"h-10 w-10 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:ss?"Δεν βρέθηκαν αποτελέσματα":"Δεν υπάρχουν αιτήματα"}),e.jsx("p",{className:"text-gray-500",children:ss?`Για την αναζήτηση "${ss}"`:"Δεν έχουν υποβληθεί αιτήματα συνδρομών ακόμα"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-slate-50 rounded-xl p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ke,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-slate-700",children:["Εμφάνιση ",(Ae-1)*js+1,"-",Math.min(Ae*js,vs().length)," από ",vs().length," αιτήματα"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Οργανωμένα σε 6άδες για εύκολη πλοήγηση"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[Le()>3&&e.jsx("button",{onClick:al,disabled:Ae===1,className:"px-3 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-200",title:"Πρώτη σελίδα",children:"««"}),e.jsxs("button",{onClick:rl,disabled:Ae===1,className:"px-4 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed flex items-center space-x-2 transition-all duration-200",children:[e.jsx("span",{children:"←"}),e.jsx("span",{children:"Προηγούμενο"})]}),e.jsxs("div",{className:"px-4 py-2 text-sm font-semibold text-slate-700 bg-slate-200 rounded-lg min-w-[120px] text-center",children:[Ae," / ",Le()]}),e.jsxs("button",{onClick:ll,disabled:Ae>=Le(),className:"px-4 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed flex items-center space-x-2 transition-all duration-200",children:[e.jsx("span",{children:"Επόμενο"}),e.jsx("span",{children:"→"})]}),Le()>3&&e.jsx("button",{onClick:ol,disabled:Ae>=Le(),className:"px-3 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-200",title:"Τελευταία σελίδα",children:"»»"})]})]})}),e.jsx("div",{className:"space-y-6",children:tl().map(s=>{var t,a,n,c,p,D,de,se,$,f,Y,be,re,ce,Ge,_s,zs,Ps,G,z,X,me,ks,Wt,Vt,Bt,Ht,Jt,Qt,Xt,Yt,Zt,qt,er,sr,tr,rr,lr,ar,or,nr,ir,dr,cr,mr,xr,gr,ur,br,hr,pr,fr,yr,jr,vr,wr;return e.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"relative",children:[(t=s.user)!=null&&t.profile_photo?e.jsxs("div",{className:"w-12 h-12 rounded-xl overflow-hidden shadow-lg border-2 border-white",children:[e.jsx("img",{src:s.user.profile_photo,alt:`${(a=s.user)==null?void 0:a.first_name} ${(n=s.user)==null?void 0:n.last_name}`,className:"w-full h-full object-cover",onError:O=>{O.currentTarget.style.display="none";const Nr=O.currentTarget.nextElementSibling;Nr&&(Nr.style.display="flex")}}),e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center hidden",children:e.jsx(Ce,{className:"h-6 w-6 text-white"})})]}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Ce,{className:"h-6 w-6 text-white"})}),s.status==="pending"&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full border-2 border-white"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-1",children:[(c=s.user)==null?void 0:c.first_name," ",(p=s.user)==null?void 0:p.last_name]}),e.jsxs("p",{className:"text-sm text-slate-600 mb-2 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-slate-300 rounded-full mr-2"}),(D=s.user)==null?void 0:D.email]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:(de=s.package)==null?void 0:de.name}),e.jsx("span",{className:"text-sm text-slate-500",children:"•"}),e.jsx("span",{className:"text-sm text-slate-600",children:gt(s.duration_type)})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:Fe(s.requested_price)}),e.jsxs("div",{className:"text-sm text-slate-500 flex items-center",children:[e.jsx(ke,{className:"h-4 w-4 mr-1"}),new Date(s.created_at).toLocaleDateString("el-GR")]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[s.status==="pending"&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>ml(s.id),disabled:y,className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Εγκρίνω"})]}),e.jsxs("button",{onClick:()=>xl(s.id),disabled:y,className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),e.jsx("span",{children:"Απορρίπτω"})]})]}),s.status==="approved"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"Εγκεκριμένο"})]}),s.status==="rejected"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-semibold",children:"Απορριφθέν"})]})]})]})]})}),(s.status==="pending"||s.status==="approved"&&h(s.id)||s.status==="rejected"&&h(s.id))&&e.jsx("div",{className:`border-t border-slate-200 ${h(s.id)?"bg-gradient-to-r from-yellow-50 to-amber-50":"bg-slate-50"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${h(s.id)?"bg-yellow-100":"bg-slate-100"}`,children:e.jsx(it,{className:`h-5 w-5 ${h(s.id)?"text-yellow-600":"text-slate-600"}`})}),e.jsxs("h5",{className:`text-lg font-semibold ${h(s.id)?"text-yellow-800":"text-slate-700"} flex items-center`,children:["Program Options",h(s.id)&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-yellow-200 text-yellow-800 rounded-full text-xs font-medium",children:"Κλειδωμένο"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[((se=s.package)==null?void 0:se.name)!=="Pilates"&&e.jsx("div",{className:`p-3 rounded-lg border ${h(s.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:e.jsx("button",{onClick:()=>{var O;if(h(s.id)){b("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}ge(s.id,"oldMembers",!((O=H[s.id])!=null&&O.oldMembers))},className:`w-full p-3 rounded-lg text-left transition-colors ${($=H[s.id])!=null&&$.oldMembers||(f=ee(s.id))!=null&&f.oldMembers?"bg-green-100 text-green-800 border-2 border-green-300":h(s.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:[h(s.id)&&"🔒 ","👴 Παλαιά μέλη"]}),(((Y=H[s.id])==null?void 0:Y.oldMembers)||((be=ee(s.id))==null?void 0:be.oldMembers))&&e.jsx("span",{className:"text-green-600",children:"✓"})]})})}),((re=s.package)==null?void 0:re.name)!=="Pilates"&&e.jsxs("div",{className:`p-3 rounded-lg border ${h(s.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[h(s.id)&&"🔒 ","🏋️ Kettlebell Points"]}),e.jsx("input",{type:"number",value:h(s.id)?((ce=ee(s.id))==null?void 0:ce.kettlebellPoints)||"":((Ge=H[s.id])==null?void 0:Ge.kettlebellPoints)||"",onChange:O=>{h(s.id)||ge(s.id,"kettlebellPoints",O.target.value)},placeholder:"Εισάγετε πόντους",className:`w-full p-2 border rounded-lg ${h(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,disabled:h(s.id)})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-4 border-2 border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"💳"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[h(s.id)&&"🔒 ","SECTION ΠΛΗΡΩΜΩΝ"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-3 rounded-lg border ${h(s.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsx("button",{onClick:()=>{var O;if(h(s.id)){b("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}ge(s.id,"cash",!((O=H[s.id])!=null&&O.cash))},className:`w-full p-3 rounded-lg text-left transition-colors ${(_s=H[s.id])!=null&&_s.cash||(zs=ee(s.id))!=null&&zs.cash?"bg-green-100 text-green-800 border-2 border-green-300":h(s.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:[h(s.id)&&"🔒 ","💰 Μετρητά"]}),(((Ps=H[s.id])==null?void 0:Ps.cash)||((G=ee(s.id))==null?void 0:G.cash))&&e.jsx("span",{className:"text-green-600",children:"✓"})]})}),(((z=H[s.id])==null?void 0:z.cash)||((X=ee(s.id))==null?void 0:X.cash))&&e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"number",value:h(s.id)?((me=ee(s.id))==null?void 0:me.cashAmount)||"":((ks=H[s.id])==null?void 0:ks.cashAmount)||"",onChange:O=>{h(s.id)||ge(s.id,"cashAmount",parseFloat(O.target.value)||0)},placeholder:"Ποσό σε €",className:`w-full p-2 border rounded-lg ${h(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500"}`,disabled:h(s.id)}),e.jsx("button",{onClick:()=>{h(s.id)},className:`mt-2 w-full px-3 py-1 text-sm rounded-lg ${h(s.id)?"bg-yellow-200 text-yellow-700 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,disabled:h(s.id),children:"✓ Επιλογή"})]})]}),e.jsxs("div",{className:`p-3 rounded-lg border ${h(s.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsx("button",{onClick:()=>{var O;if(h(s.id)){b("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}ge(s.id,"pos",!((O=H[s.id])!=null&&O.pos))},className:`w-full p-3 rounded-lg text-left transition-colors ${(Wt=H[s.id])!=null&&Wt.pos||(Vt=ee(s.id))!=null&&Vt.pos?"bg-blue-100 text-blue-800 border-2 border-blue-300":h(s.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:[h(s.id)&&"🔒 ","💳 POS"]}),(((Bt=H[s.id])==null?void 0:Bt.pos)||((Ht=ee(s.id))==null?void 0:Ht.pos))&&e.jsx("span",{className:"text-blue-600",children:"✓"})]})}),(((Jt=H[s.id])==null?void 0:Jt.pos)||((Qt=ee(s.id))==null?void 0:Qt.pos))&&e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"number",value:h(s.id)?((Xt=ee(s.id))==null?void 0:Xt.posAmount)||"":((Yt=H[s.id])==null?void 0:Yt.posAmount)||"",onChange:O=>{h(s.id)||ge(s.id,"posAmount",parseFloat(O.target.value)||0)},placeholder:"Ποσό σε €",className:`w-full p-2 border rounded-lg ${h(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,disabled:h(s.id)}),e.jsx("button",{onClick:()=>{h(s.id)},className:`mt-2 w-full px-3 py-1 text-sm rounded-lg ${h(s.id)?"bg-yellow-200 text-yellow-700 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:h(s.id),children:"✓ Επιλογή"})]})]})]})]}),((Zt=s.package)==null?void 0:Zt.name)==="Ultimate"&&s.has_installments&&e.jsxs("div",{className:`col-span-2 p-4 rounded-lg border ${h(s.id)?"bg-yellow-100 border-yellow-300":"bg-orange-50 border-orange-200"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"💳"}),e.jsxs("h4",{className:"text-lg font-semibold text-orange-800",children:[h(s.id)&&"🔒 ","Διαχείριση Δόσεων Ultimate"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"1η Δόση"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",value:h(s.id)?((qt=ee(s.id))==null?void 0:qt.installment1Amount)||"":((er=H[s.id])==null?void 0:er.installment1Amount)||"",onChange:O=>{h(s.id)||ge(s.id,"installment1Amount",O.target.value)},placeholder:"Ποσό",className:`w-full p-2 border rounded-lg ${h(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`,disabled:h(s.id)}),e.jsxs("select",{value:h(s.id)?((sr=ee(s.id))==null?void 0:sr.installment1PaymentMethod)||"cash":((tr=H[s.id])==null?void 0:tr.installment1PaymentMethod)||"cash",onChange:O=>{h(s.id)||ge(s.id,"installment1PaymentMethod",O.target.value)},className:`w-full p-2 border rounded-lg ${h(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`,disabled:h(s.id),children:[e.jsx("option",{value:"cash",children:"💰 Μετρητά"}),e.jsx("option",{value:"pos",children:"💳 POS"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"📅 Ημερομηνία Πληρωμής"}),e.jsx("input",{type:"date",value:h(s.id)?((rr=ee(s.id))==null?void 0:rr.installment1DueDate)||"":((lr=H[s.id])==null?void 0:lr.installment1DueDate)||"",onChange:O=>{h(s.id)||ge(s.id,"installment1DueDate",O.target.value)},className:`w-full p-2 border rounded-lg text-sm ${h(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`,disabled:h(s.id)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"2η Δόση"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",value:h(s.id)?((ar=ee(s.id))==null?void 0:ar.installment2Amount)||"":((or=H[s.id])==null?void 0:or.installment2Amount)||"",onChange:O=>{h(s.id)||ge(s.id,"installment2Amount",O.target.value)},placeholder:"Ποσό",className:`w-full p-2 border rounded-lg ${h(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`,disabled:h(s.id)}),e.jsxs("select",{value:h(s.id)?((nr=ee(s.id))==null?void 0:nr.installment2PaymentMethod)||"cash":((ir=H[s.id])==null?void 0:ir.installment2PaymentMethod)||"cash",onChange:O=>{h(s.id)||ge(s.id,"installment2PaymentMethod",O.target.value)},className:`w-full p-2 border rounded-lg ${h(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`,disabled:h(s.id),children:[e.jsx("option",{value:"cash",children:"💰 Μετρητά"}),e.jsx("option",{value:"pos",children:"💳 POS"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"📅 Ημερομηνία Πληρωμής"}),e.jsx("input",{type:"date",value:h(s.id)?((dr=ee(s.id))==null?void 0:dr.installment2DueDate)||"":((cr=H[s.id])==null?void 0:cr.installment2DueDate)||"",onChange:O=>{h(s.id)||ge(s.id,"installment2DueDate",O.target.value)},className:`w-full p-2 border rounded-lg text-sm ${h(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`,disabled:h(s.id)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"3η Δόση"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",value:h(s.id)?((mr=ee(s.id))==null?void 0:mr.installment3Amount)||"":((xr=H[s.id])==null?void 0:xr.installment3Amount)||"",onChange:O=>{h(s.id)||ge(s.id,"installment3Amount",O.target.value)},placeholder:"Ποσό",className:`w-full p-2 border rounded-lg ${h(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`,disabled:h(s.id)}),e.jsxs("select",{value:h(s.id)?((gr=ee(s.id))==null?void 0:gr.installment3PaymentMethod)||"cash":((ur=H[s.id])==null?void 0:ur.installment3PaymentMethod)||"cash",onChange:O=>{h(s.id)||ge(s.id,"installment3PaymentMethod",O.target.value)},className:`w-full p-2 border rounded-lg ${h(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`,disabled:h(s.id),children:[e.jsx("option",{value:"cash",children:"💰 Μετρητά"}),e.jsx("option",{value:"pos",children:"💳 POS"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"📅 Ημερομηνία Πληρωμής"}),e.jsx("input",{type:"date",value:h(s.id)?((br=ee(s.id))==null?void 0:br.installment3DueDate)||"":((hr=H[s.id])==null?void 0:hr.installment3DueDate)||"",onChange:O=>{h(s.id)||ge(s.id,"installment3DueDate",O.target.value)},className:`w-full p-2 border rounded-lg text-sm ${h(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}`,disabled:h(s.id)})]})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-orange-100 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-orange-800",children:"Σύνολο Δόσεων:"}),e.jsx("span",{className:"text-lg font-bold text-orange-900",children:Fe((Number(((pr=H[s.id])==null?void 0:pr.installment1Amount)||0)||Number(((fr=ee(s.id))==null?void 0:fr.installment1Amount)||0))+(Number(((yr=H[s.id])==null?void 0:yr.installment2Amount)||0)||Number(((jr=ee(s.id))==null?void 0:jr.installment2Amount)||0))+(Number(((vr=H[s.id])==null?void 0:vr.installment3Amount)||0)||Number(((wr=ee(s.id))==null?void 0:wr.installment3Amount)||0)))})]}),e.jsxs("div",{className:"text-sm text-orange-700 mt-1",children:["Από ",Fe(s.requested_price)," (Πακέτο Ultimate)"]})]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>Fs(s.id,"approved"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${ts[s.id]==="approved"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:"✅ Έγκριση"}),e.jsx("button",{onClick:()=>Fs(s.id,"rejected"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${ts[s.id]==="rejected"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:"❌ Απόρριψη"}),e.jsx("button",{onClick:()=>Fs(s.id,"pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${ts[s.id]==="pending"?"bg-yellow-600 text-white":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"}`,children:"⏳ Αναμονή"}),e.jsxs("button",{onClick:()=>kt(s.id),disabled:y||ts[s.id]==="none",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[y?e.jsx(As,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Αποθήκευση Program Options"]})]})]})})]},s.id)})})]})})]})]}),g==="pilates-schedule"&&!y&&e.jsx(Ql,{}),g==="cash-register"&&!y&&e.jsx(Zl,{}),g==="kettlebell-points"&&!y&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 rounded-xl p-4 sm:p-6 text-white mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-2",children:"🏋️‍♂️ Kettlebell Points Ranking"}),e.jsx("p",{className:"text-orange-100 text-sm sm:text-base",children:"Συνολικοί βαθμοί και κατάταξη χρηστών"})]}),e.jsxs("button",{onClick:at,className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg text-sm",children:[e.jsx(Ws,{className:"h-4 w-4"}),e.jsx("span",{children:"🔄 Ανανέωση"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-2",children:"📊 Συνολικοί Βαθμοί"}),e.jsx("p",{className:"text-blue-600",children:"Όλοι οι χρήστες συνολικά"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-900",children:Us}),e.jsx("div",{className:"text-sm text-blue-600",children:"βαθμοί"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"🏆 Κατάταξη Χρηστών"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Βαθμοί Kettlebell ανά χρήστη"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx($e,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Αναζήτηση χρήστη...",value:Ne,onChange:s=>St(s.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]}),Ne&&e.jsx("button",{onClick:()=>St(""),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(as,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"p-6",children:we.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ws,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Δεν υπάρχουν βαθμοί Kettlebell ακόμα"}),e.jsx("p",{className:"text-sm mt-2",children:"Οι βαθμοί θα εμφανιστούν εδώ όταν δημιουργηθούν προγράμματα με Kettlebell Points"})]}):e.jsxs("div",{className:"space-y-4",children:[(Ne?us:we.slice(0,10)).map((s,t)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${t===0?"bg-yellow-500":t===1?"bg-gray-400":t===2?"bg-orange-500":"bg-blue-500"}`,children:Ne?we.findIndex(a=>a.user_id===s.user_id)+1:t+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.user_name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.user_email}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.points_count," ",s.points_count===1?"πρόγραμμα":"προγράμματα"," • Τελευταία ενημέρωση: ",new Date(s.last_updated).toLocaleDateString("el-GR")]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.total_points}),e.jsx("div",{className:"text-sm text-gray-600",children:"βαθμοί"})]})]})},s.user_id)),Ne&&us.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx($e,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Δεν βρέθηκαν χρήστες με αυτό το όνομα"}),e.jsx("p",{className:"text-sm mt-2",children:"Δοκιμάστε ένα διαφορετικό όρο αναζήτησης"})]}),!Ne&&we.length>10&&e.jsx("div",{className:"text-center py-4",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Εμφανίζονται οι πρώτοι 10 από ",we.length," χρήστες"]})})]})})]})]}),g!=="personal-training"&&g!=="membership-packages"&&g!=="ultimate-subscriptions"&&g!=="pilates-schedule"&&g!=="kettlebell-points"&&g!=="cash-register"&&!y&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Αυτή η κατηγορία θα υλοποιηθεί σύντομα."})})]})]}),le&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-2 sm:p-4",children:e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-t-xl sm:rounded-t-2xl p-4 sm:p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg sm:text-2xl font-bold mb-1 sm:mb-2",children:"🏋️‍♂️ Δημιουργία Προγράμματος"}),e.jsx("p",{className:"text-purple-100 text-sm sm:text-base",children:"Δημιουργήστε νέο πρόγραμμα Personal Training"})]}),e.jsx("button",{onClick:()=>T(!1),className:"text-white/80 hover:text-white hover:bg-white/20 rounded-full p-2 transition-all duration-200 flex-shrink-0 ml-2",children:e.jsx(as,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]})}),e.jsxs("div",{className:"p-4 sm:p-8",children:[e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 sm:p-6 border border-indigo-200",children:[e.jsx("label",{className:"block text-base sm:text-lg font-bold text-indigo-800 mb-3 sm:mb-4 flex items-center",children:"🏋️‍♂️ Τύπος Προπόνησης"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>E("individual"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${l==="individual"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"👤 Ατομικό"}),e.jsx("button",{type:"button",onClick:()=>E("group"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${l==="group"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"👥 Group"}),e.jsx("button",{type:"button",onClick:()=>E("combination"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${l==="combination"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"🔀 Συνδυασμός"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-4 sm:p-6 border border-blue-200",children:[e.jsx("label",{className:"block text-base sm:text-lg font-bold text-blue-800 mb-3 sm:mb-4 flex items-center",children:"👥 Τύπος Χρήστη"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>r("personal"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${W==="personal"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🏋️‍♂️ Personal User"}),l!=="combination"&&e.jsx("button",{type:"button",onClick:()=>r("paspartu"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${W==="paspartu"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🎯 Paspartu User"})]}),e.jsx("div",{className:"mt-3 text-sm text-blue-700",children:l==="combination"?e.jsx("span",{children:"📋 Combination Training: Μόνο Personal Users - κλειδωμένο πρόγραμμα με συγκεκριμένες ώρες"}):W==="personal"?e.jsx("span",{children:"📋 Personal Users: Παίρνουν κλειδωμένο πρόγραμμα με συγκεκριμένες ώρες"}):e.jsx("span",{children:"💳 Paspartu Users: Παίρνουν 5 μαθήματα και επιλέγουν ελεύθερα τις ώρες"})})]}),l==="combination"&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 sm:p-6 border border-purple-200",children:[e.jsx("label",{className:"block text-base sm:text-lg font-bold text-purple-800 mb-3 sm:mb-4 flex items-center",children:"🔀 Διαμόρφωση Συνδυασμού"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[e.jsx("label",{className:"block text-sm font-bold text-purple-700 mb-2",children:"👤 Ατομικές Σεσίες"}),e.jsx("select",{value:v,onChange:s=>ne(parseInt(s.target.value)),className:"w-full px-3 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs("option",{value:s,children:[s," σεσίες"]},s))})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[e.jsx("label",{className:"block text-sm font-bold text-purple-700 mb-2",children:"👥 Ομαδικές Σεσίες"}),e.jsx("select",{value:ie,onChange:s=>ue(parseInt(s.target.value)),className:"w-full px-3 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[1,2,3,4,5].map(s=>e.jsxs("option",{value:s,children:[s," ",s===1?"φορά":"φορές","/εβδομάδα"]},s))})]})]}),e.jsxs("div",{className:"mt-3 text-sm text-purple-700 bg-purple-100 p-3 rounded-lg",children:[e.jsx("strong",{children:"📊 Σύνολο:"})," ",v," ατομικές σεσίες + ",ie," ",ie===1?"φορά":"φορές","/εβδομάδα ομαδικές"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:[e.jsxs("label",{className:"block text-lg font-bold text-blue-800 mb-4 flex items-center",children:["👤 ",l==="individual"?"Επιλογή Χρήστη":l==="combination"?"Επιλογή Χρήστη (Συνδυασμός)":"Επιλογή Χρηστών (Group)",(l==="individual"||l==="combination")&&e.jsxs("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded",children:["Selected: ",u.selectedUserId?"✅":"❌"]})]}),e.jsxs("div",{className:"flex space-x-3 mb-4",children:[e.jsx("button",{type:"button",onClick:()=>Be("dropdown"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${Ve==="dropdown"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"📋 Dropdown"}),e.jsx("button",{type:"button",onClick:()=>Be("search"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${Ve==="search"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🔍 Αναζήτηση"})]}),Ve==="dropdown"?l==="individual"||l==="combination"?e.jsxs("select",{className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700",value:u.selectedUserId,onChange:s=>{console.log("[AdminPanel] User selected:",s.target.value),J({...u,selectedUserId:s.target.value})},children:[e.jsx("option",{value:"",children:"-- Επιλέξτε χρήστη --"}),_.length>0?_.map(s=>e.jsxs("option",{value:s.id,children:[s.firstName," ",s.lastName," (",s.email,")"]},s.id)):e.jsx("option",{value:"",disabled:!0,children:"Δεν υπάρχουν χρήστες"})]}):e.jsx("div",{className:"max-h-48 overflow-y-auto border-2 border-blue-200 rounded-xl bg-white",children:te.length>0?te.map(s=>e.jsx("div",{className:`p-3 hover:bg-blue-50 cursor-pointer border-b border-blue-100 last:border-b-0 transition-all duration-200 ${i.includes(s.id)?"bg-blue-100 border-l-4 border-l-blue-500":""}`,onClick:()=>{i.includes(s.id)?S(t=>t.filter(a=>a!==s.id)):S(t=>[...t,s.id])},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:i.includes(s.id),onChange:()=>{},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:s.email})]})]})},s.id)):e.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Δεν υπάρχουν χρήστες"})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700 placeholder-gray-400",placeholder:"🔍 Αναζήτηση με όνομα ή email...",value:Te,onChange:s=>ds(s.target.value)}),Te&&e.jsx("div",{className:"max-h-48 overflow-y-auto border-2 border-blue-200 rounded-xl bg-white shadow-lg",children:wt.length>0?wt.map(s=>e.jsxs("div",{className:`p-4 hover:bg-blue-50 cursor-pointer border-b border-blue-100 last:border-b-0 transition-all duration-200 ${l==="individual"||l==="combination"?u.selectedUserId===s.id?"bg-blue-100 border-l-4 border-l-blue-500":"":i.includes(s.id)?"bg-blue-100 border-l-4 border-l-blue-500":""}`,onClick:()=>{l==="individual"||l==="combination"?J({...u,selectedUserId:s.id}):i.includes(s.id)?S(t=>t.filter(a=>a!==s.id)):S(t=>[...t,s.id])},children:[l==="group"&&e.jsx("input",{type:"checkbox",checked:i.includes(s.id),onChange:()=>{},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:s.email})]},s.id)):e.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Δεν βρέθηκαν χρήστες"})})]}),(l==="individual"||l==="combination"?u.selectedUserId:i.length>0)&&e.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm",children:"✓"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-green-800",children:["✅ ",l==="individual"||l==="combination"?"Επιλεγμένος:":"Επιλεγμένοι:"]}),l==="individual"||l==="combination"?e.jsxs("div",{className:"text-xs text-green-600",children:[(At=_.find(s=>s.id===u.selectedUserId))==null?void 0:At.firstName," ",(Ct=_.find(s=>s.id===u.selectedUserId))==null?void 0:Ct.lastName," (",($t=_.find(s=>s.id===u.selectedUserId))==null?void 0:$t.email,")"]}):e.jsxs("div",{className:"text-xs text-green-600",children:[i.map(s=>{const t=_.find(a=>a.id===s);return t?`${t.firstName} ${t.lastName}`:"Άγνωστος"}).join(", ")," (",i.length," χρήστες)"]})]})]})})]}),(l==="group"&&i.length>0||l==="combination"&&u.selectedUserId)&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 sm:p-6 border border-orange-200 mt-4",children:[e.jsxs("h4",{className:"text-lg sm:text-xl font-bold text-orange-800 mb-4 sm:mb-6 flex items-center",children:["🏠 ",l==="combination"?"Επιλογές Ομαδικής Αίθουσας (για Group Sessions)":"Επιλογές Ομαδικής Αίθουσας"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"text-purple-600",children:"💡"}),e.jsxs("div",{className:"text-sm text-purple-700",children:[e.jsx("strong",{children:"Νέα Λειτουργία:"})," Θα επιλέξετε το Group Size (2, 3, ή 6 άτομα) για κάθε σεσία ξεχωριστά στη Διαχείριση Ομαδικών Αναθέσεων"]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-orange-700 mb-3",children:"Πόσες φορές την εβδομάδα θα παρακολουθούν οι χρήστες;"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[1,2,3,4,5].map(s=>e.jsx("button",{type:"button",onClick:()=>B(s),className:`p-3 rounded-lg border-2 transition-all duration-200 ${F===s?"bg-orange-600 text-white border-orange-600 shadow-lg":"bg-white text-orange-600 border-orange-300 hover:border-orange-500"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold",children:s}),e.jsxs("div",{className:"text-xs opacity-75",children:[s===1?"φορά":"φορές","/εβδομάδα"]})]})},s))})]})}),P&&F&&e.jsx("div",{className:"bg-orange-100 border border-orange-300 rounded-lg p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-orange-700 mb-1",children:"Μηνιαίο Σύνολο"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-800",children:[q," συνεδρίες/μήνα"]}),e.jsxs("div",{className:"text-xs text-orange-600 mt-1",children:["(",F," φορές/εβδομάδα × 4 εβδομάδες)"]})]})}),P&&F&&e.jsx(ea,{selectedGroupRoom:P,weeklyFrequency:F,monthlyTotal:q,selectedUserIds:l==="combination"?[u.selectedUserId]:i,onSlotsChange:is})]})]}),(l==="individual"||l==="combination"?u.selectedUserId:i.length>0)&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 sm:p-6 border border-purple-200 mt-4",children:[e.jsx("h4",{className:"text-lg sm:text-xl font-bold text-purple-800 mb-4 sm:mb-6 flex items-center",children:"⚙️ Επιλογές Προγράμματος"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[!(l==="individual"||l==="combination"?ms.has(u.selectedUserId):i.some(s=>ms.has(s)))&&e.jsx("div",{className:`rounded-lg p-4 border ${(l==="individual"||l==="combination"?w(u.selectedUserId):i.some(s=>w(s)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:e.jsx("button",{type:"button",onClick:()=>{const s=l==="individual"||l==="combination"?[u.selectedUserId]:i;if(s.some(a=>w(a))){b("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Ie(a=>{const n={...a};return s.forEach(c=>{var p;n[c]={...n[c],oldMembers:!((p=n[c])!=null&&p.oldMembers)}}),n})},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 relative shadow-lg ${(l==="individual"||l==="combination")&&u.selectedUserId?w(u.selectedUserId)?(Dt=fe(u.selectedUserId))!=null&&Dt.oldMembers?"bg-green-500 text-white":"bg-blue-500 text-white":(Ut=je[u.selectedUserId])!=null&&Ut.oldMembers?"bg-green-500 text-white hover:bg-green-600":"bg-blue-500 text-white hover:bg-blue-600":i.some(s=>{var t;return(t=je[s])==null?void 0:t.oldMembers})?"bg-green-500 text-white hover:bg-green-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"👴 Παλαιά μέλη"}),((l==="individual"||l==="combination")&&u.selectedUserId?w(u.selectedUserId)?(Tt=fe(u.selectedUserId))==null?void 0:Tt.oldMembers:(Mt=je[u.selectedUserId])==null?void 0:Mt.oldMembers:i.some(s=>{var t;return(t=je[s])==null?void 0:t.oldMembers}))&&e.jsx("span",{className:"text-green-200",children:"✓"}),(l==="individual"?w(u.selectedUserId):i.some(s=>w(s)))&&e.jsx("span",{className:"text-yellow-600",children:"🔒"})]})})}),e.jsxs("div",{className:`rounded-lg p-4 border ${(l==="individual"||l==="combination"?w(u.selectedUserId):i.some(s=>w(s)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["🏋️‍♂️ Kettlebell Points",(l==="individual"||l==="combination"?w(u.selectedUserId):i.some(s=>w(s)))&&e.jsx("span",{className:"text-yellow-600 ml-2",children:"🔒"})]}),e.jsx("input",{type:"number",value:(l==="individual"||l==="combination")&&u.selectedUserId&&w(u.selectedUserId)?((It=fe(u.selectedUserId))==null?void 0:It.kettlebellPoints)||"":gs,onChange:s=>{const t=l==="individual"?[u.selectedUserId]:i;if(t.some(n=>w(n))){b("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Me(s.target.value),Ie(n=>{const c={...n};return t.forEach(p=>{c[p]={...c[p],kettlebellPoints:s.target.value}}),c})},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${(l==="individual"?w(u.selectedUserId):i.some(s=>w(s)))?"border-yellow-300 bg-yellow-50 focus:ring-yellow-500":"border-gray-300 focus:ring-purple-500 focus:border-purple-500"}`,placeholder:"Εισάγετε αριθμό...",disabled:l==="individual"||l==="combination"?w(u.selectedUserId):i.some(s=>w(s))})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${(l==="individual"||l==="combination"?w(u.selectedUserId):i.some(s=>w(s)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["💰 Μετρητά (€)",(l==="individual"||l==="combination"?w(u.selectedUserId):i.some(s=>w(s)))&&e.jsx("span",{className:"text-yellow-600 ml-2",children:"🔒"})]}),Qe?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",step:"0.01",min:"0",value:(l==="individual"||l==="combination")&&u.selectedUserId&&w(u.selectedUserId)?((Rt=(Lt=fe(u.selectedUserId))==null?void 0:Lt.cashAmount)==null?void 0:Rt.toString())||"":_e,onChange:s=>{if((l==="individual"||l==="combination"?[u.selectedUserId]:i).some(n=>w(n))){b("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Ee(s.target.value)},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${(l==="individual"?w(u.selectedUserId):i.some(s=>w(s)))?"border-yellow-300 bg-yellow-50 focus:ring-yellow-500":"border-gray-300 focus:ring-green-500 focus:border-green-500"}`,placeholder:"Εισάγετε ποσό σε €...",autoFocus:!0,disabled:l==="individual"||l==="combination"?w(u.selectedUserId):i.some(s=>w(s))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{const s=l==="individual"||l==="combination"?[u.selectedUserId]:i;if(s.some(a=>w(a))){b("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}_e&&parseFloat(_e)>0&&(Ie(a=>{const n={...a};return s.forEach(c=>{n[c]={...n[c],cash:!0,cashAmount:parseFloat(_e)}}),n}),b.success(`Μετρητά €${_e} προστέθηκαν! Θα αποθηκευτούν με το Save.`)),hs(!1),Ee("")},className:`flex-1 px-3 py-2 text-white rounded-lg transition-colors text-sm ${(l==="individual"||l==="combination")&&u.selectedUserId?w(u.selectedUserId)?(Gt=fe(u.selectedUserId))!=null&&Gt.cash?"bg-green-600 cursor-not-allowed":"bg-yellow-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700":i.some(s=>w(s))?"bg-yellow-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,disabled:l==="individual"||l==="combination"?w(u.selectedUserId):i.some(s=>w(s)),children:"✓ Επιλογή"}),e.jsx("button",{type:"button",onClick:()=>{hs(!1),Ee("")},className:"flex-1 px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:"Ακύρωση"})]})]}):e.jsx("button",{type:"button",onClick:()=>{if((l==="individual"||l==="combination"?[u.selectedUserId]:i).some(a=>w(a))){b("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}hs(!0)},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 shadow-lg ${(l==="individual"||l==="combination")&&u.selectedUserId?w(u.selectedUserId)?(Et=fe(u.selectedUserId))!=null&&Et.cash?"bg-green-500 text-white cursor-not-allowed":"bg-yellow-500 text-white cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600":i.some(s=>w(s))?"bg-yellow-500 text-white cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,disabled:l==="individual"||l==="combination"?w(u.selectedUserId):i.some(s=>w(s)),children:"💰 Μετρητά"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${(l==="individual"||l==="combination"?w(u.selectedUserId):i.some(s=>w(s)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["💳 POS (€)",(l==="individual"||l==="combination"?w(u.selectedUserId):i.some(s=>w(s)))&&e.jsx("span",{className:"text-yellow-600 ml-2",children:"🔒"})]}),Js?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",step:"0.01",min:"0",value:(l==="individual"||l==="combination")&&u.selectedUserId&&w(u.selectedUserId)?((zt=(Ft=fe(u.selectedUserId))==null?void 0:Ft.posAmount)==null?void 0:zt.toString())||"":Pe,onChange:s=>{if((l==="individual"||l==="combination"?[u.selectedUserId]:i).some(n=>w(n))){b("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}L(s.target.value)},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${(l==="individual"?w(u.selectedUserId):i.some(s=>w(s)))?"border-yellow-300 bg-yellow-50 focus:ring-yellow-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Εισάγετε ποσό σε €...",autoFocus:!0,disabled:l==="individual"||l==="combination"?w(u.selectedUserId):i.some(s=>w(s))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{const s=l==="individual"||l==="combination"?[u.selectedUserId]:i;if(s.some(a=>w(a))){b("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Pe&&parseFloat(Pe)>0&&(Ie(a=>{const n={...a};return s.forEach(c=>{n[c]={...n[c],pos:!0,posAmount:parseFloat(Pe)}}),n}),b.success(`POS €${Pe} προστέθηκε! Θα αποθηκευτεί με το Save.`)),ps(!1),L("")},className:`flex-1 px-3 py-2 text-white rounded-lg transition-colors text-sm ${(l==="individual"||l==="combination")&&u.selectedUserId?w(u.selectedUserId)?(Kt=fe(u.selectedUserId))!=null&&Kt.pos?"bg-blue-600 cursor-not-allowed":"bg-yellow-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700":i.some(s=>w(s))?"bg-yellow-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,disabled:l==="individual"||l==="combination"?w(u.selectedUserId):i.some(s=>w(s)),children:"✓ Επιλογή"}),e.jsx("button",{type:"button",onClick:()=>{ps(!1),L("")},className:"flex-1 px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:"Ακύρωση"})]})]}):e.jsx("button",{type:"button",onClick:()=>{if((l==="individual"||l==="combination"?[u.selectedUserId]:i).some(a=>w(a))){b("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}ps(!0)},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 shadow-lg ${(l==="individual"||l==="combination")&&u.selectedUserId?w(u.selectedUserId)?(Ot=fe(u.selectedUserId))!=null&&Ot.pos?"bg-blue-500 text-white cursor-not-allowed":"bg-yellow-500 text-white cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600":i.some(s=>w(s))?"bg-yellow-500 text-white cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,disabled:l==="individual"||l==="combination"?w(u.selectedUserId):i.some(s=>w(s)),children:"💳 POS"})]}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsx("button",{type:"button",onClick:()=>{Xe("approved")},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${xe==="approved"?"bg-green-600 text-white shadow-lg":"bg-green-500 text-white hover:bg-green-600 shadow-lg"}`,children:"✅ Έγκριση"})}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsx("button",{type:"button",onClick:()=>{Xe("rejected")},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${xe==="rejected"?"bg-red-600 text-white shadow-lg":"bg-red-500 text-white hover:bg-red-600 shadow-lg"}`,children:"❌ Απόρριψη"})}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsx("button",{type:"button",onClick:()=>{Xe("pending")},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${xe==="pending"?"bg-yellow-600 text-white shadow-lg":"bg-yellow-500 text-white hover:bg-yellow-600 shadow-lg"}`,children:"⏳ Στην Αναμονή"})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("button",{type:"button",onClick:qr,disabled:xe==="none"||y,className:`w-full px-6 py-4 rounded-lg font-bold text-lg transition-all duration-200 ${xe==="none"||y?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:from-purple-700 hover:to-indigo-700 shadow-lg hover:shadow-xl"}`,children:y?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(As,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Αποθήκευση..."})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Oe,{className:"h-5 w-5"}),e.jsx("span",{children:"💾 Αποθήκευση Program Options"})]})}),xe==="none"&&e.jsx("p",{className:"text-sm text-gray-600 mt-2 text-center",children:"Επιλέξτε Έγκριση, Απόρριψη ή Στην Αναμονή για να αποθηκεύσετε"})]})]})]}),l!=="group"&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-4 sm:p-6 border border-orange-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsxs("h4",{className:"text-lg sm:text-xl font-bold text-orange-800 flex items-center",children:["🏋️‍♂️ Προσωποποιημένο Πρόγραμμα",l==="combination"&&e.jsx("span",{className:"ml-2 text-sm bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"Personal Sessions"})]}),e.jsxs("div",{className:`text-sm px-3 py-2 rounded-lg ${l==="combination"&&ye.length>v?"bg-red-100 text-red-700 border border-red-300":"text-gray-600 bg-gray-100"}`,children:["📊 Σύνολο: ",ye.length," σεσίας",l==="combination"&&e.jsxs("span",{className:`ml-2 ${ye.length>v?"text-red-600":"text-purple-600"}`,children:["(",v," θα χρησιμοποιηθούν)",ye.length>v&&e.jsx("span",{className:"ml-1 font-bold",children:"⚠️ Περισσότερες από όσες θα χρησιμοποιηθούν!"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-gray-300 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 border-b-2 border-gray-400",children:e.jsxs("div",{className:`grid gap-0 text-sm font-bold text-gray-800 ${l==="individual"?"grid-cols-7":"grid-cols-8"}`,children:[e.jsx("div",{className:"col-span-1 text-center py-3 border-r border-gray-300 bg-gray-200",children:"#"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"📅 Ημερομηνία"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"🕐 Έναρξη"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"🕕 Λήξη"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"💪 Τύπος"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"🏠 Αίθουσα"}),l!=="individual"&&e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"👥 Group"}),e.jsx("div",{className:"col-span-1 py-3 px-2",children:"👨‍🏫 Προπονητής"})]})}),e.jsx("div",{className:"divide-y divide-gray-300",children:ye.map((s,t)=>e.jsxs("div",{className:`grid gap-0 hover:bg-blue-50 transition-colors ${l==="individual"?"grid-cols-7":"grid-cols-8"}`,children:[e.jsxs("div",{className:"col-span-1 flex items-center justify-center space-x-2 py-3 border-r border-gray-300 bg-gray-50",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700",children:t+1}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("button",{onClick:()=>pe(a=>a.filter((n,c)=>c!==t)),className:"text-red-600 hover:text-red-800 p-1 text-xs bg-red-100 rounded hover:bg-red-200",title:"Διαγραφή Σέσιας",children:e.jsx(Cs,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>pe(a=>{const n={...s,id:`tmp-${Date.now()}`};return[...a.slice(0,t+1),n,...a.slice(t+1)]}),className:"text-blue-600 hover:text-blue-800 p-1 text-xs bg-blue-100 rounded hover:bg-blue-200",title:"Αντιγραφή Σέσιας",children:e.jsx($s,{className:"h-3 w-3"})})]})]}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsx("input",{type:"date",className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.date,onChange:a=>pe(n=>n.map((c,p)=>p===t?{...c,date:a.target.value}:c))})}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsx("input",{type:"time",className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.startTime,onChange:a=>pe(n=>n.map((c,p)=>p===t?{...c,startTime:a.target.value}:c))})}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsx("input",{type:"time",className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.endTime,onChange:a=>pe(n=>n.map((c,p)=>p===t?{...c,endTime:a.target.value}:c))})}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsxs("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.type,onChange:a=>pe(n=>n.map((c,p)=>p===t?{...c,type:a.target.value}:c)),children:[e.jsx("option",{value:"personal",children:"Προσωπική"}),e.jsx("option",{value:"kickboxing",children:"Kick Boxing"}),e.jsx("option",{value:"combo",children:"Combo"})]})}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsxs("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.room,onChange:a=>pe(n=>n.map((c,p)=>p===t?{...c,room:a.target.value}:c)),children:[e.jsx("option",{value:"Αίθουσα Mike",children:"Αίθουσα Mike"}),e.jsx("option",{value:"Αίθουσα Jordan",children:"Αίθουσα Jordan"})]})}),l!=="individual"&&e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:l==="combination"?e.jsx("div",{className:"w-full px-2 py-2 text-sm border-2 border-gray-200 rounded bg-gray-100 text-gray-600 font-medium",children:"🔒 1 άτομο (Ατομική)"}):e.jsxs("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.group||"",onChange:a=>pe(n=>n.map((c,p)=>p===t?{...c,group:a.target.value}:c)),children:[e.jsx("option",{value:"",children:"Επιλέξτε Group"}),e.jsx("option",{value:"2ΑτομαGroup",children:"2ΑτομαGroup"}),e.jsx("option",{value:"3ΑτομαGroup",children:"3ΑτομαGroup"}),e.jsx("option",{value:"6ΑτομαGroup",children:"6ΑτομαGroup"})]})}),e.jsx("div",{className:"col-span-1 p-2",children:e.jsx("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.trainer,onChange:a=>pe(n=>n.map((c,p)=>p===t?{...c,trainer:a.target.value}:c)),children:Tr.map(a=>e.jsx("option",{value:a,children:a},a))})})]},s.id))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mt-4 space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-medium flex items-center justify-center",onClick:()=>{if(l==="combination"&&ye.length>=v){b.error(`Για συνδυασμένο πρόγραμμα μπορείτε να έχετε μέγιστο ${v} ατομικές σεσίες`);return}pe(s=>{var t;return[...s,{id:`tmp-${Date.now()}`,date:new Date().toISOString().split("T")[0],startTime:"19:00",endTime:"20:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:l==="combination"?void 0:"2ΑτομαGroup",notes:((t=s[0])==null?void 0:t.notes)||""}]})},children:"➕ Προσθήκη Σέσιας"}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium flex items-center justify-center",onClick:()=>{var t;if(l==="combination"&&ye.length>=v){b.error(`Για συνδυασμένο πρόγραμμα μπορείτε να έχετε μέγιστο ${v} ατομικές σεσίες`);return}const s={id:`tmp-${Date.now()}`,date:new Date().toISOString().split("T")[0],startTime:"19:00",endTime:"20:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:((t=ye[0])==null?void 0:t.notes)||""};pe(a=>[...a,s])},children:"📋 Αντιγραφή Τελευταίας"}),ye.length>1&&e.jsx("button",{type:"button",className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium flex items-center justify-center",onClick:()=>pe(s=>s.slice(0,-1)),children:"➖ Διαγραφή Τελευταίας"})]}),e.jsx("div",{className:"text-center sm:text-right",children:e.jsx("div",{className:"text-xs text-gray-500",children:"💡 Κάντε κλικ στα κελιά για επεξεργασία • Χρησιμοποιήστε τα κουμπιά για διαχείριση"})})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>T(!1),className:"flex-1 px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 transition-all duration-200 font-semibold shadow-lg",children:"❌ Ακύρωση"}),e.jsxs("button",{onClick:()=>{console.log("[AdminPanel] Button clicked - trainingType:",l,"selectedUserId:",u.selectedUserId),sl()},disabled:l==="individual"||l==="combination"?!u.selectedUserId:i.length===0,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-200 font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-green-500 disabled:hover:to-emerald-500",title:l==="individual"||l==="combination"?u.selectedUserId?"Δημιουργία Προγράμματος":"Παρακαλώ επιλέξτε χρήστη":i.length===0?"Παρακαλώ επιλέξτε χρήστες":"Δημιουργία Προγράμματος",children:["✅ Δημιουργία Προγράμματος",(l==="individual"||l==="combination")&&!u.selectedUserId&&e.jsx("span",{className:"ml-2 text-xs opacity-75",children:"(Επιλέξτε χρήστη)"})]})]})]})]})}),De&&ze&&ns&&F&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Διαχείριση Ομαδικών Αναθέσεων"}),e.jsx("button",{onClick:()=>{os(!1),Ke(null),We(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(as,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"p-6",children:e.jsx(ql,{selectedUser:ze,programId:ns,weeklyFrequency:F,onAssignmentComplete:()=>{const s=i.findIndex(t=>t===ze.id);if(s<i.length-1){const t=i[s+1],a=_.find(n=>n.id===t);a&&R.from("personal_training_schedules").select("id").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(1).then(({data:n})=>{n&&n.length>0&&(Ke(a),We(n[0].id),b.success(`Μετάβαση στον επόμενο χρήστη: ${a.firstName} ${a.lastName}`))})}else b.success("Όλες οι αναθέσεις ολοκληρώθηκαν!"),os(!1),Ke(null),We(null)}})})]})}),g==="ultimate-subscriptions"&&!y&&e.jsx(ta,{fallback:e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"bg-red-100 rounded-full p-6 w-24 h-24 mx-auto mb-6",children:e.jsx(bt,{className:"h-12 w-12 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Σφάλμα στη φόρτωση Ultimate Συνδρομών"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Παρουσιάστηκε ένα σφάλμα. Παρακαλώ ανανεώστε τη σελίδα ή δοκιμάστε ξανά."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium",children:"Ανανέωση Σελίδας"})]}),children:e.jsx("div",{className:"space-y-6",children:e.jsx(sa,{ultimateRequests:Ye,ultimateLoading:Ze,ultimateSearchTerm:Is,setUltimateSearchTerm:Es,selectedRequestOptions:H,handleRequestOptionChange:ge,updateInstallmentAmounts:yl,deleteUltimateRequest:hl,loadUltimateRequests:Re,handleApproveRequest:pl,handleRejectRequest:fl,loading:y,requestProgramApprovalStatus:ts,handleRequestProgramApprovalChange:Fs,handleSaveRequestProgramOptions:kt,requestPendingUsers:Rs,requestFrozenOptions:Gs})})})]})};export{ya as default};
