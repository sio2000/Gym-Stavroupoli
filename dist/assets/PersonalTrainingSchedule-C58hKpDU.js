const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/groupTrainingCalendarApi-B0D_qXf3.js","assets/index-CFMUBE6X.js","assets/index-Cr85AvQg.css"])))=>i.map(i=>d[i]);
import{d as le,s as d,u as oe,r as c,z as _,j as e,m as ce,o as h,U as A,M as V,b as j,D as Z,e as de,q as J,x as me,_ as xe}from"./index-CFMUBE6X.js";import{a as ue,k as ge,c as pe,f as Y}from"./groupAssignmentApi-Da9ehAQ-.js";import{B as ee}from"./book-open-Cfp6joXW.js";import{Z as he}from"./zap-CPm5Y5D0.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ye=async(r,t)=>{var b,E,U,p,L,N,v,C,z,T;try{console.log("[UserBookingDisplayAPI] Fetching user bookings with room data...",{userId:r,scheduleId:t});let x=d.from("lesson_bookings").select(`
        id,
        session_id,
        booking_date,
        booking_time,
        trainer_name,
        room,
        status,
        schedule_id,
        user_profiles!lesson_bookings_user_id_fkey(
          user_id,
          first_name,
          last_name,
          email
        ),
        personal_training_schedules!lesson_bookings_schedule_id_fkey(
          training_type,
          user_type,
          group_room_size
        )
      `).eq("user_id",r).eq("status","booked").order("booking_date",{ascending:!0}).order("booking_time",{ascending:!0});t&&(x=x.eq("schedule_id",t));const{data:y,error:w}=await x;if(w)return console.error("[UserBookingDisplayAPI] Error fetching user bookings:",w),[];if(!y||y.length===0)return console.log("[UserBookingDisplayAPI] No bookings found for user"),[];console.log("[UserBookingDisplayAPI] Found user bookings:",y.length);const k=[];for(const i of y)try{const B=((b=i.personal_training_schedules)==null?void 0:b.training_type)==="individual",G=((E=i.personal_training_schedules)==null?void 0:E.training_type)==="group"&&((U=i.personal_training_schedules)==null?void 0:U.user_type)==="paspartu",F=((p=i.personal_training_schedules)==null?void 0:p.training_type)==="group"&&((L=i.personal_training_schedules)==null?void 0:L.user_type)==="personal";let m,u;if(B)m="individual",u=1;else if(G)m="group-paspartu",u=((N=i.personal_training_schedules)==null?void 0:N.group_room_size)||3;else if(F)m="group-personal",u=((v=i.personal_training_schedules)==null?void 0:v.group_room_size)||3;else continue;if(m==="group-paspartu"||m==="group-personal")try{const{data:f,error:q}=await d.from("group_sessions").select("group_type").eq("session_date",i.booking_date).eq("start_time",i.booking_time).eq("trainer",i.trainer_name).eq("room",i.room).eq("is_active",!0).limit(1).single();!q&&f&&(u=f.group_type||u,console.log("[UserBookingDisplayAPI] Found corresponding session, using capacity:",u))}catch{console.log("[UserBookingDisplayAPI] No corresponding session found, using fallback capacity:",u)}const{data:g,error:H}=await d.from("lesson_bookings").select("id").eq("booking_date",i.booking_date).eq("booking_time",i.booking_time).eq("trainer_name",i.trainer_name).eq("room",i.room).eq("status","booked");let R=1;if(!H&&g&&(R=g.length),m==="group-paspartu"||m==="group-personal"){const{data:f,error:q}=await d.from("group_sessions").select("id").eq("session_date",i.booking_date).eq("start_time",i.booking_time).eq("trainer",i.trainer_name).eq("room",i.room).eq("is_active",!0);!q&&f&&(R+=f.length)}const M={id:i.id,session_id:i.session_id,booking_date:i.booking_date,booking_time:i.booking_time,trainer_name:i.trainer_name,room:i.room,status:i.status,room_name:i.room||null,participants_count:R,capacity:u,session_type:m,user_name:`${((C=i.user_profiles)==null?void 0:C.first_name)||""} ${((z=i.user_profiles)==null?void 0:z.last_name)||""}`.trim(),user_email:((T=i.user_profiles)==null?void 0:T.email)||""};k.push(M),console.log("[UserBookingDisplayAPI] Processed booking:",{id:i.id,date:i.booking_date,time:i.booking_time,room:i.room,sessionType:m,capacity:u,participantsCount:R})}catch(B){console.error("[UserBookingDisplayAPI] Error processing booking:",i.id,B)}return console.log("[UserBookingDisplayAPI] Processed bookings with room data:",k.length),k}catch(x){return console.error("[UserBookingDisplayAPI] Error fetching user bookings with room data:",x),[]}},Ne=()=>{console.log("[PersonalTrainingSchedule] Component rendering");const{user:r}=oe();console.log("[PersonalTrainingSchedule] User from useAuth:",r==null?void 0:r.email,"ID:",r==null?void 0:r.id);const[t,b]=c.useState(null),[E,U]=c.useState([]),[p,L]=c.useState([]),[N,v]=c.useState(!0),[C,z]=c.useState(!1),[T,x]=c.useState(!1),y=c.useRef(!1),[w,k]=c.useState(null),[i,B]=c.useState(null),[G,F]=c.useState({}),[m,u]=c.useState([]),[g,H]=c.useState(!0),R=["ÎšÏ…ÏÎ¹Î±ÎºÎ®","Î”ÎµÏ…Ï„Î­ÏÎ±","Î¤ÏÎ¯Ï„Î·","Î¤ÎµÏ„Î¬ÏÏ„Î·","Î Î­Î¼Ï€Ï„Î·","Î Î±ÏÎ±ÏƒÎºÎµÏ…Î®","Î£Î¬Î²Î²Î±Ï„Î¿"];c.useEffect(()=>{if(console.log("[PersonalTrainingSchedule] ===== USEEFFECT TRIGGERED ====="),console.log("[PersonalTrainingSchedule] User:",r==null?void 0:r.email,"ID:",r==null?void 0:r.id),console.log("[PersonalTrainingSchedule] User object:",r),console.log("[PersonalTrainingSchedule] hasLoadedRef.current:",y.current),console.log("[PersonalTrainingSchedule] isLoading:",T),console.log("[PersonalTrainingSchedule] loading state:",N),w&&(console.log("[PersonalTrainingSchedule] Clearing existing timeout"),clearTimeout(w),k(null)),!r){console.log("[PersonalTrainingSchedule] No user, resetting hasLoadedRef and stopping loading"),y.current=!1,v(!1);return}if(y.current){console.log("[PersonalTrainingSchedule] Already loaded for this user, skipping");return}console.log("[PersonalTrainingSchedule] Starting load for user:",r.email),y.current=!0,M(),console.log("[PersonalTrainingSchedule] Setting 10 second timeout");const s=setTimeout(()=>{console.warn("[PersonalTrainingSchedule] Load timeout reached, stopping loading"),v(!1),x(!1)},1e4);return k(s),()=>{console.log("[PersonalTrainingSchedule] useEffect cleanup"),s&&clearTimeout(s)}},[r]);const M=async()=>{if(console.log("[PersonalTrainingSchedule] ===== LOADING STARTED ====="),console.log("[PersonalTrainingSchedule] User ID:",r==null?void 0:r.id),console.log("[PersonalTrainingSchedule] User email:",r==null?void 0:r.email),T){console.log("[PersonalTrainingSchedule] Already loading, skipping...");return}x(!0);try{if(v(!0),!(r!=null&&r.id)){console.error("[PersonalTrainingSchedule] No user ID found"),_.error("Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚. ÎšÎ¬Î½Ï„Îµ ÎµÏ€Î±Î½Î±ÏƒÏÎ½Î´ÎµÏƒÎ·."),b(null);return}console.log("[PersonalTrainingSchedule] Querying personal_training_schedules...");const{data:s,error:l}=await d.from("personal_training_schedules").select("id,user_id,month,year,schedule_data,status,created_by,created_at,updated_at,trainer_name,accepted_at,declined_at,training_type,group_room_size,weekly_frequency,user_type,is_flexible").eq("user_id",r.id).order("created_at",{ascending:!1}).limit(1);if(console.log("[PersonalTrainingSchedule] Query result - data:",s,"error:",l),l){console.error("[PersonalTrainingSchedule] Query error:",l),_.error(`Î£Ï†Î¬Î»Î¼Î± Î²Î¬ÏƒÎ·Ï‚ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½: ${l.message}`),b(null);return}if(s&&s.length>0){console.log("[PersonalTrainingSchedule] Found schedule data:",s[0]);const a=s[0],n={id:a.id,userId:a.user_id,month:a.month,year:a.year,scheduleData:a.schedule_data,status:a.status,createdBy:a.created_by,createdAt:a.created_at,updatedAt:a.updated_at,acceptedAt:a.accepted_at,declinedAt:a.declined_at,trainingType:a.training_type,groupRoomSize:a.group_room_size,weeklyFrequency:a.weekly_frequency,userType:a.user_type,isFlexible:a.is_flexible};if(console.log("[PersonalTrainingSchedule] Loaded schedule:",n),console.log("[PersonalTrainingSchedule] Schedule details for combination check:",{trainingType:n.trainingType,userType:n.userType,id:n.id,status:n.status,fullObject:n}),n.trainingType==="group")try{const o=await ue(r.id,n.id);U(o),console.log("[PersonalTrainingSchedule] Loaded group assignments:",o)}catch(o){console.error("[PersonalTrainingSchedule] Error loading group assignments:",o)}if(console.log("[PersonalTrainingSchedule] Checking group sessions condition...",{trainingType:n.trainingType,userType:n.userType,isGroup:n.trainingType==="group",isCombination:n.trainingType==="combination",isPersonal:n.userType==="personal",isCombinationProgram:n.trainingType==="combination"&&n.userType==="personal",isPureGroupProgram:n.trainingType==="group"}),n.trainingType==="combination"&&n.userType==="personal"||n.trainingType==="group")try{console.log("[PersonalTrainingSchedule] Loading group sessions...",{userId:r.id,programId:n.id,programType:n.trainingType,userType:n.userType});const o=await ge(r.id,n.id);L(o),console.log("[PersonalTrainingSchedule] Loaded group sessions:",o),console.log("[PersonalTrainingSchedule] Group sessions count:",o.length)}catch(o){console.error("[PersonalTrainingSchedule] Error loading group sessions:",o)}else console.log("[PersonalTrainingSchedule] Not a group or combination program, skipping group sessions load");if(n.status==="pending")try{const o=new Date().toISOString(),{error:P}=await d.from("personal_training_schedules").update({status:"accepted",accepted_at:o,updated_at:o}).eq("id",n.id);P?console.error("[PersonalTrainingSchedule] Auto-accept update error:",P):(n.status="accepted",n.acceptedAt=o,n.updatedAt=o)}catch(o){console.error("[PersonalTrainingSchedule] Auto-accept exception:",o)}b(n),n.userType==="paspartu"&&await q(r.id,n.id),g&&(n.trainingType==="group"||n.trainingType==="combination"&&n.userType==="paspartu")&&await f(r.id,n.id)}else console.log("[PersonalTrainingSchedule] No schedule found for user"),b(null)}catch(s){console.error("[PersonalTrainingSchedule] Exception while loading schedule:",s),_.error("Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î· Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Î¿Ï… Ï€ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚"),b(null)}finally{console.log("[PersonalTrainingSchedule] ===== LOADING COMPLETED ====="),v(!1),x(!1),w&&(clearTimeout(w),k(null))}},f=async(s,l)=>{try{console.log("[PersonalTrainingSchedule] Loading user bookings with room data...");const a=await ye(s,l);u(a),console.log("[PersonalTrainingSchedule] Loaded bookings with room data:",a.length)}catch(a){console.error("[PersonalTrainingSchedule] Error loading bookings with room data:",a)}},q=async(s,l)=>{try{let{data:a,error:n}=await d.from("lesson_deposits").select("total_lessons, used_lessons, remaining_lessons").eq("user_id",s).single();if(n||!a){try{await d.rpc("reset_lesson_deposit_for_new_program",{p_user_id:s,p_total_lessons:5,p_created_by:s})}catch(D){console.warn("[PersonalTrainingSchedule] RPC reset_lesson_deposit_for_new_program failed or not available",D)}a=(await d.from("lesson_deposits").select("total_lessons, used_lessons, remaining_lessons").eq("user_id",s).single()).data}a&&B(a);const{data:o,error:P}=await d.from("lesson_bookings").select("id, session_id, status").eq("user_id",s).eq("schedule_id",l).in("status",["booked","completed"]);if(!P&&o){const S={};o.forEach(D=>{S[D.session_id]=D}),F(S)}}catch(a){console.error("[PersonalTrainingSchedule] Paspartu context load error:",a)}},K=async s=>{const{data:l}=await d.from("lesson_deposits").select("total_lessons, used_lessons, remaining_lessons").eq("user_id",s).single();return l},W=()=>i?(i.remaining_lessons||0)>0:!1,ae=s=>g?m.find(a=>a.session_id===s.id||a.booking_date===s.date&&a.booking_time===s.startTime+":00"&&a.trainer_name===s.trainer):null,re=async s=>{if(!(!(r!=null&&r.id)||!t)){if(!W()){_.error("Î”ÎµÎ½ Î­Ï‡ÎµÏ„Îµ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î± Î¼Î±Î¸Î®Î¼Î±Ï„Î± (Paspartu).");return}if(G[s.id]){_("ÎˆÏ‡ÎµÎ¹ Î®Î´Î· Î³Î¯Î½ÎµÎ¹ ÎºÏÎ¬Ï„Î·ÏƒÎ· Î³Î¹Î± Î±Ï…Ï„Î® Ï„Î· ÏƒÎµÏƒÎ¯Î±.");return}try{x(!0);const{validateIndividualPaspartuBooking:l}=await xe(async()=>{const{validateIndividualPaspartuBooking:Q}=await import("./groupTrainingCalendarApi-B0D_qXf3.js");return{validateIndividualPaspartuBooking:Q}},__vite__mapDeps([0,1,2])),a=await l(s.date,s.startTime+":00",s.trainer,s.room||"Î‘Î¯Î¸Î¿Ï…ÏƒÎ± Mike",r.id,t.id);if(!a.canBook){_.error(a.error||"This session is already full. Please choose another available time slot.");return}const n=await K(r.id),o=(n==null?void 0:n.remaining_lessons)??null,{error:P}=await d.from("lesson_bookings").insert({user_id:r.id,schedule_id:t.id,session_id:s.id,booking_date:s.date,booking_time:s.startTime+":00",trainer_name:s.trainer,room:s.room||null,status:"booked"});if(P)throw P;const S=await K(r.id),D=(S==null?void 0:S.remaining_lessons)??null;if(o!==null&&D!==null&&o===D){const Q=((n==null?void 0:n.used_lessons)||0)+1,{error:X}=await d.rpc("update_lesson_deposit_manual",{p_user_id:r.id,p_used_lessons:Q});X&&console.warn("[PersonalTrainingSchedule] RPC manual deposit update failed:",X)}await q(r.id,t.id),g&&await f(r.id,t.id),_.success("Î— ÎºÏÎ¬Ï„Î·ÏƒÎ· ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ®Î¸Î·ÎºÎµ!")}catch(l){console.error("[PersonalTrainingSchedule] Book paspartu error:",l),_.error("Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ ÎºÏÎ¬Ï„Î·ÏƒÎ·.")}finally{x(!1)}}},O=s=>{switch(s){case"personal":return e.jsx(Z,{className:"h-5 w-5 text-blue-600"});case"kickboxing":return e.jsx(he,{className:"h-5 w-5 text-red-600"});case"combo":return e.jsx(me,{className:"h-5 w-5 text-green-600"});default:return e.jsx(Z,{className:"h-5 w-5 text-gray-600"})}},$=s=>{switch(s){case"personal":return"Personal Training";case"kickboxing":return"Kick Boxing";case"combo":return"Combo Training";default:return s}},te=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-green-100 text-green-800";case"declined":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ne=s=>{switch(s){case"pending":return"Î•ÎºÎºÏÎµÎ¼ÎµÎ¯ Î‘Ï€ÏŒÏ†Î±ÏƒÎ·";case"accepted":return"Î‘Ï€Î¿Î´ÎµÎºÏ„ÏŒ";case"declined":return"Î‘Ï€Î¿ÏÏÎ¯Ï†Î¸Î·ÎºÎµ";default:return s}},ie=s=>{if(!s)return new Date(NaN);if(/^\d{4}-\d{2}-\d{2}$/.test(s)){const[a,n,o]=s.split("-").map(Number);return new Date(a,n-1,o,12,0,0,0)}const l=s.match(/^(\d{4}-\d{2}-\d{2})/);if(l){const[a,n,o]=l[1].split("-").map(Number);return new Date(a,n-1,o,12,0,0,0)}return new Date(s)},I=s=>ie(s).toLocaleDateString("el-GR",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return console.log("[PersonalTrainingSchedule] Rendering - loading:",N,"user:",r==null?void 0:r.email,"schedule:",!!t),N?(console.log("[PersonalTrainingSchedule] Rendering loading screen"),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Ï€ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚..."}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["User: ",(r==null?void 0:r.email)||"No user"]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Loading state: ",N?"true":"false"]})]})})):t?e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Personal Training",t.trainingType==="group"&&t.userType==="paspartu"&&e.jsxs("span",{className:"ml-2 text-lg text-blue-600",children:["(ÎŸÎ¼Î±Î´Î¹ÎºÏŒ - ",t.groupRoomSize," Î¬Ï„Î¿Î¼Î±)"]}),t.trainingType==="combination"&&t.userType==="personal"&&e.jsx("span",{className:"ml-2 text-lg text-blue-600",children:"(ÎŸÎ¼Î±Î´Î¹ÎºÏŒ)"})]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[R[t.month-1]," ",t.year,t.trainingType==="group"&&t.weeklyFrequency&&e.jsxs("span",{className:"ml-2 text-blue-600",children:["â€¢ ",t.weeklyFrequency," Ï†Î¿ÏÎ­Ï‚/ÎµÎ²Î´Î¿Î¼Î¬Î´Î±"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[t.trainingType==="group"&&e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:"ğŸ‘¥ Group Training"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${te(t.status)}`,children:ne(t.status)})]})]})}),t.trainingType==="group"&&E.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(h,{className:"h-5 w-5 mr-2 text-blue-600"}),"ÎŸÎ¹ ÎŸÎ¼Î±Î´Î¹ÎºÎ­Ï‚ ÏƒÎ±Ï‚ Î˜Î­ÏƒÎµÎ¹Ï‚"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.map(s=>e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900",children:pe(s.dayOfWeek)}),e.jsxs("p",{className:"text-sm text-blue-700",children:[Y(s.startTime)," - ",Y(s.endTime)]})]}),e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:["ğŸ‘¥ ",s.groupType," Î¬Ï„Î¿Î¼Î±"]})]}),e.jsxs("div",{className:"space-y-1 text-sm text-blue-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Î ÏÎ¿Ï€Î¿Î½Î·Ï„Î®Ï‚: ",s.trainer]}),s.room&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),s.room]})]}),s.notes&&e.jsxs("div",{className:"mt-2 text-xs text-blue-600 bg-blue-100 rounded p-2",children:["ğŸ’¬ ",s.notes]})]},s.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:t.trainingType==="combination"&&t.userType==="personal"?"ğŸ“… Î ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½ÎµÏ‚ Î£ÎµÏƒÎ¯ÎµÏ‚":"Î ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½ÎµÏ‚ Î£ÎµÏƒÎ¯ÎµÏ‚"}),t.trainingType==="combination"&&t.userType==="personal"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[e.jsx(h,{className:"h-4 w-4 mr-2 text-blue-600"}),"ÎŸÎ¼Î±Î´Î¹ÎºÎ­Ï‚ Î£ÎµÏƒÎ¯ÎµÏ‚ (",p.length,")"]}),p.length===0?e.jsxs("div",{className:"text-center py-4 text-gray-500 bg-gray-50 rounded-lg",children:[e.jsx(j,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î¿Î¼Î±Î´Î¹ÎºÎ­Ï‚ ÏƒÎµÏƒÎ¯ÎµÏ‚ Î³Î¹Î± Î±Ï…Ï„ÏŒ Ï„Î¿ Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î±."})]}):e.jsx("div",{className:"space-y-3",children:p.map(s=>e.jsx("div",{className:"border border-blue-200 rounded-lg p-4 hover:bg-blue-50 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(h,{className:"h-5 w-5 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"ÎŸÎ¼Î±Î´Î¹ÎºÎ® Î£ÎµÏƒÎ¯ÎµÏ‚"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.start_time.substring(0,5)," - ",s.end_time.substring(0,5)]})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{children:I(s.session_date)})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:s.trainer})]}),s.room&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{children:"ğŸ“"}),e.jsx("span",{children:s.room})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{children:"Î ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½Î·"})]})]})]})]})},s.id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[e.jsx(Z,{className:"h-4 w-4 mr-2 text-green-600"}),"Î‘Ï„Î¿Î¼Î¹ÎºÎ­Ï‚ Î£ÎµÏƒÎ¯ÎµÏ‚"]}),t.scheduleData.sessions.length===0?e.jsxs("div",{className:"text-center py-4 text-gray-500 bg-gray-50 rounded-lg",children:[e.jsx(j,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î±Ï„Î¿Î¼Î¹ÎºÎ­Ï‚ ÏƒÎµÏƒÎ¯ÎµÏ‚ Î³Î¹Î± Î±Ï…Ï„ÏŒ Ï„Î¿ Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î±."})]}):e.jsx("div",{className:"space-y-3",children:t.scheduleData.sessions.map(s=>e.jsx("div",{className:"border border-green-200 rounded-lg p-4 hover:bg-green-50 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:O(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:$(s.type)}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.startTime," - ",s.endTime]})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{children:I(s.date)})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:s.trainer})]}),s.room&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{children:"ğŸ“"}),e.jsx("span",{children:s.room})]}),s.notes&&e.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600 mt-2",children:[e.jsx(se,{className:"h-4 w-4 mt-0.5"}),e.jsx("span",{children:s.notes})]})]})]})]})},s.id))})]})]}):t.userType==="paspartu"?t.scheduleData.sessions.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(j,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Ï€ÏÎ¿Ï„Î¬ÏƒÎµÎ¹Ï‚ ÏƒÎµÏƒÎ¹ÏÎ½ Î±Ï€ÏŒ Ï„Î¿Î½ Ï€ÏÎ¿Ï€Î¿Î½Î·Ï„Î®."})]}):e.jsxs("div",{className:"space-y-4",children:[i&&e.jsxs("div",{className:"mb-2 text-sm text-blue-700 bg-blue-50 border border-blue-200 rounded-lg p-3",children:["Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î¿ Paspartu: ",e.jsx("strong",{children:i.remaining_lessons})," Î±Ï€ÏŒ ",i.total_lessons]}),t.scheduleData.sessions.map(s=>{const l=!!G[s.id];return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:O(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-medium text-gray-900",children:[$(s.type),e.jsx("span",{className:"ml-2 inline-flex items-center text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-800",children:"Î ÏÏŒÏ„Î±ÏƒÎ· Î³Î¹Î± ÎºÏÎ¬Ï„Î·ÏƒÎ·"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.startTime," - ",s.endTime]})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{children:I(s.date)})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:s.trainer})]}),s.room&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{children:"ğŸ“"}),e.jsx("span",{children:s.room})]}),g&&t.trainingType==="group"&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-purple-600",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["ÎŸÎ¼Î±Î´Î¹ÎºÏŒ Î¼Î¬Î¸Î·Î¼Î±: ",t.groupRoomSize||3," Î¬Ï„Î¿Î¼Î±"]})]}),l&&g&&(()=>{const a=ae(s);return a?e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["Room: ",a.room_name||"Not assigned yet"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-600",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["Participants: ",a.participants_count,"/",a.capacity]}),a.participants_count>=a.capacity&&e.jsx("span",{className:"text-xs px-2 py-1 bg-red-100 text-red-700 rounded-full",children:"Full"})]})]}):null})()]})]})]}),e.jsx("div",{className:"mt-3 flex items-center justify-end space-x-2",children:l?e.jsx("span",{className:"px-3 py-1 rounded-lg text-sm font-bold bg-green-100 text-green-800",children:"ÎšÎ»ÎµÎ¯ÏƒÏ„Î·ÎºÎµ"}):e.jsx("button",{disabled:!W()||T,onClick:()=>re(s),className:`px-4 py-2 rounded-lg text-white text-sm font-medium ${W()&&!T?"bg-primary-600 hover:bg-primary-700":"bg-gray-400 cursor-not-allowed"}`,children:"ÎšÏÎ¬Ï„Î·ÏƒÎ·"})})]},s.id)})]}):t.scheduleData.sessions.length===0&&p.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(j,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½ÎµÏ‚ ÏƒÎµÏƒÎ¯ÎµÏ‚"})]}):e.jsxs("div",{className:"space-y-4",children:[t.trainingType==="group"&&p.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[e.jsx(h,{className:"h-4 w-4 mr-2 text-blue-600"}),"ÎŸÎ¼Î±Î´Î¹ÎºÎ­Ï‚ Î£ÎµÏƒÎ¯ÎµÏ‚ (",p.length,")"]}),e.jsx("div",{className:"space-y-3",children:p.map(s=>e.jsx("div",{className:"border border-blue-200 rounded-lg p-4 hover:bg-blue-50 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(h,{className:"h-5 w-5 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"ÎŸÎ¼Î±Î´Î¹ÎºÎ® Î£ÎµÏƒÎ¯ÎµÏ‚"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.start_time.substring(0,5)," - ",s.end_time.substring(0,5)]})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{children:I(s.session_date)})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:s.trainer})]}),s.room&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{children:"ğŸ“"}),e.jsx("span",{children:s.room})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{children:"Î ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½Î·"})]}),g&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-purple-600",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["ÎŸÎ¼Î±Î´Î¹ÎºÏŒ Î¼Î¬Î¸Î·Î¼Î±: ",s.group_type||t.groupRoomSize||3," Î¬Ï„Î¿Î¼Î±"]})]}),g&&(()=>{const l=m.find(a=>a.booking_date===s.session_date&&a.booking_time===s.start_time&&a.trainer_name===s.trainer&&a.room===s.room);return l?e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["Room: ",l.room_name||"Not assigned yet"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-600",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["Participants: ",l.participants_count,"/",l.capacity]}),l.participants_count>=l.capacity&&e.jsx("span",{className:"text-xs px-2 py-1 bg-red-100 text-red-700 rounded-full",children:"Full"})]})]}):null})()]})]})]})},s.id))})]}),t.scheduleData.sessions.map(s=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:O(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:$(s.type)}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.startTime," - ",s.endTime]})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{children:I(s.date)})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:s.trainer})]}),s.room&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{children:"ğŸ“"}),e.jsx("span",{children:s.room})]}),g&&t.trainingType==="group"&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-purple-600",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["ÎŸÎ¼Î±Î´Î¹ÎºÏŒ Î¼Î¬Î¸Î·Î¼Î±: ",t.groupRoomSize||3," Î¬Ï„Î¿Î¼Î±"]})]}),s.notes&&e.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600 mt-2",children:[e.jsx(se,{className:"h-4 w-4 mt-0.5"}),e.jsx("span",{children:s.notes})]})]})]})]})},s.id))]})]}),(t.scheduleData.notes||t.scheduleData.specialInstructions)&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚"}),e.jsxs("div",{className:"space-y-4",children:[t.scheduleData.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚"}),e.jsx("p",{className:"text-gray-600",children:t.scheduleData.notes})]}),t.scheduleData.specialInstructions&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Î•Î¹Î´Î¹ÎºÎ­Ï‚ ÎŸÎ´Î·Î³Î¯ÎµÏ‚"}),e.jsx("p",{className:"text-gray-600",children:t.scheduleData.specialInstructions})]})]})]}),t.status==="accepted"&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{className:"h-6 w-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-900",children:"Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Î‘Ï€Î¿Î´ÎµÎºÏ„ÏŒ"}),e.jsx("p",{className:"text-green-700 mt-1",children:"Î¤Î¿ Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Î­Ï‡ÎµÎ¹ Î³Î¯Î½ÎµÎ¹ Î±Ï€Î¿Î´ÎµÎºÏ„ÏŒ! Î˜Î± Î»Î¬Î²ÎµÏ„Îµ ÎµÎ¹Î´Î¿Ï€Î¿Î¹Î®ÏƒÎµÎ¹Ï‚ Î³Î¹Î± Ï„Î¹Ï‚ Ï€ÏÎ¿Ï€Î¿Î½Î®ÏƒÎµÎ¹Ï‚ ÏƒÎ±Ï‚."})]})]})}),t.status==="declined"&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(J,{className:"h-6 w-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-red-900",children:"Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Î‘Ï€Î¿ÏÏÎ¹Ï†Î¸Î­Î½"}),e.jsx("p",{className:"text-red-700 mt-1",children:"Î Î±ÏÎ±ÎºÎ±Î»Ï Ï€ÎµÏÎ¬ÏƒÏ„Îµ Î±Ï€ÏŒ Ï„Î¿ Î³Ï…Î¼Î½Î±ÏƒÏ„Î®ÏÎ¹Î¿ Î³Î¹Î± Î½Î± ÏƒÏ…Î¶Î·Ï„Î®ÏƒÎ¿Ï…Î¼Îµ Ï„Î¹Ï‚ ÏÏÎµÏ‚ Ï€Î¿Ï… ÏƒÎ±Ï‚ Î²Î¿Î»ÎµÏÎ¿Ï…Î½."})]})]})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(J,{className:"h-12 w-12 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Î‘Ï€Î¿ÏÏÎ¯Ï†Î¸Î·ÎºÎµ"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Î Î±ÏÎ±ÎºÎ±Î»Ï Ï€ÎµÏÎ¬ÏƒÏ„Îµ Î±Ï€ÏŒ Ï„Î¿ Î³Ï…Î¼Î½Î±ÏƒÏ„Î®ÏÎ¹Î¿ Î³Î¹Î± Î½Î± ÏƒÏ…Î¶Î·Ï„Î®ÏƒÎ¿Ï…Î¼Îµ Ï„Î¹Ï‚ ÏÏÎµÏ‚ Ï€Î¿Ï… ÏƒÎ±Ï‚ Î²Î¿Î»ÎµÏÎ¿Ï…Î½."}),e.jsx("button",{onClick:()=>z(!1),className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"ÎšÎ±Ï„Î¬Î»Î±Î²Î±"})]})})})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ce,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î±"}),e.jsx("p",{className:"text-gray-600",children:"Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿ Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Personal Training Î³Î¹Î± ÎµÏƒÎ¬Ï‚."})]})})};export{Ne as default};
