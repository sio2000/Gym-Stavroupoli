import{d as D,J as f,r as l,z as _,j as e,k as C,b as R,C as U,M as B,o as W}from"./index-TtR70Vtr.js";import{S as G}from"./search-isAGyiSV.js";import{B as S}from"./book-open-BCIOVRkG.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=D("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=D("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),K=async()=>{try{const{data:r,error:a}=await f.from("lesson_categories").select("*").eq("is_active",!0).order("name");if(a)throw a;return r||[]}catch(r){throw console.error("Error fetching lesson categories:",r),r}},H=async r=>{try{const{data:a,error:t}=await f.rpc("get_available_lessons",{p_date:r});if(t)throw t;return a||[]}catch(a){throw console.error("Error fetching available lessons:",a),a}},Q=async(r,a)=>{try{let t=f.from("lessons").select(`
        *,
        lesson_categories(name, color, icon),
        rooms(name, capacity),
        trainers(
          user_id,
          user_profiles(first_name, last_name)
        )
      `);r&&(t=t.or(`name.ilike.%${r}%,description.ilike.%${r}%`)),a!=null&&a.categoryId&&(t=t.eq("category_id",a.categoryId)),a!=null&&a.difficulty&&(t=t.eq("difficulty",a.difficulty)),(a==null?void 0:a.dayOfWeek)!==void 0&&(t=t.eq("day_of_week",a.dayOfWeek)),(a==null?void 0:a.isActive)!==void 0&&(t=t.eq("is_active",a.isActive));const{data:u,error:o}=await t.order("created_at",{ascending:!1});if(o)throw o;return u||[]}catch(t){throw console.error("Error searching lessons:",t),t}},Z=()=>{const[r,a]=l.useState([]),[t,u]=l.useState([]),[o,d]=l.useState(!1),[x,j]=l.useState(""),[m,b]=l.useState("all"),[g,v]=l.useState("all"),[i,E]=l.useState(new Date().toISOString().split("T")[0]),[L,$]=l.useState(null),[y,q]=l.useState(!1),A={beginner:"ŒëœÅœáŒ¨œÅŒπŒøœÇ",intermediate:"ŒúŒ≠œÉŒøœÇ",advanced:"Œ†œÅŒøœáœâœÅŒ∑ŒºŒ≠ŒΩŒøœÇ"},T={beginner:"bg-green-100 text-green-800",intermediate:"bg-yellow-100 text-yellow-800",advanced:"bg-red-100 text-red-800"};l.useEffect(()=>{F()},[i]);const F=async()=>{d(!0);try{await Promise.all([p(),I()])}catch(s){console.error("Error loading data:",s),_.error("Œ£œÜŒ¨ŒªŒºŒ± Œ∫Œ±œÑŒ¨ œÑŒ∑ œÜœåœÅœÑœâœÉŒ∑ œÑœâŒΩ Œ¥ŒµŒ¥ŒøŒºŒ≠ŒΩœâŒΩ")}finally{d(!1)}},p=async()=>{try{const s=await H(i);a(s)}catch(s){throw console.error("Error loading lessons:",s),s}},I=async()=>{try{const s=await K();u(s)}catch(s){throw console.error("Error loading categories:",s),s}},N=async()=>{if(!x.trim()){p();return}d(!0);try{const s=await Q(x,{isActive:!0});a(s)}catch(s){console.error("Error searching lessons:",s),_.error("Œ£œÜŒ¨ŒªŒºŒ± Œ∫Œ±œÑŒ¨ œÑŒ∑ŒΩ Œ±ŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑")}finally{d(!1)}},h=r.filter(s=>{const c=m==="all"||s.category_name===m,n=g==="all"||s.difficulty===g;return c&&n}),O=s=>{const c=new Date(s);return["ŒöœÖœÅŒπŒ±Œ∫ŒÆ","ŒîŒµœÖœÑŒ≠œÅŒ±","Œ§œÅŒØœÑŒ∑","Œ§ŒµœÑŒ¨œÅœÑŒ∑","Œ†Œ≠ŒºœÄœÑŒ∑","Œ†Œ±œÅŒ±œÉŒ∫ŒµœÖŒÆ","Œ£Œ¨Œ≤Œ≤Œ±œÑŒø"][c.getDay()]},P=(s,c)=>`${s} - ${c}`,z=(s,c)=>{const n=s/c*100;return n===0?{text:"Œ†ŒªŒÆœÅŒµœÇ",color:"text-red-600"}:n<=25?{text:"Œ£œáŒµŒ¥œåŒΩ Œ†ŒªŒÆœÅŒµœÇ",color:"text-orange-600"}:n<=50?{text:"ŒõŒØŒ≥ŒµœÇ ŒòŒ≠œÉŒµŒπœÇ",color:"text-yellow-600"}:{text:"ŒîŒπŒ±Œ∏Œ≠œÉŒπŒºŒø",color:"text-green-600"}},M=s=>{switch(s.toLowerCase()){case"pilates":return"üßò";case"personal training":return"üí™";case"kick boxing":return"ü•ä";case"free gym":return"üèãÔ∏è";case"yoga":return"üßò‚Äç‚ôÄÔ∏è";case"cardio":return"‚ù§Ô∏è";default:return"üèÉ"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"ŒîŒπŒ±Œ∏Œ≠œÉŒπŒºŒ± ŒúŒ±Œ∏ŒÆŒºŒ±œÑŒ±"}),e.jsx("p",{className:"text-xl text-gray-600",children:"ŒïœÄŒπŒªŒ≠ŒæœÑŒµ œÑŒø ŒºŒ¨Œ∏Œ∑ŒºŒ± œÄŒøœÖ œÉŒ±œÇ ŒµŒΩŒ¥ŒπŒ±œÜŒ≠œÅŒµŒπ Œ∫Œ±Œπ ŒæŒµŒ∫ŒπŒΩŒÆœÉœÑŒµ œÑŒ∑ŒΩ œÄœÅŒøœÄœåŒΩŒ∑œÉŒÆ œÉŒ±œÇ"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ŒëŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑ ŒºŒ±Œ∏Œ∑ŒºŒ¨œÑœâŒΩ...",value:x,onChange:s=>j(s.target.value),onKeyPress:s=>s.key==="Enter"&&N(),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),e.jsx("div",{className:"lg:w-48",children:e.jsx("input",{type:"date",value:i,onChange:s=>E(s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})}),e.jsxs("button",{onClick:()=>q(!y),className:"flex items-center space-x-2 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(J,{className:"h-5 w-5"}),e.jsx("span",{children:"Œ¶ŒØŒªœÑœÅŒ±"}),y?e.jsx(k,{className:"h-4 w-4"}):e.jsx(C,{className:"h-4 w-4"})]}),e.jsx("button",{onClick:N,className:"px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"ŒëŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑"})]}),y&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ŒöŒ±œÑŒ∑Œ≥ŒøœÅŒØŒ±"}),e.jsxs("select",{value:m,onChange:s=>b(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"ŒåŒªŒµœÇ ŒøŒπ Œ∫Œ±œÑŒ∑Œ≥ŒøœÅŒØŒµœÇ"}),t.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ŒïœÄŒØœÄŒµŒ¥Œø ŒîœÖœÉŒ∫ŒøŒªŒØŒ±œÇ"}),e.jsxs("select",{value:g,onChange:s=>v(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"ŒåŒªŒ± œÑŒ± ŒµœÄŒØœÄŒµŒ¥Œ±"}),e.jsx("option",{value:"beginner",children:"ŒëœÅœáŒ¨œÅŒπŒøœÇ"}),e.jsx("option",{value:"intermediate",children:"ŒúŒ≠œÉŒøœÇ"}),e.jsx("option",{value:"advanced",children:"Œ†œÅŒøœáœâœÅŒ∑ŒºŒ≠ŒΩŒøœÇ"})]})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R,{className:"h-6 w-6 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:O(i)}),e.jsx("p",{className:"text-gray-600",children:new Date(i).toLocaleDateString("el-GR",{year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-600",children:h.length}),e.jsx("div",{className:"text-sm text-gray-600",children:h.length===1?"ŒúŒ¨Œ∏Œ∑ŒºŒ±":"ŒúŒ±Œ∏ŒÆŒºŒ±œÑŒ±"})]})]})}),o?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Œ¶œåœÅœÑœâœÉŒ∑ ŒºŒ±Œ∏Œ∑ŒºŒ¨œÑœâŒΩ..."})]}):h.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(s=>{var w;const c=z(s.available_spots,s.capacity),n=L===s.lesson_id;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-3xl",children:M(s.category_name)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.lesson_name}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:s.category_color+"20",color:s.category_color},children:s.category_name})]})]}),e.jsx("button",{onClick:()=>$(n?null:s.lesson_id),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:n?e.jsx(k,{className:"h-5 w-5"}):e.jsx(C,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:P(s.start_time,s.end_time)})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:s.room_name})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:[s.available_spots," Œ±œÄœå ",s.capacity," Œ∏Œ≠œÉŒµŒπœÇ"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${T[s.difficulty]}`,children:A[s.difficulty]}),e.jsx("span",{className:`text-sm font-medium ${c.color}`,children:c.text})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:["‚Ç¨",((w=s.price)==null?void 0:w.toFixed(2))||"0.00"]}),e.jsxs("button",{className:"flex items-center space-x-2 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx("span",{children:"ŒöœÅŒ¨œÑŒ∑œÉŒ∑"})]})]})]})]}),n&&e.jsx("div",{className:"px-6 pb-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"pt-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Œ†ŒµœÅŒπŒ≥œÅŒ±œÜŒÆ"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:s.lesson_description||"ŒîŒµŒΩ œÖœÄŒ¨œÅœáŒµŒπ œÄŒµœÅŒπŒ≥œÅŒ±œÜŒÆ Œ≥ŒπŒ± Œ±œÖœÑœå œÑŒø ŒºŒ¨Œ∏Œ∑ŒºŒ±."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"ŒïŒ∫œÄŒ±ŒπŒ¥ŒµœÖœÑŒÆœÇ:"}),e.jsx("p",{className:"text-gray-600",children:s.trainer_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"ŒîŒπŒ¨œÅŒ∫ŒµŒπŒ±:"}),e.jsxs("p",{className:"text-gray-600",children:[Math.round((new Date(`2000-01-01T${s.end_time}`).getTime()-new Date(`2000-01-01T${s.start_time}`).getTime())/(1e3*60))," ŒªŒµœÄœÑŒ¨"]})]})]})]})})]},s.lesson_id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(S,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"ŒîŒµŒΩ Œ≤œÅŒ≠Œ∏Œ∑Œ∫Œ±ŒΩ ŒºŒ±Œ∏ŒÆŒºŒ±œÑŒ±"}),e.jsx("p",{className:"text-gray-600 mb-6",children:x||m!=="all"||g!=="all"?"ŒîŒµŒΩ œÖœÄŒ¨œÅœáŒøœÖŒΩ ŒºŒ±Œ∏ŒÆŒºŒ±œÑŒ± œÄŒøœÖ ŒΩŒ± œÑŒ±ŒπœÅŒπŒ¨Œ∂ŒøœÖŒΩ ŒºŒµ œÑŒ± œÜŒØŒªœÑœÅŒ± œÄŒøœÖ ŒµœÄŒπŒªŒ≠ŒæŒ±œÑŒµ.":"ŒîŒµŒΩ œÖœÄŒ¨œÅœáŒøœÖŒΩ Œ¥ŒπŒ±Œ∏Œ≠œÉŒπŒºŒ± ŒºŒ±Œ∏ŒÆŒºŒ±œÑŒ± Œ≥ŒπŒ± œÑŒ∑ŒΩ ŒµœÄŒπŒªŒµŒ≥ŒºŒ≠ŒΩŒ∑ Œ∑ŒºŒµœÅŒøŒºŒ∑ŒΩŒØŒ±."}),e.jsx("button",{onClick:()=>{j(""),b("all"),v("all"),p()},className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors",children:"ŒïœÄŒ±ŒΩŒ±œÜŒøœÅŒ¨ Œ¶ŒØŒªœÑœÅœâŒΩ"})]})]})})};export{Z as default};
