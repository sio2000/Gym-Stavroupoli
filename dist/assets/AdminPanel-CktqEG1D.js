import{d as xr,r as c,z as u,j as e,p as Te,e as mt,q as xt,n as ur,s as P,X as Ue,u as gr,o as hr,b as Ge,t as is,C as ut,U as Ie,P as gt,T as ht,v as bt}from"./index-APNhsCJT.js";import{g as br}from"./pilatesScheduleApi-CHX79NEN.js";import{R as pt}from"./refresh-cw-BqfYhQpz.js";import{S as ue}from"./search-m0Oks8pi.js";import{d as ft,f as yt,g as pr,c as fr,k as yr,u as jr,l as vr,m as wr,r as Nr,j as _r}from"./membershipApi-cnzchg6C.js";import{A as Ve}from"./award-7rRkYvCf.js";import{P as jt}from"./plus-C_O26fHg.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=xr("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Pr=()=>{const[a,b]=c.useState([]),[p,w]=c.useState(!1),[h,D]=c.useState(!1),[k,N]=c.useState({}),[se,I]=c.useState(()=>{const y=new Date("2025-09-13T00:00:00.000Z");return console.log("Admin: Using fixed week - 13 Sep:",y.toISOString()),y}),z=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00"];c.useEffect(()=>{console.log("Admin: useEffect triggered - currentWeek changed to:",se.toISOString()),M()},[se]);const M=async()=>{try{w(!0);const y=await br();b(y);const j={},_=S();console.log("Loading slots for week:",_),console.log("Existing slots from DB:",y.length),_.forEach(C=>{z.forEach(T=>{const $=`${C}-${T}`,X=y.find(te=>te.date===C&&te.start_time===`${T}:00`);j[$]=X?X.is_active:!0,Object.keys(j).length<=5&&console.log(`Grid key: ${$}, existingSlot: ${!!X}, is_active: ${X==null?void 0:X.is_active}, final: ${j[$]}`)})}),console.log("All existing slots for this week:"),y.forEach(C=>{console.log(`  - ${C.date} ${C.start_time} (active: ${C.is_active})`)}),console.log("Initialized grid with slots:",Object.keys(j).length),console.log("Grid state sample:",Object.entries(j).slice(0,5));const d=Object.values(j).filter(Boolean).length,L=Object.values(j).filter(C=>!C).length;console.log(`Grid summary: ${d} active, ${L} inactive`),N(j)}catch(y){console.error("Error loading slots:",y),u.error("Σφάλμα φόρτωσης προγράμματος pilates")}finally{w(!1)}},S=()=>{const y=[],j=new Date(se);console.log("Admin: getWeekDates - currentWeek:",j);for(let _=0;_<10;_++){const d=new Date(j);d.setDate(j.getDate()+_),y.push(d.toISOString().split("T")[0]),console.log(`Admin: Day ${_}: ${d.toISOString().split("T")[0]}`)}return y},V=y=>{const j=new Date(y);return["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"][j.getDay()]},A=(y,j)=>{const _=`${y}-${j}`;N(d=>({...d,[_]:!d[_]}))},ae=async()=>{try{D(!0);const y=[],j=S();j.forEach(T=>{z.forEach($=>{const X=`${T}-${$}`;y.push({date:T,time:$,is_active:k[X]||!1})})}),console.log("=== SAVE SCHEDULE START ==="),console.log("Saving schedule with all slots:",y.length),console.log("Week dates:",j),console.log("Current grid state sample:",Object.entries(k).slice(0,10));const{data:_,error:d}=await P.from("pilates_schedule_slots").select("*").in("date",j);if(d)throw console.error("Error fetching existing slots:",d),d;if(console.log("Found existing slots:",(_==null?void 0:_.length)||0),_&&_.length>0&&console.log("Sample existing slots:",_.slice(0,3)),_&&_.length>0){const{error:T}=await P.from("pilates_schedule_slots").delete().in("date",j);if(T)throw console.error("Error deleting existing slots:",T),T;console.log("✅ Deleted existing slots for week")}else console.log("ℹ️ No existing slots to delete");const L=y.map(T=>({date:T.date,start_time:T.time,end_time:J(T.time),max_capacity:4,is_active:T.is_active}));console.log("Creating all slots:",L.slice(0,3)),console.log("Active slots count:",L.filter(T=>T.is_active).length),console.log("Inactive slots count:",L.filter(T=>!T.is_active).length);const{error:C}=await P.from("pilates_schedule_slots").insert(L);if(C)throw console.error("Error creating new slots:",C),C;console.log("✅ Created all slots:",L.length),console.log("=== SAVE SCHEDULE COMPLETE ==="),u.success("Πρόγραμμα αποθηκεύθηκε επιτυχώς!"),await M()}catch(y){console.error("Error saving schedule:",y),u.error("Σφάλμα αποθήκευσης προγράμματος")}finally{D(!1)}},J=y=>{const[j,_]=y.split(":").map(Number),d=new Date;return d.setHours(j+1,_),d.toTimeString().slice(0,5)},n=y=>{const j=new Date(se);j.setDate(j.getDate()+(y==="next"?7:-7)),I(j)},de=y=>new Date(y).toLocaleDateString("el-GR",{day:"numeric",month:"short"});if(p)return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});const i=S();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Πρόγραμμα Pilates"}),e.jsx("p",{className:"text-gray-600",children:"Κάντε κλικ στις ώρες που δεν θέλετε να είναι διαθέσιμες"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{const y=new Date,j=y.getDay(),_=new Date(y),d=j===0?-6:1-j;_.setDate(y.getDate()+d),_.setHours(0,0,0,0),I(_),console.log("Admin: Force refreshed currentWeek to:",_.toISOString())},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"🔄 Refresh"}),e.jsx("button",{onClick:()=>n("prev"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"← Προηγούμενη"}),e.jsx("button",{onClick:()=>n("next"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Επόμενη →"}),e.jsxs("button",{onClick:ae,disabled:h,className:"flex items-center space-x-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[e.jsx(Te,{className:"h-5 w-5"}),e.jsx("span",{children:h?"Αποθήκευση...":"Αποθήκευση"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:["Εβδομάδα: ",de(i[0])," - ",de(i[9])]}),e.jsx("p",{className:"text-sm text-blue-700",children:"Κάντε κλικ στις κόκκινες ώρες για να τις απενεργοποιήσετε (δεν θα εμφανίζονται στους χρήστες)"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 border-r border-gray-200 min-w-[100px]",children:"Ώρα"}),i.map((y,j)=>e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-500 border-r border-gray-200 min-w-[120px]",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-bold",children:V(y)}),e.jsx("span",{className:"text-xs text-gray-400",children:de(y)})]})},y))]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:z.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 border-r border-gray-200 bg-gray-50",children:y}),i.map((j,_)=>{const d=`${j}-${y}`,L=k[d],C=new Date(j).getDay(),T=C===0||C===6;return e.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-200",children:T?e.jsx("div",{className:"w-full h-8 bg-gray-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-400",children:"Σαβ/Κυρ"})}):e.jsx("button",{onClick:()=>A(j,y),className:`w-full h-8 rounded transition-all duration-200 flex items-center justify-center ${L?"bg-green-100 text-green-800 hover:bg-green-200 border-2 border-green-300":"bg-red-100 text-red-800 hover:bg-red-200 border-2 border-red-300"}`,children:L?e.jsx(mt,{className:"h-5 w-5"}):e.jsx(xt,{className:"h-5 w-5"})})},d)})]},y))})]})})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Εξήγηση"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 border-2 border-green-300 rounded flex items-center justify-center",children:e.jsx(mt,{className:"h-5 w-5 text-green-800"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Διαθέσιμο"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Οι χρήστες μπορούν να κλείσουν μαθήματα"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 border-2 border-red-300 rounded flex items-center justify-center",children:e.jsx(xt,{className:"h-5 w-5 text-red-800"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Απενεργοποιημένο"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Δεν εμφανίζεται στους χρήστες"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-400",children:"Σαβ/Κυρ"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Σαββατοκύριακο"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Δεν υπάρχουν μαθήματα"})]})]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ur,{className:"h-5 w-5 text-blue-400 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Σημαντικές Πληροφορίες"}),e.jsxs("ul",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[e.jsx("li",{children:"• Κάθε ώρα έχει χωρητικότητα 4 χρήστες (4 κρεβάτια pilates)"}),e.jsx("li",{children:"• Κάντε κλικ στις ώρες που δεν θέλετε να δουλεύετε"}),e.jsx("li",{children:"• Το πρόγραμμα εμφανίζεται στους χρήστες με ενεργή pilates συνδρομή"}),e.jsx("li",{children:"• Μην ξεχάσετε να αποθηκεύσετε τις αλλαγές!"})]})]})]})})]})},Be=async(a,b,p,w,h="",D)=>{try{console.log("[saveCashTransaction] Saving transaction:",{userId:a,amount:b,transactionType:p,programId:w,createdBy:h,notes:D});const{data:k,error:N}=await P.from("user_cash_transactions").insert({user_id:a,amount:b,transaction_type:p,program_id:w,created_by:h,notes:D}).select().single();return N?(console.error("[saveCashTransaction] Error saving transaction:",N),!1):(console.log("[saveCashTransaction] Transaction saved successfully:",k),!0)}catch(k){return console.error("[saveCashTransaction] Exception saving transaction:",k),!1}},kr=async()=>{try{console.log("[getCashRegisterTotals] Fetching totals...");const{data:a,error:b}=await P.from("user_cash_transactions").select("amount, transaction_type");if(b)return console.error("[getCashRegisterTotals] Error fetching totals:",b),{total_cash:0,total_pos:0,total_transactions:0};const p=(a==null?void 0:a.reduce((w,h)=>(h.transaction_type==="cash"?w.total_cash+=h.amount:h.transaction_type==="pos"&&(w.total_pos+=h.amount),w.total_transactions+=1,w),{total_cash:0,total_pos:0,total_transactions:0}))||{total_cash:0,total_pos:0,total_transactions:0};return console.log("[getCashRegisterTotals] Totals calculated:",p),p}catch(a){return console.error("[getCashRegisterTotals] Exception fetching totals:",a),{total_cash:0,total_pos:0,total_transactions:0}}},Sr=async()=>{try{console.log("[getCashSummaryPerUser] Fetching user summaries...");const{data:a,error:b}=await P.from("user_cash_transactions").select(`
        user_id,
        amount,
        transaction_type,
        created_at,
        user_profiles!user_cash_transactions_user_id_fkey(
          first_name,
          last_name,
          email
        )
      `).order("created_at",{ascending:!1});if(b)return console.error("[getCashSummaryPerUser] Error fetching user summaries:",b),[];if(console.log("[getCashSummaryPerUser] Raw data received:",(a==null?void 0:a.length)||0,"records"),!a||a.length===0)return console.log("[getCashSummaryPerUser] No data found, returning empty array"),[];const p=new Map;a.forEach(h=>{const D=h.user_id,k=h.user_profiles;p.has(D)||p.set(D,{user_id:D,user_name:k?`${k.first_name||""} ${k.last_name||""}`.trim():`User ${D.slice(0,8)}`,user_email:(k==null?void 0:k.email)||"No email",cash_total:0,pos_total:0,cash_count:0,pos_count:0});const N=p.get(D);h.transaction_type==="cash"?(N.cash_total+=h.amount,N.cash_count+=1,(!N.last_cash_date||new Date(h.created_at)>new Date(N.last_cash_date))&&(N.last_cash_date=h.created_at)):h.transaction_type==="pos"&&(N.pos_total+=h.amount,N.pos_count+=1,(!N.last_pos_date||new Date(h.created_at)>new Date(N.last_pos_date))&&(N.last_pos_date=h.created_at))});const w=Array.from(p.values()).sort((h,D)=>D.cash_total+D.pos_total-(h.cash_total+h.pos_total));return console.log("[getCashSummaryPerUser] Processed summaries:",w),w}catch(a){return console.error("[getCashSummaryPerUser] Exception fetching user summaries:",a),[]}},Ar=()=>{const[a,b]=c.useState({total_cash:0,total_pos:0,total_transactions:0}),[p,w]=c.useState([]),[h,D]=c.useState(!1),[k,N]=c.useState(""),[se,I]=c.useState([]),z=async()=>{try{D(!0);const[A,ae]=await Promise.all([kr(),Sr()]);b(A),w(ae)}catch(A){console.error("Error loading cash register data:",A),u.error("Σφάλμα κατά τη φόρτωση των δεδομένων ταμείου")}finally{D(!1)}};c.useEffect(()=>{z()},[]);const M=A=>{if(!A.trim()){I([]);return}const ae=p.filter(J=>J.user_name.toLowerCase().includes(A.toLowerCase())||J.user_email.toLowerCase().includes(A.toLowerCase()));I(ae)},S=A=>{N(A),M(A)},V=k?se:p;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 rounded-xl p-4 sm:p-6 text-white mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-2",children:"💰 Ταμείο"}),e.jsx("p",{className:"text-green-100 text-sm sm:text-base",children:"Συνολικά ποσά και ανάλυση χρηστών"})]}),e.jsxs("button",{onClick:z,disabled:h,className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg text-sm disabled:opacity-50",children:[e.jsx(pt,{className:`h-4 w-4 ${h?"animate-spin":""}`}),e.jsx("span",{children:"🔄 Ανανέωση"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-green-800 mb-2",children:"💵 Συνολικά Μετρητά"}),e.jsx("p",{className:"text-green-600",children:"Όλοι οι χρήστες συνολικά"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-4xl font-bold text-green-900",children:["€",a.total_cash.toFixed(2)]}),e.jsx("div",{className:"text-sm text-green-600",children:"ευρώ"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-2",children:"💳 Συνολικά POS"}),e.jsx("p",{className:"text-blue-600",children:"Όλοι οι χρήστες συνολικά"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-4xl font-bold text-blue-900",children:["€",a.total_pos.toFixed(2)]}),e.jsx("div",{className:"text-sm text-blue-600",children:"ευρώ"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-2",children:"📊 Συνολικές Συναλλαγές"}),e.jsx("p",{className:"text-purple-600",children:"Όλες οι συναλλαγές"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-4xl font-bold text-purple-900",children:a.total_transactions}),e.jsx("div",{className:"text-sm text-purple-600",children:"συναλλαγές"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"👥 Ανάλυση Χρηστών"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Μετρητά και POS ανά χρήστη"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Αναζήτηση χρήστη...",value:k,onChange:A=>S(A.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"})]}),k&&e.jsx("button",{onClick:()=>S(""),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ue,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"p-6",children:h?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(pt,{className:"h-8 w-8 mx-auto mb-4 text-gray-400 animate-spin"}),e.jsx("p",{className:"text-gray-500",children:"Φόρτωση δεδομένων..."})]}):V.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ms,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Δεν υπάρχουν συναλλαγές ακόμα"}),e.jsx("p",{className:"text-sm mt-2",children:"Οι συναλλαγές θα εμφανιστούν εδώ όταν δημιουργηθούν"})]}):e.jsxs("div",{className:"space-y-4",children:[V.map((A,ae)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:A.user_name.split(" ").map(J=>J[0]).join("").slice(0,2)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:A.user_name}),e.jsx("p",{className:"text-sm text-gray-600",children:A.user_email}),e.jsxs("div",{className:"flex space-x-4 text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:["💵 ",A.cash_count," μετρητά"]}),e.jsxs("span",{children:["💳 ",A.pos_count," POS"]})]})]})]}),e.jsx("div",{className:"text-right space-y-2",children:e.jsxs("div",{className:"flex space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["€",A.cash_total.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Μετρητά"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:["€",A.pos_total.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500",children:"POS"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:["€",(A.cash_total+A.pos_total).toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Σύνολο"})]})]})})]})},A.user_id)),k&&se.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ue,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Δεν βρέθηκαν χρήστες με αυτό το όνομα"}),e.jsx("p",{className:"text-sm mt-2",children:"Δοκιμάστε ένα διαφορετικό όρο αναζήτησης"})]})]})})]})]})},ds=async(a,b)=>{try{const{error:p}=await P.from("user_old_members_usage").insert({user_id:a,created_by:b});return p?(console.error("Error marking old members as used:",p),!1):!0}catch(p){return console.error("Exception marking old members as used:",p),!1}},cs=async(a,b,p,w)=>{try{if(b<=0)return!0;const{error:h}=await P.from("user_kettlebell_points").insert({user_id:a,points:b,program_id:p,created_by:w});return h?(console.error("Error saving kettlebell points:",h),!1):!0}catch(h){return console.error("Exception saving kettlebell points:",h),!1}},Cr=async()=>{try{console.log("[getTotalKettlebellPoints] Starting to fetch total points...");const{data:a,error:b}=await P.from("user_kettlebell_points").select("points");if(b)return console.error("[getTotalKettlebellPoints] Error getting total kettlebell points:",b),0;const p=(a==null?void 0:a.reduce((w,h)=>w+h.points,0))||0;return console.log("[getTotalKettlebellPoints] Total points calculated:",p,"from",(a==null?void 0:a.length)||0,"records"),p}catch(a){return console.error("[getTotalKettlebellPoints] Exception getting total kettlebell points:",a),0}},Dr=async()=>{try{console.log("[getKettlebellPointsSummary] Starting to fetch kettlebell points...");const{data:a,error:b}=await P.from("user_kettlebell_points").select(`
        user_id,
        points,
        created_at,
        user_profiles!user_kettlebell_points_user_id_fkey(
          first_name,
          last_name,
          email
        )
      `).order("created_at",{ascending:!1});if(b)return console.error("[getKettlebellPointsSummary] Error getting kettlebell points summary:",b),[];if(console.log("[getKettlebellPointsSummary] Raw data received:",(a==null?void 0:a.length)||0,"records"),console.log("[getKettlebellPointsSummary] Sample data:",a==null?void 0:a.slice(0,2)),!a||a.length===0)return console.log("[getKettlebellPointsSummary] No data found, returning empty array"),[];const p=new Map;a.forEach(h=>{const D=h.user_id,k=h.user_profiles;p.has(D)||p.set(D,{user_id:D,user_name:k?`${k.first_name||""} ${k.last_name||""}`.trim():`User ${D.slice(0,8)}`,user_email:(k==null?void 0:k.email)||"No email",total_points:0,points_count:0,last_updated:h.created_at});const N=p.get(D);N.total_points+=h.points,N.points_count+=1,new Date(h.created_at)>new Date(N.last_updated)&&(N.last_updated=h.created_at)});const w=Array.from(p.values()).sort((h,D)=>D.total_points-h.total_points);return console.log("[getKettlebellPointsSummary] Processed summary:",w),w}catch(a){return console.error("[getKettlebellPointsSummary] Exception getting kettlebell points summary:",a),[]}},Ir=async a=>{try{const{data:b,error:p}=await P.from("user_kettlebell_points").select("*").eq("user_id",a).order("created_at",{ascending:!1});return p?(console.error("Error getting user kettlebell points:",p),[]):b||[]}catch(b){return console.error("Exception getting user kettlebell points:",b),[]}},vt=async(a,b,p)=>{try{console.log("[saveProgramApprovalState] Saving approval state:",{userId:a,approvalStatus:b,options:p});const{data:w,error:h}=await P.from("program_approval_states").insert({user_id:a,program_id:p.programId,approval_status:b,old_members_used:p.oldMembersUsed||!1,kettlebell_points:p.kettlebellPoints||0,cash_amount:p.cashAmount||0,pos_amount:p.posAmount||0,created_by:p.createdBy,notes:p.notes,group_room_size:p.groupRoomSize,weekly_frequency:p.weeklyFrequency,monthly_total:p.monthlyTotal}).select().single();return h?(console.error("[saveProgramApprovalState] Error saving approval state:",h),!1):(console.log("[saveProgramApprovalState] Approval state saved successfully:",w),!0)}catch(w){return console.error("[saveProgramApprovalState] Exception saving approval state:",w),!1}},wt=["Mike","Jordan"],Lr=()=>{var $s,Es,Ms,Rs,Os,Ls,Fs,Ks,zs,Gs,Vs,Bs,Ws,Hs,Qs,Js;const{user:a}=gr(),[b,p]=c.useState("personal-training"),[w,h]=c.useState([]),[D,k]=c.useState([]),[N,se]=c.useState(null),[I,z]=c.useState(null),[M,S]=c.useState(!1),[V,A]=c.useState(!1),[ae,J]=c.useState(!1),[n,de]=c.useState({code:"",selectedUserId:""}),[i,y]=c.useState("individual"),[j,_]=c.useState("personal"),[d,L]=c.useState([]),[C,T]=c.useState(null),[$,X]=c.useState(null),[te,We]=c.useState(0),[$e,xs]=c.useState(""),[He,Qe]=c.useState("dropdown"),[q,Je]=c.useState(""),[ee,us]=c.useState("all"),[B,ce]=c.useState(1),[gs,hs]=c.useState(new Set),[bs,Ee]=c.useState(""),[oe,Me]=c.useState({}),[ge,Nt]=c.useState([]),[_t,Pt]=c.useState(0),[he,kt]=c.useState(""),[ps,fs]=c.useState([]),[be,Re]=c.useState(""),[pe,Oe]=c.useState(""),[St,Xe]=c.useState(!1),[At,Ye]=c.useState(!1),[F,Le]=c.useState("none"),[Ze,ys]=c.useState(new Set),[qe,js]=c.useState({}),x=s=>Ze.has(s),H=s=>qe[s]||null,v=s=>rs.has(s),Y=s=>ls[s]||null;c.useEffect(()=>{We($?$*4:0)},[$]),c.useEffect(()=>{i==="individual"&&(T(null),X(null),We(0))},[i]),c.useEffect(()=>{var s,t;if(i==="individual"&&n.selectedUserId){const r=H(n.selectedUserId);r&&(Ee(r.kettlebellPoints||""),Re(((s=r.cashAmount)==null?void 0:s.toString())||""),Oe(((t=r.posAmount)==null?void 0:t.toString())||""))}},[n.selectedUserId,i]);const es=10,[_e,W]=c.useState([{id:"tmp-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:""}]),[Ct,Dt]=c.useState([]),[It,ss]=c.useState([]),[Z,Tt]=c.useState(null),[ne,Fe]=c.useState(null),[ts,Pe]=c.useState(""),[vs,Ut]=c.useState([]),[ie,fe]=c.useState(1),[ye,$t]=c.useState(""),ke=6,[G,Et]=c.useState({}),[Se,ws]=c.useState({}),[rs,Ns]=c.useState(new Set),[ls,_s]=c.useState({}),[Mt,Ps]=c.useState([]),Rt=[{id:"personal-training",name:"Personal Training Πρόγραμμα",icon:Ge},{id:"membership-packages",name:"Πακέτα Συνδρομών",icon:is},{id:"pilates-schedule",name:"Πρόγραμμα Pilates",icon:ut},{id:"kettlebell-points",name:"Kettlebell Points",icon:Ve},{id:"cash-register",name:"Ταμείο",icon:ms}],Ot=["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],je=s=>{var l;if(!((l=s.scheduleData)!=null&&l.sessions)||s.scheduleData.sessions.length===0)return"Personal Training";const t=s.scheduleData.sessions.map(o=>o.type),r=[...new Set(t)];if(r.length===1)switch(r[0]){case"personal":return"Personal Training";case"kickboxing":return"Kick Boxing";case"combo":return"Combo Training";default:return"Personal Training"}else if(r.length>1)return"Combo Training";return"Personal Training"},ks=s=>{const t=["user1@freegym.gr","user2@freegym.gr"],r=["PERSONAL2024","KICKBOX2024"],l=!!s.email&&t.includes(s.email),o=!!s.personalTrainingCode&&r.includes(s.personalTrainingCode);return l||o},Ss=w.filter(s=>{if(!$e)return!0;const t=$e.toLowerCase();return s.firstName.toLowerCase().includes(t)||s.lastName.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)||`${s.firstName} ${s.lastName}`.toLowerCase().includes(t)}),ve=D.filter(s=>{const t=!q||(()=>{const l=q.toLowerCase();return s.user.firstName.toLowerCase().includes(l)||s.user.lastName.toLowerCase().includes(l)||s.user.email.toLowerCase().includes(l)||`${s.user.firstName} ${s.user.lastName}`.toLowerCase().includes(l)})(),r=ee==="all"||s.status===ee;return t&&r}),K=Math.ceil(ve.length/es),as=(B-1)*es,As=as+es,Cs=ve.slice(as,As);c.useEffect(()=>{ce(1)},[q,ee]);const Ds=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00"],Lt=async()=>{try{console.log("[AdminPanel] Checking admin role in database...");const{data:s,error:t}=await P.from("user_profiles").select("user_id, role, first_name, last_name, email").eq("user_id",a==null?void 0:a.id).single();return t?(console.error("[AdminPanel] Error checking admin profile:",t),!1):(console.log("[AdminPanel] Admin profile in database:",s),console.log("[AdminPanel] Admin role in database:",s==null?void 0:s.role),(s==null?void 0:s.role)==="admin")}catch(s){return console.error("[AdminPanel] Exception checking admin role:",s),!1}},Ft=async()=>{try{console.log("[AdminPanel] Testing if we can create data...");const s={user_id:a==null?void 0:a.id,month:1,year:2e3,schedule_data:{sessions:[]},status:"pending",created_by:a==null?void 0:a.id},{data:t,error:r}=await P.from("personal_training_schedules").insert(s).select();return r?(console.log("[AdminPanel] Cannot create data - RLS blocking:",r.message),!1):t&&t.length>0?(await P.from("personal_training_schedules").delete().eq("id",t[0].id),console.log("[AdminPanel] Can create data - RLS working correctly"),!0):!1}catch(s){return console.error("[AdminPanel] Exception testing data creation:",s),!1}},Kt=async(s,t)=>{if(!t){console.log("[AdminPanel] No admin ID available for test data creation");return}try{console.log("[AdminPanel] Creating test schedule for user:",s.email);const r={user_id:s.id,month:new Date().getMonth()+1,year:new Date().getFullYear(),schedule_data:{sessions:[{id:"test-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",notes:"Test session created by admin"}],notes:"Test program created by admin",specialInstructions:"This is test data"},status:"pending",created_by:t},{data:l,error:o}=await P.from("personal_training_schedules").insert(r).select();o?console.error("[AdminPanel] Error creating test schedule:",o):(console.log("[AdminPanel] Test schedule created successfully:",l),setTimeout(()=>{Ke()},1e3))}catch(r){console.error("[AdminPanel] Exception creating test schedule:",r)}},Ke=async()=>{console.log("[AdminPanel] ===== DATA LOADING STARTED ====="),console.log("[AdminPanel] Current user:",a==null?void 0:a.email,"Role:",a==null?void 0:a.role);try{S(!0),console.log("[AdminPanel] Querying user_profiles table...");const{data:s,error:t}=await P.from("user_profiles").select("*").order("created_at",{ascending:!1});if(console.log("[AdminPanel] User profiles query result - rows:",s==null?void 0:s.length,"error:",t),t)throw console.error("[AdminPanel] User profiles error:",t),t;console.log("[AdminPanel] Querying personal_training_schedules table..."),console.log("[AdminPanel] Current auth user ID:",a==null?void 0:a.id),console.log("[AdminPanel] Current auth user role:",a==null?void 0:a.role),console.log("[AdminPanel] Attempting to query personal_training_schedules...");let r=[],l=null;const{data:o,error:m}=await P.from("personal_training_schedules").select("id,user_id,month,year,schedule_data,status,created_by,created_at,updated_at,trainer_name,accepted_at,declined_at").order("created_at",{ascending:!1});if(m){console.log("[AdminPanel] Direct query failed:",m);const{data:f,error:U}=await P.from("personal_training_schedules").select("id, user_id, status").limit(10);if(U){console.log("[AdminPanel] Limited query also failed:",U);const{count:Q,error:le}=await P.from("personal_training_schedules").select("*",{count:"exact",head:!0});console.log("[AdminPanel] Count query result:",Q,"error:",le)}else console.log("[AdminPanel] Limited query succeeded:",f),r=f||[]}else console.log("[AdminPanel] Direct query succeeded:",o),r=o||[];if(l=m,console.log("[AdminPanel] Schedules query result - rows:",r==null?void 0:r.length,"error:",l),(r==null?void 0:r.length)===0&&!l){console.log("[AdminPanel] Query succeeded but returned 0 rows - checking RLS policies...");const f=await Lt();console.log("[AdminPanel] Is admin in database:",f);const{count:U,error:Q}=await P.from("personal_training_schedules").select("*",{count:"exact",head:!0});console.log("[AdminPanel] Total rows in table (bypassing RLS):",U,"error:",Q),U&&U>0&&(console.warn("[AdminPanel] RLS is blocking access to existing data! Table has",U,"rows but query returns 0."),console.warn("[AdminPanel] Admin role might not be properly configured in RLS policies."),console.warn("[AdminPanel] Please run the SQL script: database/fix_admin_rls_policies.sql"))}if(l){console.error("[AdminPanel] Schedules query failed with error:",l),console.log("[AdminPanel] Error code:",l.code),console.log("[AdminPanel] Error message:",l.message),console.log("[AdminPanel] Error details:",l.details),console.log("[AdminPanel] Error hint:",l.hint),console.log("[AdminPanel] Attempting to check table existence...");const{data:f,error:U}=await P.from("personal_training_schedules").select("count").limit(1);console.log("[AdminPanel] Table check result:",f,"error:",U)}if(l&&(console.error("[AdminPanel] Schedules error:",l),console.log("[AdminPanel] RLS might be blocking access. Checking if we can insert test data..."),console.log("[AdminPanel] Continuing with empty schedules due to RLS restrictions")),!s||s.length===0){console.log("[AdminPanel] No users found in database - setting empty states"),h([]),k([]);return}console.log("[AdminPanel] Transforming user profiles...");const g=s.map(f=>({id:f.user_id,email:f.email||`user-${f.user_id.slice(0,8)}@example.com`,firstName:f.first_name||"",lastName:f.last_name||"",profile_photo:f.profile_photo||"",profile_photo_locked:f.profile_photo_locked||!1,dob:f.dob||"",address:f.address||"",emergency_contact:f.emergency_contact||"",dob_locked:f.dob_locked||!1,hasPersonalTrainingCode:!1,personalTrainingCode:void 0,packageType:void 0}));console.log("[AdminPanel] Transformed users count:",g.length),h(g),console.log("[AdminPanel] Creating program statuses from schedules..."),console.log("[AdminPanel] Schedules data:",r);const E=(r||[]).map(f=>{console.log("[AdminPanel] Processing schedule:",f.id,"for user:",f.user_id);const U=g.find(le=>le.id===f.user_id);if(!U)return console.warn(`[AdminPanel] User not found for schedule ${f.id}, user_id: ${f.user_id}`),null;const Q={user:U,schedule:{id:f.id,userId:f.user_id,month:f.month,year:f.year,status:f.status,scheduleData:f.schedule_data,createdBy:f.created_by,createdAt:f.created_at,updatedAt:f.updated_at,acceptedAt:f.accepted_at,declinedAt:f.declined_at},status:f.status};return console.log("[AdminPanel] Created program status:",Q),Q}).filter(f=>f!==null);console.log("[AdminPanel] Final program statuses count:",E.length),E.length===0&&g.length>0&&(console.log("[AdminPanel] No schedules found. Creating test data to verify system..."),await Ft()?await Kt(g[0],a==null?void 0:a.id):(console.warn("[AdminPanel] Cannot create test data due to RLS restrictions."),console.warn("[AdminPanel] Please fix RLS policies by running: database/fix_admin_rls_policies.sql"))),k(E),console.log("[AdminPanel] Checking personal training codes...");const{data:re,error:xe}=await P.from("personal_training_codes").select("*").limit(5);console.log("[AdminPanel] Personal training codes check - rows:",re==null?void 0:re.length,"error:",xe),await zt(g),console.log("[AdminPanel] ===== DATA LOADING COMPLETED SUCCESSFULLY =====")}catch(s){console.error("[AdminPanel] ===== DATA LOADING FAILED ====="),console.error("[AdminPanel] Error details:",s);const t=s instanceof Error?s.message:"Unknown error";u.error(`Σφάλμα κατά τη φόρτωση των χρηστών: ${t}`),h([]),k([])}finally{S(!1)}},zt=async s=>{try{const{data:t,error:r}=await P.from("personal_training_codes").select("user_id, code, package_type, sessions_remaining").eq("is_active",!0);if(r){console.error("Error fetching personal training codes:",r),h(s);return}const l=s.map(o=>{const m=t==null?void 0:t.find(g=>g.user_id===o.id);return m?{...o,hasPersonalTrainingCode:!0,personalTrainingCode:m.code,packageType:m.package_type}:o});h(l)}catch(t){console.error("Error checking personal training codes:",t)}};c.useEffect(()=>{console.log("[AdminPanel] useEffect triggered - user:",a==null?void 0:a.email,"role:",a==null?void 0:a.role,"activeTab:",b),a&&a.role==="admin"&&b==="personal-training"?(console.log("[AdminPanel] User changed - loading data for admin user:",a.email),Ke()):a&&a.role!=="admin"?console.warn("[AdminPanel] User is not admin! Role:",a.role,"Email:",a.email):a||console.log("[AdminPanel] No user logged in")},[a,b]),c.useEffect(()=>{b==="personal-training"&&(console.log("[AdminPanel] useEffect triggered - loading data for personal-training tab"),Ke())},[b]);const Gt=async s=>{try{S(!0);const{data:t,error:r}=await P.from("personal_training_schedules").select("id, user_id, month, year, schedule_data, status, created_by, created_at, updated_at, accepted_at, declined_at").eq("user_id",s).order("created_at",{ascending:!1}).limit(1);if(r){console.error("[ADMIN] Error loading schedule for user",s,r),u.error("Σφάλμα κατά τη φόρτωση του προγράμματος"),z(null);return}if(!t||t.length===0){z(null),u.error("Δεν βρέθηκε πρόγραμμα για τον συγκεκριμένο χρήστη");return}const l=t[0],o={id:l.id,userId:l.user_id,month:l.month,year:l.year,scheduleData:l.schedule_data,status:l.status,createdBy:l.created_by,createdAt:l.created_at,updatedAt:l.updated_at,acceptedAt:l.accepted_at,declinedAt:l.declined_at};z(o)}catch(t){console.error("[ADMIN] Exception while loading schedule",t),u.error("Σφάλμα κατά τη φόρτωση του προγράμματος"),z(null)}finally{S(!1)}},Vt=()=>{if(!I)return;const s={id:Date.now().toString(),date:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"10:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",notes:""},t={...I,scheduleData:{...I.scheduleData,sessions:[...I.scheduleData.sessions,s]}};z(t)},we=(s,t,r)=>{if(!I)return;const l=I.scheduleData.sessions.map(m=>m.id===s?{...m,[t]:r}:m),o={...I,scheduleData:{...I.scheduleData,sessions:l}};z(o)},Bt=s=>{if(!I)return;const t=I.scheduleData.sessions.filter(l=>l.id!==s),r={...I,scheduleData:{...I.scheduleData,sessions:t}};z(r)},Wt=async()=>{if(!(!I||!N))try{S(!0),u.success(`Το πρόγραμμα για τον ${N.firstName} ${N.lastName} αποθηκεύτηκε!`),A(!1)}catch{u.error("Σφάλμα κατά την αποθήκευση του προγράμματος")}finally{S(!1)}},Ht=async()=>{if(F==="none"||!a){u.error("Παρακαλώ επιλέξτε μια κατάσταση έγκρισης");return}try{S(!0);const s=i==="individual"?[n.selectedUserId]:d;if(s.length===0){u.error("Δεν υπάρχουν επιλεγμένοι χρήστες");return}if(i==="group"){if(!C||!$){u.error("Παρακαλώ επιλέξτε Ομαδική Αίθουσα και συχνότητα εβδομάδας");return}if(d.length===0){u.error("Παρακαλώ επιλέξτε τουλάχιστον έναν χρήστη για το ομαδικό πρόγραμμα");return}}for(const l of s){const o=x(l),m=o?H(l):oe[l];if(!m)continue;await vt(l,F,{oldMembersUsed:m.oldMembers||!1,kettlebellPoints:m.kettlebellPoints?parseInt(m.kettlebellPoints):0,cashAmount:m.cashAmount||0,posAmount:m.posAmount||0,createdBy:a.id,groupRoomSize:i==="group"?parseInt(C):null,weeklyFrequency:i==="group"?$:null,monthlyTotal:i==="group"?te:null,notes:`Program options saved with ${F} status${o?" (from frozen state)":""}${i==="group"?` - Ομαδική Αίθουσα: ${C} χρήστες, ${$} φορές/εβδομάδα`:""}`})?console.log(`Program approval state saved for user ${l}: ${F}${o?" (from frozen state)":""}`):console.warn(`Failed to save program approval state for user ${l}`)}if(F==="approved")await Qt(s);else if(F==="rejected")console.log("Program options rejected - no actions executed"),u("Program Options απορρίφθηκαν - δεν εκτελέστηκαν ενέργειες",{icon:"ℹ️"});else if(F==="pending"){console.log("Program options pending - saving locally and freezing UI");const l={...qe},o=new Set(Ze);for(const m of s){const g=oe[m];g&&(l[m]={oldMembers:g.oldMembers,kettlebellPoints:g.kettlebellPoints,cash:g.cash,pos:g.pos,cashAmount:g.cashAmount,posAmount:g.posAmount,groupRoomSize:i==="group"?parseInt(C):null,weeklyFrequency:i==="group"?$:null,monthlyTotal:i==="group"?te:null},o.add(m))}js(l),ys(o),u("Program Options τοποθετήθηκαν στην αναμονή - οι επιλογές παγώθηκαν",{icon:"⏳"})}if(Le("none"),F==="approved"||F==="rejected"){const l=new Set(Ze),o={...qe};for(const m of s)x(m)&&(l.delete(m),delete o[m]);ys(l),js(o)}const t=s.some(l=>x(l)),r={approved:t?"εγκρίθηκε και εκτελέστηκαν οι ενέργειες (από frozen state)":"εγκρίθηκε και εκτελέστηκαν οι ενέργειες",rejected:t?"απορρίφθηκε (από frozen state)":"απορρίφθηκε",pending:"τοποθετήθηκε στην αναμονή"};u.success(`Program Options ${r[F]} επιτυχώς!`)}catch(s){console.error("Error saving program options:",s),u.error("Σφάλμα κατά την αποθήκευση των Program Options")}finally{S(!1)}},Qt=async s=>{console.log("Executing approved program actions for users:",s);try{for(const t of s){const r=x(t),l=r?H(t):oe[t];l&&(l.oldMembers&&(await ds(t,(a==null?void 0:a.id)||"")?(console.log(`[APPROVED] Old Members marked as used for user: ${t}${r?" (from frozen state)":""}`),hs(m=>new Set([...m,t]))):console.warn(`[APPROVED] Failed to mark Old Members as used for user: ${t}${r?" (from frozen state)":""}`)),l.kettlebellPoints&&parseInt(l.kettlebellPoints)>0&&(await cs(t,parseInt(l.kettlebellPoints),void 0,(a==null?void 0:a.id)||"")?console.log(`[APPROVED] Kettlebell Points saved for user: ${t}, Points: ${l.kettlebellPoints}${r?" (from frozen state)":""}`):console.warn(`[APPROVED] Failed to save Kettlebell Points for user: ${t}${r?" (from frozen state)":""}`)),l.cashAmount&&l.cashAmount>0&&(await Be(t,l.cashAmount,"cash",void 0,(a==null?void 0:a.id)||"","Cash transaction from approved program creation")?console.log(`[APPROVED] Cash transaction saved for user: ${t}, Amount: €${l.cashAmount}${r?" (from frozen state)":""}`):console.warn(`[APPROVED] Failed to save Cash transaction for user: ${t}${r?" (from frozen state)":""}`)),l.posAmount&&l.posAmount>0&&(await Be(t,l.posAmount,"pos",void 0,(a==null?void 0:a.id)||"","POS transaction from approved program creation")?console.log(`[APPROVED] POS transaction saved for user: ${t}, Amount: €${l.posAmount}${r?" (from frozen state)":""}`):console.warn(`[APPROVED] Failed to save POS transaction for user: ${t}${r?" (from frozen state)":""}`)))}u.success("Έγιναν όλες οι απαραίτητες ενέργειες για τα εγκεκριμένα προγράμματα!")}catch(t){console.error("Error executing approved program actions:",t),u.error("Σφάλμα κατά την εκτέλεση των ενεργειών")}},Jt=async()=>{var t,r;const s=i==="individual"?[n.selectedUserId]:d;if(s.length===0){u.error("Παρακαλώ επιλέξτε χρήστη/ες");return}try{S(!0),console.log("[ADMIN] Starting to create personal training program..."),console.log("[ADMIN] User type:",j);for(const m of s){const g=w.find(R=>R.id===m);if(!g){u.error(`Δεν βρέθηκε ο χρήστης με ID: ${m}`);continue}console.log("[ADMIN] Selected user:",g.firstName,g.lastName,"ID:",g.id),console.log("[ADMIN] Admin user ID:",a==null?void 0:a.id);const E=_e.map(R=>({id:R.id,date:R.date,startTime:R.startTime,endTime:R.endTime,type:R.type,trainer:R.trainer||"Mike",room:R.room,notes:R.notes})),re={user_id:g.id,trainer_name:((t=E[0])==null?void 0:t.trainer)||"Mike",month:new Date().getMonth()+1,year:new Date().getFullYear(),schedule_data:{sessions:E,notes:"",trainer:((r=E[0])==null?void 0:r.trainer)||"Mike",specialInstructions:"",groupRoomSize:i==="group"?parseInt(C):null,weeklyFrequency:i==="group"?$:null,monthlyTotal:i==="group"?te:null},status:"accepted",created_by:a==null?void 0:a.id,user_type:j,is_flexible:j==="paspartu",training_type:i,group_room_size:i==="group"?parseInt(C):null,weekly_frequency:i==="group"?$:null,monthly_total:i==="group"?te:null};console.log("[ADMIN] Schedule payload:",re),console.log("[ADMIN] Inserting schedule into personal_training_schedules...");const{data:xe,error:f}=await P.from("personal_training_schedules").insert(re).select().single();if(f)throw console.error("[ADMIN] Schedule insertion error:",f),f;console.log("[ADMIN] Schedule inserted successfully for user:",g.email);const U=oe[g.id];if(U&&(U.oldMembers&&(await ds(g.id,(a==null?void 0:a.id)||"")?console.log("[ADMIN] Old Members marked as used for user:",g.email):console.warn("[ADMIN] Failed to mark Old Members as used for user:",g.email)),U.kettlebellPoints&&parseInt(U.kettlebellPoints)>0&&(await cs(g.id,parseInt(U.kettlebellPoints),xe.id,(a==null?void 0:a.id)||"")?console.log("[ADMIN] Kettlebell Points saved for user:",g.email,"Points:",U.kettlebellPoints):console.warn("[ADMIN] Failed to save Kettlebell Points for user:",g.email))),j==="paspartu"){console.log("[ADMIN] Handling Paspartu user - replacing old schedule and resetting deposit...");const{error:R}=await P.rpc("replace_paspartu_schedule",{p_user_id:g.id,p_new_schedule_id:xe.id});R?(console.error("[ADMIN] Error replacing old Paspartu schedule:",R),console.warn("[ADMIN] Failed to replace old schedule, but new schedule was created successfully")):console.log("[ADMIN] Old Paspartu schedule replaced successfully for user:",g.email);const{error:De}=await P.rpc("reset_lesson_deposit_for_new_program",{p_user_id:g.id,p_total_lessons:5,p_created_by:a==null?void 0:a.id});De?(console.error("[ADMIN] Lesson deposit reset error:",De),console.warn("[ADMIN] Failed to reset lesson deposit, but schedule was created successfully")):console.log("[ADMIN] Lesson deposit reset successfully for Paspartu user:",g.email)}console.log("[ADMIN] Creating Personal Training membership...");const{data:Q,error:le}=await P.from("membership_packages").select("id").eq("name","Personal Training").eq("is_active",!0).single();if(le||!Q){console.error("[ADMIN] Error finding Personal Training package:",le),console.warn("[ADMIN] Personal Training package not found, skipping membership creation");continue}const ze={user_id:g.id,package_id:Q.id,duration_type:"lesson",start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],is_active:!0,approved_by:a==null?void 0:a.id,approved_at:new Date().toISOString()},{error:Ce}=await P.from("memberships").insert(ze);Ce?(console.error("[ADMIN] Membership insertion error:",Ce),console.warn("[ADMIN] Failed to create membership, but schedule was created successfully")):console.log("[ADMIN] Personal Training membership created successfully for user:",g.email)}const l=s.map(m=>{const g=w.find(E=>E.id===m);return g?`${g.firstName} ${g.lastName}`:"Άγνωστος"}).join(", "),o=j==="personal"?"Personal":"Paspartu";u.success(`Το πρόγραμμα ${o} Training δημιουργήθηκε επιτυχώς για ${i==="individual"?"τον χρήστη":"τους χρήστες"}: ${l}!`),J(!1),de({code:"",selectedUserId:""}),y("individual"),_("personal"),L([]),xs(""),Qe("dropdown"),W([{id:"tmp-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:""}]),Ke()}catch(l){if(console.error("[ADMIN] Error creating personal training program:",l),l&&typeof l=="object"&&"code"in l){const o=l;o.code==="23505"?u.error("Το πρόγραμμα υπάρχει ήδη για αυτόν τον χρήστη."):o.code==="23503"?u.error("Πρόβλημα με τα δεδομένα χρήστη. Ελέγξτε ότι ο χρήστης υπάρχει."):o.code==="PGRST301"?u.error("Πρόβλημα αυθεντικοποίησης. Κάντε επανασύνδεση."):u.error(`Σφάλμα βάσης δεδομένων: ${o.message||"Άγνωστο σφάλμα"}`)}else u.error("Σφάλμα κατά τη δημιουργία του προγράμματος")}finally{S(!1)}};if(!a||a.role!=="admin")return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Δεν έχετε δικαίωμα πρόσβασης"}),e.jsx("p",{className:"text-gray-600",children:"Μόνο οι διαχειριστές μπορούν να έχουν πρόσβαση σε αυτή τη σελίδα."})]})});const Xt=async()=>{try{S(!0);const s=await pr(),t=["Personal Training","Premium","Βασικό + προσωπική προπόνηση","VIP","Premium + όλα τα προνόμια","Όλα από το premium","Απεριόριστη προσωπική προπόνηση","Βασικό","Πρόσβαση σε όλες τις αίθουσες","Όλες οι ομαδικές τάξεις"],r=s.filter(o=>!t.includes(o.name)&&!t.some(m=>{var g;return(g=o.description)==null?void 0:g.includes(m)}));Dt(r);const l=await fr();Ps(l)}catch(s){console.error("Error loading membership packages:",s),u.error("Σφάλμα κατά τη φόρτωση των πακέτων")}finally{S(!1)}},Is=async s=>{try{const t=await _r(s);ss(t)}catch(t){console.error("Error loading package durations:",t),u.error("Σφάλμα κατά τη φόρτωση των επιλογών διάρκειας")}},os=async()=>{try{const s=await yr();Ut(s),fe(1)}catch(s){console.error("Error loading membership requests:",s),u.error("Σφάλμα κατά τη φόρτωση των αιτημάτων")}},Ae=()=>vs.filter(t=>{var o,m,g,E;const r=((o=t.package)==null?void 0:o.name)==="Free Gym"||((m=t.package)==null?void 0:m.name)==="Pilates",l=ye===""||`${((g=t.user)==null?void 0:g.first_name)||""} ${((E=t.user)==null?void 0:E.last_name)||""}`.toLowerCase().includes(ye.toLowerCase());return r&&l}).sort((t,r)=>new Date(r.created_at).getTime()-new Date(t.created_at).getTime()),Yt=()=>{const s=Ae(),t=(ie-1)*ke,r=t+ke;return s.slice(t,r)},me=()=>{const s=Ae();return Math.ceil(s.length/ke)},Zt=()=>{fe(s=>Math.max(s-1,1))},qt=()=>{fe(s=>Math.min(s+1,me()))},er=()=>{fe(1)},sr=()=>{fe(me())},tr=s=>{$t(s.target.value),fe(1)},rr=s=>{Tt(s),s.name==="Pilates"?ss(Mt):Is(s.id)},lr=s=>{Fe(s),Pe(s.price.toString())},ar=async()=>{if(!ne||!ts)return;const s=parseFloat(ts);if(isNaN(s)||s<0){u.error("Παρακαλώ εισάγετε έγκυρη τιμή");return}try{S(!0),(Z==null?void 0:Z.name)==="Pilates"?await jr(ne.duration_type,s)&&(ss(r=>r.map(l=>l.id===ne.id?{...l,price:s}:l)),Ps(r=>r.map(l=>l.id===ne.id?{...l,price:s}:l)),Fe(null),Pe(""),u.success("Η τιμή Pilates ενημερώθηκε επιτυχώς")):await vr(ne.id,s)&&(Fe(null),Pe(""),Is((Z==null?void 0:Z.id)||""))}catch(t){console.error("Error updating price:",t)}finally{S(!1)}},or=async s=>{try{S(!0),await wr(s)&&(u.success("Το αίτημα εγκρίθηκε επιτυχώς!"),os())}catch(t){console.error("Error approving request:",t),u.error("Σφάλμα κατά την έγκριση του αιτήματος")}finally{S(!1)}},nr=async s=>{const t=prompt("Παρακαλώ εισάγετε τον λόγο απόρριψης:");if(t)try{S(!0),await Nr(s,t)&&(u.success("Το αίτημα απορρίφθηκε επιτυχώς!"),os())}catch(r){console.error("Error rejecting request:",r),u.error("Σφάλμα κατά την απόρριψη του αιτήματος")}finally{S(!1)}},Ne=(s,t,r)=>{Et(l=>({...l,[s]:{...l[s],[t]:r}}))},ns=(s,t)=>{ws(r=>({...r,[s]:t}))},ir=async s=>{const t=Se[s];if(t==="none"||!a){u.error("Παρακαλώ επιλέξτε μια κατάσταση έγκρισης");return}try{S(!0);const r=G[s];if(!r){u.error("Δεν υπάρχουν επιλογές για αυτό το αίτημα");return}const l=vs.find(m=>m.id===s);if(!l){u.error("Αίτημα δεν βρέθηκε");return}if(await vt(l.user_id,t,{oldMembersUsed:r.oldMembers||!1,kettlebellPoints:r.kettlebellPoints?parseInt(r.kettlebellPoints):0,cashAmount:r.cashAmount||0,posAmount:r.posAmount||0,createdBy:a.id,notes:`Program options saved for membership request ${s} with ${t} status`})){if(console.log(`Program approval state saved for membership request: ${s}`),t==="pending"){const g=new Set(rs),E={...ls};g.add(s),E[s]=r,Ns(g),_s(E),u("Program Options τοποθετήθηκαν στην αναμονή - οι επιλογές παγώθηκαν",{icon:"⏳"})}else if(t==="approved"&&await dr(s,l.user_id,r),v(s)){const g=new Set(rs),E={...ls};g.delete(s),delete E[s],Ns(g),_s(E)}ws(g=>({...g,[s]:"none"}));const m={approved:"εγκρίθηκε και εκτελέστηκαν οι ενέργειες",rejected:"απορρίφθηκε",pending:"τοποθετήθηκε στην αναμονή"};u.success(`Program Options ${m[t]} επιτυχώς!`)}else u.error("Σφάλμα κατά την αποθήκευση των Program Options")}catch(r){console.error("Error saving request program options:",r),u.error("Σφάλμα κατά την αποθήκευση των Program Options")}finally{S(!1)}},dr=async(s,t,r)=>{console.log("Executing approved program actions for membership request:",s);try{r.oldMembers&&(await ds(t,(a==null?void 0:a.id)||"")?console.log(`[APPROVED] Old Members marked as used for membership request: ${s}`):console.warn(`[APPROVED] Failed to mark Old Members as used for membership request: ${s}`)),r.kettlebellPoints&&parseInt(r.kettlebellPoints)>0&&(await cs(t,parseInt(r.kettlebellPoints),void 0,(a==null?void 0:a.id)||"")?console.log(`[APPROVED] Kettlebell Points saved for membership request: ${s}, Points: ${r.kettlebellPoints}`):console.warn(`[APPROVED] Failed to save Kettlebell Points for membership request: ${s}`)),r.cashAmount&&r.cashAmount>0&&(await Be(t,r.cashAmount,"cash",void 0,(a==null?void 0:a.id)||"","Cash transaction from approved membership request")?console.log(`[APPROVED] Cash transaction saved for membership request: ${s}, Amount: €${r.cashAmount}`):console.warn(`[APPROVED] Failed to save Cash transaction for membership request: ${s}`)),r.posAmount&&r.posAmount>0&&(await Be(t,r.posAmount,"pos",void 0,(a==null?void 0:a.id)||"","POS transaction from approved membership request")?console.log(`[APPROVED] POS transaction saved for membership request: ${s}, Amount: €${r.posAmount}`):console.warn(`[APPROVED] Failed to save POS transaction for membership request: ${s}`)),u.success("Έγιναν όλες οι απαραίτητες ενέργειες για το εγκεκριμένο αίτημα!")}catch(l){console.error("Error executing approved program actions for membership request:",l),u.error("Σφάλμα κατά την εκτέλεση των ενεργειών")}},Ts=async()=>{try{S(!0);const[s,t]=await Promise.all([Cr(),Dr()]);Pt(s),Nt(t)}catch(s){console.error("Error loading kettlebell points data:",s),u.error("Σφάλμα κατά τη φόρτωση των Kettlebell Points")}finally{S(!1)}},cr=async s=>{try{const r=(await Ir(s)).reduce((l,o)=>l+o.points,0);Ee(r.toString())}catch(t){console.error("Error loading user kettlebell points:",t),Ee("")}},mr=s=>{if(!s.trim()){fs([]);return}const t=ge.filter(r=>r.user_name.toLowerCase().includes(s.toLowerCase())||r.user_email.toLowerCase().includes(s.toLowerCase()));fs(t)},Us=s=>{kt(s),mr(s)};return c.useEffect(()=>{b==="membership-packages"&&(Xt(),os())},[b]),c.useEffect(()=>{b==="kettlebell-points"&&Ts()},[b]),c.useEffect(()=>{(async()=>{if(a)try{const{data:t,error:r}=await P.from("user_old_members_usage").select("user_id");if(r){console.error("Error loading old members usage:",r);return}const l=new Set((t==null?void 0:t.map(o=>o.user_id))||[]);hs(l)}catch(t){console.error("Exception loading old members usage:",t)}})()},[a]),c.useEffect(()=>{n.selectedUserId&&cr(n.selectedUserId)},[n.selectedUserId]),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-xl shadow-xl p-4 sm:p-8 text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-3xl font-bold mb-2",children:"🏋️‍♂️ Διαχείριση Γυμναστηρίου"}),e.jsxs("p",{className:"text-blue-100 text-sm sm:text-lg",children:["Καλώς ήρθες, ",e.jsx("span",{className:"font-semibold",children:a.firstName}),"!"]})]}),e.jsx("div",{className:"bg-white/20 rounded-xl p-3 sm:p-4 backdrop-blur-sm self-start sm:self-auto",children:e.jsx(hr,{className:"h-8 w-8 sm:h-12 sm:w-12"})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex overflow-x-auto space-x-2 sm:space-x-8 px-3 sm:px-6",children:Rt.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>p(s.id),className:`py-3 sm:py-4 px-2 sm:px-1 border-b-3 font-semibold text-xs sm:text-sm flex items-center space-x-2 sm:space-x-3 transition-all duration-200 whitespace-nowrap ${b===s.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(t,{className:`h-4 w-4 sm:h-5 sm:w-5 ${b===s.id?"text-blue-500":"text-gray-400"}`}),e.jsx("span",{className:"hidden sm:inline",children:s.name}),e.jsx("span",{className:"sm:hidden",children:s.name.split(" ")[0]})]},s.id)})})}),e.jsxs("div",{className:"p-3 sm:p-6",children:[M&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Φόρτωση δεδομένων χρήστη… Αυτό μπορεί να διαρκέσει λίγα δευτερόλεπτα."})]}),b==="personal-training"&&!M&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-4 sm:p-6 text-white mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-2",children:"💪 Personal Training Πρόγραμμα"}),e.jsx("p",{className:"text-purple-100 text-sm sm:text-base",children:"Διαχείριση προγραμμάτων προπόνησης"})]}),e.jsxs("button",{onClick:()=>J(!0),className:"flex items-center space-x-2 sm:space-x-3 px-4 sm:px-6 py-2 sm:py-3 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg text-sm sm:text-base",children:[e.jsx(Ge,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{children:"🏋️‍♂️ Δημιουργία Προγράμματος"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl shadow-lg border border-blue-200 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-blue-800 mb-2 sm:mb-3",children:"🔍 Αναζήτηση Χρήστη"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-500"})}),e.jsx("input",{type:"text",placeholder:"Αναζητήστε με όνομα ή email...",value:q,onChange:s=>Je(s.target.value),className:"w-full pl-10 sm:pl-12 pr-4 py-2 sm:py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700 placeholder-gray-400 text-sm sm:text-base"})]})]}),q&&e.jsxs("button",{onClick:()=>Je(""),className:"px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm text-blue-600 hover:text-red-600 flex items-center space-x-2 bg-white rounded-lg border border-blue-200 hover:border-red-200 transition-all duration-200",children:[e.jsx(Ue,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Καθαρισμός"})]})]}),q&&e.jsxs("div",{className:"mt-4 bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-medium",children:["📊 Εμφανίζονται ",ve.length," από ",D.length," προγράμματα"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"px-3 sm:px-6 py-4 sm:py-5 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:e.jsxs("div",{className:"flex flex-col space-y-3 sm:space-y-0 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 flex items-center",children:"📋 Κατάσταση Προγραμμάτων"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium",children:[ve.length," προγράμματα"]}),K>1&&e.jsxs("span",{className:"bg-gray-100 text-gray-600 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium",children:["Σελίδα ",B," από ",K]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 sm:space-y-0 sm:flex-row sm:items-center sm:space-x-4",children:[ee!=="all"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:["Φίλτρο:",e.jsxs("span",{className:"ml-1 font-semibold text-blue-600",children:[ee==="pending"&&"⏳ Σε Αναμονή",ee==="accepted"&&"✅ Αποδεκτά",ee==="declined"&&"❌ Απορριφθέντα"]})]}),e.jsx("button",{onClick:()=>us("all"),className:"px-2 sm:px-3 py-1 text-xs bg-gray-200 text-gray-700 rounded-full hover:bg-gray-300 transition-colors",children:"✕"})]}),K>1&&e.jsxs("div",{className:"flex items-center justify-center sm:justify-end space-x-1 sm:space-x-2",children:[e.jsx("button",{onClick:()=>ce(s=>Math.max(s-1,1)),disabled:B===1,className:"px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"←"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(3,K)},(s,t)=>{let r;return K<=3||B<=2?r=t+1:B>=K-1?r=K-2+t:r=B-1+t,e.jsx("button",{onClick:()=>ce(r),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm font-medium rounded-lg transition-all duration-200 ${B===r?"bg-blue-600 text-white shadow-lg":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:text-gray-900"}`,children:r},r)})}),e.jsx("button",{onClick:()=>ce(s=>Math.min(s+1,K)),disabled:B===K,className:"px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"→"})]})]})]})}),e.jsx("div",{className:"p-3 sm:p-6",children:Cs.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:q||ee!=="all"?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm sm:text-base",children:q?`Δεν βρέθηκαν προγράμματα για την αναζήτηση "${q}"`:`Δεν βρέθηκαν προγράμματα με κατάσταση "${ee}"`}),e.jsxs("div",{className:"mt-3 flex flex-wrap justify-center gap-2",children:[q&&e.jsx("button",{onClick:()=>Je(""),className:"px-3 py-1 text-xs sm:text-sm bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200 transition-colors",children:"✕ Καθαρισμός αναζήτησης"}),ee!=="all"&&e.jsx("button",{onClick:()=>us("all"),className:"px-3 py-1 text-xs sm:text-sm bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors",children:"✕ Καθαρισμός φίλτρου"})]})]}):e.jsx("p",{className:"text-sm sm:text-base",children:"Δεν υπάρχουν προγράμματα Personal Training"})}):e.jsx("div",{className:"space-y-3 sm:space-y-4",children:Cs.map(s=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 sm:p-6 hover:shadow-lg cursor-pointer transition-all duration-200 hover:border-blue-300",onClick:()=>{ks({email:s.user.email})||(se(s.user),Gt(s.user.id),setTimeout(()=>{const t=document.querySelector("#schedule-editor");t&&(t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),t.classList.add("animate-pulse"),setTimeout(()=>{t.classList.remove("animate-pulse")},2e3))},500))},children:e.jsxs("div",{className:"flex flex-col space-y-3 sm:space-y-0 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 sm:space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:s.user.profile_photo?e.jsx("img",{src:s.user.profile_photo,alt:`${s.user.firstName} ${s.user.lastName}`,className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full object-cover border-2 border-white shadow-lg",onError:t=>{const r=t.target;r.style.display="none";const l=r.parentElement;l&&(l.innerHTML='<div class="w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center shadow-lg"><svg class="h-5 w-5 sm:h-6 sm:w-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div>')}}):e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(Ie,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900 truncate",children:[s.user.firstName," ",s.user.lastName]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 truncate flex items-center",children:[e.jsx("span",{className:"mr-1",children:"📧"}),s.user.email]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:["📅 ",s.schedule.month,"/",s.schedule.year]}),e.jsxs("span",{className:`inline-flex items-center px-2 sm:px-3 py-1 rounded-full text-xs font-bold ${je(s.schedule)==="Personal Training"?"bg-blue-100 text-blue-800 border border-blue-200":je(s.schedule)==="Kick Boxing"?"bg-red-100 text-red-800 border border-red-200":"bg-purple-100 text-purple-800 border border-purple-200"}`,children:[je(s.schedule)==="Personal Training"&&"💪",je(s.schedule)==="Kick Boxing"&&"🥊",je(s.schedule)==="Combo Training"&&"🔥",e.jsx("span",{className:"hidden sm:inline ml-1",children:je(s.schedule)})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[e.jsxs("p",{children:["Δημιουργήθηκε: ",new Date(s.schedule.createdAt).toLocaleDateString("el-GR")]}),s.status==="accepted"&&s.schedule.acceptedAt&&e.jsxs("p",{className:"text-green-600",children:["Αποδεκτό: ",new Date(s.schedule.acceptedAt).toLocaleDateString("el-GR")]}),s.status==="declined"&&s.schedule.declinedAt&&e.jsxs("p",{className:"text-red-600",children:["Απορρίφθηκε: ",new Date(s.schedule.declinedAt).toLocaleDateString("el-GR")]})]})]})]}),e.jsx("div",{className:"flex-shrink-0 mt-3 sm:mt-0",children:e.jsxs("span",{className:`inline-flex items-center px-3 sm:px-4 py-2 rounded-full text-xs sm:text-sm font-bold shadow-lg ${s.status==="pending"?"bg-gradient-to-r from-yellow-400 to-orange-500 text-white":s.status==="accepted"?"bg-gradient-to-r from-green-400 to-emerald-500 text-white":"bg-gradient-to-r from-red-400 to-pink-500 text-white"}`,children:[s.status==="pending"&&"⏳ Σε Αναμονή",s.status==="accepted"&&"✅ Αποδεκτό",s.status==="declined"&&"❌ Απορριφθέν"]})})]})},s.schedule.id))})}),K>1&&e.jsx("div",{className:"px-3 sm:px-6 py-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:e.jsxs("div",{className:"flex flex-col space-y-3 sm:space-y-0 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{className:"text-center sm:text-left",children:e.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:["Εμφανίζονται ",as+1,"-",Math.min(As,ve.length)," από ",ve.length," προγράμματα"]})}),e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx("button",{onClick:()=>ce(s=>Math.max(s-1,1)),disabled:B===1,className:"px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"← Προηγούμενη"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(3,K)},(s,t)=>{let r;return K<=3||B<=2?r=t+1:B>=K-1?r=K-2+t:r=B-1+t,e.jsx("button",{onClick:()=>ce(r),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm font-medium rounded-lg transition-all duration-200 ${B===r?"bg-blue-600 text-white shadow-lg":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:text-gray-900"}`,children:r},r)})}),e.jsx("button",{onClick:()=>ce(s=>Math.min(s+1,K)),disabled:B===K,className:"px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"Επόμενη →"})]})]})})]}),N&&I&&!ks({email:N.email,personalTrainingCode:N.personalTrainingCode})&&e.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border-2 border-blue-200 rounded-xl shadow-xl p-4 sm:p-8",id:"schedule-editor",children:[e.jsxs("div",{className:"flex flex-col space-y-4 sm:space-y-0 sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 sm:p-6 rounded-xl shadow-lg flex-1 sm:flex-none",children:[e.jsxs("h3",{className:"text-lg sm:text-2xl font-bold mb-1 sm:mb-2",children:["🏋️‍♂️ Πρόγραμμα για ",N.firstName," ",N.lastName]}),e.jsxs("p",{className:"text-blue-100 text-sm sm:text-lg",children:["📅 ",Ot[I.month-1]," ",I.year]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 sm:space-x-2 sm:gap-0",children:V?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:Vt,className:"flex items-center space-x-1 px-3 py-2 bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors text-sm",children:[e.jsx(jt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Προσθήκη Σεσίας"}),e.jsx("span",{className:"sm:hidden",children:"Προσθήκη"})]}),e.jsxs("button",{onClick:Wt,className:"flex items-center space-x-1 px-3 py-2 bg-primary-100 text-primary-700 rounded-md hover:bg-primary-200 transition-colors text-sm",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsx("span",{children:"Αποθήκευση"})]}),e.jsx("button",{onClick:()=>A(!1),className:"flex items-center space-x-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-sm",children:e.jsx("span",{children:"Ακύρωση"})})]}):e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center space-x-1 px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors text-sm",children:[e.jsx(gt,{className:"h-4 w-4"}),e.jsx("span",{children:"Επεξεργασία"})]})})]}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:I.scheduleData.sessions.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Ημέρα"}),V?e.jsx("input",{type:"date",value:s.date,onChange:t=>we(s.id,"date",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm"}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:new Date(s.date).toLocaleDateString("el-GR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Ώρα Έναρξης"}),V?e.jsx("select",{value:s.startTime,onChange:t=>we(s.id,"startTime",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:Ds.map(t=>e.jsx("option",{value:t,children:t},t))}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.startTime})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Ώρα Λήξης"}),V?e.jsx("select",{value:s.endTime,onChange:t=>we(s.id,"endTime",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:Ds.map(t=>e.jsx("option",{value:t,children:t},t))}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.endTime})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Τύπος"}),V?e.jsxs("select",{value:s.type,onChange:t=>we(s.id,"type",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:[e.jsx("option",{value:"personal",children:"Personal Training"}),e.jsx("option",{value:"kickboxing",children:"Kick Boxing"}),e.jsx("option",{value:"combo",children:"Combo"})]}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900 capitalize",children:s.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Προπονητής"}),V?e.jsx("select",{value:s.trainer,onChange:t=>we(s.id,"trainer",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:wt.map(t=>e.jsx("option",{value:t,children:t},t))}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.trainer})]}),e.jsx("div",{className:"flex items-end sm:col-span-2 lg:col-span-1",children:V&&e.jsxs("button",{onClick:()=>Bt(s.id),className:"flex items-center space-x-1 px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors text-sm w-full sm:w-auto",children:[e.jsx(ht,{className:"h-4 w-4"}),e.jsx("span",{children:"Διαγραφή"})]})})]}),s.notes&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Σημειώσεις"}),V?e.jsx("input",{type:"text",value:s.notes,onChange:t=>we(s.id,"notes",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",placeholder:"Σημειώσεις για τη σέσια"}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.notes})]})]},s.id))}),e.jsxs("div",{className:"mt-4 sm:mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Γενικές Σημειώσεις"}),V?e.jsx("textarea",{value:I.scheduleData.notes||"",onChange:s=>{const t={...I,scheduleData:{...I.scheduleData,notes:s.target.value}};z(t)},className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",rows:3,placeholder:"Γενικές σημειώσεις για το πρόγραμμα..."}):e.jsx("p",{className:"text-sm text-gray-900",children:I.scheduleData.notes||"Δεν υπάρχουν σημειώσεις"})]})]})]}),b==="membership-packages"&&!M&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Διαχείριση Πακέτων Συνδρομών"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Ενημερώστε τις τιμές για κάθε πακέτο και διάρκεια"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ct.map(s=>e.jsxs("div",{className:`border-2 rounded-xl p-6 cursor-pointer transition-all duration-200 ${(Z==null?void 0:Z.id)===s.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>rr(s),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[s.name==="Pilates"?e.jsx("span",{className:"text-2xl",children:"🧘"}):e.jsx(Ve,{className:"h-6 w-6 text-blue-500"}),e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:s.name})]}),e.jsx(is,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:s.description}),s.features&&e.jsx("ul",{className:"space-y-1",children:s.features.slice(0,3).map((t,r)=>e.jsxs("li",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full mr-2"}),t]},r))})]},s.id))})})]}),Z&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Τιμές για ",Z.name]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Ενημερώστε τις τιμές για κάθε διάρκεια"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:It.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ut,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:ft(s.duration_type)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.duration_days," ημέρες"]})]})]}),e.jsx("button",{onClick:()=>lr(s),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(gt,{className:"h-4 w-4"})})]}),(ne==null?void 0:ne.id)===s.id?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"number",value:ts,onChange:t=>Pe(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Νέα τιμή",step:"0.01",min:"0"})}),e.jsx("button",{onClick:ar,disabled:M,className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{Fe(null),Pe("")},className:"px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:e.jsx(Ue,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:yt(s.price)}),e.jsx("div",{className:"text-sm text-gray-600",children:"EUR"})]})]},s.id))})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 px-8 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-white/10 rounded-xl backdrop-blur-sm",children:e.jsx(Ie,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Αιτήματα Συνδρομών"}),e.jsx("p",{className:"text-slate-200 mt-1",children:"Διαχειριστείτε τα αιτήματα συνδρομών από χρήστες"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Αναζήτηση με όνομα χρήστη...",value:ye,onChange:tr,className:"pl-12 pr-6 py-3 bg-white/10 border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 w-full lg:w-80 text-white placeholder-slate-300 backdrop-blur-sm"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-slate-50 via-blue-50 to-indigo-50 border border-slate-200 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"h-6 w-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Οδηγίες Διαχείρισης Αιτημάτων"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(ue,{className:"h-3 w-3 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-800 mb-1",children:"Αναζήτηση & Πλοήγηση"}),e.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed",children:["Χρησιμοποιήστε το πεδίο αναζήτησης για να βρείτε γρήγορα αιτήματα με όνομα χρήστη. Η λίστα εμφανίζεται σε ",e.jsx("span",{className:"font-semibold text-blue-700",children:"6άδες"})," - ελέγξτε την επόμενη σελίδα αν δεν βρείτε το επιθυμητό αίτημα."]})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg p-4 border border-amber-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-amber-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(ms,{className:"h-3 w-3 text-amber-600"})}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-amber-800 mb-1 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-amber-500 rounded-full mr-2"}),"Σημαντική Προσοχή - Διαδικασία Πληρωμής"]}),e.jsxs("p",{className:"text-sm text-amber-700 leading-relaxed",children:[e.jsx("span",{className:"font-semibold",children:"ΠΡΩΤΑ"})," αποθηκεύουμε τα χρήματα στο σύστημα (Cash Register) και",e.jsx("span",{className:"font-semibold",children:" ΕΠΕΙΤΑ"})," επιλέγουμε για το αίτημα του χρήστη εάν εγκρίνεται ή απορρίπτεται."]})]})]})})]})]})]})}),e.jsx("div",{className:"p-8",children:Ae().length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Ie,{className:"h-10 w-10 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:ye?"Δεν βρέθηκαν αποτελέσματα":"Δεν υπάρχουν αιτήματα"}),e.jsx("p",{className:"text-gray-500",children:ye?`Για την αναζήτηση "${ye}"`:"Δεν έχουν υποβληθεί αιτήματα συνδρομών ακόμα"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-slate-50 rounded-xl p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ge,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-slate-700",children:["Εμφάνιση ",(ie-1)*ke+1,"-",Math.min(ie*ke,Ae().length)," από ",Ae().length," αιτήματα"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Οργανωμένα σε 6άδες για εύκολη πλοήγηση"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[me()>3&&e.jsx("button",{onClick:er,disabled:ie===1,className:"px-3 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-200",title:"Πρώτη σελίδα",children:"««"}),e.jsxs("button",{onClick:Zt,disabled:ie===1,className:"px-4 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed flex items-center space-x-2 transition-all duration-200",children:[e.jsx("span",{children:"←"}),e.jsx("span",{children:"Προηγούμενο"})]}),e.jsxs("div",{className:"px-4 py-2 text-sm font-semibold text-slate-700 bg-slate-200 rounded-lg min-w-[120px] text-center",children:[ie," / ",me()]}),e.jsxs("button",{onClick:qt,disabled:ie>=me(),className:"px-4 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed flex items-center space-x-2 transition-all duration-200",children:[e.jsx("span",{children:"Επόμενο"}),e.jsx("span",{children:"→"})]}),me()>3&&e.jsx("button",{onClick:sr,disabled:ie>=me(),className:"px-3 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-200",title:"Τελευταία σελίδα",children:"»»"})]})]})}),e.jsx("div",{className:"space-y-6",children:Yt().map(s=>{var t,r,l,o,m,g,E,re,xe,f,U,Q,le,ze,Ce,R,De,Xs,Ys,Zs,qs,et,st,tt,rt,lt,at,ot,nt,it,dt;return e.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"relative",children:[(t=s.user)!=null&&t.profile_photo?e.jsxs("div",{className:"w-12 h-12 rounded-xl overflow-hidden shadow-lg border-2 border-white",children:[e.jsx("img",{src:s.user.profile_photo,alt:`${(r=s.user)==null?void 0:r.first_name} ${(l=s.user)==null?void 0:l.last_name}`,className:"w-full h-full object-cover",onError:O=>{O.currentTarget.style.display="none";const ct=O.currentTarget.nextElementSibling;ct&&(ct.style.display="flex")}}),e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center hidden",children:e.jsx(Ie,{className:"h-6 w-6 text-white"})})]}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Ie,{className:"h-6 w-6 text-white"})}),s.status==="pending"&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full border-2 border-white"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-1",children:[(o=s.user)==null?void 0:o.first_name," ",(m=s.user)==null?void 0:m.last_name]}),e.jsxs("p",{className:"text-sm text-slate-600 mb-2 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-slate-300 rounded-full mr-2"}),(g=s.user)==null?void 0:g.email]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:(E=s.package)==null?void 0:E.name}),e.jsx("span",{className:"text-sm text-slate-500",children:"•"}),e.jsx("span",{className:"text-sm text-slate-600",children:ft(s.duration_type)})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:yt(s.requested_price)}),e.jsxs("div",{className:"text-sm text-slate-500 flex items-center",children:[e.jsx(Ge,{className:"h-4 w-4 mr-1"}),new Date(s.created_at).toLocaleDateString("el-GR")]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[s.status==="pending"&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>or(s.id),disabled:M,className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Εγκρίνω"})]}),e.jsxs("button",{onClick:()=>nr(s.id),disabled:M,className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),e.jsx("span",{children:"Απορρίπτω"})]})]}),s.status==="approved"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"Εγκεκριμένο"})]}),s.status==="rejected"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-semibold",children:"Απορριφθέν"})]})]})]})]})}),(s.status==="pending"||s.status==="approved"&&v(s.id)||s.status==="rejected"&&v(s.id))&&e.jsx("div",{className:`border-t border-slate-200 ${v(s.id)?"bg-gradient-to-r from-yellow-50 to-amber-50":"bg-slate-50"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${v(s.id)?"bg-yellow-100":"bg-slate-100"}`,children:e.jsx(is,{className:`h-5 w-5 ${v(s.id)?"text-yellow-600":"text-slate-600"}`})}),e.jsxs("h5",{className:`text-lg font-semibold ${v(s.id)?"text-yellow-800":"text-slate-700"} flex items-center`,children:["Program Options",v(s.id)&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-yellow-200 text-yellow-800 rounded-full text-xs font-medium",children:"Κλειδωμένο"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[((re=s.package)==null?void 0:re.name)!=="Pilates"&&e.jsx("div",{className:`p-3 rounded-lg border ${v(s.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:e.jsx("button",{onClick:()=>{var O;if(v(s.id)){u("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}Ne(s.id,"oldMembers",!((O=G[s.id])!=null&&O.oldMembers))},className:`w-full p-3 rounded-lg text-left transition-colors ${(xe=G[s.id])!=null&&xe.oldMembers||(f=Y(s.id))!=null&&f.oldMembers?"bg-green-100 text-green-800 border-2 border-green-300":v(s.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:[v(s.id)&&"🔒 ","👴 Παλαιά μέλη"]}),(((U=G[s.id])==null?void 0:U.oldMembers)||((Q=Y(s.id))==null?void 0:Q.oldMembers))&&e.jsx("span",{className:"text-green-600",children:"✓"})]})})}),((le=s.package)==null?void 0:le.name)!=="Pilates"&&e.jsxs("div",{className:`p-3 rounded-lg border ${v(s.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[v(s.id)&&"🔒 ","🏋️ Kettlebell Points"]}),e.jsx("input",{type:"number",value:v(s.id)?((ze=Y(s.id))==null?void 0:ze.kettlebellPoints)||"":((Ce=G[s.id])==null?void 0:Ce.kettlebellPoints)||"",onChange:O=>{v(s.id)||Ne(s.id,"kettlebellPoints",O.target.value)},placeholder:"Εισάγετε πόντους",className:`w-full p-2 border rounded-lg ${v(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,disabled:v(s.id)})]}),e.jsxs("div",{className:`p-3 rounded-lg border ${v(s.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsx("button",{onClick:()=>{var O;if(v(s.id)){u("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}Ne(s.id,"cash",!((O=G[s.id])!=null&&O.cash))},className:`w-full p-3 rounded-lg text-left transition-colors ${(R=G[s.id])!=null&&R.cash||(De=Y(s.id))!=null&&De.cash?"bg-green-100 text-green-800 border-2 border-green-300":v(s.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:[v(s.id)&&"🔒 ","💰 Μετρητά"]}),(((Xs=G[s.id])==null?void 0:Xs.cash)||((Ys=Y(s.id))==null?void 0:Ys.cash))&&e.jsx("span",{className:"text-green-600",children:"✓"})]})}),(((Zs=G[s.id])==null?void 0:Zs.cash)||((qs=Y(s.id))==null?void 0:qs.cash))&&e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"number",value:v(s.id)?((et=Y(s.id))==null?void 0:et.cashAmount)||"":((st=G[s.id])==null?void 0:st.cashAmount)||"",onChange:O=>{v(s.id)||Ne(s.id,"cashAmount",parseFloat(O.target.value)||0)},placeholder:"Ποσό σε €",className:`w-full p-2 border rounded-lg ${v(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500"}`,disabled:v(s.id)}),e.jsx("button",{onClick:()=>{v(s.id)},className:`mt-2 w-full px-3 py-1 text-sm rounded-lg ${v(s.id)?"bg-yellow-200 text-yellow-700 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,disabled:v(s.id),children:"✓ Επιλογή"})]})]}),e.jsxs("div",{className:`p-3 rounded-lg border ${v(s.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsx("button",{onClick:()=>{var O;if(v(s.id)){u("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}Ne(s.id,"pos",!((O=G[s.id])!=null&&O.pos))},className:`w-full p-3 rounded-lg text-left transition-colors ${(tt=G[s.id])!=null&&tt.pos||(rt=Y(s.id))!=null&&rt.pos?"bg-blue-100 text-blue-800 border-2 border-blue-300":v(s.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:[v(s.id)&&"🔒 ","💳 POS"]}),(((lt=G[s.id])==null?void 0:lt.pos)||((at=Y(s.id))==null?void 0:at.pos))&&e.jsx("span",{className:"text-blue-600",children:"✓"})]})}),(((ot=G[s.id])==null?void 0:ot.pos)||((nt=Y(s.id))==null?void 0:nt.pos))&&e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"number",value:v(s.id)?((it=Y(s.id))==null?void 0:it.posAmount)||"":((dt=G[s.id])==null?void 0:dt.posAmount)||"",onChange:O=>{v(s.id)||Ne(s.id,"posAmount",parseFloat(O.target.value)||0)},placeholder:"Ποσό σε €",className:`w-full p-2 border rounded-lg ${v(s.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,disabled:v(s.id)}),e.jsx("button",{onClick:()=>{v(s.id)},className:`mt-2 w-full px-3 py-1 text-sm rounded-lg ${v(s.id)?"bg-yellow-200 text-yellow-700 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:v(s.id),children:"✓ Επιλογή"})]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>ns(s.id,"approved"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${Se[s.id]==="approved"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:"✅ Έγκριση"}),e.jsx("button",{onClick:()=>ns(s.id,"rejected"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${Se[s.id]==="rejected"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:"❌ Απόρριψη"}),e.jsx("button",{onClick:()=>ns(s.id,"pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${Se[s.id]==="pending"?"bg-yellow-600 text-white":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"}`,children:"⏳ Αναμονή"}),e.jsxs("button",{onClick:()=>ir(s.id),disabled:M||Se[s.id]==="none",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[M?e.jsx(bt,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Αποθήκευση Program Options"]})]})]})})]},s.id)})})]})})]})]}),b==="pilates-schedule"&&!M&&e.jsx(Pr,{}),b==="cash-register"&&!M&&e.jsx(Ar,{}),b==="kettlebell-points"&&!M&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 rounded-xl p-4 sm:p-6 text-white mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-2",children:"🏋️‍♂️ Kettlebell Points Ranking"}),e.jsx("p",{className:"text-orange-100 text-sm sm:text-base",children:"Συνολικοί βαθμοί και κατάταξη χρηστών"})]}),e.jsxs("button",{onClick:Ts,className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg text-sm",children:[e.jsx(Ve,{className:"h-4 w-4"}),e.jsx("span",{children:"🔄 Ανανέωση"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-2",children:"📊 Συνολικοί Βαθμοί"}),e.jsx("p",{className:"text-blue-600",children:"Όλοι οι χρήστες συνολικά"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-900",children:_t}),e.jsx("div",{className:"text-sm text-blue-600",children:"βαθμοί"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"🏆 Κατάταξη Χρηστών"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Βαθμοί Kettlebell ανά χρήστη"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Αναζήτηση χρήστη...",value:he,onChange:s=>Us(s.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]}),he&&e.jsx("button",{onClick:()=>Us(""),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ue,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"p-6",children:ge.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Δεν υπάρχουν βαθμοί Kettlebell ακόμα"}),e.jsx("p",{className:"text-sm mt-2",children:"Οι βαθμοί θα εμφανιστούν εδώ όταν δημιουργηθούν προγράμματα με Kettlebell Points"})]}):e.jsxs("div",{className:"space-y-4",children:[(he?ps:ge.slice(0,10)).map((s,t)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${t===0?"bg-yellow-500":t===1?"bg-gray-400":t===2?"bg-orange-500":"bg-blue-500"}`,children:he?ge.findIndex(r=>r.user_id===s.user_id)+1:t+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.user_name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.user_email}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.points_count," ",s.points_count===1?"πρόγραμμα":"προγράμματα"," • Τελευταία ενημέρωση: ",new Date(s.last_updated).toLocaleDateString("el-GR")]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.total_points}),e.jsx("div",{className:"text-sm text-gray-600",children:"βαθμοί"})]})]})},s.user_id)),he&&ps.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ue,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Δεν βρέθηκαν χρήστες με αυτό το όνομα"}),e.jsx("p",{className:"text-sm mt-2",children:"Δοκιμάστε ένα διαφορετικό όρο αναζήτησης"})]}),!he&&ge.length>10&&e.jsx("div",{className:"text-center py-4",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Εμφανίζονται οι πρώτοι 10 από ",ge.length," χρήστες"]})})]})})]})]}),b!=="personal-training"&&b!=="membership-packages"&&b!=="pilates-schedule"&&b!=="kettlebell-points"&&b!=="cash-register"&&!M&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Αυτή η κατηγορία θα υλοποιηθεί σύντομα."})})]})]}),ae&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-2 sm:p-4",children:e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-t-xl sm:rounded-t-2xl p-4 sm:p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg sm:text-2xl font-bold mb-1 sm:mb-2",children:"🏋️‍♂️ Δημιουργία Προγράμματος"}),e.jsx("p",{className:"text-purple-100 text-sm sm:text-base",children:"Δημιουργήστε νέο πρόγραμμα Personal Training"})]}),e.jsx("button",{onClick:()=>J(!1),className:"text-white/80 hover:text-white hover:bg-white/20 rounded-full p-2 transition-all duration-200 flex-shrink-0 ml-2",children:e.jsx(Ue,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]})}),e.jsxs("div",{className:"p-4 sm:p-8",children:[e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 sm:p-6 border border-indigo-200",children:[e.jsx("label",{className:"block text-base sm:text-lg font-bold text-indigo-800 mb-3 sm:mb-4 flex items-center",children:"🏋️‍♂️ Τύπος Προπόνησης"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>y("individual"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${i==="individual"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"👤 Ατομικό"}),e.jsx("button",{type:"button",onClick:()=>y("group"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${i==="group"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"👥 Group"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-4 sm:p-6 border border-blue-200",children:[e.jsx("label",{className:"block text-base sm:text-lg font-bold text-blue-800 mb-3 sm:mb-4 flex items-center",children:"👥 Τύπος Χρήστη"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>_("personal"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${j==="personal"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🏋️‍♂️ Personal User"}),e.jsx("button",{type:"button",onClick:()=>_("paspartu"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${j==="paspartu"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🎯 Paspartu User"})]}),e.jsx("div",{className:"mt-3 text-sm text-blue-700",children:j==="personal"?e.jsx("span",{children:"📋 Personal Users: Παίρνουν κλειδωμένο πρόγραμμα με συγκεκριμένες ώρες"}):e.jsx("span",{children:"💳 Paspartu Users: Παίρνουν 5 μαθήματα και επιλέγουν ελεύθερα τις ώρες"})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:[e.jsxs("label",{className:"block text-lg font-bold text-blue-800 mb-4 flex items-center",children:["👤 ",i==="individual"?"Επιλογή Χρήστη":"Επιλογή Χρηστών (Group)"]}),e.jsxs("div",{className:"flex space-x-3 mb-4",children:[e.jsx("button",{type:"button",onClick:()=>Qe("dropdown"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${He==="dropdown"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"📋 Dropdown"}),e.jsx("button",{type:"button",onClick:()=>Qe("search"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${He==="search"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🔍 Αναζήτηση"})]}),He==="dropdown"?i==="individual"?e.jsxs("select",{className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700",value:n.selectedUserId,onChange:s=>de({...n,selectedUserId:s.target.value}),children:[e.jsx("option",{value:"",children:"-- Επιλέξτε χρήστη --"}),w.length>0?w.map(s=>e.jsxs("option",{value:s.id,children:[s.firstName," ",s.lastName," (",s.email,")"]},s.id)):e.jsx("option",{value:"",disabled:!0,children:"Δεν υπάρχουν χρήστες"})]}):e.jsx("div",{className:"max-h-48 overflow-y-auto border-2 border-blue-200 rounded-xl bg-white",children:w.length>0?w.map(s=>e.jsx("div",{className:`p-3 hover:bg-blue-50 cursor-pointer border-b border-blue-100 last:border-b-0 transition-all duration-200 ${d.includes(s.id)?"bg-blue-100 border-l-4 border-l-blue-500":""}`,onClick:()=>{d.includes(s.id)?L(t=>t.filter(r=>r!==s.id)):L(t=>[...t,s.id])},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:d.includes(s.id),onChange:()=>{},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:s.email})]})]})},s.id)):e.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Δεν υπάρχουν χρήστες"})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700 placeholder-gray-400",placeholder:"🔍 Αναζήτηση με όνομα ή email...",value:$e,onChange:s=>xs(s.target.value)}),$e&&e.jsx("div",{className:"max-h-48 overflow-y-auto border-2 border-blue-200 rounded-xl bg-white shadow-lg",children:Ss.length>0?Ss.map(s=>e.jsxs("div",{className:`p-4 hover:bg-blue-50 cursor-pointer border-b border-blue-100 last:border-b-0 transition-all duration-200 ${i==="individual"?n.selectedUserId===s.id?"bg-blue-100 border-l-4 border-l-blue-500":"":d.includes(s.id)?"bg-blue-100 border-l-4 border-l-blue-500":""}`,onClick:()=>{i==="individual"?de({...n,selectedUserId:s.id}):d.includes(s.id)?L(t=>t.filter(r=>r!==s.id)):L(t=>[...t,s.id])},children:[i==="group"&&e.jsx("input",{type:"checkbox",checked:d.includes(s.id),onChange:()=>{},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:s.email})]},s.id)):e.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Δεν βρέθηκαν χρήστες"})})]}),(i==="individual"?n.selectedUserId:d.length>0)&&e.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm",children:"✓"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-green-800",children:["✅ ",i==="individual"?"Επιλεγμένος:":"Επιλεγμένοι:"]}),i==="individual"?e.jsxs("div",{className:"text-xs text-green-600",children:[($s=w.find(s=>s.id===n.selectedUserId))==null?void 0:$s.firstName," ",(Es=w.find(s=>s.id===n.selectedUserId))==null?void 0:Es.lastName," (",(Ms=w.find(s=>s.id===n.selectedUserId))==null?void 0:Ms.email,")"]}):e.jsxs("div",{className:"text-xs text-green-600",children:[d.map(s=>{const t=w.find(r=>r.id===s);return t?`${t.firstName} ${t.lastName}`:"Άγνωστος"}).join(", ")," (",d.length," χρήστες)"]})]})]})})]}),i==="group"&&d.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 sm:p-6 border border-orange-200 mt-4",children:[e.jsx("h4",{className:"text-lg sm:text-xl font-bold text-orange-800 mb-4 sm:mb-6 flex items-center",children:"🏠 Επιλογές Ομαδικής Αίθουσας"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-orange-700 mb-3",children:"Επιλέξτε Μέγιστο Μέγεθος Ομαδικής Αίθουσας:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>T("2"),className:`p-4 rounded-lg border-2 transition-all duration-200 ${C==="2"?"bg-orange-600 text-white border-orange-600 shadow-lg":"bg-white text-orange-600 border-orange-300 hover:border-orange-500"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"👥"}),e.jsx("div",{className:"font-bold",children:"2 Χρήστες"}),e.jsx("div",{className:"text-sm opacity-75",children:"Μέγιστο 2 άτομα"})]})}),e.jsx("button",{type:"button",onClick:()=>T("3"),className:`p-4 rounded-lg border-2 transition-all duration-200 ${C==="3"?"bg-orange-600 text-white border-orange-600 shadow-lg":"bg-white text-orange-600 border-orange-300 hover:border-orange-500"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"👥👥"}),e.jsx("div",{className:"font-bold",children:"3 Χρήστες"}),e.jsx("div",{className:"text-sm opacity-75",children:"Μέγιστο 3 άτομα"})]})}),e.jsx("button",{type:"button",onClick:()=>T("6"),className:`p-4 rounded-lg border-2 transition-all duration-200 ${C==="6"?"bg-orange-600 text-white border-orange-600 shadow-lg":"bg-white text-orange-600 border-orange-300 hover:border-orange-500"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"👥👥👥"}),e.jsx("div",{className:"font-bold",children:"6 Χρήστες"}),e.jsx("div",{className:"text-sm opacity-75",children:"Μέγιστο 6 άτομα"})]})})]})]}),C&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-orange-700 mb-3",children:"Πόσες φορές την εβδομάδα θα παρακολουθούν οι χρήστες;"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[1,2,3,4,5].map(s=>e.jsx("button",{type:"button",onClick:()=>X(s),className:`p-3 rounded-lg border-2 transition-all duration-200 ${$===s?"bg-orange-600 text-white border-orange-600 shadow-lg":"bg-white text-orange-600 border-orange-300 hover:border-orange-500"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold",children:s}),e.jsxs("div",{className:"text-xs opacity-75",children:[s===1?"φορά":"φορές","/εβδομάδα"]})]})},s))})]}),C&&$&&e.jsx("div",{className:"bg-orange-100 border border-orange-300 rounded-lg p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-orange-700 mb-1",children:"Μηνιαίο Σύνολο"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-800",children:[te," συνεδρίες/μήνα"]}),e.jsxs("div",{className:"text-xs text-orange-600 mt-1",children:["(",$," φορές/εβδομάδα × 4 εβδομάδες)"]})]})}),C&&$&&e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Περίληψη Ανάθεσης Ομάδας"}),e.jsxs("div",{className:"text-lg font-bold text-green-800",children:[d.length," χρήστες (μέγιστο ",C," άτομα)"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[$," φορές/εβδομάδα • ",te," συνεδρίες/μήνα"]}),e.jsx("div",{className:"text-sm text-green-600 mt-2 font-medium",children:"✅ Ευέλικτη ομαδική ανάθεση - ο admin μπορεί να προσθέσει/αφαιρέσει χρήστες"})]}),e.jsx("div",{className:"text-3xl",children:"✅"})]})})]})]}),(i==="individual"?n.selectedUserId:d.length>0)&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 sm:p-6 border border-purple-200 mt-4",children:[e.jsx("h4",{className:"text-lg sm:text-xl font-bold text-purple-800 mb-4 sm:mb-6 flex items-center",children:"⚙️ Επιλογές Προγράμματος"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[!(i==="individual"?gs.has(n.selectedUserId):d.some(s=>gs.has(s)))&&e.jsx("div",{className:`rounded-lg p-4 border ${(i==="individual"?x(n.selectedUserId):d.some(s=>x(s)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:e.jsx("button",{type:"button",onClick:()=>{const s=i==="individual"?[n.selectedUserId]:d;if(s.some(r=>x(r))){u("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Me(r=>{const l={...r};return s.forEach(o=>{var m;l[o]={...l[o],oldMembers:!((m=l[o])!=null&&m.oldMembers)}}),l})},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 relative shadow-lg ${i==="individual"&&n.selectedUserId?x(n.selectedUserId)?(Rs=H(n.selectedUserId))!=null&&Rs.oldMembers?"bg-green-500 text-white":"bg-blue-500 text-white":(Os=oe[n.selectedUserId])!=null&&Os.oldMembers?"bg-green-500 text-white hover:bg-green-600":"bg-blue-500 text-white hover:bg-blue-600":d.some(s=>{var t;return(t=oe[s])==null?void 0:t.oldMembers})?"bg-green-500 text-white hover:bg-green-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"👴 Παλαιά μέλη"}),(i==="individual"&&n.selectedUserId?x(n.selectedUserId)?(Ls=H(n.selectedUserId))==null?void 0:Ls.oldMembers:(Fs=oe[n.selectedUserId])==null?void 0:Fs.oldMembers:d.some(s=>{var t;return(t=oe[s])==null?void 0:t.oldMembers}))&&e.jsx("span",{className:"text-green-200",children:"✓"}),(i==="individual"?x(n.selectedUserId):d.some(s=>x(s)))&&e.jsx("span",{className:"text-yellow-600",children:"🔒"})]})})}),e.jsxs("div",{className:`rounded-lg p-4 border ${(i==="individual"?x(n.selectedUserId):d.some(s=>x(s)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["🏋️‍♂️ Kettlebell Points",(i==="individual"?x(n.selectedUserId):d.some(s=>x(s)))&&e.jsx("span",{className:"text-yellow-600 ml-2",children:"🔒"})]}),e.jsx("input",{type:"number",value:i==="individual"&&n.selectedUserId&&x(n.selectedUserId)?((Ks=H(n.selectedUserId))==null?void 0:Ks.kettlebellPoints)||"":bs,onChange:s=>{const t=i==="individual"?[n.selectedUserId]:d;if(t.some(l=>x(l))){u("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Ee(s.target.value),Me(l=>{const o={...l};return t.forEach(m=>{o[m]={...o[m],kettlebellPoints:s.target.value}}),o})},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${(i==="individual"?x(n.selectedUserId):d.some(s=>x(s)))?"border-yellow-300 bg-yellow-50 focus:ring-yellow-500":"border-gray-300 focus:ring-purple-500 focus:border-purple-500"}`,placeholder:"Εισάγετε αριθμό...",disabled:i==="individual"?x(n.selectedUserId):d.some(s=>x(s))})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${(i==="individual"?x(n.selectedUserId):d.some(s=>x(s)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["💰 Μετρητά (€)",(i==="individual"?x(n.selectedUserId):d.some(s=>x(s)))&&e.jsx("span",{className:"text-yellow-600 ml-2",children:"🔒"})]}),St?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",step:"0.01",min:"0",value:i==="individual"&&n.selectedUserId&&x(n.selectedUserId)?((Vs=(Gs=H(n.selectedUserId))==null?void 0:Gs.cashAmount)==null?void 0:Vs.toString())||"":be,onChange:s=>{if((i==="individual"?[n.selectedUserId]:d).some(l=>x(l))){u("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Re(s.target.value)},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${(i==="individual"?x(n.selectedUserId):d.some(s=>x(s)))?"border-yellow-300 bg-yellow-50 focus:ring-yellow-500":"border-gray-300 focus:ring-green-500 focus:border-green-500"}`,placeholder:"Εισάγετε ποσό σε €...",autoFocus:!0,disabled:i==="individual"?x(n.selectedUserId):d.some(s=>x(s))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{const s=i==="individual"?[n.selectedUserId]:d;if(s.some(r=>x(r))){u("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}be&&parseFloat(be)>0&&(Me(r=>{const l={...r};return s.forEach(o=>{l[o]={...l[o],cash:!0,cashAmount:parseFloat(be)}}),l}),u.success(`Μετρητά €${be} προστέθηκαν! Θα αποθηκευτούν με το Save.`)),Xe(!1),Re("")},className:`flex-1 px-3 py-2 text-white rounded-lg transition-colors text-sm ${i==="individual"&&n.selectedUserId?x(n.selectedUserId)?(Bs=H(n.selectedUserId))!=null&&Bs.cash?"bg-green-600 cursor-not-allowed":"bg-yellow-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700":d.some(s=>x(s))?"bg-yellow-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,disabled:i==="individual"?x(n.selectedUserId):d.some(s=>x(s)),children:"✓ Επιλογή"}),e.jsx("button",{type:"button",onClick:()=>{Xe(!1),Re("")},className:"flex-1 px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:"Ακύρωση"})]})]}):e.jsx("button",{type:"button",onClick:()=>{if((i==="individual"?[n.selectedUserId]:d).some(r=>x(r))){u("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Xe(!0)},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 shadow-lg ${i==="individual"&&n.selectedUserId?x(n.selectedUserId)?(zs=H(n.selectedUserId))!=null&&zs.cash?"bg-green-500 text-white cursor-not-allowed":"bg-yellow-500 text-white cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600":d.some(s=>x(s))?"bg-yellow-500 text-white cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,disabled:i==="individual"?x(n.selectedUserId):d.some(s=>x(s)),children:"💰 Μετρητά"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${(i==="individual"?x(n.selectedUserId):d.some(s=>x(s)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["💳 POS (€)",(i==="individual"?x(n.selectedUserId):d.some(s=>x(s)))&&e.jsx("span",{className:"text-yellow-600 ml-2",children:"🔒"})]}),At?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",step:"0.01",min:"0",value:i==="individual"&&n.selectedUserId&&x(n.selectedUserId)?((Qs=(Hs=H(n.selectedUserId))==null?void 0:Hs.posAmount)==null?void 0:Qs.toString())||"":pe,onChange:s=>{if((i==="individual"?[n.selectedUserId]:d).some(l=>x(l))){u("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Oe(s.target.value)},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${(i==="individual"?x(n.selectedUserId):d.some(s=>x(s)))?"border-yellow-300 bg-yellow-50 focus:ring-yellow-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Εισάγετε ποσό σε €...",autoFocus:!0,disabled:i==="individual"?x(n.selectedUserId):d.some(s=>x(s))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{const s=i==="individual"?[n.selectedUserId]:d;if(s.some(r=>x(r))){u("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}pe&&parseFloat(pe)>0&&(Me(r=>{const l={...r};return s.forEach(o=>{l[o]={...l[o],pos:!0,posAmount:parseFloat(pe)}}),l}),u.success(`POS €${pe} προστέθηκε! Θα αποθηκευτεί με το Save.`)),Ye(!1),Oe("")},className:`flex-1 px-3 py-2 text-white rounded-lg transition-colors text-sm ${i==="individual"&&n.selectedUserId?x(n.selectedUserId)?(Js=H(n.selectedUserId))!=null&&Js.pos?"bg-blue-600 cursor-not-allowed":"bg-yellow-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700":d.some(s=>x(s))?"bg-yellow-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,disabled:i==="individual"?x(n.selectedUserId):d.some(s=>x(s)),children:"✓ Επιλογή"}),e.jsx("button",{type:"button",onClick:()=>{Ye(!1),Oe("")},className:"flex-1 px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:"Ακύρωση"})]})]}):e.jsx("button",{type:"button",onClick:()=>{if((i==="individual"?[n.selectedUserId]:d).some(r=>x(r))){u("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Ye(!0)},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 shadow-lg ${i==="individual"&&n.selectedUserId?x(n.selectedUserId)?(Ws=H(n.selectedUserId))!=null&&Ws.pos?"bg-blue-500 text-white cursor-not-allowed":"bg-yellow-500 text-white cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600":d.some(s=>x(s))?"bg-yellow-500 text-white cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,disabled:i==="individual"?x(n.selectedUserId):d.some(s=>x(s)),children:"💳 POS"})]}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsx("button",{type:"button",onClick:()=>{Le("approved")},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${F==="approved"?"bg-green-600 text-white shadow-lg":"bg-green-500 text-white hover:bg-green-600 shadow-lg"}`,children:"✅ Έγκριση"})}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsx("button",{type:"button",onClick:()=>{Le("rejected")},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${F==="rejected"?"bg-red-600 text-white shadow-lg":"bg-red-500 text-white hover:bg-red-600 shadow-lg"}`,children:"❌ Απόρριψη"})}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsx("button",{type:"button",onClick:()=>{Le("pending")},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${F==="pending"?"bg-yellow-600 text-white shadow-lg":"bg-yellow-500 text-white hover:bg-yellow-600 shadow-lg"}`,children:"⏳ Στην Αναμονή"})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("button",{type:"button",onClick:Ht,disabled:F==="none"||M,className:`w-full px-6 py-4 rounded-lg font-bold text-lg transition-all duration-200 ${F==="none"||M?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:from-purple-700 hover:to-indigo-700 shadow-lg hover:shadow-xl"}`,children:M?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(bt,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Αποθήκευση..."})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Te,{className:"h-5 w-5"}),e.jsx("span",{children:"💾 Αποθήκευση Program Options"})]})}),F==="none"&&e.jsx("p",{className:"text-sm text-gray-600 mt-2 text-center",children:"Επιλέξτε Έγκριση, Απόρριψη ή Στην Αναμονή για να αποθηκεύσετε"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-4 sm:p-6 border border-orange-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsx("h4",{className:"text-lg sm:text-xl font-bold text-orange-800 flex items-center",children:"🏋️‍♂️ Προσωποποιημένο Πρόγραμμα"}),e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-2 rounded-lg",children:["📊 Σύνολο: ",_e.length," σεσίας"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-gray-300 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 border-b-2 border-gray-400",children:e.jsxs("div",{className:"grid grid-cols-8 gap-0 text-sm font-bold text-gray-800",children:[e.jsx("div",{className:"col-span-1 text-center py-3 border-r border-gray-300 bg-gray-200",children:"#"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"📅 Ημερομηνία"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"🕐 Έναρξη"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"🕕 Λήξη"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"💪 Τύπος"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"🏠 Αίθουσα"}),e.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"👥 Group"}),e.jsx("div",{className:"col-span-1 py-3 px-2",children:"👨‍🏫 Προπονητής"})]})}),e.jsx("div",{className:"divide-y divide-gray-300",children:_e.map((s,t)=>e.jsxs("div",{className:"grid grid-cols-8 gap-0 hover:bg-blue-50 transition-colors",children:[e.jsxs("div",{className:"col-span-1 flex items-center justify-center space-x-2 py-3 border-r border-gray-300 bg-gray-50",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700",children:t+1}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("button",{onClick:()=>W(r=>r.filter((l,o)=>o!==t)),className:"text-red-600 hover:text-red-800 p-1 text-xs bg-red-100 rounded hover:bg-red-200",title:"Διαγραφή Σέσιας",children:e.jsx(ht,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>W(r=>{const l={...s,id:`tmp-${Date.now()}`};return[...r.slice(0,t+1),l,...r.slice(t+1)]}),className:"text-blue-600 hover:text-blue-800 p-1 text-xs bg-blue-100 rounded hover:bg-blue-200",title:"Αντιγραφή Σέσιας",children:e.jsx(jt,{className:"h-3 w-3"})})]})]}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsx("input",{type:"date",className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.date,onChange:r=>W(l=>l.map((o,m)=>m===t?{...o,date:r.target.value}:o))})}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsx("input",{type:"time",className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.startTime,onChange:r=>W(l=>l.map((o,m)=>m===t?{...o,startTime:r.target.value}:o))})}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsx("input",{type:"time",className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.endTime,onChange:r=>W(l=>l.map((o,m)=>m===t?{...o,endTime:r.target.value}:o))})}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsxs("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.type,onChange:r=>W(l=>l.map((o,m)=>m===t?{...o,type:r.target.value}:o)),children:[e.jsx("option",{value:"personal",children:"Προσωπική"}),e.jsx("option",{value:"kickboxing",children:"Kick Boxing"}),e.jsx("option",{value:"combo",children:"Combo"})]})}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsxs("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.room,onChange:r=>W(l=>l.map((o,m)=>m===t?{...o,room:r.target.value}:o)),children:[e.jsx("option",{value:"Αίθουσα Mike",children:"Αίθουσα Mike"}),e.jsx("option",{value:"Αίθουσα Jordan",children:"Αίθουσα Jordan"})]})}),e.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:e.jsxs("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.group||"",onChange:r=>W(l=>l.map((o,m)=>m===t?{...o,group:r.target.value}:o)),children:[e.jsx("option",{value:"",children:"Επιλέξτε Group"}),e.jsx("option",{value:"2ΑτομαGroup",children:"2ΑτομαGroup"}),e.jsx("option",{value:"3ΑτομαGroup",children:"3ΑτομαGroup"}),e.jsx("option",{value:"6ΑτομαGroup",children:"6ΑτομαGroup"})]})}),e.jsx("div",{className:"col-span-1 p-2",children:e.jsx("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:s.trainer,onChange:r=>W(l=>l.map((o,m)=>m===t?{...o,trainer:r.target.value}:o)),children:wt.map(r=>e.jsx("option",{value:r,children:r},r))})})]},s.id))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mt-4 space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-medium flex items-center justify-center",onClick:()=>W(s=>{var t;return[...s,{id:`tmp-${Date.now()}`,date:new Date().toISOString().split("T")[0],startTime:"19:00",endTime:"20:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:((t=s[0])==null?void 0:t.notes)||""}]}),children:"➕ Προσθήκη Σέσιας"}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium flex items-center justify-center",onClick:()=>{var t;const s={id:`tmp-${Date.now()}`,date:new Date().toISOString().split("T")[0],startTime:"19:00",endTime:"20:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:((t=_e[0])==null?void 0:t.notes)||""};W(r=>[...r,s])},children:"📋 Αντιγραφή Τελευταίας"}),_e.length>1&&e.jsx("button",{type:"button",className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium flex items-center justify-center",onClick:()=>W(s=>s.slice(0,-1)),children:"➖ Διαγραφή Τελευταίας"})]}),e.jsx("div",{className:"text-center sm:text-right",children:e.jsx("div",{className:"text-xs text-gray-500",children:"💡 Κάντε κλικ στα κελιά για επεξεργασία • Χρησιμοποιήστε τα κουμπιά για διαχείριση"})})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>J(!1),className:"flex-1 px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 transition-all duration-200 font-semibold shadow-lg",children:"❌ Ακύρωση"}),e.jsx("button",{onClick:Jt,disabled:i==="individual"?!n.selectedUserId:d.length===0,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-200 font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-green-500 disabled:hover:to-emerald-500",children:"✅ Δημιουργία Προγράμματος"})]})]})]})})]})};export{Lr as default};
