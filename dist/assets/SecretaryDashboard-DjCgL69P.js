import{d as D,u as F,r as i,z as x,j as e,Q as R,o as M,E as H,U as k,b as B,t as U}from"./index-APNhsCJT.js";import{k as G,d as V,f as W,m as Z,r as J}from"./membershipApi-cnzchg6C.js";import{R as K}from"./refresh-cw-BqfYhQpz.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=D("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),se=()=>{const{user:t}=F(),[m,C]=i.useState("qr"),[S,P]=i.useState([]),[h,l]=i.useState(!1),[p,L]=i.useState(""),[d,c]=i.useState(1),u=10;i.useEffect(()=>{b()},[]);const b=async()=>{l(!0);try{const s=await G();P(s)}catch(s){console.error("Error loading membership requests:",s),x.error("Σφάλμα κατά τη φόρτωση των αιτημάτων")}finally{l(!1)}},E=async s=>{l(!0);try{await Z(s),x.success("Το αίτημα εγκρίθηκε επιτυχώς"),await b()}catch(a){console.error("Error approving request:",a),x.error("Σφάλμα κατά την έγκριση του αιτήματος")}finally{l(!1)}},T=async s=>{l(!0);try{await J(s,"Απορρίφθηκε από τη γραμματεία"),x.success("Το αίτημα απορρίφθηκε"),await b()}catch(a){console.error("Error rejecting request:",a),x.error("Σφάλμα κατά την απόρριψη του αιτήματος")}finally{l(!1)}},g=()=>S.filter(s=>{var r,o;return p===""||`${((r=s.user)==null?void 0:r.firstName)||""} ${((o=s.user)==null?void 0:o.lastName)||""}`.toLowerCase().includes(p.toLowerCase())}),q=()=>{const s=g(),a=(d-1)*u,r=a+u;return s.slice(a,r)},n=()=>{const s=g();return Math.ceil(s.length/u)},z=()=>{c(s=>Math.max(s-1,1))},Q=()=>{c(s=>Math.min(s+1,n()))},_=()=>{c(1)},$=()=>{c(n())},I=s=>{L(s.target.value),c(1)},A=[{id:"qr",name:"QR Scanner",icon:R},{id:"requests",name:"Αιτήματα Συνδρομών",icon:O},{id:"personal",name:"Personal Training",icon:M}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Γραμματεία"}),e.jsx("p",{className:"text-gray-600",children:"Διαχείριση αιτημάτων και QR σάρωση"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"text-sm text-gray-500",children:["Συνδεδεμένος ως: ",e.jsxs("span",{className:"font-medium text-gray-900",children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]})]})})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("nav",{className:"flex space-x-8",children:A.map(s=>{const a=s.icon;return e.jsxs("button",{onClick:()=>C(s.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${m===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(a,{className:"h-5 w-5"}),e.jsx("span",{children:s.name})]},s.id)})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m==="qr"&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"h-16 w-16 text-blue-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"QR Code Scanner"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Σαρώστε QR codes για να διαχειριστείτε αιτήματα"}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-8",children:[e.jsx(H,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Η λειτουργία QR Scanner θα προστεθεί σύντομα"})]})]})}),m==="requests"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Αιτήματα Συνδρομών"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Διαχειριστείτε τα αιτήματα συνδρομών από χρήστες"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Αναζήτηση με όνομα...",value:p,onChange:I,className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),e.jsxs("button",{onClick:b,disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(K,{className:`h-4 w-4 ${h?"animate-spin":""}`}),e.jsx("span",{children:"Ανανέωση"})]})]})]})}),e.jsx("div",{className:"space-y-6",children:q().map(s=>{var a,r,o,j,f,N,y;return e.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"relative",children:[(a=s.user)!=null&&a.profile_photo?e.jsxs("div",{className:"w-12 h-12 rounded-xl overflow-hidden shadow-lg border-2 border-white",children:[e.jsx("img",{src:s.user.profile_photo,alt:`${(r=s.user)==null?void 0:r.firstName} ${(o=s.user)==null?void 0:o.lastName}`,className:"w-full h-full object-cover",onError:v=>{v.currentTarget.style.display="none";const w=v.currentTarget.nextElementSibling;w&&(w.style.display="flex")}}),e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center hidden",children:e.jsx(k,{className:"h-6 w-6 text-white"})})]}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(k,{className:"h-6 w-6 text-white"})}),s.status==="pending"&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full border-2 border-white"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-1",children:[(j=s.user)==null?void 0:j.firstName," ",(f=s.user)==null?void 0:f.lastName]}),e.jsxs("p",{className:"text-sm text-slate-600 mb-2 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-slate-300 rounded-full mr-2"}),(N=s.user)==null?void 0:N.email]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:(y=s.package)==null?void 0:y.name}),e.jsx("span",{className:"text-sm text-slate-500",children:"•"}),e.jsx("span",{className:"text-sm text-slate-600",children:V(s.duration_type)})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:W(s.requested_price)}),e.jsxs("div",{className:"text-sm text-slate-500 flex items-center",children:[e.jsx(B,{className:"h-4 w-4 mr-1"}),new Date(s.created_at).toLocaleDateString("el-GR")]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[s.status==="pending"&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>E(s.id),disabled:h,className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Εγκρίνω"})]}),e.jsxs("button",{onClick:()=>T(s.id),disabled:h,className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),e.jsx("span",{children:"Απορρίπτω"})]})]}),s.status==="approved"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"Εγκεκριμένο"})]}),s.status==="rejected"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-semibold",children:"Απορριφθέν"})]})]})]})]})})},s.id)})}),n()>1&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Σελίδα ",d," από ",n()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:_,disabled:d===1,className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Πρώτη"}),e.jsx("button",{onClick:z,disabled:d===1,className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Προηγούμενη"}),e.jsx("button",{onClick:Q,disabled:d===n(),className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Επόμενη"}),e.jsx("button",{onClick:$,disabled:d===n(),className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Τελευταία"})]})]})})]}),m==="personal"&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(M,{className:"h-16 w-16 text-blue-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Personal Training"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Διαχείριση προγραμμάτων personal training"}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-8",children:[e.jsx(U,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Η λειτουργία Personal Training θα προστεθεί σύντομα"})]})]})})]})]})};export{se as default};
