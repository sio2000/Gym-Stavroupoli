const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/membershipApi-BWxw4nWA.js","assets/index-ZmRz_kF8.js","assets/index-CL_ZVhm7.css","assets/jsQR-BZUKgwz6.js"])))=>i.map(i=>d[i]);
import{d as tl,s as be,r as j,j as u,X as rr,n as rl,U as Wr,w as nl,P as al,b as Gn,M as il,C as Vn,e as Hn,z as U,u as ol,G as sl,Q as Nn,h as kr,I as On,D as Lr,L as Xt,q as so,t as lo,v as Tn,x as ll,_ as Ur}from"./index-ZmRz_kF8.js";import{getMembershipRequestsWithLockedInstallments as cl,getUltimateMembershipRequests as co,getDurationLabel as ul,formatPrice as dl,approveMembershipRequest as fl,rejectMembershipRequest as hl}from"./membershipApi-BWxw4nWA.js";import{P as xl,g as gl,a as pl,s as vl,b as ml,T as br,G as yl,e as wl,i as bl,h as uo,m as _l}from"./programApprovalApi-DJg9-5DN.js";import{i as Al}from"./groupAssignmentApi-DZJLlsCI.js";import{R as zr}from"./refresh-cw-bL_ilMEE.js";import{S as Cl}from"./search-DgEtpkkJ.js";import{C as El,a as Sl}from"./chevron-right-Dd30DhYX.js";import{P as fo}from"./plus-BG5DWusa.js";import"./date-D_3Ba85T.js";import"./groupTrainingCalendarApi-C4SB04po.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=tl("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),ho=async(r,e,t,n,a="",i)=>{try{console.log("[saveSecretaryCashTransaction] Saving transaction via admin function:",{userId:r,amount:e,transactionType:t,programId:n,createdBy:a,notes:i});const{data:o,error:s}=await be.rpc("admin_save_cash_transaction",{p_user_id:r,p_amount:e,p_transaction_type:t,p_program_id:n,p_created_by:a,p_notes:i});if(s){console.error("[saveSecretaryCashTransaction] Error saving transaction via admin function:",s),console.log("[saveSecretaryCashTransaction] Trying direct insert...");const{data:l,error:c}=await be.from("user_cash_transactions").insert({user_id:r,amount:e,transaction_type:t,program_id:n,created_by:a,notes:i});return c?(console.error("[saveSecretaryCashTransaction] Direct insert also failed:",c),!1):(console.log("[saveSecretaryCashTransaction] Direct insert successful:",l),!0)}return console.log("[saveSecretaryCashTransaction] Transaction saved via admin function:",o),!0}catch(o){return console.error("[saveSecretaryCashTransaction] Exception saving transaction:",o),!1}},Nl=async(r,e,t,n="")=>{try{console.log("[saveSecretaryKettlebellPoints] Saving kettlebell points via admin function:",{userId:r,points:e,programId:t,createdBy:n});const{data:a,error:i}=await be.rpc("admin_save_kettlebell_points",{p_user_id:r,p_points:e,p_program_id:t,p_created_by:n});if(i){console.error("[saveSecretaryKettlebellPoints] Error saving via admin function:",i),console.log("[saveSecretaryKettlebellPoints] Trying direct insert...");const{data:o,error:s}=await be.from("user_kettlebell_points").insert({user_id:r,points:e,program_id:t,created_by:n});return s?(console.error("[saveSecretaryKettlebellPoints] Direct insert also failed:",s),!1):(console.log("[saveSecretaryKettlebellPoints] Direct insert successful:",o),!0)}return console.log("[saveSecretaryKettlebellPoints] Points saved via admin function:",a),!0}catch(a){return console.error("[saveSecretaryKettlebellPoints] Exception saving points:",a),!1}},xo=async(r,e="")=>{try{console.log("[saveSecretaryOldMembersUsage] Marking old members as used via admin function:",{userId:r,createdBy:e});const{data:t,error:n}=await be.rpc("admin_mark_old_members_used",{p_user_id:r,p_created_by:e});if(n){console.error("[saveSecretaryOldMembersUsage] Error marking via admin function:",n),console.log("[saveSecretaryOldMembersUsage] Trying direct insert...");const{data:a,error:i}=await be.from("old_members_usage").insert({user_id:r,used_by:e,used_at:new Date().toISOString()});return i?(console.error("[saveSecretaryOldMembersUsage] Direct insert also failed:",i),!1):(console.log("[saveSecretaryOldMembersUsage] Direct insert successful:",a),!0)}return console.log("[saveSecretaryOldMembersUsage] Old members marked via admin function:",t),!0}catch(t){return console.error("[saveSecretaryOldMembersUsage] Exception marking old members:",t),!1}},Ol=()=>{const[r,e]=j.useState(""),[t,n]=j.useState([]),[a,i]=j.useState([]),[o,s]=j.useState(null),[l,c]=j.useState(!1),[d,h]=j.useState(!1),[x,g]=j.useState(!1),[p,m]=j.useState(1),[b,_]=j.useState(1),[y,I]=j.useState(0),O=10,D=async(M=1)=>{try{c(!0);const[se,We]=await Promise.all([gl(M,O),pl()]);i(se),I(We),_(Math.ceil(We/O)),m(M)}catch(se){console.error("Error loading random users:",se),U.error("Σφάλμα κατά τη φόρτωση των χρηστών")}finally{c(!1)}};j.useEffect(()=>{D(1)},[]);const P=async M=>{if(e(M),!M.trim()){n([]);return}try{h(!0);const se=await vl(M);n(se)}catch(se){console.error("Error searching users:",se),U.error("Σφάλμα κατά την αναζήτηση")}finally{h(!1)}},F=async M=>{try{g(!0);const se=await ml(M);s(se)}catch(se){console.error("Error loading user details:",se),U.error("Σφάλμα κατά τη φόρτωση των λεπτομερειών χρήστη")}finally{g(!1)}},V=()=>{p>1&&D(p-1)},q=()=>{p<b&&D(p+1)},Y=()=>{e(""),n([])},he=M=>{if(!M)return"-";const se=new Date(M);return isNaN(se.getTime())?"-":se.toLocaleDateString("el-GR",{year:"numeric",month:"long",day:"numeric"})},z=r?t:a;return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl p-4 sm:p-6 text-white mb-4 sm:mb-6",children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-2",children:"👥 Χρήστες-Πληροφορίες"}),u.jsx("p",{className:"text-purple-100 text-sm sm:text-base",children:"Αναζήτηση και λεπτομέρειες χρηστών"})]}),u.jsxs("button",{onClick:()=>D(1),disabled:l,className:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg text-sm disabled:opacity-50",children:[u.jsx(zr,{className:`h-4 w-4 ${l?"animate-spin":""}`}),u.jsx("span",{children:"🔄 Ανανέωση"})]})]})}),u.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"flex-1",children:u.jsxs("div",{className:"relative",children:[u.jsx(Cl,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),u.jsx("input",{type:"text",placeholder:"🔍 Αναζήτηση με όνομα, email ή ID χρήστη...",value:r,onChange:M=>P(M.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-gray-900 placeholder-gray-500"})]})}),r&&u.jsx("button",{onClick:Y,className:"px-4 py-3 text-gray-400 hover:text-gray-600 transition-colors bg-gray-100 rounded-xl hover:bg-gray-200",children:u.jsx(rr,{className:"h-5 w-5"})})]})}),u.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[u.jsx("div",{className:"p-6 border-b border-gray-200",children:u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:r?`Αποτελέσματα αναζήτησης (${t.length})`:`Χρήστες (Σελίδα ${p} από ${b})`})}),l||d?u.jsx("div",{className:"p-8 text-center",children:u.jsxs("div",{className:"inline-flex items-center space-x-2 text-gray-500",children:[u.jsx(zr,{className:"h-5 w-5 animate-spin"}),u.jsx("span",{children:"Φόρτωση χρηστών..."})]})}):z.length===0?u.jsxs("div",{className:"p-8 text-center text-gray-500",children:[u.jsx(rl,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),u.jsx("p",{children:"Δεν βρέθηκαν χρήστες"})]}):u.jsx("div",{className:"divide-y divide-gray-200",children:z.map(M=>u.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>F(M.user_id),children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:(()=>{const se=M.first_name&&M.first_name.trim()?M.first_name.trim().charAt(0):"",We=M.last_name&&M.last_name.trim()?M.last_name.trim().charAt(0):"",Nt=`${se}${We}`;return Nt||(M.email&&M.email.trim()?M.email.trim().charAt(0):"?")})()}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:M.first_name&&M.first_name.trim()||M.last_name&&M.last_name.trim()?`${M.first_name?M.first_name:""} ${M.last_name?M.last_name:""}`.trim():M.email||"—"}),u.jsx("p",{className:"text-gray-600",children:M.email||"—"}),u.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",M.user_id]})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"text-sm text-gray-500",children:["Εγγραφή: ",he(M.created_at)]}),u.jsx("button",{className:"mt-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Προβολή Λεπτομερειών"})]})]})},M.user_id))}),!r&&b>1&&u.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"text-sm text-gray-700",children:["Εμφάνιση ",(p-1)*O+1,"-",Math.min(p*O,y)," από ",y," χρήστες"]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("button",{onClick:V,disabled:p===1,className:"flex items-center space-x-1 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[u.jsx(El,{className:"h-4 w-4"}),u.jsx("span",{children:"Προηγούμενη"})]}),u.jsxs("button",{onClick:q,disabled:p===b,className:"flex items-center space-x-1 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[u.jsx("span",{children:"Επόμενη"}),u.jsx(Sl,{className:"h-4 w-4"})]})]})]})})]}),o&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsx("div",{className:"p-6 border-b border-gray-200",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Λεπτομέρειες Χρήστη"}),u.jsx("button",{onClick:()=>s(null),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:u.jsx(rr,{className:"h-6 w-6"})})]})}),x?u.jsx("div",{className:"p-8 text-center",children:u.jsxs("div",{className:"inline-flex items-center space-x-2 text-gray-500",children:[u.jsx(zr,{className:"h-5 w-5 animate-spin"}),u.jsx("span",{children:"Φόρτωση λεπτομερειών..."})]})}):u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[u.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[u.jsx(Wr,{className:"h-5 w-5 mr-2"}),"Βασικές Πληροφορίες"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Όνομα"}),u.jsxs("p",{className:"font-medium",children:[o.user_info.first_name," ",o.user_info.last_name]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),u.jsxs("p",{className:"font-medium flex items-center",children:[u.jsx(nl,{className:"h-4 w-4 mr-1"}),o.user_info.email]})]}),o.user_info.phone&&u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Τηλέφωνο"}),u.jsxs("p",{className:"font-medium flex items-center",children:[u.jsx(al,{className:"h-4 w-4 mr-1"}),o.user_info.phone]})]}),o.user_info.date_of_birth&&u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Ημερομηνία Γέννησης"}),u.jsxs("p",{className:"font-medium flex items-center",children:[u.jsx(Gn,{className:"h-4 w-4 mr-1"}),he(o.user_info.date_of_birth)]})]}),o.user_info.address&&u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Διεύθυνση"}),u.jsxs("p",{className:"font-medium flex items-center",children:[u.jsx(il,{className:"h-4 w-4 mr-1"}),o.user_info.address]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Εγγραφή"}),u.jsxs("p",{className:"font-medium flex items-center",children:[u.jsx(Vn,{className:"h-4 w-4 mr-1"}),he(o.user_info.created_at)]})]}),o.user_info.referral_code&&u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Κωδικός Παραπομπής"}),u.jsx("p",{className:"font-medium font-mono",children:o.user_info.referral_code})]})]})]}),u.jsxs("div",{className:"bg-green-50 rounded-xl p-6",children:[u.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[u.jsx(Hn,{className:"h-5 w-5 mr-2 text-green-600"}),"Ενεργές Συνδρομές (",o.active_memberships.length,")"]}),o.active_memberships.length===0?u.jsx("p",{className:"text-gray-600",children:"Δεν υπάρχουν ενεργές συνδρομές"}):u.jsx("div",{className:"space-y-3",children:o.active_memberships.map(M=>u.jsx("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h5",{className:"font-semibold text-gray-900",children:M.package_name}),u.jsx("p",{className:"text-sm text-gray-600",children:M.credits_remaining>0?`${M.credits_remaining} / ${M.credits_total} credits`:"Credits not available"})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"text-sm text-gray-600",children:[he(M.start_date)," - ",he(M.end_date)]}),u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Ενεργή"})]})]})},M.id))})]}),u.jsxs("div",{className:"bg-orange-50 rounded-xl p-6",children:[u.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[u.jsx(Vn,{className:"h-5 w-5 mr-2 text-orange-600"}),"Εκκρεμή Αιτήματα Συνδρομών (",o.pending_requests.length,")"]}),o.pending_requests.length===0?u.jsx("p",{className:"text-gray-600",children:"Δεν υπάρχουν εκκρεμή αιτήματα συνδρομών"}):u.jsx("div",{className:"space-y-3",children:o.pending_requests.map(M=>u.jsx("div",{className:"bg-white rounded-lg p-4 border border-orange-200",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h5",{className:"font-semibold text-gray-900",children:M.package_name}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Διάρκεια: ",M.duration_type," | Τιμή: €",M.requested_price,M.classes_count&&` | Μαθήματα: ${M.classes_count}`]}),M.has_installments&&u.jsx("div",{className:"mt-2 text-xs text-gray-500",children:u.jsxs("p",{children:["Δόσεις: ",M.installment_1_amount&&`€${M.installment_1_amount}`,M.installment_2_amount&&`, €${M.installment_2_amount}`,M.installment_3_amount&&`, €${M.installment_3_amount}`]})})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-sm text-gray-600",children:he(M.created_at)}),u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Εκκρεμές"})]})]})},M.id))})]}),u.jsxs("div",{className:"bg-blue-50 rounded-xl p-6",children:[u.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[u.jsx(xl,{className:"h-5 w-5 mr-2 text-blue-600"}),"Ιστορικό Συνδρομών (",o.all_memberships.length,")"]}),o.all_memberships.length===0?u.jsx("p",{className:"text-gray-600",children:"Δεν υπάρχει ιστορικό συνδρομών"}):u.jsx("div",{className:"space-y-3",children:o.all_memberships.map(M=>u.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h5",{className:"font-semibold text-gray-900",children:M.package_name}),u.jsx("p",{className:"text-sm text-gray-600",children:M.credits_remaining>0?`${M.credits_remaining} / ${M.credits_total} credits`:"Credits not available"})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"text-sm text-gray-600",children:[he(M.start_date)," - ",he(M.end_date)]}),u.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${M.is_active?"bg-green-100 text-green-800":M.status==="expired"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:M.is_active?"Ενεργή":M.status})]})]})},M.id))})]})]})]})})]})};function Tl(r,e){var t=Object.setPrototypeOf;t?t(r,e):r.__proto__=e}function Rl(r,e){e===void 0&&(e=r.constructor);var t=Error.captureStackTrace;t&&t(r,e)}var Dl=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pl=function(r){Dl(e,r);function e(t,n){var a=this.constructor,i=r.call(this,t,n)||this;return Object.defineProperty(i,"name",{value:a.name,enumerable:!1,configurable:!0}),Tl(i,a.prototype),Rl(i),i}return e}(Error),Ml=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ct=function(r){Ml(e,r);function e(t){t===void 0&&(t=void 0);var n=r.call(this,t)||this;return n.message=t,n}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(Pl),Bl=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pe=function(r){Bl(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArgumentException",e}(ct),jl=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),J=function(r){jl(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(ct),qo=function(){function r(e){if(this.binarizer=e,e===null)throw new J("Binarizer must be non-null.")}return r.prototype.getWidth=function(){return this.binarizer.getWidth()},r.prototype.getHeight=function(){return this.binarizer.getHeight()},r.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},r.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},r.prototype.crop=function(e,t,n,a){var i=this.binarizer.getLuminanceSource().crop(e,t,n,a);return new r(this.binarizer.createBinarizer(i))},r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},r.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(e))},r.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(e))},r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},r}(),Fl=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Me=function(r){Fl(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(ct),kl=function(){function r(e){this.source=e}return r.prototype.getLuminanceSource=function(){return this.source},r.prototype.getWidth=function(){return this.source.getWidth()},r.prototype.getHeight=function(){return this.source.getHeight()},r}(),_e=function(){function r(){}return r.arraycopy=function(e,t,n,a,i){for(;i--;)n[a++]=e[t++]},r.currentTimeMillis=function(){return Date.now()},r}(),Ll=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jn=function(r){Ll(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(ct),Ul=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),go=function(r){Ul(e,r);function e(t,n){t===void 0&&(t=void 0),n===void 0&&(n=void 0);var a=r.call(this,n)||this;return a.index=t,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(Jn),Gl=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ue=function(){function r(){}return r.fill=function(e,t){for(var n=0,a=e.length;n<a;n++)e[n]=t},r.fillWithin=function(e,t,n,a){r.rangeCheck(e.length,t,n);for(var i=t;i<n;i++)e[i]=a},r.rangeCheck=function(e,t,n){if(t>n)throw new J("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new go(t);if(n>e)throw new go(n)},r.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},r.create=function(e,t,n){var a=Array.from({length:e});return a.map(function(i){return Array.from({length:t}).fill(n)})},r.createInt32Array=function(e,t,n){var a=Array.from({length:e});return a.map(function(i){return Int32Array.from({length:t}).fill(n)})},r.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==t[n])return!1;return!0},r.hashCode=function(e){var t,n;if(e===null)return 0;var a=1;try{for(var i=Gl(e),o=i.next();!o.done;o=i.next()){var s=o.value;a=31*a+s}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},r.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},r.copyOf=function(e,t){return e.slice(0,t)},r.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},r.copyOfRange=function(e,t,n){var a=n-t,i=new Int32Array(a);return _e.arraycopy(e,t,i,0,a),i},r.binarySearch=function(e,t,n){n===void 0&&(n=r.numberComparator);for(var a=0,i=e.length-1;a<=i;){var o=i+a>>1,s=n(t,e[o]);if(s>0)a=o+1;else if(s<0)i=o-1;else return o}return-a-1},r.numberComparator=function(e,t){return e-t},r}(),le=function(){function r(){}return r.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)},r.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},r.toHexString=function(e){return e.toString(16)},r.toBinaryString=function(e){return String(parseInt(String(e),2))},r.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},r.truncDivision=function(e,t){return Math.trunc(e/t)},r.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r.MIN_VALUE_32_BITS=-2147483648,r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r}(),Xe=function(){function r(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=r.makeArray(e):this.bits=t)}return r.prototype.getSize=function(){return this.size},r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},r.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=r.makeArray(e);_e.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},r.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},r.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},r.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},r.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,a=Math.floor(e/32),i=n[a];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++a===o)return t;i=n[a]}var s=a*32+le.numberOfTrailingZeros(i);return s>t?t:s},r.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,a=Math.floor(e/32),i=~n[a];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++a===o)return t;i=~n[a]}var s=a*32+le.numberOfTrailingZeros(i);return s>t?t:s},r.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},r.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new J;if(t!==e){t--;for(var n=Math.floor(e/32),a=Math.floor(t/32),i=this.bits,o=n;o<=a;o++){var s=o>n?0:e&31,l=o<a?31:t&31,c=(2<<l)-(1<<s);i[o]|=c}}},r.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},r.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new J;if(t===e)return!0;t--;for(var a=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=a;s<=i;s++){var l=s>a?0:e&31,c=s<i?31:t&31,d=(2<<c)-(1<<l)&4294967295;if((o[s]&d)!==(n?d:0))return!1}return!0},r.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},r.prototype.appendBits=function(e,t){if(t<0||t>32)throw new J("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)},r.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},r.prototype.xor=function(e){if(this.size!==e.size)throw new J("Sizes don't match");for(var t=this.bits,n=0,a=t.length;n<a;n++)t[n]^=e.bits[n]},r.prototype.toBytes=function(e,t,n,a){for(var i=0;i<a;i++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;t[n+i]=o}},r.prototype.getBitArray=function(){return this.bits},r.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,a=this.bits,i=0;i<n;i++){var o=a[i];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-i]=o}if(this.size!==n*32){for(var s=n*32-this.size,l=e[0]>>>s,i=1;i<n;i++){var c=e[i];l|=c<<32-s,e[i-1]=l,l=c>>>s}e[n-1]=l}this.bits=e},r.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.size===t.size&&Ue.equals(this.bits,t.bits)},r.prototype.hashCode=function(){return 31*this.size+Ue.hashCode(this.bits)},r.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e},r.prototype.clone=function(){return new r(this.size,this.bits.slice())},r.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},r}(),ye;(function(r){r[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",r[r.ASSUME_GS1=8]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(ye||(ye={}));var Vl=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),k=function(r){Vl(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(ct),Hl=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ve;(function(r){r[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR"})(ve||(ve={}));var Le=function(){function r(e,t,n){for(var a,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,r.VALUE_IDENTIFIER_TO_ECI.set(e,this),r.NAME_TO_ECI.set(n,this);for(var l=this.values,c=0,d=l.length;c!==d;c++){var h=l[c];r.VALUES_TO_ECI.set(h,this)}try{for(var x=Hl(o),g=x.next();!g.done;g=x.next()){var p=g.value;r.NAME_TO_ECI.set(p,this)}}catch(m){a={error:m}}finally{try{g&&!g.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}}return r.prototype.getValueIdentifier=function(){return this.valueIdentifier},r.prototype.getName=function(){return this.name},r.prototype.getValue=function(){return this.values[0]},r.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new k("incorect value");var t=r.VALUES_TO_ECI.get(e);if(t===void 0)throw new k("incorect value");return t},r.getCharacterSetECIByName=function(e){var t=r.NAME_TO_ECI.get(e);if(t===void 0)throw new k("incorect value");return t},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.getName()===t.getName()},r.VALUE_IDENTIFIER_TO_ECI=new Map,r.VALUES_TO_ECI=new Map,r.NAME_TO_ECI=new Map,r.Cp437=new r(ve.Cp437,Int32Array.from([0,2]),"Cp437"),r.ISO8859_1=new r(ve.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),r.ISO8859_2=new r(ve.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),r.ISO8859_3=new r(ve.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),r.ISO8859_4=new r(ve.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),r.ISO8859_5=new r(ve.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),r.ISO8859_6=new r(ve.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),r.ISO8859_7=new r(ve.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),r.ISO8859_8=new r(ve.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),r.ISO8859_9=new r(ve.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),r.ISO8859_10=new r(ve.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),r.ISO8859_11=new r(ve.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),r.ISO8859_13=new r(ve.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),r.ISO8859_14=new r(ve.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),r.ISO8859_15=new r(ve.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),r.ISO8859_16=new r(ve.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),r.SJIS=new r(ve.SJIS,20,"SJIS","Shift_JIS"),r.Cp1250=new r(ve.Cp1250,21,"Cp1250","windows-1250"),r.Cp1251=new r(ve.Cp1251,22,"Cp1251","windows-1251"),r.Cp1252=new r(ve.Cp1252,23,"Cp1252","windows-1252"),r.Cp1256=new r(ve.Cp1256,24,"Cp1256","windows-1256"),r.UnicodeBigUnmarked=new r(ve.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),r.UTF8=new r(ve.UTF8,26,"UTF8","UTF-8"),r.ASCII=new r(ve.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),r.Big5=new r(ve.Big5,28,"Big5"),r.GB18030=new r(ve.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),r.EUC_KR=new r(ve.EUC_KR,30,"EUC_KR","EUC-KR"),r}(),$l=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yr=function(r){$l(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(ct),xt=function(){function r(){}return r.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},r.shouldDecodeOnFallback=function(e){return!r.isBrowser()&&e==="ISO-8859-1"},r.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},r.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},r.encodingName=function(e){return typeof e=="string"?e:e.getName()},r.encodingCharacterSet=function(e){return e instanceof Le?e:Le.getCharacterSetECIByName(e)},r.decodeFallback=function(e,t){var n=this.encodingCharacterSet(t);if(r.isDecodeFallbackSupported(n)){for(var a="",i=0,o=e.length;i<o;i++){var s=e[i].toString(16);s.length<2&&(s="0"+s),a+="%"+s}return decodeURIComponent(a)}if(n.equals(Le.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Yr("Encoding "+this.encodingName(t)+" not supported by fallback.")},r.isDecodeFallbackSupported=function(e){return e.equals(Le.UTF8)||e.equals(Le.ISO8859_1)||e.equals(Le.ASCII)},r.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),n=t.split(""),a=[],i=0;i<n.length;i++)a.push(n[i].charCodeAt(0));return new Uint8Array(a)},r}(),ue=function(){function r(){}return r.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var n=t?t.getName():this.ISO88591;return xt.decode(new Uint8Array([e]),n)},r.guessEncoding=function(e,t){if(t!=null&&t.get(ye.CHARACTER_SET)!==void 0)return t.get(ye.CHARACTER_SET).toString();for(var n=e.length,a=!0,i=!0,o=!0,s=0,l=0,c=0,d=0,h=0,x=0,g=0,p=0,m=0,b=0,_=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,I=0;I<n&&(a||i||o);I++){var O=e[I]&255;o&&(s>0?O&128?s--:o=!1:O&128&&(O&64?(s++,O&32?(s++,O&16?(s++,O&8?o=!1:d++):c++):l++):o=!1)),a&&(O>127&&O<160?a=!1:O>159&&(O<192||O===215||O===247)&&_++),i&&(h>0?O<64||O===127||O>252?i=!1:h--:O===128||O===160||O>239?i=!1:O>160&&O<224?(x++,p=0,g++,g>m&&(m=g)):O>127?(h++,g=0,p++,p>b&&(b=p)):(g=0,p=0))}return o&&s>0&&(o=!1),i&&h>0&&(i=!1),o&&(y||l+c+d>0)?r.UTF8:i&&(r.ASSUME_SHIFT_JIS||m>=3||b>=3)?r.SHIFT_JIS:a&&i?m===2&&x===2||_*10>=n?r.SHIFT_JIS:r.ISO88591:a?r.ISO88591:i?r.SHIFT_JIS:o?r.UTF8:r.PLATFORM_DEFAULT_ENCODING},r.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=-1;function i(s,l,c,d,h,x){if(s==="%%")return"%";if(t[++a]!==void 0){s=d?parseInt(d.substr(1)):void 0;var g=h?parseInt(h.substr(1)):void 0,p;switch(x){case"s":p=t[a];break;case"c":p=t[a][0];break;case"f":p=parseFloat(t[a]).toFixed(s);break;case"p":p=parseFloat(t[a]).toPrecision(s);break;case"e":p=parseFloat(t[a]).toExponential(s);break;case"x":p=parseInt(t[a]).toString(g||16);break;case"d":p=parseFloat(parseInt(t[a],g||10).toPrecision(s)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(g);for(var m=parseInt(c),b=c&&c[0]+""=="0"?"0":" ";p.length<m;)p=l!==void 0?p+b:b+p;return p}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},r.getBytes=function(e,t){return xt.encode(e,t)},r.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},r.getCharAt=function(e){return String.fromCharCode(e)},r.SHIFT_JIS=Le.SJIS.getName(),r.GB2312="GB2312",r.ISO88591=Le.ISO8859_1.getName(),r.EUC_JP="EUC_JP",r.UTF8=Le.UTF8.getName(),r.PLATFORM_DEFAULT_ENCODING=r.UTF8,r.ASSUME_SHIFT_JIS=!1,r}(),oe=function(){function r(e){e===void 0&&(e=""),this.value=e}return r.prototype.enableDecoding=function(e){return this.encoding=e,this},r.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ue.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},r.prototype.appendChars=function(e,t,n){for(var a=t;t<t+n;a++)this.append(e[a]);return this},r.prototype.length=function(){return this.value.length},r.prototype.charAt=function(e){return this.value.charAt(e)},r.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},r.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},r.prototype.substring=function(e,t){return this.value.substring(e,t)},r.prototype.setLengthToZero=function(){this.value=""},r.prototype.toString=function(){return this.value},r.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},r}(),St=function(){function r(e,t,n,a){if(this.width=e,this.height=t,this.rowSize=n,this.bits=a,t==null&&(t=e),this.height=t,e<1||t<1)throw new J("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return r.parseFromBooleanArray=function(e){for(var t=e.length,n=e[0].length,a=new r(n,t),i=0;i<t;i++)for(var o=e[i],s=0;s<n;s++)o[s]&&a.set(s,i);return a},r.parseFromString=function(e,t,n){if(e===null)throw new J("stringRepresentation cannot be null");for(var a=new Array(e.length),i=0,o=0,s=-1,l=0,c=0;c<e.length;)if(e.charAt(c)===`
`||e.charAt(c)==="\r"){if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new J("row lengths do not match");o=i,l++}c++}else if(e.substring(c,c+t.length)===t)c+=t.length,a[i]=!0,i++;else if(e.substring(c,c+n.length)===n)c+=n.length,a[i]=!1,i++;else throw new J("illegal character encountered: "+e.substring(c));if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new J("row lengths do not match");l++}for(var d=new r(s,l),h=0;h<i;h++)a[h]&&d.set(Math.floor(h%s),Math.floor(h/s));return d},r.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},r.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},r.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},r.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},r.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new J("input matrix dimensions do not match");for(var t=new Xe(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,i=0,o=this.height;i<o;i++)for(var s=i*n,l=e.getRow(i,t).getBitArray(),c=0;c<n;c++)a[s+c]^=l[c]},r.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},r.prototype.setRegion=function(e,t,n,a){if(t<0||e<0)throw new J("Left and top must be nonnegative");if(a<1||n<1)throw new J("Height and width must be at least 1");var i=e+n,o=t+a;if(o>this.height||i>this.width)throw new J("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,c=t;c<o;c++)for(var d=c*s,h=e;h<i;h++)l[d+Math.floor(h/32)]|=1<<(h&31)&4294967295},r.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Xe(this.width):t.clear();for(var n=this.rowSize,a=this.bits,i=e*n,o=0;o<n;o++)t.setBulk(o*32,a[i+o]);return t},r.prototype.setRow=function(e,t){_e.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},r.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new Xe(e),a=new Xe(e),i=0,o=Math.floor((t+1)/2);i<o;i++)n=this.getRow(i,n),a=this.getRow(t-1-i,a),n.reverse(),a.reverse(),this.setRow(i,a),this.setRow(t-1-i,n)},r.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,a=this.bits,i=e,o=t,s=-1,l=-1,c=0;c<t;c++)for(var d=0;d<n;d++){var h=a[c*n+d];if(h!==0){if(c<o&&(o=c),c>l&&(l=c),d*32<i){for(var x=0;!(h<<31-x&4294967295);)x++;d*32+x<i&&(i=d*32+x)}if(d*32+31>s){for(var x=31;!(h>>>x);)x--;d*32+x>s&&(s=d*32+x)}}}return s<i||l<o?null:Int32Array.from([i,o,s-i+1,l-o+1])},r.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;for(var a=n/e,i=n%e*32,o=t[n],s=0;!(o<<31-s&4294967295);)s++;return i+=s,Int32Array.from([i,a])},r.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&t[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),i=Math.floor(n%e)*32,o=t[n],s=31;!(o>>>s);)s--;return i+=s,Int32Array.from([i,a])},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRowSize=function(){return this.rowSize},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Ue.equals(this.bits,t.bits)},r.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Ue.hashCode(this.bits),e},r.prototype.toString=function(e,t,n){return e===void 0&&(e="X "),t===void 0&&(t="  "),n===void 0&&(n=`
`),this.buildToString(e,t,n)},r.prototype.buildToString=function(e,t,n){for(var a=new oe,i=0,o=this.height;i<o;i++){for(var s=0,l=this.width;s<l;s++)a.append(this.get(s,i)?e:t);a.append(n)}return a.toString()},r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())},r}(),Xl=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),T=function(r){Xl(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(ct),Wl=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zl=function(r){Wl(e,r);function e(t){var n=r.call(this,t)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(t,n){var a=this.getLuminanceSource(),i=a.getWidth();n==null||n.getSize()<i?n=new Xe(i):n.clear(),this.initArrays(i);for(var o=a.getRow(t,this.luminances),s=this.buckets,l=0;l<i;l++)s[(o[l]&255)>>e.LUMINANCE_SHIFT]++;var c=e.estimateBlackPoint(s);if(i<3)for(var l=0;l<i;l++)(o[l]&255)<c&&n.set(l);else for(var d=o[0]&255,h=o[1]&255,l=1;l<i-1;l++){var x=o[l+1]&255;(h*4-d-x)/2<c&&n.set(l),d=h,h=x}return n},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),n=t.getWidth(),a=t.getHeight(),i=new St(n,a);this.initArrays(n);for(var o=this.buckets,s=1;s<5;s++)for(var l=Math.floor(a*s/5),c=t.getRow(l,this.luminances),d=Math.floor(n*4/5),h=Math.floor(n/5);h<d;h++){var x=c[h]&255;o[x>>e.LUMINANCE_SHIFT]++}for(var g=e.estimateBlackPoint(o),p=t.getMatrix(),s=0;s<a;s++)for(var m=s*n,h=0;h<n;h++){var x=p[m+h]&255;x<g&&i.set(h,s)}return i},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(t){for(var n=t.length,a=0,i=0,o=0,s=0;s<n;s++)t[s]>o&&(i=s,o=t[s]),t[s]>a&&(a=t[s]);for(var l=0,c=0,s=0;s<n;s++){var d=s-i,h=t[s]*d*d;h>c&&(l=s,c=h)}if(i>l){var x=i;i=l,l=x}if(l-i<=n/16)throw new T;for(var g=l-1,p=-1,s=l-1;s>i;s--){var m=s-i,h=m*m*(l-s)*(a-t[s]);h>p&&(g=s,p=h)}return g<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(kl),Yl=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),es=function(r){Yl(e,r);function e(t){var n=r.call(this,t)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),n=t.getWidth(),a=t.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var i=t.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&o++;var s=a>>e.BLOCK_SIZE_POWER;a&e.BLOCK_SIZE_MASK&&s++;var l=e.calculateBlackPoints(i,o,s,n,a),c=new St(n,a);e.calculateThresholdForBlock(i,o,s,n,a,l,c),this.matrix=c}else this.matrix=r.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,n,a,i,o,s,l){for(var c=o-e.BLOCK_SIZE,d=i-e.BLOCK_SIZE,h=0;h<a;h++){var x=h<<e.BLOCK_SIZE_POWER;x>c&&(x=c);for(var g=e.cap(h,2,a-3),p=0;p<n;p++){var m=p<<e.BLOCK_SIZE_POWER;m>d&&(m=d);for(var b=e.cap(p,2,n-3),_=0,y=-2;y<=2;y++){var I=s[g+y];_+=I[b-2]+I[b-1]+I[b]+I[b+1]+I[b+2]}var O=_/25;e.thresholdBlock(t,m,x,O,i,l)}}},e.cap=function(t,n,a){return t<n?n:t>a?a:t},e.thresholdBlock=function(t,n,a,i,o,s){for(var l=0,c=a*o+n;l<e.BLOCK_SIZE;l++,c+=o)for(var d=0;d<e.BLOCK_SIZE;d++)(t[c+d]&255)<=i&&s.set(n+d,a+l)},e.calculateBlackPoints=function(t,n,a,i,o){for(var s=o-e.BLOCK_SIZE,l=i-e.BLOCK_SIZE,c=new Array(a),d=0;d<a;d++){c[d]=new Int32Array(n);var h=d<<e.BLOCK_SIZE_POWER;h>s&&(h=s);for(var x=0;x<n;x++){var g=x<<e.BLOCK_SIZE_POWER;g>l&&(g=l);for(var p=0,m=255,b=0,_=0,y=h*i+g;_<e.BLOCK_SIZE;_++,y+=i){for(var I=0;I<e.BLOCK_SIZE;I++){var O=t[y+I]&255;p+=O,O<m&&(m=O),O>b&&(b=O)}if(b-m>e.MIN_DYNAMIC_RANGE)for(_++,y+=i;_<e.BLOCK_SIZE;_++,y+=i)for(var I=0;I<e.BLOCK_SIZE;I++)p+=t[y+I]&255}var D=p>>e.BLOCK_SIZE_POWER*2;if(b-m<=e.MIN_DYNAMIC_RANGE&&(D=m/2,d>0&&x>0)){var P=(c[d-1][x]+2*c[d][x-1]+c[d-1][x-1])/4;m<P&&(D=P)}c[d][x]=D}}return c},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(zl),Nr=function(){function r(e,t){this.width=e,this.height=t}return r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.isCropSupported=function(){return!1},r.prototype.crop=function(e,t,n,a){throw new Yr("This luminance source does not support cropping.")},r.prototype.isRotateSupported=function(){return!1},r.prototype.rotateCounterClockwise=function(){throw new Yr("This luminance source does not support rotation by 90 degrees.")},r.prototype.rotateCounterClockwise45=function(){throw new Yr("This luminance source does not support rotation by 45 degrees.")},r.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new oe,n=0;n<this.height;n++){for(var a=this.getRow(n,e),i=0;i<this.width;i++){var o=a[i]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()},r}(),Zl=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nn=function(r){Zl(e,r);function e(t){var n=r.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return e.prototype.getRow=function(t,n){for(var a=this.delegate.getRow(t,n),i=this.getWidth(),o=0;o<i;o++)a[o]=255-(a[o]&255);return a},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),i=0;i<n;i++)a[i]=255-(t[i]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,n,a,i){return new e(this.delegate.crop(t,n,a,i))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Nr),Ql=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kl=function(r){Ql(e,r);function e(t,n){n===void 0&&(n=!1);var a=r.call(this,t.width,t.height)||this;return a.canvas=t,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(t,n),a}return e.makeBufferFromCanvasImageData=function(t,n){n===void 0&&(n=!1);var a=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(a.data,t.width,t.height,n)},e.toGrayscaleBuffer=function(t,n,a,i){i===void 0&&(i=!1);var o=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!i)for(var s=0,l=0,c=t.length;s<c;s+=4,l++){var d=void 0,h=t[s+3];if(h===0)d=255;else{var x=t[s],g=t[s+1],p=t[s+2];d=306*x+601*g+117*p+512>>10}o[l]=d}else for(var s=0,l=0,m=t.length;s<m;s+=4,l++){var d=void 0,h=t[s+3];if(h===0)d=255;else{var x=t[s],g=t[s+1],p=t[s+2];d=306*x+601*g+117*p+512>>10}o[l]=255-d}return o},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new J("Requested row is outside the image: "+t);var a=this.getWidth(),i=t*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return r.prototype.crop.call(this,t,n,a,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement(),a=n.getContext("2d"),i=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*s),c=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*s);return n.width=l,n.height=c,a.translate(l/2,c/2),a.rotate(i),a.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new nn(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Nr),Jl=function(){function r(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},r}(),nt=function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function s(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):a(d.value).then(s,l)}c((n=n.apply(r,e||[])).next())})},at=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,a=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){t.label=c[1];break}if(c[0]===6&&t.label<i[1]){t.label=i[1],i=c;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(c);break}i[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(d){c=[6,d],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ql=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lr=function(){function r(e,t,n){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),r.prototype.listVideoInputDevices=function(){return nt(this,void 0,void 0,function(){var e,t,n,a,i,o,s,l,c,d,h,x;return at(this,function(g){switch(g.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=g.sent(),t=[];try{for(n=ql(e),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(s=i.deviceId||i.id,l=i.label||"Video device "+(t.length+1),c=i.groupId,d={deviceId:s,label:l,kind:o,groupId:c},t.push(d))}catch(p){h={error:p}}finally{try{a&&!a.done&&(x=n.return)&&x.call(n)}finally{if(h)throw h.error}}return[2,t]}})})},r.prototype.getVideoInputDevices=function(){return nt(this,void 0,void 0,function(){var e;return at(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(n){return new Jl(n.deviceId,n.label)})]}})})},r.prototype.findDeviceById=function(e){return nt(this,void 0,void 0,function(){var t;return at(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(a){return a.deviceId===e})]:[2,null]}})})},r.prototype.decodeFromInputVideoDevice=function(e,t){return nt(this,void 0,void 0,function(){return at(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return nt(this,void 0,void 0,function(){var n,a;return at(this,function(i){switch(i.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,t)];case 1:return[2,i.sent()]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return nt(this,void 0,void 0,function(){var n;return at(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,a.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return nt(this,void 0,void 0,function(){var n,a;return at(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=i.sent(),[4,this.decodeOnce(n)];case 2:return a=i.sent(),[2,a]}})})},r.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return nt(this,void 0,void 0,function(){return at(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,a.sent()]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return nt(this,void 0,void 0,function(){var a,i;return at(this,function(o){switch(o.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,t,n)];case 1:return[2,o.sent()]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return nt(this,void 0,void 0,function(){var a;return at(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=i.sent(),[4,this.decodeFromStream(a,t,n)];case 2:return[2,i.sent()]}})})},r.prototype.decodeFromStream=function(e,t,n){return nt(this,void 0,void 0,function(){var a;return at(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return a=i.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,i.sent()]}})})},r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},r.prototype.attachStreamToVideo=function(e,t){return nt(this,void 0,void 0,function(){var n;return at(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},r.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,a){return t.playVideoOnLoad(e,function(){return n()})})},r.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},r.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},r.prototype.tryPlayVideo=function(e){return nt(this,void 0,void 0,function(){return at(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},r.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new Pe("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new Pe("element with id '"+e+"' must be an "+t+" element");return n},r.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Pe("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},r.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Pe("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},r.prototype.decodeFromVideoContinuously=function(e,t,n){if(e===void 0&&t===void 0)throw new Pe("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},r.prototype.decodeFromImageElement=function(e){if(!e)throw new Pe("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n},r.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},r.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},r.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Pe("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},r.prototype.decodeFromImageUrl=function(e){if(!e)throw new Pe("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},r.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Pe("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},r.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Pe("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,t);return n.src=e,a},r.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,a){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",t.imageLoadedListener)})},r.prototype._decodeOnLoadVideo=function(e){return nt(this,void 0,void 0,function(){return at(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},r.prototype._decodeOnLoadVideoContinuously=function(e,t){return nt(this,void 0,void 0,function(){return at(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},r.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},r.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.prototype.decodeOnce=function(e,t,n){var a=this;t===void 0&&(t=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var i=function(o,s){if(a._stopAsyncDecode){s(new T("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var l=a.decode(e);o(l)}catch(x){var c=t&&x instanceof T,d=x instanceof Me||x instanceof k,h=d&&n;if(c||h)return setTimeout(i,a._timeBetweenDecodingAttempts,o,s);s(x)}};return new Promise(function(o,s){return i(o,s)})},r.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var i=n.decode(e);t(i,null),setTimeout(a,n.timeBetweenScansMillis)}catch(l){t(null,l);var o=l instanceof Me||l instanceof k,s=l instanceof T;(o||s)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},r.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},r.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new Kl(n,t),i=new es(a);return new qo(i)},r.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},r.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},r.prototype.drawFrameOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.drawImageOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},r.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=a+"px",t.width=n,t.height=a,t},r.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},r.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},r.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},r.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},r.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},r.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},r}(),rt=function(){function r(e,t,n,a,i,o){n===void 0&&(n=t==null?0:8*t.length),o===void 0&&(o=_e.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=a,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=a,this.format=i,this.resultMetadata=null,o==null?this.timestamp=_e.currentTimeMillis():this.timestamp=o}return r.prototype.getText=function(){return this.text},r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.getBarcodeFormat=function(){return this.format},r.prototype.getResultMetadata=function(){return this.resultMetadata},r.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},r.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},r.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(t.length+e.length);_e.arraycopy(t,0,n,0,t.length),_e.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.toString=function(){return this.text},r}(),K;(function(r){r[r.AZTEC=0]="AZTEC",r[r.CODABAR=1]="CODABAR",r[r.CODE_39=2]="CODE_39",r[r.CODE_93=3]="CODE_93",r[r.CODE_128=4]="CODE_128",r[r.DATA_MATRIX=5]="DATA_MATRIX",r[r.EAN_8=6]="EAN_8",r[r.EAN_13=7]="EAN_13",r[r.ITF=8]="ITF",r[r.MAXICODE=9]="MAXICODE",r[r.PDF_417=10]="PDF_417",r[r.QR_CODE=11]="QR_CODE",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(K||(K={}));var $n;(function(r){r[r.OTHER=0]="OTHER",r[r.ORIENTATION=1]="ORIENTATION",r[r.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",r[r.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",r[r.ISSUE_NUMBER=4]="ISSUE_NUMBER",r[r.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",r[r.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",r[r.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",r[r.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",r[r.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",r[r.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})($n||($n={}));const Qe=$n;var an=function(){function r(e,t,n,a,i,o){i===void 0&&(i=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.setNumBits=function(e){this.numBits=e},r.prototype.getText=function(){return this.text},r.prototype.getByteSegments=function(){return this.byteSegments},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getErrorsCorrected=function(){return this.errorsCorrected},r.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},r.prototype.getErasures=function(){return this.erasures},r.prototype.setErasures=function(e){this.erasures=e},r.prototype.getOther=function(){return this.other},r.prototype.setOther=function(e){this.other=e},r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},r}(),Er=function(){function r(){}return r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new J;return this.logTable[e]},r.addOrSubtract=function(e,t){return e^t},r}(),Ut=function(){function r(e,t){if(t.length===0)throw new J;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var a=1;a<n&&t[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),_e.arraycopy(t,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,n;if(e===1){n=0;for(var a=0,i=t.length;a!==i;a++){var o=t[a];n=Er.addOrSubtract(n,o)}return n}n=t[0];for(var s=t.length,l=this.field,a=1;a<s;a++)n=Er.addOrSubtract(l.multiply(e,n),t[a]);return n},r.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new J("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var a=t;t=n,n=a}var i=new Int32Array(n.length),o=n.length-t.length;_e.arraycopy(n,0,i,0,o);for(var s=o;s<n.length;s++)i[s]=Er.addOrSubtract(t[s-o],n[s]);return new r(this.field,i)},r.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new J("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,n=t.length,a=e.coefficients,i=a.length,o=new Int32Array(n+i-1),s=this.field,l=0;l<n;l++)for(var c=t[l],d=0;d<i;d++)o[l+d]=Er.addOrSubtract(o[l+d],s.multiply(c,a[d]));return new r(s,o)},r.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,n=this.field,a=new Int32Array(t),i=this.coefficients,o=0;o<t;o++)a[o]=n.multiply(i[o],e);return new r(n,a)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new J;if(t===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,i=new Int32Array(a+e),o=this.field,s=0;s<a;s++)i[s]=o.multiply(n[s],t);return new r(o,i)},r.prototype.divide=function(e){if(!this.field.equals(e.field))throw new J("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new J("Divide by 0");for(var t=this.field,n=t.getZero(),a=this,i=e.getCoefficient(e.getDegree()),o=t.inverse(i);a.getDegree()>=e.getDegree()&&!a.isZero();){var s=a.getDegree()-e.getDegree(),l=t.multiply(a.getCoefficient(a.getDegree()),o),c=e.multiplyByMonomial(s,l),d=t.buildMonomial(s,l);n=n.addOrSubtract(d),a=a.addOrSubtract(c)}return[n,a]},r.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},r}(),ec=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ts=function(r){ec(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(ct),tc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lt=function(r){tc(e,r);function e(t,n,a){var i=r.call(this)||this;i.primitive=t,i.size=n,i.generatorBase=a;for(var o=new Int32Array(n),s=1,l=0;l<n;l++)o[l]=s,s*=2,s>=n&&(s^=t,s&=n-1);i.expTable=o;for(var c=new Int32Array(n),l=0;l<n-1;l++)c[o[l]]=l;return i.logTable=c,i.zero=new Ut(i,Int32Array.from([0])),i.one=new Ut(i,Int32Array.from([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new J;if(n===0)return this.zero;var a=new Int32Array(t+1);return a[0]=n,new Ut(this,a)},e.prototype.inverse=function(t){if(t===0)throw new ts;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,n){return t===0||n===0?0:this.expTable[(this.logTable[t]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+le.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Er),rc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gr=function(r){rc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(ct),nc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Or=function(r){nc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(ct),on=function(){function r(e){this.field=e}return r.prototype.decode=function(e,t){for(var n=this.field,a=new Ut(n,e),i=new Int32Array(t),o=!0,s=0;s<t;s++){var l=a.evaluateAt(n.exp(s+n.getGeneratorBase()));i[i.length-1-s]=l,l!==0&&(o=!1)}if(!o)for(var c=new Ut(n,i),d=this.runEuclideanAlgorithm(n.buildMonomial(t,1),c,t),h=d[0],x=d[1],g=this.findErrorLocations(h),p=this.findErrorMagnitudes(x,g),s=0;s<g.length;s++){var m=e.length-1-n.log(g[s]);if(m<0)throw new Gr("Bad error location");e[m]=lt.addOrSubtract(e[m],p[s])}},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var a=e;e=t,t=a}for(var i=this.field,o=e,s=t,l=i.getZero(),c=i.getOne();s.getDegree()>=(n/2|0);){var d=o,h=l;if(o=s,l=c,o.isZero())throw new Gr("r_{i-1} was zero");s=d;for(var x=i.getZero(),g=o.getCoefficient(o.getDegree()),p=i.inverse(g);s.getDegree()>=o.getDegree()&&!s.isZero();){var m=s.getDegree()-o.getDegree(),b=i.multiply(s.getCoefficient(s.getDegree()),p);x=x.addOrSubtract(i.buildMonomial(m,b)),s=s.addOrSubtract(o.multiplyByMonomial(m,b))}if(c=x.multiply(l).addOrSubtract(h),s.getDegree()>=o.getDegree())throw new Or("Division algorithm failed to reduce polynomial?")}var _=c.getCoefficient(0);if(_===0)throw new Gr("sigmaTilde(0) was zero");var y=i.inverse(_),I=c.multiplyScalar(y),O=s.multiplyScalar(y);return[I,O]},r.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),a=0,i=this.field,o=1;o<i.getSize()&&a<t;o++)e.evaluateAt(o)===0&&(n[a]=i.inverse(o),a++);if(a!==t)throw new Gr("Error locator degree does not match number of roots");return n},r.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,a=new Int32Array(n),i=this.field,o=0;o<n;o++){for(var s=i.inverse(t[o]),l=1,c=0;c<n;c++)if(o!==c){var d=i.multiply(t[c],s),h=d&1?d&-2:d|1;l=i.multiply(l,h)}a[o]=i.multiply(e.evaluateAt(s),i.inverse(l)),i.getGeneratorBase()!==0&&(a[o]=i.multiply(a[o],s))}return a},r}(),Ye;(function(r){r[r.UPPER=0]="UPPER",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.DIGIT=3]="DIGIT",r[r.PUNCT=4]="PUNCT",r[r.BINARY=5]="BINARY"})(Ye||(Ye={}));var po=function(){function r(){}return r.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),n=this.extractBits(t),a=this.correctBits(n),i=r.convertBoolArrayToByteArray(a),o=r.getEncodedData(a),s=new an(i,o,null,null);return s.setNumBits(a.length),s},r.highLevelDecode=function(e){return this.getEncodedData(e)},r.getEncodedData=function(e){for(var t=e.length,n=Ye.UPPER,a=Ye.UPPER,i="",o=0;o<t;)if(a===Ye.BINARY){if(t-o<5)break;var s=r.readCode(e,o,5);if(o+=5,s===0){if(t-o<11)break;s=r.readCode(e,o,11)+31,o+=11}for(var l=0;l<s;l++){if(t-o<8){o=t;break}var c=r.readCode(e,o,8);i+=ue.castAsNonUtf8Char(c),o+=8}a=n}else{var d=a===Ye.DIGIT?4:5;if(t-o<d)break;var c=r.readCode(e,o,d);o+=d;var h=r.getCharacter(a,c);h.startsWith("CTRL_")?(n=a,a=r.getTable(h.charAt(5)),h.charAt(6)==="L"&&(n=a)):(i+=h,a=n)}return i},r.getTable=function(e){switch(e){case"L":return Ye.LOWER;case"P":return Ye.PUNCT;case"M":return Ye.MIXED;case"D":return Ye.DIGIT;case"B":return Ye.BINARY;case"U":default:return Ye.UPPER}},r.getCharacter=function(e,t){switch(e){case Ye.UPPER:return r.UPPER_TABLE[t];case Ye.LOWER:return r.LOWER_TABLE[t];case Ye.MIXED:return r.MIXED_TABLE[t];case Ye.PUNCT:return r.PUNCT_TABLE[t];case Ye.DIGIT:return r.DIGIT_TABLE[t];default:throw new Or("Bad table")}},r.prototype.correctBits=function(e){var t,n;this.ddata.getNbLayers()<=2?(n=6,t=lt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=lt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=lt.AZTEC_DATA_10):(n=12,t=lt.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),i=e.length/n;if(i<a)throw new k;for(var o=e.length%n,s=new Int32Array(i),l=0;l<i;l++,o+=n)s[l]=r.readCode(e,o,n);try{var c=new on(t);c.decode(s,i-a)}catch(b){throw new k(b)}for(var d=(1<<n)-1,h=0,l=0;l<a;l++){var x=s[l];if(x===0||x===d)throw new k;(x===1||x===d-1)&&h++}for(var g=new Array(a*n-h),p=0,l=0;l<a;l++){var x=s[l];if(x===1||x===d-1)g.fill(x>1,p,p+n-1),p+=n-1;else for(var m=n-1;m>=0;--m)g[p++]=(x&1<<m)!==0}return g},r.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(t?11:14)+n*4,i=new Int32Array(a),o=new Array(this.totalBitsInLayer(n,t));if(t)for(var s=0;s<i.length;s++)i[s]=s;else for(var l=a+1+2*le.truncDivision(le.truncDivision(a,2)-1,15),c=a/2,d=le.truncDivision(l,2),s=0;s<c;s++){var h=s+le.truncDivision(s,15);i[c-s-1]=d-h-1,i[c+s]=d+h+1}for(var s=0,x=0;s<n;s++){for(var g=(n-s)*4+(t?9:12),p=s*2,m=a-1-p,b=0;b<g;b++)for(var _=b*2,y=0;y<2;y++)o[x+_+y]=e.get(i[p+y],i[p+b]),o[x+2*g+_+y]=e.get(i[p+b],i[m-y]),o[x+4*g+_+y]=e.get(i[m-y],i[m-b]),o[x+6*g+_+y]=e.get(i[m-b],i[p+y]);x+=g*8}return o},r.readCode=function(e,t,n){for(var a=0,i=t;i<t+n;i++)a<<=1,e[i]&&(a|=1);return a},r.readByte=function(e,t){var n=e.length-t;return n>=8?r.readCode(e,t,8):r.readCode(e,t,n)<<8-n},r.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),n=0;n<t.length;n++)t[n]=r.readByte(e,8*n);return t},r.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],r.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],r.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],r.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],r.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],r}(),fe=function(){function r(){}return r.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},r.distance=function(e,t,n,a){var i=e-n,o=t-a;return Math.sqrt(i*i+o*o)},r.sum=function(e){for(var t=0,n=0,a=e.length;n!==a;n++){var i=e[n];t+=i}return t},r}(),Xn=function(){function r(){}return r.floatToIntBits=function(e){return e},r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r}(),W=function(){function r(e,t){this.x=e,this.y=t}return r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.equals=function(e){if(e instanceof r){var t=e;return this.x===t.x&&this.y===t.y}return!1},r.prototype.hashCode=function(){return 31*Xn.floatToIntBits(this.x)+Xn.floatToIntBits(this.y)},r.prototype.toString=function(){return"("+this.x+","+this.y+")"},r.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),i,o,s;if(n>=t&&n>=a?(o=e[0],i=e[1],s=e[2]):a>=n&&a>=t?(o=e[1],i=e[0],s=e[2]):(o=e[2],i=e[0],s=e[1]),this.crossProductZ(i,o,s)<0){var l=i;i=s,s=l}e[0]=i,e[1]=o,e[2]=s},r.distance=function(e,t){return fe.distance(e.x,e.y,t.x,t.y)},r.crossProductZ=function(e,t,n){var a=t.x,i=t.y;return(n.x-a)*(e.y-i)-(n.y-i)*(e.x-a)},r}(),qn=function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r}(),ac=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ic=function(r){ac(e,r);function e(t,n,a,i,o){var s=r.call(this,t,n)||this;return s.compact=a,s.nbDatablocks=i,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(qn),Wn=function(){function r(e,t,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=r.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=a-i,this.downInit=a+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new T}return r.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,a=this.downInit,i=!1,o=!0,s=!1,l=!1,c=!1,d=!1,h=!1,x=this.width,g=this.height;o;){o=!1;for(var p=!0;(p||!l)&&t<x;)p=this.containsBlackPoint(n,a,t,!1),p?(t++,o=!0,l=!0):l||t++;if(t>=x){i=!0;break}for(var m=!0;(m||!c)&&a<g;)m=this.containsBlackPoint(e,t,a,!0),m?(a++,o=!0,c=!0):c||a++;if(a>=g){i=!0;break}for(var b=!0;(b||!d)&&e>=0;)b=this.containsBlackPoint(n,a,e,!1),b?(e--,o=!0,d=!0):d||e--;if(e<0){i=!0;break}for(var _=!0;(_||!h)&&n>=0;)_=this.containsBlackPoint(e,t,n,!0),_?(n--,o=!0,h=!0):h||n--;if(n<0){i=!0;break}o&&(s=!0)}if(!i&&s){for(var y=t-e,I=null,O=1;I===null&&O<y;O++)I=this.getBlackPointOnSegment(e,a-O,e+O,a);if(I==null)throw new T;for(var D=null,O=1;D===null&&O<y;O++)D=this.getBlackPointOnSegment(e,n+O,e+O,n);if(D==null)throw new T;for(var P=null,O=1;P===null&&O<y;O++)P=this.getBlackPointOnSegment(t,n+O,t-O,n);if(P==null)throw new T;for(var F=null,O=1;F===null&&O<y;O++)F=this.getBlackPointOnSegment(t,a-O,t-O,a);if(F==null)throw new T;return this.centerEdges(F,I,P,D)}else throw new T},r.prototype.getBlackPointOnSegment=function(e,t,n,a){for(var i=fe.round(fe.distance(e,t,n,a)),o=(n-e)/i,s=(a-t)/i,l=this.image,c=0;c<i;c++){var d=fe.round(e+c*o),h=fe.round(t+c*s);if(l.get(d,h))return new W(d,h)}return null},r.prototype.centerEdges=function(e,t,n,a){var i=e.getX(),o=e.getY(),s=t.getX(),l=t.getY(),c=n.getX(),d=n.getY(),h=a.getX(),x=a.getY(),g=r.CORR;return i<this.width/2?[new W(h-g,x+g),new W(s+g,l+g),new W(c-g,d-g),new W(i+g,o-g)]:[new W(h+g,x+g),new W(s+g,l-g),new W(c-g,d+g),new W(i-g,o-g)]},r.prototype.containsBlackPoint=function(e,t,n,a){var i=this.image;if(a){for(var o=e;o<=t;o++)if(i.get(o,n))return!0}else for(var s=e;s<=t;s++)if(i.get(n,s))return!0;return!1},r.INIT_SIZE=10,r.CORR=1,r}(),vo=function(){function r(){}return r.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),a=e.getHeight(),i=!0,o=0;o<t.length&&i;o+=2){var s=Math.floor(t[o]),l=Math.floor(t[o+1]);if(s<-1||s>n||l<-1||l>a)throw new T;i=!1,s===-1?(t[o]=0,i=!0):s===n&&(t[o]=n-1,i=!0),l===-1?(t[o+1]=0,i=!0):l===a&&(t[o+1]=a-1,i=!0)}i=!0;for(var o=t.length-2;o>=0&&i;o-=2){var s=Math.floor(t[o]),l=Math.floor(t[o+1]);if(s<-1||s>n||l<-1||l>a)throw new T;i=!1,s===-1?(t[o]=0,i=!0):s===n&&(t[o]=n-1,i=!0),l===-1?(t[o+1]=0,i=!0):l===a&&(t[o+1]=a-1,i=!0)}},r}(),rs=function(){function r(e,t,n,a,i,o,s,l,c){this.a11=e,this.a21=t,this.a31=n,this.a12=a,this.a22=i,this.a32=o,this.a13=s,this.a23=l,this.a33=c}return r.quadrilateralToQuadrilateral=function(e,t,n,a,i,o,s,l,c,d,h,x,g,p,m,b){var _=r.quadrilateralToSquare(e,t,n,a,i,o,s,l),y=r.squareToQuadrilateral(c,d,h,x,g,p,m,b);return y.times(_)},r.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,a=this.a12,i=this.a13,o=this.a21,s=this.a22,l=this.a23,c=this.a31,d=this.a32,h=this.a33,x=0;x<t;x+=2){var g=e[x],p=e[x+1],m=i*g+l*p+h;e[x]=(n*g+o*p+c)/m,e[x+1]=(a*g+s*p+d)/m}},r.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,a=this.a12,i=this.a13,o=this.a21,s=this.a22,l=this.a23,c=this.a31,d=this.a32,h=this.a33,x=e.length,g=0;g<x;g++){var p=e[g],m=t[g],b=i*p+l*m+h;e[g]=(n*p+o*m+c)/b,t[g]=(a*p+s*m+d)/b}},r.squareToQuadrilateral=function(e,t,n,a,i,o,s,l){var c=e-n+i-s,d=t-a+o-l;if(c===0&&d===0)return new r(n-e,i-n,e,a-t,o-a,t,0,0,1);var h=n-i,x=s-i,g=a-o,p=l-o,m=h*p-x*g,b=(c*p-x*d)/m,_=(h*d-c*g)/m;return new r(n-e+b*n,s-e+_*s,e,a-t+b*a,l-t+_*l,t,b,_,1)},r.quadrilateralToSquare=function(e,t,n,a,i,o,s,l){return r.squareToQuadrilateral(e,t,n,a,i,o,s,l).buildAdjoint()},r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},r.prototype.times=function(e){return new r(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},r}(),oc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sc=function(r){oc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,n,a,i,o,s,l,c,d,h,x,g,p,m,b,_,y,I,O){var D=rs.quadrilateralToQuadrilateral(i,o,s,l,c,d,h,x,g,p,m,b,_,y,I,O);return this.sampleGridWithTransform(t,n,a,D)},e.prototype.sampleGridWithTransform=function(t,n,a,i){if(n<=0||a<=0)throw new T;for(var o=new St(n,a),s=new Float32Array(2*n),l=0;l<a;l++){for(var c=s.length,d=l+.5,h=0;h<c;h+=2)s[h]=h/2+.5,s[h+1]=d;i.transformPoints(s),vo.checkAndNudgePoints(t,s);try{for(var h=0;h<c;h+=2)t.get(Math.floor(s[h]),Math.floor(s[h+1]))&&o.set(h/2,l)}catch{throw new T}}return o},e}(vo),ea=function(){function r(){}return r.setGridSampler=function(e){r.gridSampler=e},r.getInstance=function(){return r.gridSampler},r.gridSampler=new sc,r}(),st=function(){function r(e,t){this.x=e,this.y=t}return r.prototype.toResultPoint=function(){return new W(this.getX(),this.getY())},r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r}(),lc=function(){function r(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return r.prototype.detect=function(){return this.detectMirror(!1)},r.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new ic(i,o,this.compact,this.nbDataBlocks,this.nbLayers)},r.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new T;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var a=0,i=0;i<4;i++){var o=n[(this.shift+i)%4];this.compact?(a<<=7,a+=o>>1&127):(a<<=10,a+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},r.prototype.getRotation=function(e,t){var n=0;e.forEach(function(i,o,s){var l=(i>>t-2<<1)+(i&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(le.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new T},r.prototype.getCorrectedParameterData=function(e,t){var n,a;t?(n=7,a=2):(n=10,a=4);for(var i=n-a,o=new Int32Array(n),s=n-1;s>=0;--s)o[s]=e&15,e>>=4;try{var l=new on(lt.AZTEC_PARAM);l.decode(o,i)}catch{throw new T}for(var c=0,s=0;s<a;s++)c=(c<<4)+o[s];return c},r.prototype.getBullsEyeCorners=function(e){var t=e,n=e,a=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(t,o,1,-1),l=this.getFirstDifferent(n,o,1,1),c=this.getFirstDifferent(a,o,-1,1),d=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){var h=this.distancePoint(d,s)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(h<.75||h>1.25||!this.isWhiteOrBlackRectangle(s,l,c,d))break}t=s,n=l,a=c,i=d,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new T;this.compact=this.nbCenterLayers===5;var x=new W(t.getX()+.5,t.getY()-.5),g=new W(n.getX()+.5,n.getY()+.5),p=new W(a.getX()-.5,a.getY()+.5),m=new W(i.getX()-.5,i.getY()-.5);return this.expandSquare([x,g,p,m],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},r.prototype.getMatrixCenter=function(){var e,t,n,a;try{var i=new Wn(this.image).detect();e=i[0],t=i[1],n=i[2],a=i[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new st(o+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new st(o+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new st(o-7,s+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new st(o-7,s-7),!1,-1,-1).toResultPoint()}var l=fe.round((e.getX()+a.getX()+t.getX()+n.getX())/4),c=fe.round((e.getY()+a.getY()+t.getY()+n.getY())/4);try{var i=new Wn(this.image,15,l,c).detect();e=i[0],t=i[1],n=i[2],a=i[3]}catch{e=this.getFirstDifferent(new st(l+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new st(l+7,c+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new st(l-7,c+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new st(l-7,c-7),!1,-1,-1).toResultPoint()}return l=fe.round((e.getX()+a.getX()+t.getX()+n.getX())/4),c=fe.round((e.getY()+a.getY()+t.getY()+n.getY())/4),new st(l,c)},r.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},r.prototype.sampleGrid=function(e,t,n,a,i){var o=ea.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,c=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,l,l,c,l,c,c,l,c,t.getX(),t.getY(),n.getX(),n.getY(),a.getX(),a.getY(),i.getX(),i.getY())},r.prototype.sampleLine=function(e,t,n){for(var a=0,i=this.distanceResultPoint(e,t),o=i/n,s=e.getX(),l=e.getY(),c=o*(t.getX()-e.getX())/i,d=o*(t.getY()-e.getY())/i,h=0;h<n;h++)this.image.get(fe.round(s+h*c),fe.round(l+h*d))&&(a|=1<<n-h-1);return a},r.prototype.isWhiteOrBlackRectangle=function(e,t,n,a){var i=3;e=new st(e.getX()-i,e.getY()+i),t=new st(t.getX()-i,t.getY()-i),n=new st(n.getX()+i,n.getY()-i),a=new st(a.getX()+i,a.getY()+i);var o=this.getColor(a,e);if(o===0)return!1;var s=this.getColor(e,t);return s!==o||(s=this.getColor(t,n),s!==o)?!1:(s=this.getColor(n,a),s===o)},r.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),a=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,o=0,s=e.getX(),l=e.getY(),c=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),h=0;h<d;h++)s+=a,l+=i,this.image.get(fe.round(s),fe.round(l))!==c&&o++;var x=o/n;return x>.1&&x<.9?0:x<=.1===c?1:-1},r.prototype.getFirstDifferent=function(e,t,n,a){for(var i=e.getX()+n,o=e.getY()+a;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n,o+=a;for(i-=n,o-=a;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=a;return o-=a,new st(i,o)},r.prototype.expandSquare=function(e,t,n){var a=n/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,c=new W(s+a*i,l+a*o),d=new W(s-a*i,l-a*o);i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var h=new W(s+a*i,l+a*o),x=new W(s-a*i,l-a*o),g=[c,h,d,x];return g},r.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},r.prototype.isValidPoint=function(e){var t=fe.round(e.getX()),n=fe.round(e.getY());return this.isValid(t,n)},r.prototype.distancePoint=function(e,t){return fe.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.distanceResultPoint=function(e,t){return fe.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(le.truncDivision(this.nbLayers-4,8)+1)+15},r}(),Kr=function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=null,a=new lc(e.getBlackMatrix()),i=null,o=null;try{var s=a.detectMirror(!1);i=s.getPoints(),this.reportFoundResultPoints(t,i),o=new po().decode(s)}catch(h){n=h}if(o==null)try{var s=a.detectMirror(!0);i=s.getPoints(),this.reportFoundResultPoints(t,i),o=new po().decode(s)}catch(h){throw n??h}var l=new rt(o.getText(),o.getRawBytes(),o.getNumBits(),i,K.AZTEC,_e.currentTimeMillis()),c=o.getByteSegments();c!=null&&l.putMetadata(Qe.BYTE_SEGMENTS,c);var d=o.getECLevel();return d!=null&&l.putMetadata(Qe.ERROR_CORRECTION_LEVEL,d),l},r.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var n=e.get(ye.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach(function(a,i,o){n.foundPossibleResultPoint(a)})}},r.prototype.reset=function(){},r}(),cc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){cc(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Kr,t)||this}return e})(lr);var Ge=function(){function r(){}return r.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var n=t&&t.get(ye.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),i=this.doDecode(a,t),o=i.getResultMetadata(),s=270;o!==null&&o.get(Qe.ORIENTATION)===!0&&(s=s+o.get(Qe.ORIENTATION)%360),i.putMetadata(Qe.ORIENTATION,s);var l=i.getResultPoints();if(l!==null)for(var c=a.getHeight(),d=0;d<l.length;d++)l[d]=new W(c-l[d].getY()-1,l[d].getX());return i}else throw new T}},r.prototype.reset=function(){},r.prototype.doDecode=function(e,t){var n=e.getWidth(),a=e.getHeight(),i=new Xe(n),o=t&&t.get(ye.TRY_HARDER)===!0,s=Math.max(1,a>>(o?8:5)),l;o?l=a:l=15;for(var c=Math.trunc(a/2),d=0;d<l;d++){var h=Math.trunc((d+1)/2),x=(d&1)===0,g=c+s*(x?h:-h);if(g<0||g>=a)break;try{i=e.getBlackRow(g,i)}catch{continue}for(var p=function(y){if(y===1&&(i.reverse(),t&&t.get(ye.NEED_RESULT_POINT_CALLBACK)===!0)){var I=new Map;t.forEach(function(P,F){return I.set(F,P)}),I.delete(ye.NEED_RESULT_POINT_CALLBACK),t=I}try{var O=m.decodeRow(g,i,t);if(y===1){O.putMetadata(Qe.ORIENTATION,180);var D=O.getResultPoints();D!==null&&(D[0]=new W(n-D[0].getX()-1,D[0].getY()),D[1]=new W(n-D[1].getX()-1,D[1].getY()))}return{value:O}}catch{}},m=this,b=0;b<2;b++){var _=p(b);if(typeof _=="object")return _.value}}throw new T},r.recordPattern=function(e,t,n){for(var a=n.length,i=0;i<a;i++)n[i]=0;var o=e.getSize();if(t>=o)throw new T;for(var s=!e.get(t),l=0,c=t;c<o;){if(e.get(c)!==s)n[l]++;else{if(++l===a)break;n[l]=1,s=!s}c++}if(!(l===a||l===a-1&&c===o))throw new T},r.recordPatternInReverse=function(e,t,n){for(var a=n.length,i=e.get(t);t>0&&a>=0;)e.get(--t)!==i&&(a--,i=!i);if(a>=0)throw new T;r.recordPattern(e,t+1,n)},r.patternMatchVariance=function(e,t,n){for(var a=e.length,i=0,o=0,s=0;s<a;s++)i+=e[s],o+=t[s];if(i<o)return Number.POSITIVE_INFINITY;var l=i/o;n*=l;for(var c=0,d=0;d<a;d++){var h=e[d],x=t[d]*l,g=h>x?h-x:x-h;if(g>n)return Number.POSITIVE_INFINITY;c+=g}return c/i},r}(),uc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mo=function(r){uc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var n=t.getSize(),a=t.getNextSet(0),i=0,o=Int32Array.from([0,0,0,0,0,0]),s=a,l=!1,c=6,d=a;d<n;d++)if(t.get(d)!==l)o[i]++;else{if(i===c-1){for(var h=e.MAX_AVG_VARIANCE,x=-1,g=e.CODE_START_A;g<=e.CODE_START_C;g++){var p=Ge.patternMatchVariance(o,e.CODE_PATTERNS[g],e.MAX_INDIVIDUAL_VARIANCE);p<h&&(h=p,x=g)}if(x>=0&&t.isRange(Math.max(0,s-(d-s)/2),s,!1))return Int32Array.from([s,d,x]);s+=o[0]+o[1],o=o.slice(2,o.length),o[i-1]=0,o[i]=0,i--}else i++;o[i]=1,l=!l}throw new T},e.decodeCode=function(t,n,a){Ge.recordPattern(t,a,n);for(var i=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var l=e.CODE_PATTERNS[s],c=this.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);c<i&&(i=c,o=s)}if(o>=0)return o;throw new T},e.prototype.decodeRow=function(t,n,a){var i=a&&a.get(ye.ASSUME_GS1)===!0,o=e.findStartPattern(n),s=o[2],l=0,c=new Uint8Array(20);c[l++]=s;var d;switch(s){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new k}for(var h=!1,x=!1,g="",p=o[0],m=o[1],b=Int32Array.from([0,0,0,0,0,0]),_=0,y=0,I=s,O=0,D=!0,P=!1,F=!1;!h;){var V=x;switch(x=!1,_=y,y=e.decodeCode(n,b,m),c[l++]=y,y!==e.CODE_STOP&&(D=!0),y!==e.CODE_STOP&&(O++,I+=O*y),p=m,m+=b.reduce(function(gt,Re){return gt+Re},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new k}switch(d){case e.CODE_CODE_A:if(y<64)F===P?g+=String.fromCharCode(32+y):g+=String.fromCharCode(32+y+128),F=!1;else if(y<96)F===P?g+=String.fromCharCode(y-64):g+=String.fromCharCode(y+64),F=!1;else switch(y!==e.CODE_STOP&&(D=!1),y){case e.CODE_FNC_1:i&&(g.length===0?g+="]C1":g+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!P&&F?(P=!0,F=!1):P&&F?(P=!1,F=!1):F=!0;break;case e.CODE_SHIFT:x=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_B:if(y<96)F===P?g+=String.fromCharCode(32+y):g+=String.fromCharCode(32+y+128),F=!1;else switch(y!==e.CODE_STOP&&(D=!1),y){case e.CODE_FNC_1:i&&(g.length===0?g+="]C1":g+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!P&&F?(P=!0,F=!1):P&&F?(P=!1,F=!1):F=!0;break;case e.CODE_SHIFT:x=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(g+="0"),g+=y;else switch(y!==e.CODE_STOP&&(D=!1),y){case e.CODE_FNC_1:i&&(g.length===0?g+="]C1":g+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:h=!0;break}break}V&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var q=m-p;if(m=n.getNextUnset(m),!n.isRange(m,Math.min(n.getSize(),m+(m-p)/2),!1))throw new T;if(I-=O*_,I%103!==_)throw new Me;var Y=g.length;if(Y===0)throw new T;Y>0&&D&&(d===e.CODE_CODE_C?g=g.substring(0,Y-2):g=g.substring(0,Y-1));for(var he=(o[1]+o[0])/2,z=p+q/2,M=c.length,se=new Uint8Array(M),We=0;We<M;We++)se[We]=c[We];var Nt=[new W(he,t),new W(z,t)];return new rt(g,se,0,Nt,K.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Ge),dc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yo=function(r){dc(e,r);function e(t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var a=r.call(this)||this;return a.usingCheckDigit=t,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(t,n,a){var i,o,s,l,c=this.counters;c.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,c),h=n.getNextSet(d[1]),x=n.getSize(),g,p;do{e.recordPattern(n,h,c);var m=e.toNarrowWidePattern(c);if(m<0)throw new T;g=e.patternToChar(m),this.decodeRowResult+=g,p=h;try{for(var b=(i=void 0,Rn(c)),_=b.next();!_.done;_=b.next()){var y=_.value;h+=y}}catch(M){i={error:M}}finally{try{_&&!_.done&&(o=b.return)&&o.call(b)}finally{if(i)throw i.error}}h=n.getNextSet(h)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var I=0;try{for(var O=Rn(c),D=O.next();!D.done;D=O.next()){var y=D.value;I+=y}}catch(M){s={error:M}}finally{try{D&&!D.done&&(l=O.return)&&l.call(O)}finally{if(s)throw s.error}}var P=h-p-I;if(h!==x&&P*2<I)throw new T;if(this.usingCheckDigit){for(var F=this.decodeRowResult.length-1,V=0,q=0;q<F;q++)V+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(q));if(this.decodeRowResult.charAt(F)!==e.ALPHABET_STRING.charAt(V%43))throw new Me;this.decodeRowResult=this.decodeRowResult.substring(0,F)}if(this.decodeRowResult.length===0)throw new T;var Y;this.extendedMode?Y=e.decodeExtended(this.decodeRowResult):Y=this.decodeRowResult;var he=(d[1]+d[0])/2,z=p+I/2;return new rt(Y,null,0,[new W(he,t),new W(z,t)],K.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,n){for(var a=t.getSize(),i=t.getNextSet(0),o=0,s=i,l=!1,c=n.length,d=i;d<a;d++)if(t.get(d)!==l)n[o]++;else{if(o===c-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((d-s)/2)),s,!1))return[s,d];s+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,l=!l}throw new T},e.toNarrowWidePattern=function(t){var n,a,i=t.length,o=0,s;do{var l=2147483647;try{for(var c=(n=void 0,Rn(t)),d=c.next();!d.done;d=c.next()){var h=d.value;h<l&&h>o&&(l=h)}}catch(m){n={error:m}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}o=l,s=0;for(var x=0,g=0,p=0;p<i;p++){var h=t[p];h>o&&(g|=1<<i-1-p,s++,x+=h)}if(s===3){for(var p=0;p<i&&s>0;p++){var h=t[p];if(h>o&&(s--,h*2>=x))return-1}return g}}while(s>3);return-1},e.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);if(t===e.ASTERISK_ENCODING)return"*";throw new T},e.decodeExtended=function(t){for(var n=t.length,a="",i=0;i<n;i++){var o=t.charAt(i);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=t.charAt(i+1),l="\0";switch(o){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new k;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new k;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="";else throw new k;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new k;break}a+=l,i++}else a+=o}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Ge),fc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Dn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wo=function(r){fc(e,r);function e(){var t=r.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,n,a){var i,o,s,l,c=this.findAsteriskPattern(n),d=n.getNextSet(c[1]),h=n.getSize(),x=this.counters;x.fill(0),this.decodeRowResult="";var g,p;do{e.recordPattern(n,d,x);var m=this.toPattern(x);if(m<0)throw new T;g=this.patternToChar(m),this.decodeRowResult+=g,p=d;try{for(var b=(i=void 0,Dn(x)),_=b.next();!_.done;_=b.next()){var y=_.value;d+=y}}catch(q){i={error:q}}finally{try{_&&!_.done&&(o=b.return)&&o.call(b)}finally{if(i)throw i.error}}d=n.getNextSet(d)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var I=0;try{for(var O=Dn(x),D=O.next();!D.done;D=O.next()){var y=D.value;I+=y}}catch(q){s={error:q}}finally{try{D&&!D.done&&(l=O.return)&&l.call(O)}finally{if(s)throw s.error}}if(d===h||!n.get(d))throw new T;if(this.decodeRowResult.length<2)throw new T;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var P=this.decodeExtended(this.decodeRowResult),F=(c[1]+c[0])/2,V=p+I/2;return new rt(P,null,0,[new W(F,t),new W(V,t)],K.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var n=t.getSize(),a=t.getNextSet(0);this.counters.fill(0);for(var i=this.counters,o=a,s=!1,l=i.length,c=0,d=a;d<n;d++)if(t.get(d)!==s)i[c]++;else{if(c===l-1){if(this.toPattern(i)===e.ASTERISK_ENCODING)return new Int32Array([o,d]);o+=i[0]+i[1],i.copyWithin(0,2,2+c-1),i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,s=!s}throw new T},e.prototype.toPattern=function(t){var n,a,i=0;try{for(var o=Dn(t),s=o.next();!s.done;s=o.next()){var l=s.value;i+=l}}catch(p){n={error:p}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}for(var c=0,d=t.length,h=0;h<d;h++){var x=Math.round(t[h]*9/i);if(x<1||x>4)return-1;if(h&1)c<<=x;else for(var g=0;g<x;g++)c=c<<1|1}return c},e.prototype.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);throw new T},e.prototype.decodeExtended=function(t){for(var n=t.length,a="",i=0;i<n;i++){var o=t.charAt(i);if(o>="a"&&o<="d"){if(i>=n-1)throw new k;var s=t.charAt(i+1),l="\0";switch(o){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new k;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new k;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l="";else throw new k;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new k;break}a+=l,i++}else a+=o}return a},e.prototype.checkChecksums=function(t){var n=t.length;this.checkOneChecksum(t,n-2,20),this.checkOneChecksum(t,n-1,15)},e.prototype.checkOneChecksum=function(t,n,a){for(var i=1,o=0,s=n-1;s>=0;s--)o+=i*e.ALPHABET_STRING.indexOf(t.charAt(s)),++i>a&&(i=1);if(t.charAt(n)!==e.ALPHABET_STRING[o%47])throw new Me},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Ge),hc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bo=function(r){hc(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,n,a){var i,o,s=this.decodeStart(n),l=this.decodeEnd(n),c=new oe;e.decodeMiddle(n,s[1],l[0],c);var d=c.toString(),h=null;a!=null&&(h=a.get(ye.ALLOWED_LENGTHS)),h==null&&(h=e.DEFAULT_ALLOWED_LENGTHS);var x=d.length,g=!1,p=0;try{for(var m=xc(h),b=m.next();!b.done;b=m.next()){var _=b.value;if(x===_){g=!0;break}_>p&&(p=_)}}catch(O){i={error:O}}finally{try{b&&!b.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}if(!g&&x>p&&(g=!0),!g)throw new k;var y=[new W(s[1],t),new W(l[0],t)],I=new rt(d,null,0,y,K.ITF,new Date().getTime());return I},e.decodeMiddle=function(t,n,a,i){var o=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(o.fill(0),s.fill(0),l.fill(0);n<a;){Ge.recordPattern(t,n,o);for(var c=0;c<5;c++){var d=2*c;s[c]=o[d],l[c]=o[d+1]}var h=e.decodeDigit(s);i.append(h.toString()),h=this.decodeDigit(l),i.append(h.toString()),o.forEach(function(x){n+=x})}},e.prototype.decodeStart=function(t){var n=e.skipWhiteSpace(t),a=e.findGuardPattern(t,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(t,a[0]),a},e.prototype.validateQuietZone=function(t,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var i=n-1;a>0&&i>=0&&!t.get(i);i--)a--;if(a!==0)throw new T},e.skipWhiteSpace=function(t){var n=t.getSize(),a=t.getNextSet(0);if(a===n)throw new T;return a},e.prototype.decodeEnd=function(t){t.reverse();try{var n=e.skipWhiteSpace(t),a=void 0;try{a=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof T&&(a=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,a[0]);var i=a[0];return a[0]=t.getSize()-a[1],a[1]=t.getSize()-i,a}finally{t.reverse()}},e.findGuardPattern=function(t,n,a){var i=a.length,o=new Int32Array(i),s=t.getSize(),l=!1,c=0,d=n;o.fill(0);for(var h=n;h<s;h++)if(t.get(h)!==l)o[c]++;else{if(c===i-1){if(Ge.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,h];d+=o[0]+o[1],_e.arraycopy(o,2,o,0,c-1),o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,l=!l}throw new T},e.decodeDigit=function(t){for(var n=e.MAX_AVG_VARIANCE,a=-1,i=e.PATTERNS.length,o=0;o<i;o++){var s=e.PATTERNS[o],l=Ge.patternMatchVariance(t,s,e.MAX_INDIVIDUAL_VARIANCE);l<n?(n=l,a=o):l===n&&(a=-1)}if(a>=0)return a%10;throw new T},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Ge),gc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sr=function(r){gc(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var n=!1,a,i=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),a=e.findGuardPattern(t,i,!1,this.START_END_PATTERN,o);var s=a[0];i=a[1];var l=s-(i-s);l>=0&&(n=t.isRange(l,s,!1))}return a},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var a=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,a=0,i=n-1;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new k;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new k;a+=o}return(1e3-a)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,n,a,i){return this.findGuardPattern(t,n,a,i,new Int32Array(i.length))},e.findGuardPattern=function(t,n,a,i,o){var s=t.getSize();n=a?t.getNextUnset(n):t.getNextSet(n);for(var l=0,c=n,d=i.length,h=a,x=n;x<s;x++)if(t.get(x)!==h)o[l]++;else{if(l===d-1){if(Ge.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([c,x]);c+=o[0]+o[1];for(var g=o.slice(2,o.length),p=0;p<l-1;p++)o[p]=g[p];o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,h=!h}throw new T},e.decodeDigit=function(t,n,a,i){this.recordPattern(t,a,n);for(var o=this.MAX_AVG_VARIANCE,s=-1,l=i.length,c=0;c<l;c++){var d=i[c],h=Ge.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);h<o&&(o=h,s=c)}if(s>=0)return s;throw new T},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Ge),pc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vc=function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,a),o=a.toString(),s=r.parseExtensionString(o),l=[new W((n[0]+n[1])/2,e),new W(i,e)],c=new rt(o,null,0,l,K.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&c.putAllMetadata(s),c},r.prototype.decodeMiddle=function(e,t,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),l=t[1],c=0,d=0;d<5&&l<s;d++){var h=sr.decodeDigit(e,o,l,sr.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);try{for(var x=(a=void 0,pc(o)),g=x.next();!g.done;g=x.next()){var p=g.value;l+=p}}catch(b){a={error:b}}finally{try{g&&!g.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}h>=10&&(c|=1<<4-d),d!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==5)throw new T;var m=this.determineCheckDigit(c);if(r.extensionChecksum(n.toString())!==m)throw new T;return l},r.extensionChecksum=function(e){for(var t=e.length,n=0,a=t-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=t-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},r.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new T},r.parseExtensionString=function(e){if(e.length!==5)return null;var t=r.parseExtension5String(e);return t==null?null:new Map([[Qe.SUGGESTED_PRICE,t]])},r.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),i=n%100,o=i<10?"0"+i:i.toString();return t+a+"."+o},r}(),mc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yc=function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,a),o=a.toString(),s=r.parseExtensionString(o),l=[new W((n[0]+n[1])/2,e),new W(i,e)],c=new rt(o,null,0,l,K.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&c.putAllMetadata(s),c},r.prototype.decodeMiddle=function(e,t,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),l=t[1],c=0,d=0;d<2&&l<s;d++){var h=sr.decodeDigit(e,o,l,sr.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);try{for(var x=(a=void 0,mc(o)),g=x.next();!g.done;g=x.next()){var p=g.value;l+=p}}catch(m){a={error:m}}finally{try{g&&!g.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}h>=10&&(c|=1<<1-d),d!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==2)throw new T;if(parseInt(n.toString())%4!==c)throw new T;return l},r.parseExtensionString=function(e){return e.length!==2?null:new Map([[Qe.ISSUE_NUMBER,parseInt(e)]])},r}(),wc=function(){function r(){}return r.decodeRow=function(e,t,n){var a=sr.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var i=new vc;return i.decodeRow(e,t,a)}catch{var o=new yc;return o.decodeRow(e,t,a)}},r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),r}(),bc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ke=function(r){bc(e,r);function e(){var t=r.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],i=new Int32Array(a.length),o=0;o<a.length;o++)i[o]=a[a.length-o-1];e.L_AND_G_PATTERNS[n]=i}return t}return e.prototype.decodeRow=function(t,n,a){var i=e.findStartGuardPattern(n),o=a==null?null:a.get(ye.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new W((i[0]+i[1])/2,t);o.foundPossibleResultPoint(s)}var l=this.decodeMiddle(n,i,this.decodeRowStringBuffer),c=l.rowOffset,d=l.resultString;if(o!=null){var h=new W(c,t);o.foundPossibleResultPoint(h)}var x=e.decodeEnd(n,c);if(o!=null){var g=new W((x[0]+x[1])/2,t);o.foundPossibleResultPoint(g)}var p=x[1],m=p+(p-x[0]);if(m>=n.getSize()||!n.isRange(p,m,!1))throw new T;var b=d.toString();if(b.length<8)throw new k;if(!e.checkChecksum(b))throw new Me;var _=(i[1]+i[0])/2,y=(x[1]+x[0])/2,I=this.getBarcodeFormat(),O=[new W(_,t),new W(y,t)],D=new rt(b,null,0,O,I,new Date().getTime()),P=0;try{var F=wc.decodeRow(t,n,x[1]);D.putMetadata(Qe.UPC_EAN_EXTENSION,F.getText()),D.putAllMetadata(F.getResultMetadata()),D.addResultPoints(F.getResultPoints()),P=F.getText().length}catch{}var V=a==null?null:a.get(ye.ALLOWED_EAN_EXTENSIONS);if(V!=null){var q=!1;for(var Y in V)if(P.toString()===Y){q=!0;break}if(!q)throw new T}return I===K.EAN_13||K.UPC_A,D},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var a=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,a=0,i=n-1;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new k;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new k;a+=o}return(1e3-a)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(sr),_c=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_o=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zn=function(r){_c(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,a){var i,o,s,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var d=t.getSize(),h=n[1],x=0,g=0;g<6&&h<d;g++){var p=ke.decodeDigit(t,c,h,ke.L_AND_G_PATTERNS);a+=String.fromCharCode(48+p%10);try{for(var m=(i=void 0,_o(c)),b=m.next();!b.done;b=m.next()){var _=b.value;h+=_}}catch(D){i={error:D}}finally{try{b&&!b.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}p>=10&&(x|=1<<5-g)}a=e.determineFirstDigit(a,x);var y=ke.findGuardPattern(t,h,!0,ke.MIDDLE_PATTERN,new Int32Array(ke.MIDDLE_PATTERN.length).fill(0));h=y[1];for(var g=0;g<6&&h<d;g++){var p=ke.decodeDigit(t,c,h,ke.L_PATTERNS);a+=String.fromCharCode(48+p);try{for(var I=(s=void 0,_o(c)),O=I.next();!O.done;O=I.next()){var _=O.value;h+=_}}catch(F){s={error:F}}finally{try{O&&!O.done&&(l=I.return)&&l.call(I)}finally{if(s)throw s.error}}}return{rowOffset:h,resultString:a}},e.prototype.getBarcodeFormat=function(){return K.EAN_13},e.determineFirstDigit=function(t,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return t=String.fromCharCode(48+a)+t,t;throw new T},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(ke),Ac=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ao=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Co=function(r){Ac(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,a){var i,o,s,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var d=t.getSize(),h=n[1],x=0;x<4&&h<d;x++){var g=ke.decodeDigit(t,c,h,ke.L_PATTERNS);a+=String.fromCharCode(48+g);try{for(var p=(i=void 0,Ao(c)),m=p.next();!m.done;m=p.next()){var b=m.value;h+=b}}catch(O){i={error:O}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}}var _=ke.findGuardPattern(t,h,!0,ke.MIDDLE_PATTERN,new Int32Array(ke.MIDDLE_PATTERN.length).fill(0));h=_[1];for(var x=0;x<4&&h<d;x++){var g=ke.decodeDigit(t,c,h,ke.L_PATTERNS);a+=String.fromCharCode(48+g);try{for(var y=(s=void 0,Ao(c)),I=y.next();!I.done;I=y.next()){var b=I.value;h+=b}}catch(P){s={error:P}}finally{try{I&&!I.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}}return{rowOffset:h,resultString:a}},e.prototype.getBarcodeFormat=function(){return K.EAN_8},e}(ke),Cc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Eo=function(r){Cc(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ean13Reader=new zn,t}return e.prototype.getBarcodeFormat=function(){return K.UPC_A},e.prototype.decode=function(t,n){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,n,a))},e.prototype.decodeMiddle=function(t,n,a){return this.ean13Reader.decodeMiddle(t,n,a)},e.prototype.maybeReturnResult=function(t){var n=t.getText();if(n.charAt(0)==="0"){var a=new rt(n.substring(1),null,null,t.getResultPoints(),K.UPC_A);return t.getResultMetadata()!=null&&a.putAllMetadata(t.getResultMetadata()),a}else throw new T},e.prototype.reset=function(){this.ean13Reader.reset()},e}(ke),Ec=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},So=function(r){Ec(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,n,a){var i,o,s=this.decodeMiddleCounters.map(function(b){return b});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=t.getSize(),c=n[1],d=0,h=0;h<6&&c<l;h++){var x=e.decodeDigit(t,s,c,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+x%10);try{for(var g=(i=void 0,Sc(s)),p=g.next();!p.done;p=g.next()){var m=p.value;c+=m}}catch(b){i={error:b}}finally{try{p&&!p.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}x>=10&&(d|=1<<5-h)}return e.determineNumSysAndCheckDigit(new oe(a),d),c},e.prototype.decodeEnd=function(t,n){return e.findGuardPatternWithoutCounters(t,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return ke.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,n){for(var a=0;a<=1;a++)for(var i=0;i<10;i++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][i]){t.insert(0,"0"+a),t.append("0"+i);return}throw T.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return K.UPC_E},e.convertUPCEtoUPCA=function(t){var n=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),a=new oe;a.append(t.charAt(0));var i=n[5];switch(i){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(i),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(i);break}return t.length>=8&&a.append(t.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(ke),Ic=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Io=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pn=function(r){Ic(e,r);function e(t){var n=r.call(this)||this,a=t==null?null:t.get(ye.POSSIBLE_FORMATS),i=[];return a!=null&&(a.indexOf(K.EAN_13)>-1&&i.push(new zn),a.indexOf(K.UPC_A)>-1&&i.push(new Eo),a.indexOf(K.EAN_8)>-1&&i.push(new Co),a.indexOf(K.UPC_E)>-1&&i.push(new So)),i.length===0&&(i.push(new zn),i.push(new Eo),i.push(new Co),i.push(new So)),n.readers=i,n}return e.prototype.decodeRow=function(t,n,a){var i,o;try{for(var s=Io(this.readers),l=s.next();!l.done;l=s.next()){var c=l.value;try{var d=c.decodeRow(t,n,a),h=d.getBarcodeFormat()===K.EAN_13&&d.getText().charAt(0)==="0",x=a==null?null:a.get(ye.POSSIBLE_FORMATS),g=x==null||x.includes(K.UPC_A);if(h&&g){var p=d.getRawBytes(),m=new rt(d.getText().substring(1),p,p?p.length:null,d.getResultPoints(),K.UPC_A);return m.putAllMetadata(d.getResultMetadata()),m}return d}catch{}}}catch(b){i={error:b}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}throw new T},e.prototype.reset=function(){var t,n;try{for(var a=Io(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;o.reset()}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},e}(Ge),Nc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Oc=function(r){Nc(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,n,a){var i=this.getValidRowData(n);if(!i)throw new T;var o=this.codaBarDecodeRow(i.row);if(!o)throw new T;return new rt(o,null,0,[new W(i.left,t),new W(i.right,t)],K.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var n=t.toArray(),a=n.indexOf(!0);if(a===-1)return null;var i=n.lastIndexOf(!0);if(i<=a)return null;n=n.slice(a,i+1);for(var o=[],s=n[0],l=1,c=1;c<n.length;c++)n[c]===s?l++:(s=n[c],o.push(l),l=1);return o.push(l),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:a,right:i}},e.prototype.codaBarDecodeRow=function(t){for(var n=[],a=Math.ceil(t.reduce(function(l,c){return(l+c)/2},0));t.length>0;){var i=t.splice(0,8).splice(0,7),o=i.map(function(l){return l<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(t){var n=/^[A-D].{1,}[A-D]$/;return n.test(t)},e}(Ge),Tc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yt=function(r){Tc(e,r);function e(){var t=r.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,n){for(var a=0;a<n.length;a++)if(Ge.patternMatchVariance(t,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new T},e.count=function(t){return fe.sum(new Int32Array(t))},e.increment=function(t,n){for(var a=0,i=n[0],o=1;o<t.length;o++)n[o]>i&&(i=n[o],a=o);t[a]++},e.decrement=function(t,n){for(var a=0,i=n[0],o=1;o<t.length;o++)n[o]<i&&(i=n[o],a=o);t[a]--},e.isFinderPattern=function(t){var n,a,i=t[0]+t[1],o=i+t[2]+t[3],s=i/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;try{for(var d=Rc(t),h=d.next();!h.done;h=d.next()){var x=h.value;x>c&&(c=x),x<l&&(l=x)}}catch(g){n={error:g}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}return c<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Ge),Jr=function(){function r(e,t){this.value=e,this.checksumPortion=t}return r.prototype.getValue=function(){return this.value},r.prototype.getChecksumPortion=function(){return this.checksumPortion},r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},r.prototype.hashCode=function(){return this.value^this.checksumPortion},r}(),ns=function(){function r(e,t,n,a,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new W(n,i)),this.resultPoints.push(new W(a,i))}return r.prototype.getValue=function(){return this.value},r.prototype.getStartEnd=function(){return this.startEnd},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.hashCode=function(){return this.value},r}(),Dc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nr=function(){function r(){}return r.getRSSvalue=function(e,t,n){var a,i,o=0;try{for(var s=Dc(e),l=s.next();!l.done;l=s.next()){var c=l.value;o+=c}}catch(y){a={error:y}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}for(var d=0,h=0,x=e.length,g=0;g<x-1;g++){var p=void 0;for(p=1,h|=1<<g;p<e[g];p++,h&=~(1<<g)){var m=r.combins(o-p-1,x-g-2);if(n&&h===0&&o-p-(x-g-1)>=x-g-1&&(m-=r.combins(o-p-(x-g),x-g-2)),x-g-1>1){for(var b=0,_=o-p-(x-g-2);_>t;_--)b+=r.combins(o-p-_-1,x-g-3);m-=b*(x-1-g)}else o-p>t&&m--;d+=m}o-=p}return d},r.combins=function(e,t){var n,a;e-t>t?(a=t,n=e-t):(a=e-t,n=t);for(var i=1,o=1,s=e;s>n;s--)i*=s,o<=a&&(i/=o,o++);for(;o<=a;)i/=o,o++;return i},r}(),Pc=function(){function r(){}return r.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var n=12*t,a=new Xe(n),i=0,o=e[0],s=o.getRightChar().getValue(),l=11;l>=0;--l)s&1<<l&&a.set(i),i++;for(var l=1;l<e.length;++l){for(var c=e[l],d=c.getLeftChar().getValue(),h=11;h>=0;--h)d&1<<h&&a.set(i),i++;if(c.getRightChar()!==null)for(var x=c.getRightChar().getValue(),h=11;h>=0;--h)x&1<<h&&a.set(i),i++}return a},r}(),Wt=function(){function r(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return r.prototype.getDecodedInformation=function(){return this.decodedInformation},r.prototype.isFinished=function(){return this.finished},r}(),ta=function(){function r(e){this.newPosition=e}return r.prototype.getNewPosition=function(){return this.newPosition},r}(),Mc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wt=function(r){Mc(e,r);function e(t,n){var a=r.call(this,t)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(ta),Bc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zt=function(r){Bc(e,r);function e(t,n,a){var i=r.call(this,t)||this;return a?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=n,i}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(ta),jc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),tr=function(r){jc(e,r);function e(t,n,a){var i=r.call(this,t)||this;if(n<0||n>10||a<0||a>10)throw new k;return i.firstDigit=n,i.secondDigit=a,i}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(ta),Vr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fc=function(){function r(){}return r.parseFieldsInGeneralPurpose=function(e){var t,n,a,i,o,s,l,c;if(!e)return null;if(e.length<2)throw new T;var d=e.substring(0,2);try{for(var h=Vr(r.TWO_DIGIT_DATA_LENGTH),x=h.next();!x.done;x=h.next()){var g=x.value;if(g[0]===d)return g[1]===r.VARIABLE_LENGTH?r.processVariableAI(2,g[2],e):r.processFixedAI(2,g[1],e)}}catch(P){t={error:P}}finally{try{x&&!x.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}if(e.length<3)throw new T;var p=e.substring(0,3);try{for(var m=Vr(r.THREE_DIGIT_DATA_LENGTH),b=m.next();!b.done;b=m.next()){var g=b.value;if(g[0]===p)return g[1]===r.VARIABLE_LENGTH?r.processVariableAI(3,g[2],e):r.processFixedAI(3,g[1],e)}}catch(P){a={error:P}}finally{try{b&&!b.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}try{for(var _=Vr(r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=_.next();!y.done;y=_.next()){var g=y.value;if(g[0]===p)return g[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,g[2],e):r.processFixedAI(4,g[1],e)}}catch(P){o={error:P}}finally{try{y&&!y.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}if(e.length<4)throw new T;var I=e.substring(0,4);try{for(var O=Vr(r.FOUR_DIGIT_DATA_LENGTH),D=O.next();!D.done;D=O.next()){var g=D.value;if(g[0]===I)return g[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,g[2],e):r.processFixedAI(4,g[1],e)}}catch(P){l={error:P}}finally{try{D&&!D.done&&(c=O.return)&&c.call(O)}finally{if(l)throw l.error}}throw new T},r.processFixedAI=function(e,t,n){if(n.length<e)throw new T;var a=n.substring(0,e);if(n.length<e+t)throw new T;var i=n.substring(e,e+t),o=n.substring(e+t),s="("+a+")"+i,l=r.parseFieldsInGeneralPurpose(o);return l==null?s:s+l},r.processVariableAI=function(e,t,n){var a=n.substring(0,e),i;n.length<e+t?i=n.length:i=e+t;var o=n.substring(e,i),s=n.substring(i),l="("+a+")"+o,c=r.parseFieldsInGeneralPurpose(s);return c==null?l:l+c},r.VARIABLE_LENGTH=[],r.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",r.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",r.VARIABLE_LENGTH,20],["22",r.VARIABLE_LENGTH,29],["30",r.VARIABLE_LENGTH,8],["37",r.VARIABLE_LENGTH,8],["90",r.VARIABLE_LENGTH,30],["91",r.VARIABLE_LENGTH,30],["92",r.VARIABLE_LENGTH,30],["93",r.VARIABLE_LENGTH,30],["94",r.VARIABLE_LENGTH,30],["95",r.VARIABLE_LENGTH,30],["96",r.VARIABLE_LENGTH,30],["97",r.VARIABLE_LENGTH,3],["98",r.VARIABLE_LENGTH,30],["99",r.VARIABLE_LENGTH,30]],r.THREE_DIGIT_DATA_LENGTH=[["240",r.VARIABLE_LENGTH,30],["241",r.VARIABLE_LENGTH,30],["242",r.VARIABLE_LENGTH,6],["250",r.VARIABLE_LENGTH,30],["251",r.VARIABLE_LENGTH,30],["253",r.VARIABLE_LENGTH,17],["254",r.VARIABLE_LENGTH,20],["400",r.VARIABLE_LENGTH,30],["401",r.VARIABLE_LENGTH,30],["402",17],["403",r.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",r.VARIABLE_LENGTH,20],["421",r.VARIABLE_LENGTH,15],["422",3],["423",r.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",r.VARIABLE_LENGTH,15],["391",r.VARIABLE_LENGTH,18],["392",r.VARIABLE_LENGTH,15],["393",r.VARIABLE_LENGTH,18],["703",r.VARIABLE_LENGTH,30]],r.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",r.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",r.VARIABLE_LENGTH,20],["8003",r.VARIABLE_LENGTH,30],["8004",r.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",r.VARIABLE_LENGTH,30],["8008",r.VARIABLE_LENGTH,12],["8018",18],["8020",r.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",r.VARIABLE_LENGTH,70],["8200",r.VARIABLE_LENGTH,70]],r}(),Zr=function(){function r(e){this.buffer=new oe,this.information=e}return r.prototype.decodeAllCodes=function(e,t){var n=t,a=null;do{var i=this.decodeGeneralPurposeField(n,a),o=Fc.parseFieldsInGeneralPurpose(i.getNewString());if(o!=null&&e.append(o),i.isRemaining()?a=""+i.getRemainingValue():a=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()},r.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},r.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new tr(this.information.getSize(),tr.FNC1,tr.FNC1):new tr(this.information.getSize(),t-1,tr.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,i=(n-8)%11;return new tr(e+7,a,i)},r.prototype.extractNumericValueFromBitArray=function(e,t){return r.extractNumericValueFromBitArray(this.information,e,t)},r.extractNumericValueFromBitArray=function(e,t,n){for(var a=0,i=0;i<n;++i)e.get(t+i)&&(a|=1<<n-i-1);return a},r.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new zt(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new zt(this.current.getPosition(),this.buffer.toString())},r.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return t.getDecodedInformation()},r.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new zt(this.current.getPosition(),this.buffer.toString()):t=new zt(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Wt(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new zt(this.current.getPosition(),this.buffer.toString());return new Wt(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Wt(!1)},r.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new zt(this.current.getPosition(),this.buffer.toString());return new Wt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Wt(!1)},r.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new zt(this.current.getPosition(),this.buffer.toString());return new Wt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Wt(!1)},r.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},r.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new wt(e+5,wt.FNC1);if(t>=5&&t<15)return new wt(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new wt(e+7,""+(n+1));if(n>=90&&n<116)return new wt(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),i;switch(a){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new k}return new wt(e+8,i)},r.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},r.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new wt(e+5,wt.FNC1);if(t>=5&&t<15)return new wt(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new wt(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Or("Decoding invalid alphanumeric value: "+n)}return new wt(e+6,a)},r.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},r.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},r.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},r}(),as=function(){function r(e){this.information=e,this.generalDecoder=new Zr(e)}return r.prototype.getInformation=function(){return this.information},r.prototype.getGeneralDecoder=function(){return this.generalDecoder},r}(),kc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bt=function(r){kc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,n){t.append("(01)");var a=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(t,n,a){for(var i=0;i<4;++i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,a)},e.appendCheckDigit=function(t,n){for(var a=0,i=0;i<13;i++){var o=t.charAt(i+n).charCodeAt(0)-48;a+=i&1?o:3*o}a=10-a%10,a===10&&(a=0),t.append(a)},e.GTIN_SIZE=40,e}(as),Lc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Uc=function(r){Lc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new oe;t.append("(01)");var n=t.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(a),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(bt),Gc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vc=function(r){Gc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new oe;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(as),Hc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qr=function(r){Hc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,n,a){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(t,i);for(var o=this.checkWeight(i),s=1e5,l=0;l<5;++l)o/s===0&&t.append("0"),s/=10;t.append(o)},e}(bt),$c=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),is=function(r){$c(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Qr.GTIN_SIZE+e.WEIGHT_SIZE)throw new T;var t=new oe;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Qr.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Qr),Xc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wc=function(r){Xc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(is),zc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yc=function(r){zc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){n<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(is),Zc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qc=function(r){Zc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+bt.GTIN_SIZE)throw new T;var t=new oe;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+bt.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+bt.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(bt),Kc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jc=function(r){Kc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+bt.GTIN_SIZE)throw new T;var t=new oe;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+bt.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+bt.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&t.append("0"),a/10===0&&t.append("0"),t.append(a);var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+bt.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(bt),qc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ft=function(r){qc(e,r);function e(t,n,a){var i=r.call(this,t)||this;return i.dateCode=a,i.firstAIdigits=n,i}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new T;var t=new oe;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){t.append("("),t.append(this.dateCode),t.append(")");var i=a%32;a/=32;var o=a%12+1;a/=12;var s=a;s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o),i/10===0&&t.append("0"),t.append(i)}},e.prototype.addWeightCode=function(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Qr);function e0(r){try{if(r.get(1))return new Uc(r);if(!r.get(2))return new Vc(r);var e=Zr.extractNumericValueFromBitArray(r,1,4);switch(e){case 4:return new Wc(r);case 5:return new Yc(r)}var t=Zr.extractNumericValueFromBitArray(r,1,5);switch(t){case 12:return new Qc(r);case 13:return new Jc(r)}var n=Zr.extractNumericValueFromBitArray(r,1,7);switch(n){case 56:return new Ft(r,"310","11");case 57:return new Ft(r,"320","11");case 58:return new Ft(r,"310","13");case 59:return new Ft(r,"320","13");case 60:return new Ft(r,"310","15");case 61:return new Ft(r,"320","15");case 62:return new Ft(r,"310","17");case 63:return new Ft(r,"320","17")}}catch(a){throw console.log(a),new Or("unknown decoder: "+r)}}var No=function(){function r(e,t,n,a){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=a}return r.prototype.mayBeLast=function(){return this.maybeLast},r.prototype.getLeftChar=function(){return this.leftchar},r.prototype.getRightChar=function(){return this.rightchar},r.prototype.getFinderPattern=function(){return this.finderpattern},r.prototype.mustBeLast=function(){return this.rightchar==null},r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},r.equals=function(e,t){return e instanceof r?r.equalsOrNull(e.leftchar,t.leftchar)&&r.equalsOrNull(e.rightchar,t.rightchar)&&r.equalsOrNull(e.finderpattern,t.finderpattern):!1},r.equalsOrNull=function(e,t){return e===null?t===null:r.equals(e,t)},r.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},r}(),t0=function(){function r(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return r.prototype.getPairs=function(){return this.pairs},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.isReversed=function(){return this.wasReversed},r.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},r.prototype.toString=function(){return"{ "+this.pairs+" }"},r.prototype.equals=function(e,t){return e instanceof r?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},r.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var n;return e.forEach(function(a,i){t.forEach(function(o){a.getLeftChar().getValue()===o.getLeftChar().getValue()&&a.getRightChar().getValue()===o.getRightChar().getValue()&&a.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},r}(),r0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),kt=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n0=function(r){r0(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,t))}catch(s){if(s instanceof T){if(!this.pairs.length)throw new T;a=!0}}if(this.checkChecksum())return this.pairs;var i;if(this.rows.length?i=!0:i=!1,this.storeRow(t,!1),i){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new T},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return t&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(t,n){for(var a,i,o=n;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var l=(a=void 0,kt(t)),c=l.next();!c.done;c=l.next()){var d=c.value;this.pairs.push(d.getPairs())}}catch(x){a={error:x}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var h=new Array(t);h.push(s);try{return this.checkRows(h,o+1)}catch(x){console.log(x)}}}throw new T},e.isValidSequence=function(t){var n,a;try{for(var i=kt(e.FINDER_PATTERN_SEQUENCES),o=i.next();!o.done;o=i.next()){var s=o.value;if(!(t.length>s.length)){for(var l=!0,c=0;c<t.length;c++)if(t[c].getFinderPattern().getValue()!==s[c]){l=!1;break}if(l)return!0}}}catch(d){n={error:d}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(t,n){for(var a=0,i=!1,o=!1;a<this.rows.length;){var s=this.rows[a];if(s.getRowNumber()>t){o=s.isEquivalent(this.pairs);break}i=s.isEquivalent(this.pairs),a++}o||i||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new t0(this.pairs,t,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,n){var a,i,o,s,l,c;try{for(var d=kt(n),h=d.next();!h.done;h=d.next()){var x=h.value;if(x.getPairs().length!==t.length){var g=!0;try{for(var p=(o=void 0,kt(x.getPairs())),m=p.next();!m.done;m=p.next()){var b=m.value,_=!1;try{for(var y=(l=void 0,kt(t)),I=y.next();!I.done;I=y.next()){var O=I.value;if(No.equals(b,O)){_=!0;break}}}catch(D){l={error:D}}finally{try{I&&!I.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}_||(g=!1)}}catch(D){o={error:D}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}}}}catch(D){a={error:D}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}},e.isPartialRow=function(t,n){var a,i,o,s,l,c;try{for(var d=kt(n),h=d.next();!h.done;h=d.next()){var x=h.value,g=!0;try{for(var p=(o=void 0,kt(t)),m=p.next();!m.done;m=p.next()){var b=m.value,_=!1;try{for(var y=(l=void 0,kt(x.getPairs())),I=y.next();!I.done;I=y.next()){var O=I.value;if(b.equals(O)){_=!0;break}}}catch(D){l={error:D}}finally{try{I&&!I.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}if(!_){g=!1;break}}}catch(D){o={error:D}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}if(g)return!0}}catch(D){a={error:D}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var n=Pc.buildBitArray(t),a=e0(n),i=a.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),s=t[t.length-1].getFinderPattern().getResultPoints(),l=[o[0],o[1],s[0],s[1]];return new rt(i,null,null,l,K.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),n=t.getLeftChar(),a=t.getRightChar();if(a===null)return!1;for(var i=a.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);i+=l.getLeftChar().getChecksumPortion(),o++;var c=l.getRightChar();c!=null&&(i+=c.getChecksumPortion(),o++)}i%=211;var d=211*(o-4)+i;return d===n.getValue()},e.getNextSecondBar=function(t,n){var a;return t.get(n)?(a=t.getNextUnset(n),a=t.getNextSet(a)):(a=t.getNextSet(n),a=t.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(t,n,a){var i=n.length%2===0;this.startFromEven&&(i=!i);var o,s=!0,l=-1;do this.findNextPair(t,n,l),o=this.parseFoundFinderPattern(t,a,i),o===null?l=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var c=this.decodeDataCharacter(t,o,i,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new T;var d;try{d=this.decodeDataCharacter(t,o,i,!1)}catch(h){d=null,console.log(h)}return new No(c,d,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,n,a){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var o=t.getSize(),s;if(a>=0)s=a;else if(this.isEmptyPair(n))s=0;else{var l=n[n.length-1];s=l.getFinderPattern().getStartEnd()[1]}var c=n.length%2!==0;this.startFromEven&&(c=!c);for(var d=!1;s<o&&(d=!t.get(s),!!d);)s++;for(var h=0,x=s,g=s;g<o;g++)if(t.get(g)!==d)i[h]++;else{if(h===3){if(c&&e.reverseCounters(i),e.isFinderPattern(i)){this.startEnd[0]=x,this.startEnd[1]=g;return}c&&e.reverseCounters(i),x+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,d=!d}throw new T},e.reverseCounters=function(t){for(var n=t.length,a=0;a<n/2;++a){var i=t[a];t[a]=t[n-a-1],t[n-a-1]=i}},e.prototype.parseFoundFinderPattern=function(t,n,a){var i,o,s;if(a){for(var l=this.startEnd[0]-1;l>=0&&!t.get(l);)l--;l++,i=this.startEnd[0]-l,o=l,s=this.startEnd[1]}else o=this.startEnd[0],s=t.getNextUnset(this.startEnd[1]+1),i=s-this.startEnd[1];var c=this.getDecodeFinderCounters();_e.arraycopy(c,0,c,1,c.length-1),c[0]=i;var d;try{d=this.parseFinderValue(c,e.FINDER_PATTERNS)}catch{return null}return new ns(d,[o,s],o,s,n)},e.prototype.decodeDataCharacter=function(t,n,a,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)e.recordPatternInReverse(t,n.getStartEnd()[0],o);else{e.recordPattern(t,n.getStartEnd()[1],o);for(var l=0,c=o.length-1;l<c;l++,c--){var d=o[l];o[l]=o[c],o[c]=d}}var h=17,x=fe.sum(new Int32Array(o))/h,g=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(x-g)/g>.3)throw new T;for(var p=this.getOddCounts(),m=this.getEvenCounts(),b=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),l=0;l<o.length;l++){var y=1*o[l]/x,I=y+.5;if(I<1){if(y<.3)throw new T;I=1}else if(I>8){if(y>8.7)throw new T;I=8}var O=l/2;l&1?(m[O]=I,_[O]=y-I):(p[O]=I,b[O]=y-I)}this.adjustOddEvenCounts(h);for(var D=4*n.getValue()+(a?0:2)+(i?0:1)-1,P=0,F=0,l=p.length-1;l>=0;l--){if(e.isNotA1left(n,a,i)){var V=e.WEIGHTS[D][2*l];F+=p[l]*V}P+=p[l]}for(var q=0,l=m.length-1;l>=0;l--)if(e.isNotA1left(n,a,i)){var V=e.WEIGHTS[D][2*l+1];q+=m[l]*V}var Y=F+q;if(P&1||P>13||P<4)throw new T;var he=(13-P)/2,z=e.SYMBOL_WIDEST[he],M=9-z,se=nr.getRSSvalue(p,z,!0),We=nr.getRSSvalue(m,M,!1),Nt=e.EVEN_TOTAL_SUBSET[he],gt=e.GSUM[he],Re=se*Nt+We+gt;return new Jr(Re,Y)},e.isNotA1left=function(t,n,a){return!(t.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(t){var n=fe.sum(new Int32Array(this.getOddCounts())),a=fe.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1;n>13?o=!0:n<4&&(i=!0);var s=!1,l=!1;a>13?l=!0:a<4&&(s=!0);var c=n+a-t,d=(n&1)===1,h=(a&1)===0;if(c===1)if(d){if(h)throw new T;o=!0}else{if(!h)throw new T;l=!0}else if(c===-1)if(d){if(h)throw new T;i=!0}else{if(!h)throw new T;s=!0}else if(c===0){if(d){if(!h)throw new T;n<a?(i=!0,l=!0):(o=!0,s=!0)}else if(h)throw new T}else throw new T;if(i){if(o)throw new T;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new T;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Yt),a0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),i0=function(r){a0(e,r);function e(t,n,a){var i=r.call(this,t,n)||this;return i.count=0,i.finderPattern=a,i}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Jr),o0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oo=function(r){o0(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,n,a){var i,o,s,l,c=this.decodePair(n,!1,t,a);e.addOrTally(this.possibleLeftPairs,c),n.reverse();var d=this.decodePair(n,!0,t,a);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var h=Mn(this.possibleLeftPairs),x=h.next();!x.done;x=h.next()){var g=x.value;if(g.getCount()>1)try{for(var p=(s=void 0,Mn(this.possibleRightPairs)),m=p.next();!m.done;m=p.next()){var b=m.value;if(b.getCount()>1&&e.checkChecksum(g,b))return e.constructResult(g,b)}}catch(_){s={error:_}}finally{try{m&&!m.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}}}catch(_){i={error:_}}finally{try{x&&!x.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}throw new T},e.addOrTally=function(t,n){var a,i;if(n!=null){var o=!1;try{for(var s=Mn(t),l=s.next();!l.done;l=s.next()){var c=l.value;if(c.getValue()===n.getValue()){c.incrementCount(),o=!0;break}}}catch(d){a={error:d}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}o||t.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,n){for(var a=4537077*t.getValue()+n.getValue(),i=new String(a).toString(),o=new oe,s=13-i.length;s>0;s--)o.append("0");o.append(i);for(var l=0,s=0;s<13;s++){var c=o.charAt(s).charCodeAt(0)-48;l+=s&1?c:3*c}l=10-l%10,l===10&&(l=0),o.append(l.toString());var d=t.getFinderPattern().getResultPoints(),h=n.getFinderPattern().getResultPoints();return new rt(o.toString(),null,0,[d[0],d[1],h[0],h[1]],K.RSS_14,new Date().getTime())},e.checkChecksum=function(t,n){var a=(t.getChecksumPortion()+16*n.getChecksumPortion())%79,i=9*t.getFinderPattern().getValue()+n.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,a===i},e.prototype.decodePair=function(t,n,a,i){try{var o=this.findFinderPattern(t,n),s=this.parseFoundFinderPattern(t,a,n,o),l=i==null?null:i.get(ye.NEED_RESULT_POINT_CALLBACK);if(l!=null){var c=(o[0]+o[1])/2;n&&(c=t.getSize()-1-c),l.foundPossibleResultPoint(new W(c,a))}var d=this.decodeDataCharacter(t,s,!0),h=this.decodeDataCharacter(t,s,!1);return new i0(1597*d.getValue()+h.getValue(),d.getChecksumPortion()+4*h.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(t,n,a){for(var i=this.getDataCharacterCounters(),o=0;o<i.length;o++)i[o]=0;if(a)Ge.recordPatternInReverse(t,n.getStartEnd()[0],i);else{Ge.recordPattern(t,n.getStartEnd()[1]+1,i);for(var s=0,l=i.length-1;s<l;s++,l--){var c=i[s];i[s]=i[l],i[l]=c}}for(var d=a?16:15,h=fe.sum(new Int32Array(i))/d,x=this.getOddCounts(),g=this.getEvenCounts(),p=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors(),s=0;s<i.length;s++){var b=i[s]/h,_=Math.floor(b+.5);_<1?_=1:_>8&&(_=8);var y=Math.floor(s/2);s&1?(g[y]=_,m[y]=b-_):(x[y]=_,p[y]=b-_)}this.adjustOddEvenCounts(a,d);for(var I=0,O=0,s=x.length-1;s>=0;s--)O*=9,O+=x[s],I+=x[s];for(var D=0,P=0,s=g.length-1;s>=0;s--)D*=9,D+=g[s],P+=g[s];var F=O+3*D;if(a){if(I&1||I>12||I<4)throw new T;var V=(12-I)/2,q=e.OUTSIDE_ODD_WIDEST[V],Y=9-q,he=nr.getRSSvalue(x,q,!1),z=nr.getRSSvalue(g,Y,!0),M=e.OUTSIDE_EVEN_TOTAL_SUBSET[V],se=e.OUTSIDE_GSUM[V];return new Jr(he*M+z+se,F)}else{if(P&1||P>10||P<4)throw new T;var V=(10-P)/2,q=e.INSIDE_ODD_WIDEST[V],Y=9-q,he=nr.getRSSvalue(x,q,!0),z=nr.getRSSvalue(g,Y,!1),We=e.INSIDE_ODD_TOTAL_SUBSET[V],se=e.INSIDE_GSUM[V];return new Jr(z*We+he+se,F)}},e.prototype.findFinderPattern=function(t,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=t.getSize(),o=!1,s=0;s<i&&(o=!t.get(s),n!==o);)s++;for(var l=0,c=s,d=s;d<i;d++)if(t.get(d)!==o)a[l]++;else{if(l===3){if(Yt.isFinderPattern(a))return[c,d];c+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,l--}else l++;a[l]=1,o=!o}throw new T},e.prototype.parseFoundFinderPattern=function(t,n,a,i){for(var o=t.get(i[0]),s=i[0]-1;s>=0&&o!==t.get(s);)s--;s++;var l=i[0]-s,c=this.getDecodeFinderCounters(),d=new Int32Array(c.length);_e.arraycopy(c,0,d,1,c.length-1),d[0]=l;var h=this.parseFinderValue(d,e.FINDER_PATTERNS),x=s,g=i[1];return a&&(x=t.getSize()-1-x,g=t.getSize()-1-g),new ns(h,[s,i[1]],x,g,n)},e.prototype.adjustOddEvenCounts=function(t,n){var a=fe.sum(new Int32Array(this.getOddCounts())),i=fe.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,l=!1,c=!1;t?(a>12?s=!0:a<4&&(o=!0),i>12?c=!0:i<4&&(l=!0)):(a>11?s=!0:a<5&&(o=!0),i>10?c=!0:i<4&&(l=!0));var d=a+i-n,h=(a&1)===(t?1:0),x=(i&1)===1;if(d===1)if(h){if(x)throw new T;s=!0}else{if(!x)throw new T;c=!0}else if(d===-1)if(h){if(x)throw new T;o=!0}else{if(!x)throw new T;l=!0}else if(d===0){if(h){if(!x)throw new T;a<i?(o=!0,c=!0):(s=!0,l=!0)}else if(x)throw new T}else throw new T;if(o){if(s)throw new T;Yt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Yt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new T;Yt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&Yt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Yt),s0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ar=function(r){s0(e,r);function e(t){var n=r.call(this)||this;n.readers=[];var a=t?t.get(ye.POSSIBLE_FORMATS):null,i=t&&t.get(ye.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(ye.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(K.EAN_13)||a.includes(K.UPC_A)||a.includes(K.EAN_8)||a.includes(K.UPC_E))&&n.readers.push(new Pn(t)),a.includes(K.CODE_39)&&n.readers.push(new yo(i,o)),a.includes(K.CODE_93)&&n.readers.push(new wo),a.includes(K.CODE_128)&&n.readers.push(new mo),a.includes(K.ITF)&&n.readers.push(new bo),a.includes(K.CODABAR)&&n.readers.push(new Oc),a.includes(K.RSS_14)&&n.readers.push(new Oo),a.includes(K.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new n0))),n.readers.length===0&&(n.readers.push(new Pn(t)),n.readers.push(new yo),n.readers.push(new wo),n.readers.push(new Pn(t)),n.readers.push(new mo),n.readers.push(new bo),n.readers.push(new Oo)),n}return e.prototype.decodeRow=function(t,n,a){for(var i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(t,n,a)}catch{}throw new T},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Ge),l0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){l0(e,r);function e(t,n){return t===void 0&&(t=500),r.call(this,new ar(n),t,n)||this}return e})(lr);var To=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pe=function(){function r(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return r.prototype.getECCodewords=function(){return this.ecCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r}(),xe=function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r}(),c0=function(){function r(e,t,n,a,i,o){var s,l;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=i,this.ecBlocks=o;var c=0,d=o.getECCodewords(),h=o.getECBlocks();try{for(var x=To(h),g=x.next();!g.done;g=x.next()){var p=g.value;c+=p.getCount()*(p.getDataCodewords()+d)}}catch(m){s={error:m}}finally{try{g&&!g.done&&(l=x.return)&&l.call(x)}finally{if(s)throw s.error}}this.totalCodewords=c}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r.getVersionForDimensions=function(e,t){var n,a;if(e&1||t&1)throw new k;try{for(var i=To(r.VERSIONS),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===t)return s}}catch(l){n={error:l}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}throw new k},r.prototype.toString=function(){return""+this.versionNumber},r.buildVersions=function(){return[new r(1,10,10,8,8,new pe(5,new xe(1,3))),new r(2,12,12,10,10,new pe(7,new xe(1,5))),new r(3,14,14,12,12,new pe(10,new xe(1,8))),new r(4,16,16,14,14,new pe(12,new xe(1,12))),new r(5,18,18,16,16,new pe(14,new xe(1,18))),new r(6,20,20,18,18,new pe(18,new xe(1,22))),new r(7,22,22,20,20,new pe(20,new xe(1,30))),new r(8,24,24,22,22,new pe(24,new xe(1,36))),new r(9,26,26,24,24,new pe(28,new xe(1,44))),new r(10,32,32,14,14,new pe(36,new xe(1,62))),new r(11,36,36,16,16,new pe(42,new xe(1,86))),new r(12,40,40,18,18,new pe(48,new xe(1,114))),new r(13,44,44,20,20,new pe(56,new xe(1,144))),new r(14,48,48,22,22,new pe(68,new xe(1,174))),new r(15,52,52,24,24,new pe(42,new xe(2,102))),new r(16,64,64,14,14,new pe(56,new xe(2,140))),new r(17,72,72,16,16,new pe(36,new xe(4,92))),new r(18,80,80,18,18,new pe(48,new xe(4,114))),new r(19,88,88,20,20,new pe(56,new xe(4,144))),new r(20,96,96,22,22,new pe(68,new xe(4,174))),new r(21,104,104,24,24,new pe(56,new xe(6,136))),new r(22,120,120,18,18,new pe(68,new xe(6,175))),new r(23,132,132,20,20,new pe(62,new xe(8,163))),new r(24,144,144,22,22,new pe(62,new xe(8,156),new xe(2,155))),new r(25,8,18,6,16,new pe(7,new xe(1,5))),new r(26,8,32,6,14,new pe(11,new xe(1,10))),new r(27,12,26,10,24,new pe(14,new xe(1,16))),new r(28,12,36,10,16,new pe(18,new xe(1,22))),new r(29,16,36,14,16,new pe(24,new xe(1,32))),new r(30,16,48,14,22,new pe(28,new xe(1,49)))]},r.VERSIONS=r.buildVersions(),r}(),u0=function(){function r(e){var t=e.getHeight();if(t<8||t>144||t&1)throw new k;this.version=r.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new St(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return r.prototype.getVersion=function(){return this.version},r.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return c0.getVersionForDimensions(t,n)},r.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,a=0,i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,l=!1,c=!1,d=!1;do if(n===i&&a===0&&!s)e[t++]=this.readCorner1(i,o)&255,n-=2,a+=2,s=!0;else if(n===i-2&&a===0&&o&3&&!l)e[t++]=this.readCorner2(i,o)&255,n-=2,a+=2,l=!0;else if(n===i+4&&a===2&&!(o&7)&&!c)e[t++]=this.readCorner3(i,o)&255,n-=2,a+=2,c=!0;else if(n===i-2&&a===0&&(o&7)===4&&!d)e[t++]=this.readCorner4(i,o)&255,n-=2,a+=2,d=!0;else{do n<i&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[t++]=this.readUtah(n,a,i,o)&255),n-=2,a+=2;while(n>=0&&a<o);n+=1,a+=3;do n>=0&&a<o&&!this.readMappingMatrix.get(a,n)&&(e[t++]=this.readUtah(n,a,i,o)&255),n+=2,a-=2;while(n<i&&a>=0);n+=3,a+=1}while(n<i||a<o);if(t!==this.version.getTotalCodewords())throw new k;return e},r.prototype.readModule=function(e,t,n,a){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},r.prototype.readUtah=function(e,t,n,a){var i=0;return this.readModule(e-2,t-2,n,a)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,a)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,t,n,a)&&(i|=1),i<<=1,this.readModule(e,t-2,n,a)&&(i|=1),i<<=1,this.readModule(e,t-1,n,a)&&(i|=1),i<<=1,this.readModule(e,t,n,a)&&(i|=1),i},r.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new J("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/a|0,s=n/i|0,l=o*a,c=s*i,d=new St(c,l),h=0;h<o;++h)for(var x=h*a,g=0;g<s;++g)for(var p=g*i,m=0;m<a;++m)for(var b=h*(a+2)+1+m,_=x+m,y=0;y<i;++y){var I=g*(i+2)+1+y;if(e.get(I,b)){var O=p+y;d.set(O,_)}}return d},r}(),Ro=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d0=function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t){var n,a,i,o,s=t.getECBlocks(),l=0,c=s.getECBlocks();try{for(var d=Ro(c),h=d.next();!h.done;h=d.next()){var x=h.value;l+=x.getCount()}}catch(se){n={error:se}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var g=new Array(l),p=0;try{for(var m=Ro(c),b=m.next();!b.done;b=m.next())for(var x=b.value,_=0;_<x.getCount();_++){var y=x.getDataCodewords(),I=s.getECCodewords()+y;g[p++]=new r(y,new Uint8Array(I))}}catch(se){i={error:se}}finally{try{b&&!b.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}for(var O=g[0].codewords.length,D=O-s.getECCodewords(),P=D-1,F=0,_=0;_<P;_++)for(var V=0;V<p;V++)g[V].codewords[_]=e[F++];for(var q=t.getVersionNumber()===24,Y=q?8:p,V=0;V<Y;V++)g[V].codewords[D-1]=e[F++];for(var he=g[0].codewords.length,_=D;_<he;_++)for(var V=0;V<p;V++){var z=q?(V+8)%p:V,M=q&&z>7?_-1:_;g[z].codewords[M]=e[F++]}if(F!==e.length)throw new J;return g},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r}(),os=function(){function r(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return r.prototype.getBitOffset=function(){return this.bitOffset},r.prototype.getByteOffset=function(){return this.byteOffset},r.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new J(""+e);var t=0,n=this.bitOffset,a=this.byteOffset,i=this.bytes;if(n>0){var o=8-n,s=e<o?e:o,l=o-s,c=255>>8-s<<l;t=(i[a]&c)>>l,e-=s,n+=s,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)t=t<<8|i[a]&255,a++,e-=8;if(e>0){var l=8-e,c=255>>l<<l;t=t<<e|(i[a]&c)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=a,t},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r}(),je;(function(r){r[r.PAD_ENCODE=0]="PAD_ENCODE",r[r.ASCII_ENCODE=1]="ASCII_ENCODE",r[r.C40_ENCODE=2]="C40_ENCODE",r[r.TEXT_ENCODE=3]="TEXT_ENCODE",r[r.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",r[r.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",r[r.BASE256_ENCODE=6]="BASE256_ENCODE"})(je||(je={}));var f0=function(){function r(){}return r.decode=function(e){var t=new os(e),n=new oe,a=new oe,i=new Array,o=je.ASCII_ENCODE;do if(o===je.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,a);else{switch(o){case je.C40_ENCODE:this.decodeC40Segment(t,n);break;case je.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case je.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case je.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case je.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new k}o=je.ASCII_ENCODE}while(o!==je.PAD_ENCODE&&t.available()>0);return a.length()>0&&n.append(a.toString()),new an(e,n.toString(),i.length===0?null:i,null)},r.decodeAsciiSegment=function(e,t,n){var a=!1;do{var i=e.readBits(8);if(i===0)throw new k;if(i<=128)return a&&(i+=128),t.append(String.fromCharCode(i-1)),je.ASCII_ENCODE;if(i===129)return je.PAD_ENCODE;if(i<=229){var o=i-130;o<10&&t.append("0"),t.append(""+o)}else switch(i){case 230:return je.C40_ENCODE;case 231:return je.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return je.ANSIX12_ENCODE;case 239:return je.TEXT_ENCODE;case 240:return je.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new k;break}}while(e.available()>0);return je.ASCII_ENCODE},r.decodeC40Segment=function(e,t){var n=!1,a=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var s=0;s<3;s++){var l=a[s];switch(i){case 0:if(l<3)i=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var c=this.C40_BASIC_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else throw new k;break;case 1:n?(t.append(String.fromCharCode(l+128)),n=!1):t.append(String.fromCharCode(l)),i=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var c=this.C40_SHIFT2_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(l){case 27:t.append("");break;case 30:n=!0;break;default:throw new k}i=0;break;case 3:n?(t.append(String.fromCharCode(l+224)),n=!1):t.append(String.fromCharCode(l+96)),i=0;break;default:throw new k}}}while(e.available()>0)},r.decodeTextSegment=function(e,t){var n=!1,a=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var s=0;s<3;s++){var l=a[s];switch(i){case 0:if(l<3)i=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var c=this.TEXT_BASIC_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else throw new k;break;case 1:n?(t.append(String.fromCharCode(l+128)),n=!1):t.append(String.fromCharCode(l)),i=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var c=this.TEXT_SHIFT2_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(l){case 27:t.append("");break;case 30:n=!0;break;default:throw new k}i=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var c=this.TEXT_SHIFT3_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c),i=0}else throw new k;break;default:throw new k}}}while(e.available()>0)},r.decodeAnsiX12Segment=function(e,t){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var i=0;i<3;i++){var o=n[i];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new k;break}}}while(e.available()>0)},r.parseTwoBytes=function(e,t,n){var a=(e<<8)+t-1,i=Math.floor(a/1600);n[0]=i,a-=i*1600,i=Math.floor(a/40),n[1]=i,n[2]=a-i*40},r.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var i=8-e.getBitOffset();i!==8&&e.readBits(i);return}a&32||(a|=64),t.append(String.fromCharCode(a))}}while(e.available()>0)},r.decodeBase256Segment=function(e,t,n){var a=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),a++),o;if(i===0?o=e.available()/8|0:i<250?o=i:o=250*(i-249)+this.unrandomize255State(e.readBits(8),a++),o<0)throw new k;for(var s=new Uint8Array(o),l=0;l<o;l++){if(e.available()<8)throw new k;s[l]=this.unrandomize255State(e.readBits(8),a++)}n.push(s);try{t.append(xt.decode(s,ue.ISO88591))}catch(c){throw new Or("Platform does not support required encoding: "+c.message)}},r.unrandomize255State=function(e,t){var n=149*t%255+1,a=e-n;return a>=0?a:a+256},r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r.TEXT_SHIFT2_SET_CHARS=r.C40_SHIFT2_SET_CHARS,r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],r}(),h0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x0=function(){function r(){this.rsDecoder=new on(lt.DATA_MATRIX_FIELD_256)}return r.prototype.decode=function(e){var t,n,a=new u0(e),i=a.getVersion(),o=a.readCodewords(),s=d0.getDataBlocks(o,i),l=0;try{for(var c=h0(s),d=c.next();!d.done;d=c.next()){var h=d.value;l+=h.getNumDataCodewords()}}catch(I){t={error:I}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}for(var x=new Uint8Array(l),g=s.length,p=0;p<g;p++){var m=s[p],b=m.getCodewords(),_=m.getNumDataCodewords();this.correctErrors(b,_);for(var y=0;y<_;y++)x[y*g+p]=b[y]}return f0.decode(x)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Me}for(var a=0;a<t;a++)e[a]=n[a]},r}(),g0=function(){function r(e){this.image=e,this.rectangleDetector=new Wn(this.image)}return r.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new T;t=this.shiftToModuleCenter(t);var n=t[0],a=t[1],i=t[2],o=t[3],s=this.transitionsBetween(n,o)+1,l=this.transitionsBetween(i,o)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var c=r.sampleGrid(this.image,n,a,i,o,s,l);return new qn(c,[n,a,i,o])},r.shiftPoint=function(e,t,n){var a=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new W(e.getX()+a,e.getY()+i)},r.moveAway=function(e,t,n){var a=e.getX(),i=e.getY();return a<t?a-=1:a+=1,i<n?i-=1:i+=1,new W(a,i)},r.prototype.detectSolid1=function(e){var t=e[0],n=e[1],a=e[3],i=e[2],o=this.transitionsBetween(t,n),s=this.transitionsBetween(n,a),l=this.transitionsBetween(a,i),c=this.transitionsBetween(i,t),d=o,h=[i,t,n,a];return d>s&&(d=s,h[0]=t,h[1]=n,h[2]=a,h[3]=i),d>l&&(d=l,h[0]=n,h[1]=a,h[2]=i,h[3]=t),d>c&&(h[0]=a,h[1]=i,h[2]=t,h[3]=n),h},r.prototype.detectSolid2=function(e){var t=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(t,i),s=r.shiftPoint(n,a,(o+1)*4),l=r.shiftPoint(a,n,(o+1)*4),c=this.transitionsBetween(s,t),d=this.transitionsBetween(l,i);return c<d?(e[0]=t,e[1]=n,e[2]=a,e[3]=i):(e[0]=n,e[1]=a,e[2]=i,e[3]=t),e},r.prototype.correctTopRight=function(e){var t=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(t,i),s=this.transitionsBetween(n,i),l=r.shiftPoint(t,n,(s+1)*4),c=r.shiftPoint(a,n,(o+1)*4);o=this.transitionsBetween(l,i),s=this.transitionsBetween(c,i);var d=new W(i.getX()+(a.getX()-n.getX())/(o+1),i.getY()+(a.getY()-n.getY())/(o+1)),h=new W(i.getX()+(t.getX()-n.getX())/(s+1),i.getY()+(t.getY()-n.getY())/(s+1));if(!this.isValid(d))return this.isValid(h)?h:null;if(!this.isValid(h))return d;var x=this.transitionsBetween(l,d)+this.transitionsBetween(c,d),g=this.transitionsBetween(l,h)+this.transitionsBetween(c,h);return x>g?d:h},r.prototype.shiftToModuleCenter=function(e){var t=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(t,i)+1,s=this.transitionsBetween(a,i)+1,l=r.shiftPoint(t,n,s*4),c=r.shiftPoint(a,n,o*4);o=this.transitionsBetween(l,i)+1,s=this.transitionsBetween(c,i)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var d=(t.getX()+n.getX()+a.getX()+i.getX())/4,h=(t.getY()+n.getY()+a.getY()+i.getY())/4;t=r.moveAway(t,d,h),n=r.moveAway(n,d,h),a=r.moveAway(a,d,h),i=r.moveAway(i,d,h);var x,g;return l=r.shiftPoint(t,n,s*4),l=r.shiftPoint(l,i,o*4),x=r.shiftPoint(n,t,s*4),x=r.shiftPoint(x,a,o*4),c=r.shiftPoint(a,i,s*4),c=r.shiftPoint(c,n,o*4),g=r.shiftPoint(i,a,s*4),g=r.shiftPoint(g,t,o*4),[l,x,c,g]},r.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},r.sampleGrid=function(e,t,n,a,i,o,s){var l=ea.getInstance();return l.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),i.getX(),i.getY(),a.getX(),a.getY(),n.getX(),n.getY())},r.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-a)>Math.abs(i-n);if(s){var l=n;n=a,a=l,l=i,i=o,o=l}for(var c=Math.abs(i-n),d=Math.abs(o-a),h=-c/2,x=a<o?1:-1,g=n<i?1:-1,p=0,m=this.image.get(s?a:n,s?n:a),b=n,_=a;b!==i;b+=g){var y=this.image.get(s?_:b,s?b:_);if(y!==m&&(p++,m=y),h+=d,h>0){if(_===o)break;_+=x,h-=c}}return p},r}(),qr=function(){function r(){this.decoder=new x0}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n,a;if(t!=null&&t.has(ye.PURE_BARCODE)){var i=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(i),a=r.NO_POINTS}else{var o=new g0(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),a=o.getPoints()}var s=n.getRawBytes(),l=new rt(n.getText(),s,8*s.length,a,K.DATA_MATRIX,_e.currentTimeMillis()),c=n.getByteSegments();c!=null&&l.putMetadata(Qe.BYTE_SEGMENTS,c);var d=n.getECLevel();return d!=null&&l.putMetadata(Qe.ERROR_CORRECTION_LEVEL,d),l},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new T;var a=this.moduleSize(t,e),i=t[1],o=n[1],s=t[0],l=n[0],c=(l-s+1)/a,d=(o-i+1)/a;if(c<=0||d<=0)throw new T;var h=a/2;i+=h,s+=h;for(var x=new St(c,d),g=0;g<d;g++)for(var p=i+g*a,m=0;m<c;m++)e.get(s+m*a,p)&&x.set(m,g);return x},r.moduleSize=function(e,t){for(var n=t.getWidth(),a=e[0],i=e[1];a<n&&t.get(a,i);)a++;if(a===n)throw new T;var o=a-e[0];if(o===0)throw new T;return o},r.NO_POINTS=[],r}(),p0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){p0(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new qr,t)||this}return e})(lr);var ir;(function(r){r[r.L=0]="L",r[r.M=1]="M",r[r.Q=2]="Q",r[r.H=3]="H"})(ir||(ir={}));var v0=function(){function r(e,t,n){this.value=e,this.stringValue=t,this.bits=n,r.FOR_BITS.set(n,this),r.FOR_VALUE.set(e,this)}return r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.fromString=function(e){switch(e){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new Pe(e+"not available")}},r.prototype.toString=function(){return this.stringValue},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.forBits=function(e){if(e<0||e>=r.FOR_BITS.size)throw new J;return r.FOR_BITS.get(e)},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.L=new r(ir.L,"L",1),r.M=new r(ir.M,"M",0),r.Q=new r(ir.Q,"Q",3),r.H=new r(ir.H,"H",2),r}(),m0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ss=function(){function r(e){this.errorCorrectionLevel=v0.forBits(e>>3&3),this.dataMask=e&7}return r.numBitsDiffering=function(e,t){return le.bitCount(e^t)},r.decodeFormatInformation=function(e,t){var n=r.doDecodeFormatInformation(e,t);return n!==null?n:r.doDecodeFormatInformation(e^r.FORMAT_INFO_MASK_QR,t^r.FORMAT_INFO_MASK_QR)},r.doDecodeFormatInformation=function(e,t){var n,a,i=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=m0(r.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var c=l.value,d=c[0];if(d===e||d===t)return new r(c[1]);var h=r.numBitsDiffering(e,d);h<i&&(o=c[1],i=h),e!==t&&(h=r.numBitsDiffering(t,d),h<i&&(o=c[1],i=h))}}catch(x){n={error:x}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return i<=3?new r(o):null},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getDataMask=function(){return this.dataMask},r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},r.FORMAT_INFO_MASK_QR=21522,r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],r}(),y0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},N=function(){function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},r.prototype.getNumBlocks=function(){var e,t,n=0,a=this.ecBlocks;try{for(var i=y0(a),o=i.next();!o.done;o=i.next()){var s=o.value;n+=s.getCount()}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},r.prototype.getECBlocks=function(){return this.ecBlocks},r}(),v=function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r}(),w0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qt=function(){function r(e,t){for(var n,a,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=i;var s=0,l=i[0].getECCodewordsPerBlock(),c=i[0].getECBlocks();try{for(var d=w0(c),h=d.next();!h.done;h=d.next()){var x=h.value;s+=x.getCount()*(x.getDataCodewords()+l)}}catch(g){n={error:g}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}this.totalCodewords=s}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},r.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},r.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new k;try{return this.getVersionForNumber((e-17)/4)}catch{throw new k}},r.getVersionForNumber=function(e){if(e<1||e>40)throw new J;return r.VERSIONS[e-1]},r.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,n=0,a=0;a<r.VERSION_DECODE_INFO.length;a++){var i=r.VERSION_DECODE_INFO[a];if(i===e)return r.getVersionForNumber(a+7);var o=ss.numBitsDiffering(e,i);o<t&&(n=a+7,t=o)}return t<=3?r.getVersionForNumber(n):null},r.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new St(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var i=this.alignmentPatternCenters[a]-2,o=0;o<n;o++)a===0&&(o===0||o===n-1)||a===n-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,i,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},r.prototype.toString=function(){return""+this.versionNumber},r.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),r.VERSIONS=[new r(1,new Int32Array(0),new N(7,new v(1,19)),new N(10,new v(1,16)),new N(13,new v(1,13)),new N(17,new v(1,9))),new r(2,Int32Array.from([6,18]),new N(10,new v(1,34)),new N(16,new v(1,28)),new N(22,new v(1,22)),new N(28,new v(1,16))),new r(3,Int32Array.from([6,22]),new N(15,new v(1,55)),new N(26,new v(1,44)),new N(18,new v(2,17)),new N(22,new v(2,13))),new r(4,Int32Array.from([6,26]),new N(20,new v(1,80)),new N(18,new v(2,32)),new N(26,new v(2,24)),new N(16,new v(4,9))),new r(5,Int32Array.from([6,30]),new N(26,new v(1,108)),new N(24,new v(2,43)),new N(18,new v(2,15),new v(2,16)),new N(22,new v(2,11),new v(2,12))),new r(6,Int32Array.from([6,34]),new N(18,new v(2,68)),new N(16,new v(4,27)),new N(24,new v(4,19)),new N(28,new v(4,15))),new r(7,Int32Array.from([6,22,38]),new N(20,new v(2,78)),new N(18,new v(4,31)),new N(18,new v(2,14),new v(4,15)),new N(26,new v(4,13),new v(1,14))),new r(8,Int32Array.from([6,24,42]),new N(24,new v(2,97)),new N(22,new v(2,38),new v(2,39)),new N(22,new v(4,18),new v(2,19)),new N(26,new v(4,14),new v(2,15))),new r(9,Int32Array.from([6,26,46]),new N(30,new v(2,116)),new N(22,new v(3,36),new v(2,37)),new N(20,new v(4,16),new v(4,17)),new N(24,new v(4,12),new v(4,13))),new r(10,Int32Array.from([6,28,50]),new N(18,new v(2,68),new v(2,69)),new N(26,new v(4,43),new v(1,44)),new N(24,new v(6,19),new v(2,20)),new N(28,new v(6,15),new v(2,16))),new r(11,Int32Array.from([6,30,54]),new N(20,new v(4,81)),new N(30,new v(1,50),new v(4,51)),new N(28,new v(4,22),new v(4,23)),new N(24,new v(3,12),new v(8,13))),new r(12,Int32Array.from([6,32,58]),new N(24,new v(2,92),new v(2,93)),new N(22,new v(6,36),new v(2,37)),new N(26,new v(4,20),new v(6,21)),new N(28,new v(7,14),new v(4,15))),new r(13,Int32Array.from([6,34,62]),new N(26,new v(4,107)),new N(22,new v(8,37),new v(1,38)),new N(24,new v(8,20),new v(4,21)),new N(22,new v(12,11),new v(4,12))),new r(14,Int32Array.from([6,26,46,66]),new N(30,new v(3,115),new v(1,116)),new N(24,new v(4,40),new v(5,41)),new N(20,new v(11,16),new v(5,17)),new N(24,new v(11,12),new v(5,13))),new r(15,Int32Array.from([6,26,48,70]),new N(22,new v(5,87),new v(1,88)),new N(24,new v(5,41),new v(5,42)),new N(30,new v(5,24),new v(7,25)),new N(24,new v(11,12),new v(7,13))),new r(16,Int32Array.from([6,26,50,74]),new N(24,new v(5,98),new v(1,99)),new N(28,new v(7,45),new v(3,46)),new N(24,new v(15,19),new v(2,20)),new N(30,new v(3,15),new v(13,16))),new r(17,Int32Array.from([6,30,54,78]),new N(28,new v(1,107),new v(5,108)),new N(28,new v(10,46),new v(1,47)),new N(28,new v(1,22),new v(15,23)),new N(28,new v(2,14),new v(17,15))),new r(18,Int32Array.from([6,30,56,82]),new N(30,new v(5,120),new v(1,121)),new N(26,new v(9,43),new v(4,44)),new N(28,new v(17,22),new v(1,23)),new N(28,new v(2,14),new v(19,15))),new r(19,Int32Array.from([6,30,58,86]),new N(28,new v(3,113),new v(4,114)),new N(26,new v(3,44),new v(11,45)),new N(26,new v(17,21),new v(4,22)),new N(26,new v(9,13),new v(16,14))),new r(20,Int32Array.from([6,34,62,90]),new N(28,new v(3,107),new v(5,108)),new N(26,new v(3,41),new v(13,42)),new N(30,new v(15,24),new v(5,25)),new N(28,new v(15,15),new v(10,16))),new r(21,Int32Array.from([6,28,50,72,94]),new N(28,new v(4,116),new v(4,117)),new N(26,new v(17,42)),new N(28,new v(17,22),new v(6,23)),new N(30,new v(19,16),new v(6,17))),new r(22,Int32Array.from([6,26,50,74,98]),new N(28,new v(2,111),new v(7,112)),new N(28,new v(17,46)),new N(30,new v(7,24),new v(16,25)),new N(24,new v(34,13))),new r(23,Int32Array.from([6,30,54,78,102]),new N(30,new v(4,121),new v(5,122)),new N(28,new v(4,47),new v(14,48)),new N(30,new v(11,24),new v(14,25)),new N(30,new v(16,15),new v(14,16))),new r(24,Int32Array.from([6,28,54,80,106]),new N(30,new v(6,117),new v(4,118)),new N(28,new v(6,45),new v(14,46)),new N(30,new v(11,24),new v(16,25)),new N(30,new v(30,16),new v(2,17))),new r(25,Int32Array.from([6,32,58,84,110]),new N(26,new v(8,106),new v(4,107)),new N(28,new v(8,47),new v(13,48)),new N(30,new v(7,24),new v(22,25)),new N(30,new v(22,15),new v(13,16))),new r(26,Int32Array.from([6,30,58,86,114]),new N(28,new v(10,114),new v(2,115)),new N(28,new v(19,46),new v(4,47)),new N(28,new v(28,22),new v(6,23)),new N(30,new v(33,16),new v(4,17))),new r(27,Int32Array.from([6,34,62,90,118]),new N(30,new v(8,122),new v(4,123)),new N(28,new v(22,45),new v(3,46)),new N(30,new v(8,23),new v(26,24)),new N(30,new v(12,15),new v(28,16))),new r(28,Int32Array.from([6,26,50,74,98,122]),new N(30,new v(3,117),new v(10,118)),new N(28,new v(3,45),new v(23,46)),new N(30,new v(4,24),new v(31,25)),new N(30,new v(11,15),new v(31,16))),new r(29,Int32Array.from([6,30,54,78,102,126]),new N(30,new v(7,116),new v(7,117)),new N(28,new v(21,45),new v(7,46)),new N(30,new v(1,23),new v(37,24)),new N(30,new v(19,15),new v(26,16))),new r(30,Int32Array.from([6,26,52,78,104,130]),new N(30,new v(5,115),new v(10,116)),new N(28,new v(19,47),new v(10,48)),new N(30,new v(15,24),new v(25,25)),new N(30,new v(23,15),new v(25,16))),new r(31,Int32Array.from([6,30,56,82,108,134]),new N(30,new v(13,115),new v(3,116)),new N(28,new v(2,46),new v(29,47)),new N(30,new v(42,24),new v(1,25)),new N(30,new v(23,15),new v(28,16))),new r(32,Int32Array.from([6,34,60,86,112,138]),new N(30,new v(17,115)),new N(28,new v(10,46),new v(23,47)),new N(30,new v(10,24),new v(35,25)),new N(30,new v(19,15),new v(35,16))),new r(33,Int32Array.from([6,30,58,86,114,142]),new N(30,new v(17,115),new v(1,116)),new N(28,new v(14,46),new v(21,47)),new N(30,new v(29,24),new v(19,25)),new N(30,new v(11,15),new v(46,16))),new r(34,Int32Array.from([6,34,62,90,118,146]),new N(30,new v(13,115),new v(6,116)),new N(28,new v(14,46),new v(23,47)),new N(30,new v(44,24),new v(7,25)),new N(30,new v(59,16),new v(1,17))),new r(35,Int32Array.from([6,30,54,78,102,126,150]),new N(30,new v(12,121),new v(7,122)),new N(28,new v(12,47),new v(26,48)),new N(30,new v(39,24),new v(14,25)),new N(30,new v(22,15),new v(41,16))),new r(36,Int32Array.from([6,24,50,76,102,128,154]),new N(30,new v(6,121),new v(14,122)),new N(28,new v(6,47),new v(34,48)),new N(30,new v(46,24),new v(10,25)),new N(30,new v(2,15),new v(64,16))),new r(37,Int32Array.from([6,28,54,80,106,132,158]),new N(30,new v(17,122),new v(4,123)),new N(28,new v(29,46),new v(14,47)),new N(30,new v(49,24),new v(10,25)),new N(30,new v(24,15),new v(46,16))),new r(38,Int32Array.from([6,32,58,84,110,136,162]),new N(30,new v(4,122),new v(18,123)),new N(28,new v(13,46),new v(32,47)),new N(30,new v(48,24),new v(14,25)),new N(30,new v(42,15),new v(32,16))),new r(39,Int32Array.from([6,26,54,82,110,138,166]),new N(30,new v(20,117),new v(4,118)),new N(28,new v(40,47),new v(7,48)),new N(30,new v(43,24),new v(22,25)),new N(30,new v(10,15),new v(67,16))),new r(40,Int32Array.from([6,30,58,86,114,142,170]),new N(30,new v(19,118),new v(6,119)),new N(28,new v(18,47),new v(31,48)),new N(30,new v(34,24),new v(34,25)),new N(30,new v(20,15),new v(61,16)))],r}(),He;(function(r){r[r.DATA_MASK_000=0]="DATA_MASK_000",r[r.DATA_MASK_001=1]="DATA_MASK_001",r[r.DATA_MASK_010=2]="DATA_MASK_010",r[r.DATA_MASK_011=3]="DATA_MASK_011",r[r.DATA_MASK_100=4]="DATA_MASK_100",r[r.DATA_MASK_101=5]="DATA_MASK_101",r[r.DATA_MASK_110=6]="DATA_MASK_110",r[r.DATA_MASK_111=7]="DATA_MASK_111"})(He||(He={}));var Do=function(){function r(e,t){this.value=e,this.isMasked=t}return r.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var a=0;a<t;a++)this.isMasked(n,a)&&e.flip(a,n)},r.values=new Map([[He.DATA_MASK_000,new r(He.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[He.DATA_MASK_001,new r(He.DATA_MASK_001,function(e,t){return(e&1)===0})],[He.DATA_MASK_010,new r(He.DATA_MASK_010,function(e,t){return t%3===0})],[He.DATA_MASK_011,new r(He.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[He.DATA_MASK_100,new r(He.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[He.DATA_MASK_101,new r(He.DATA_MASK_101,function(e,t){return e*t%6===0})],[He.DATA_MASK_110,new r(He.DATA_MASK_110,function(e,t){return e*t%6<3})],[He.DATA_MASK_111,new r(He.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),r}(),b0=function(){function r(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new k;this.bitMatrix=e}return r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),i=0,o=a-7,n=a-1;n>=o;n--)i=this.copyBit(8,n,i);for(var t=a-8;t<a;t++)i=this.copyBit(t,8,i);if(this.parsedFormatInfo=ss.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new k},r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Qt.getVersionForNumber(t);for(var n=0,a=e-11,i=5;i>=0;i--)for(var o=e-9;o>=a;o--)n=this.copyBit(o,i,n);var s=Qt.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var o=5;o>=0;o--)for(var i=e-9;i>=a;i--)n=this.copyBit(o,i,n);if(s=Qt.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new k},r.prototype.copyBit=function(e,t,n){var a=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return a?n<<1|1:n<<1},r.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=Do.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var i=t.buildFunctionPattern(),o=!0,s=new Uint8Array(t.getTotalCodewords()),l=0,c=0,d=0,h=a-1;h>0;h-=2){h===6&&h--;for(var x=0;x<a;x++)for(var g=o?a-1-x:x,p=0;p<2;p++)i.get(h-p,g)||(d++,c<<=1,this.bitMatrix.get(h-p,g)&&(c|=1),d===8&&(s[l++]=c,d=0,c=0));o=!o}if(l!==t.getTotalCodewords())throw new k;return s},r.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Do.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},r.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},r.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var a=t+1,i=e.getHeight();a<i;a++)e.get(t,a)!==e.get(a,t)&&(e.flip(a,t),e.flip(t,a))},r}(),Po=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_0=function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t,n){var a,i,o,s;if(e.length!==t.getTotalCodewords())throw new J;var l=t.getECBlocksForLevel(n),c=0,d=l.getECBlocks();try{for(var h=Po(d),x=h.next();!x.done;x=h.next()){var g=x.value;c+=g.getCount()}}catch(M){a={error:M}}finally{try{x&&!x.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}var p=new Array(c),m=0;try{for(var b=Po(d),_=b.next();!_.done;_=b.next())for(var g=_.value,y=0;y<g.getCount();y++){var I=g.getDataCodewords(),O=l.getECCodewordsPerBlock()+I;p[m++]=new r(I,new Uint8Array(O))}}catch(M){o={error:M}}finally{try{_&&!_.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}for(var D=p[0].codewords.length,P=p.length-1;P>=0;){var F=p[P].codewords.length;if(F===D)break;P--}P++;for(var V=D-l.getECCodewordsPerBlock(),q=0,y=0;y<V;y++)for(var Y=0;Y<m;Y++)p[Y].codewords[y]=e[q++];for(var Y=P;Y<m;Y++)p[Y].codewords[V]=e[q++];for(var he=p[0].codewords.length,y=V;y<he;y++)for(var Y=0;Y<m;Y++){var z=Y<P?y:y+1;p[Y].codewords[z]=e[q++]}return p},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r}(),ft;(function(r){r[r.TERMINATOR=0]="TERMINATOR",r[r.NUMERIC=1]="NUMERIC",r[r.ALPHANUMERIC=2]="ALPHANUMERIC",r[r.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",r[r.BYTE=4]="BYTE",r[r.ECI=5]="ECI",r[r.KANJI=6]="KANJI",r[r.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",r[r.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",r[r.HANZI=9]="HANZI"})(ft||(ft={}));var Se=function(){function r(e,t,n,a){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=a,r.FOR_BITS.set(a,this),r.FOR_VALUE.set(e,this)}return r.forBits=function(e){var t=r.FOR_BITS.get(e);if(t===void 0)throw new J;return t},r.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]},r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.toString=function(){return this.stringValue},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.TERMINATOR=new r(ft.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),r.NUMERIC=new r(ft.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),r.ALPHANUMERIC=new r(ft.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),r.STRUCTURED_APPEND=new r(ft.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),r.BYTE=new r(ft.BYTE,"BYTE",Int32Array.from([8,16,16]),4),r.ECI=new r(ft.ECI,"ECI",Int32Array.from([0,0,0]),7),r.KANJI=new r(ft.KANJI,"KANJI",Int32Array.from([8,10,12]),8),r.FNC1_FIRST_POSITION=new r(ft.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),r.FNC1_SECOND_POSITION=new r(ft.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),r.HANZI=new r(ft.HANZI,"HANZI",Int32Array.from([8,10,12]),13),r}(),A0=function(){function r(){}return r.decode=function(e,t,n,a){var i=new os(e),o=new oe,s=new Array,l=-1,c=-1;try{var d=null,h=!1,x=void 0;do{if(i.available()<4)x=Se.TERMINATOR;else{var g=i.readBits(4);x=Se.forBits(g)}switch(x){case Se.TERMINATOR:break;case Se.FNC1_FIRST_POSITION:case Se.FNC1_SECOND_POSITION:h=!0;break;case Se.STRUCTURED_APPEND:if(i.available()<16)throw new k;l=i.readBits(8),c=i.readBits(8);break;case Se.ECI:var p=r.parseECIValue(i);if(d=Le.getCharacterSetECIByValue(p),d===null)throw new k;break;case Se.HANZI:var m=i.readBits(4),b=i.readBits(x.getCharacterCountBits(t));m===r.GB2312_SUBSET&&r.decodeHanziSegment(i,o,b);break;default:var _=i.readBits(x.getCharacterCountBits(t));switch(x){case Se.NUMERIC:r.decodeNumericSegment(i,o,_);break;case Se.ALPHANUMERIC:r.decodeAlphanumericSegment(i,o,_,h);break;case Se.BYTE:r.decodeByteSegment(i,o,_,d,s,a);break;case Se.KANJI:r.decodeKanjiSegment(i,o,_);break;default:throw new k}break}}while(x!==Se.TERMINATOR)}catch{throw new k}return new an(e,o.toString(),s.length===0?null:s,n===null?null:n.toString(),l,c)},r.decodeHanziSegment=function(e,t,n){if(n*13>e.available())throw new k;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,a[i]=s>>8&255,a[i+1]=s&255,i+=2,n--}try{t.append(xt.decode(a,ue.GB2312))}catch(l){throw new k(l)}},r.decodeKanjiSegment=function(e,t,n){if(n*13>e.available())throw new k;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,a[i]=s>>8,a[i+1]=s,i+=2,n--}try{t.append(xt.decode(a,ue.SHIFT_JIS))}catch(l){throw new k(l)}},r.decodeByteSegment=function(e,t,n,a,i,o){if(8*n>e.available())throw new k;for(var s=new Uint8Array(n),l=0;l<n;l++)s[l]=e.readBits(8);var c;a===null?c=ue.guessEncoding(s,o):c=a.getName();try{t.append(xt.decode(s,c))}catch(d){throw new k(d)}i.push(s)},r.toAlphaNumericChar=function(e){if(e>=r.ALPHANUMERIC_CHARS.length)throw new k;return r.ALPHANUMERIC_CHARS[e]},r.decodeAlphanumericSegment=function(e,t,n,a){for(var i=t.length();n>1;){if(e.available()<11)throw new k;var o=e.readBits(11);t.append(r.toAlphaNumericChar(Math.floor(o/45))),t.append(r.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new k;t.append(r.toAlphaNumericChar(e.readBits(6)))}if(a)for(var s=i;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))},r.decodeNumericSegment=function(e,t,n){for(;n>=3;){if(e.available()<10)throw new k;var a=e.readBits(10);if(a>=1e3)throw new k;t.append(r.toAlphaNumericChar(Math.floor(a/100))),t.append(r.toAlphaNumericChar(Math.floor(a/10)%10)),t.append(r.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new k;var i=e.readBits(7);if(i>=100)throw new k;t.append(r.toAlphaNumericChar(Math.floor(i/10))),t.append(r.toAlphaNumericChar(i%10))}else if(n===1){if(e.available()<4)throw new k;var o=e.readBits(4);if(o>=10)throw new k;t.append(r.toAlphaNumericChar(o))}},r.parseECIValue=function(e){var t=e.readBits(8);if(!(t&128))return t&127;if((t&192)===128){var n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){var a=e.readBits(16);return(t&31)<<16&4294967295|a}throw new k},r.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.GB2312_SUBSET=1,r}(),ls=function(){function r(e){this.mirrored=e}return r.prototype.isMirrored=function(){return this.mirrored},r.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},r}(),Mo=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C0=function(){function r(){this.rsDecoder=new on(lt.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(St.parseFromBooleanArray(e),t)},r.prototype.decodeBitMatrix=function(e,t){var n=new b0(e),a=null;try{return this.decodeBitMatrixParser(n,t)}catch(o){a=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var i=this.decodeBitMatrixParser(n,t);return i.setOther(new ls(!0)),i}catch(o){throw a!==null?a:o}},r.prototype.decodeBitMatrixParser=function(e,t){var n,a,i,o,s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),d=_0.getDataBlocks(c,s,l),h=0;try{for(var x=Mo(d),g=x.next();!g.done;g=x.next()){var p=g.value;h+=p.getNumDataCodewords()}}catch(P){n={error:P}}finally{try{g&&!g.done&&(a=x.return)&&a.call(x)}finally{if(n)throw n.error}}var m=new Uint8Array(h),b=0;try{for(var _=Mo(d),y=_.next();!y.done;y=_.next()){var p=y.value,I=p.getCodewords(),O=p.getNumDataCodewords();this.correctErrors(I,O);for(var D=0;D<O;D++)m[b++]=I[D]}}catch(P){i={error:P}}finally{try{y&&!y.done&&(o=_.return)&&o.call(_)}finally{if(i)throw i.error}}return A0.decode(m,s,l,t)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Me}for(var a=0;a<t;a++)e[a]=n[a]},r}(),E0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),S0=function(r){E0(e,r);function e(t,n,a){var i=r.call(this,t,n)||this;return i.estimatedModuleSize=a,i}return e.prototype.aboutEquals=function(t,n,a){if(Math.abs(n-this.getY())<=t&&Math.abs(a-this.getX())<=t){var i=Math.abs(t-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,a){var i=(this.getX()+n)/2,o=(this.getY()+t)/2,s=(this.estimatedModuleSize+a)/2;return new e(i,o,s)},e}(W),I0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},N0=function(){function r(e,t,n,a,i,o,s){this.image=e,this.startX=t,this.startY=n,this.width=a,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return r.prototype.find=function(){for(var e=this.startX,t=this.height,n=this.width,a=e+n,i=this.startY+t/2,o=new Int32Array(3),s=this.image,l=0;l<t;l++){var c=i+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<a&&!s.get(d,c);)d++;for(var h=0;d<a;){if(s.get(d,c))if(h===1)o[1]++;else if(h===2){if(this.foundPatternCross(o)){var x=this.handlePossibleCenter(o,c,d);if(x!==null)return x}o[0]=o[2],o[1]=1,o[2]=0,h=1}else o[++h]++;else h===1&&h++,o[h]++;d++}if(this.foundPatternCross(o)){var x=this.handlePossibleCenter(o,c,a);if(x!==null)return x}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new T},r.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},r.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,a=0;a<3;a++)if(Math.abs(t-e[a])>=n)return!1;return!0},r.prototype.crossCheckVertical=function(e,t,n,a){var i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=e;l>=0&&i.get(t,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&!i.get(t,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&i.get(t,l)&&s[1]<=n;)s[1]++,l++;if(l===o||s[1]>n)return NaN;for(;l<o&&!i.get(t,l)&&s[2]<=n;)s[2]++,l++;if(s[2]>n)return NaN;var c=s[0]+s[1]+s[2];return 5*Math.abs(c-a)>=2*a?NaN:this.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.handlePossibleCenter=function(e,t,n){var a,i,o=e[0]+e[1]+e[2],s=r.centerFromEnd(e,n),l=this.crossCheckVertical(t,s,2*e[1],o);if(!isNaN(l)){var c=(e[0]+e[1]+e[2])/3;try{for(var d=I0(this.possibleCenters),h=d.next();!h.done;h=d.next()){var x=h.value;if(x.aboutEquals(c,l,s))return x.combineEstimate(l,s,c)}}catch(p){a={error:p}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}var g=new S0(s,l,c);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null},r}(),O0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),T0=function(r){O0(e,r);function e(t,n,a,i){var o=r.call(this,t,n)||this;return o.estimatedModuleSize=a,o.count=i,i===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,n,a){if(Math.abs(n-this.getY())<=t&&Math.abs(a-this.getX())<=t){var i=Math.abs(t-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,a){var i=this.count+1,o=(this.count*this.getX()+n)/i,s=(this.count*this.getY()+t)/i,l=(this.count*this.estimatedModuleSize+a)/i;return new e(o,s,l,i)},e}(W),R0=function(){function r(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r}(),_r=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D0=function(){function r(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return r.prototype.getImage=function(){return this.image},r.prototype.getPossibleCenters=function(){return this.possibleCenters},r.prototype.find=function(e){var t=e!=null&&e.get(ye.TRY_HARDER)!==void 0,n=e!=null&&e.get(ye.PURE_BARCODE)!==void 0,a=this.image,i=a.getHeight(),o=a.getWidth(),s=Math.floor(3*i/(4*r.MAX_MODULES));(s<r.MIN_SKIP||t)&&(s=r.MIN_SKIP);for(var l=!1,c=new Int32Array(5),d=s-1;d<i&&!l;d+=s){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var h=0,x=0;x<o;x++)if(a.get(x,d))(h&1)===1&&h++,c[h]++;else if(h&1)c[h]++;else if(h===4)if(r.foundPatternCross(c)){var g=this.handlePossibleCenter(c,d,x,n);if(g===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var p=this.findRowSkip();p>c[2]&&(d+=p-c[2]-s,x=o-1)}else{c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,h=3;continue}h=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,h=3;else c[++h]++;if(r.foundPatternCross(c)){var g=this.handlePossibleCenter(c,d,o,n);g===!0&&(s=c[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var m=this.selectBestPatterns();return W.orderBestPatterns(m),new R0(m)},r.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},r.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;t+=a}if(t<7)return!1;var i=t/7,o=i/2;return Math.abs(i-e[0])<o&&Math.abs(i-e[1])<o&&Math.abs(3*i-e[2])<3*o&&Math.abs(i-e[3])<o&&Math.abs(i-e[4])<o},r.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},r.prototype.crossCheckDiagonal=function(e,t,n,a){for(var i=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&t>=o&&s.get(t-o,e-o);)i[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!s.get(t-o,e-o)&&i[1]<=n;)i[1]++,o++;if(e<o||t<o||i[1]>n)return!1;for(;e>=o&&t>=o&&s.get(t-o,e-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;var l=s.getHeight(),c=s.getWidth();for(o=1;e+o<l&&t+o<c&&s.get(t+o,e+o);)i[2]++,o++;if(e+o>=l||t+o>=c)return!1;for(;e+o<l&&t+o<c&&!s.get(t+o,e+o)&&i[3]<n;)i[3]++,o++;if(e+o>=l||t+o>=c||i[3]>=n)return!1;for(;e+o<l&&t+o<c&&s.get(t+o,e+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;var d=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(d-a)<2*a&&r.foundPatternCross(i)},r.prototype.crossCheckVertical=function(e,t,n,a){for(var i=this.image,o=i.getHeight(),s=this.getCrossCheckStateCount(),l=e;l>=0&&i.get(t,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(t,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&i.get(t,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&i.get(t,l);)s[2]++,l++;if(l===o)return NaN;for(;l<o&&!i.get(t,l)&&s[3]<n;)s[3]++,l++;if(l===o||s[3]>=n)return NaN;for(;l<o&&i.get(t,l)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-a)>=2*a?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.crossCheckHorizontal=function(e,t,n,a){for(var i=this.image,o=i.getWidth(),s=this.getCrossCheckStateCount(),l=e;l>=0&&i.get(l,t);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(l,t)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&i.get(l,t)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&i.get(l,t);)s[2]++,l++;if(l===o)return NaN;for(;l<o&&!i.get(l,t)&&s[3]<n;)s[3]++,l++;if(l===o||s[3]>=n)return NaN;for(;l<o&&i.get(l,t)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-a)>=a?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.handlePossibleCenter=function(e,t,n,a){var i=e[0]+e[1]+e[2]+e[3]+e[4],o=r.centerFromEnd(e,n),s=this.crossCheckVertical(t,Math.floor(o),e[2],i);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],i),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],i)))){for(var l=i/7,c=!1,d=this.possibleCenters,h=0,x=d.length;h<x;h++){var g=d[h];if(g.aboutEquals(l,s,o)){d[h]=g.combineEstimate(s,o,l),c=!0;break}}if(!c){var p=new T0(o,s,l);d.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1},r.prototype.findRowSkip=function(){var e,t,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var i=_r(this.possibleCenters),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.getCount()>=r.CENTER_QUORUM)if(a==null)a=s;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-s.getX())-Math.abs(a.getY()-s.getY()))/2)}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return 0},r.prototype.haveMultiplyConfirmedCenters=function(){var e,t,n,a,i=0,o=0,s=this.possibleCenters.length;try{for(var l=_r(this.possibleCenters),c=l.next();!c.done;c=l.next()){var d=c.value;d.getCount()>=r.CENTER_QUORUM&&(i++,o+=d.getEstimatedModuleSize())}}catch(m){e={error:m}}finally{try{c&&!c.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}if(i<3)return!1;var h=o/s,x=0;try{for(var g=_r(this.possibleCenters),p=g.next();!p.done;p=g.next()){var d=p.value;x+=Math.abs(d.getEstimatedModuleSize()-h)}}catch(m){n={error:m}}finally{try{p&&!p.done&&(a=g.return)&&a.call(g)}finally{if(n)throw n.error}}return x<=.05*o},r.prototype.selectBestPatterns=function(){var e,t,n,a,i=this.possibleCenters.length;if(i<3)throw new T;var o=this.possibleCenters,s;if(i>3){var l=0,c=0;try{for(var d=_r(this.possibleCenters),h=d.next();!h.done;h=d.next()){var x=h.value,g=x.getEstimatedModuleSize();l+=g,c+=g*g}}catch(D){e={error:D}}finally{try{h&&!h.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}s=l/i;var p=Math.sqrt(c/i-s*s);o.sort(function(D,P){var F=Math.abs(P.getEstimatedModuleSize()-s),V=Math.abs(D.getEstimatedModuleSize()-s);return F<V?-1:F>V?1:0});for(var m=Math.max(.2*s,p),b=0;b<o.length&&o.length>3;b++){var _=o[b];Math.abs(_.getEstimatedModuleSize()-s)>m&&(o.splice(b,1),b--)}}if(o.length>3){var l=0;try{for(var y=_r(o),I=y.next();!I.done;I=y.next()){var O=I.value;l+=O.getEstimatedModuleSize()}}catch(P){n={error:P}}finally{try{I&&!I.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}s=l/o.length,o.sort(function(P,F){if(F.getCount()===P.getCount()){var V=Math.abs(F.getEstimatedModuleSize()-s),q=Math.abs(P.getEstimatedModuleSize()-s);return V<q?1:V>q?-1:0}else return F.getCount()-P.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},r.CENTER_QUORUM=2,r.MIN_SKIP=3,r.MAX_MODULES=57,r}(),P0=function(){function r(e){this.image=e}return r.prototype.getImage=function(){return this.image},r.prototype.getResultPointCallback=function(){return this.resultPointCallback},r.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(ye.NEED_RESULT_POINT_CALLBACK);var t=new D0(this.image,this.resultPointCallback),n=t.find(e);return this.processFinderPatternInfo(n)},r.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),i=this.calculateModuleSize(t,n,a);if(i<1)throw new T("No pattern found in proccess finder.");var o=r.computeDimension(t,n,a,i),s=Qt.getProvisionalVersionForDimension(o),l=s.getDimensionForVersion()-7,c=null;if(s.getAlignmentPatternCenters().length>0)for(var d=n.getX()-t.getX()+a.getX(),h=n.getY()-t.getY()+a.getY(),x=1-3/l,g=Math.floor(t.getX()+x*(d-t.getX())),p=Math.floor(t.getY()+x*(h-t.getY())),m=4;m<=16;m<<=1)try{c=this.findAlignmentInRegion(i,g,p,m);break}catch(I){if(!(I instanceof T))throw I}var b=r.createTransform(t,n,a,c,o),_=r.sampleGrid(this.image,b,o),y;return c===null?y=[a,t,n]:y=[a,t,n,c],new qn(_,y)},r.createTransform=function(e,t,n,a,i){var o=i-3.5,s,l,c,d;return a!==null?(s=a.getX(),l=a.getY(),c=o-3,d=c):(s=t.getX()-e.getX()+n.getX(),l=t.getY()-e.getY()+n.getY(),c=o,d=o),rs.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,c,d,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,l,n.getX(),n.getY())},r.sampleGrid=function(e,t,n){var a=ea.getInstance();return a.sampleGridWithTransform(e,n,n,t)},r.computeDimension=function(e,t,n,a){var i=fe.round(W.distance(e,t)/a),o=fe.round(W.distance(e,n)/a),s=Math.floor((i+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new T("Dimensions could be not found.")}return s},r.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},r.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,a){var i=this.sizeOfBlackWhiteBlackRun(e,t,n,a),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var l=Math.floor(t-(a-t)*o);return o=1,l<0?(o=t/(t-l),l=0):l>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(l-t),l=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,t,s,l),i-1},r.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,a){var i=Math.abs(a-t)>Math.abs(n-e);if(i){var o=e;e=t,t=o,o=n,n=a,a=o}for(var s=Math.abs(n-e),l=Math.abs(a-t),c=-s/2,d=e<n?1:-1,h=t<a?1:-1,x=0,g=n+d,p=e,m=t;p!==g;p+=d){var b=i?m:p,_=i?p:m;if(x===1===this.image.get(b,_)){if(x===2)return fe.distance(p,m,e,t);x++}if(c+=l,c>0){if(m===a)break;m+=h,c-=s}}return x===2?fe.distance(n+d,a,e,t):NaN},r.prototype.findAlignmentInRegion=function(e,t,n,a){var i=Math.floor(a*e),o=Math.max(0,t-i),s=Math.min(this.image.getWidth()-1,t+i);if(s-o<e*3)throw new T("Alignment top exceeds estimated module size.");var l=Math.max(0,n-i),c=Math.min(this.image.getHeight()-1,n+i);if(c-l<e*3)throw new T("Alignment bottom exceeds estimated module size.");var d=new N0(this.image,o,l,s-o,c-l,e,this.resultPointCallback);return d.find()},r}(),en=function(){function r(){this.decoder=new C0}return r.prototype.getDecoder=function(){return this.decoder},r.prototype.decode=function(e,t){var n,a;if(t!=null&&t.get(ye.PURE_BARCODE)!==void 0){var i=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,t),a=r.NO_POINTS}else{var o=new P0(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(o.getBits(),t),a=o.getPoints()}n.getOther()instanceof ls&&n.getOther().applyMirroredCorrection(a);var s=new rt(n.getText(),n.getRawBytes(),void 0,a,K.QR_CODE,void 0),l=n.getByteSegments();l!==null&&s.putMetadata(Qe.BYTE_SEGMENTS,l);var c=n.getECLevel();return c!==null&&s.putMetadata(Qe.ERROR_CORRECTION_LEVEL,c),n.hasStructuredAppend()&&(s.putMetadata(Qe.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(Qe.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new T;var a=this.moduleSize(t,e),i=t[1],o=n[1],s=t[0],l=n[0];if(s>=l||i>=o)throw new T;if(o-i!==l-s&&(l=s+(o-i),l>=e.getWidth()))throw new T;var c=Math.round((l-s+1)/a),d=Math.round((o-i+1)/a);if(c<=0||d<=0)throw new T;if(d!==c)throw new T;var h=Math.floor(a/2);i+=h,s+=h;var x=s+Math.floor((c-1)*a)-l;if(x>0){if(x>h)throw new T;s-=x}var g=i+Math.floor((d-1)*a)-o;if(g>0){if(g>h)throw new T;i-=g}for(var p=new St(c,d),m=0;m<d;m++)for(var b=i+Math.floor(m*a),_=0;_<c;_++)e.get(s+Math.floor(_*a),b)&&p.set(_,m);return p},r.moduleSize=function(e,t){for(var n=t.getHeight(),a=t.getWidth(),i=e[0],o=e[1],s=!0,l=0;i<a&&o<n;){if(s!==t.get(i,o)){if(++l===5)break;s=!s}i++,o++}if(i===a||o===n)throw new T;return(i-e[0])/7},r.NO_POINTS=new Array,r}(),M0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},de=function(){function r(){}return r.prototype.PDF417Common=function(){},r.getBitCountSum=function(e){return fe.sum(e)},r.toIntArray=function(e){var t,n;if(e==null||!e.length)return r.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),i=0;try{for(var o=M0(e),s=o.next();!s.done;s=o.next()){var l=s.value;a[i++]=l}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a},r.getCodeword=function(e){var t=Ue.binarySearch(r.SYMBOL_TABLE,e&262143);return t<0?-1:(r.CODEWORD_TABLE[t]-1)%r.NUMBER_OF_CODEWORDS},r.NUMBER_OF_CODEWORDS=929,r.MAX_CODEWORDS_IN_BARCODE=r.NUMBER_OF_CODEWORDS-1,r.MIN_ROWS_IN_BARCODE=3,r.MAX_ROWS_IN_BARCODE=90,r.MODULES_IN_CODEWORD=17,r.MODULES_IN_STOP_PATTERN=18,r.BARS_IN_MODULE=8,r.EMPTY_INT_ARRAY=new Int32Array([]),r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),r}(),B0=function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r}(),j0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F0=function(){function r(){}return r.detectMultiple=function(e,t,n){var a=e.getBlackMatrix(),i=r.detect(n,a);return i.length||(a=a.clone(),a.rotate180(),i=r.detect(n,a)),new B0(a,i)},r.detect=function(e,t){for(var n,a,i=new Array,o=0,s=0,l=!1;o<t.getHeight();){var c=r.findVertices(t,o,s);if(c[0]==null&&c[3]==null){if(!l)break;l=!1,s=0;try{for(var d=(n=void 0,j0(i)),h=d.next();!h.done;h=d.next()){var x=h.value;x[1]!=null&&(o=Math.trunc(Math.max(o,x[1].getY()))),x[3]!=null&&(o=Math.max(o,Math.trunc(x[3].getY())))}}catch(g){n={error:g}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}o+=r.ROW_STEP;continue}if(l=!0,i.push(c),!e)break;c[2]!=null?(s=Math.trunc(c[2].getX()),o=Math.trunc(c[2].getY())):(s=Math.trunc(c[4].getX()),o=Math.trunc(c[4].getY()))}return i},r.findVertices=function(e,t,n){var a=e.getHeight(),i=e.getWidth(),o=new Array(8);return r.copyToResult(o,r.findRowsWithPattern(e,a,i,t,n,r.START_PATTERN),r.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),r.copyToResult(o,r.findRowsWithPattern(e,a,i,t,n,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN),o},r.copyToResult=function(e,t,n){for(var a=0;a<n.length;a++)e[n[a]]=t[a]},r.findRowsWithPattern=function(e,t,n,a,i,o){for(var s=new Array(4),l=!1,c=new Int32Array(o.length);a<t;a+=r.ROW_STEP){var d=r.findGuardPattern(e,i,a,n,!1,o,c);if(d!=null){for(;a>0;){var h=r.findGuardPattern(e,i,--a,n,!1,o,c);if(h!=null)d=h;else{a++;break}}s[0]=new W(d[0],a),s[1]=new W(d[1],a),l=!0;break}}var x=a+1;if(l){for(var g=0,h=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);x<t;x++){var d=r.findGuardPattern(e,h[0],x,n,!1,o,c);if(d!=null&&Math.abs(h[0]-d[0])<r.MAX_PATTERN_DRIFT&&Math.abs(h[1]-d[1])<r.MAX_PATTERN_DRIFT)h=d,g=0;else{if(g>r.SKIPPED_ROW_COUNT_MAX)break;g++}}x-=g+1,s[2]=new W(h[0],x),s[3]=new W(h[1],x)}return x-a<r.BARCODE_MIN_HEIGHT&&Ue.fill(s,null),s},r.findGuardPattern=function(e,t,n,a,i,o,s){Ue.fillWithin(s,0,s.length,0);for(var l=t,c=0;e.get(l,n)&&l>0&&c++<r.MAX_PIXEL_DRIFT;)l--;for(var d=l,h=0,x=o.length,g=i;d<a;d++){var p=e.get(d,n);if(p!==g)s[h]++;else{if(h===x-1){if(r.patternMatchVariance(s,o,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE)return new Int32Array([l,d]);l+=s[0]+s[1],_e.arraycopy(s,2,s,0,h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,g=!g}}return h===x-1&&r.patternMatchVariance(s,o,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE?new Int32Array([l,d-1]):null},r.patternMatchVariance=function(e,t,n){for(var a=e.length,i=0,o=0,s=0;s<a;s++)i+=e[s],o+=t[s];if(i<o)return 1/0;var l=i/o;n*=l;for(var c=0,d=0;d<a;d++){var h=e[d],x=t[d]*l,g=h>x?h-x:x-h;if(g>n)return 1/0;c+=g}return c/i},r.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),r.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),r.MAX_AVG_VARIANCE=.42,r.MAX_INDIVIDUAL_VARIANCE=.8,r.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),r.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),r.MAX_PIXEL_DRIFT=3,r.MAX_PATTERN_DRIFT=5,r.SKIPPED_ROW_COUNT_MAX=25,r.ROW_STEP=5,r.BARCODE_MIN_HEIGHT=10,r}(),k0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zt=function(){function r(e,t){if(t.length===0)throw new J;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var a=1;a<n&&t[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),_e.arraycopy(t,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){var t,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var i=k0(this.coefficients),o=i.next();!o.done;o=i.next()){var s=o.value;a=this.field.add(a,s)}}catch(h){t={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a}for(var l=this.coefficients[0],c=this.coefficients.length,d=1;d<c;d++)l=this.field.add(this.field.multiply(e,l),this.coefficients[d]);return l},r.prototype.add=function(e){if(!this.field.equals(e.field))throw new J("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var a=t;t=n,n=a}var i=new Int32Array(n.length),o=n.length-t.length;_e.arraycopy(n,0,i,0,o);for(var s=o;s<n.length;s++)i[s]=this.field.add(t[s-o],n[s]);return new r(this.field,i)},r.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new J("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},r.prototype.multiply=function(e){return e instanceof r?this.multiplyOther(e):this.multiplyScalar(e)},r.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new J("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new r(this.field,new Int32Array([0]));for(var t=this.coefficients,n=t.length,a=e.coefficients,i=a.length,o=new Int32Array(n+i-1),s=0;s<n;s++)for(var l=t[s],c=0;c<i;c++)o[s+c]=this.field.add(o[s+c],this.field.multiply(l,a[c]));return new r(this.field,o)},r.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new r(this.field,t)},r.prototype.multiplyScalar=function(e){if(e===0)return new r(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,n=new Int32Array(t),a=0;a<t;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new r(this.field,n)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new J;if(t===0)return new r(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),i=0;i<n;i++)a[i]=this.field.multiply(this.coefficients[i],t);return new r(this.field,a)},r.prototype.toString=function(){for(var e=new oe,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},r}(),L0=function(){function r(){}return r.prototype.add=function(e,t){return(e+t)%this.modulus},r.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new J;return this.logTable[e]},r.prototype.inverse=function(e){if(e===0)throw new ts;return this.expTable[this.modulus-this.logTable[e]-1]},r.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},r.prototype.getSize=function(){return this.modulus},r.prototype.equals=function(e){return e===this},r}(),U0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),G0=function(r){U0(e,r);function e(t,n){var a=r.call(this)||this;a.modulus=t,a.expTable=new Int32Array(t),a.logTable=new Int32Array(t);for(var i=1,o=0;o<t;o++)a.expTable[o]=i,i=i*n%t;for(var o=0;o<t-1;o++)a.logTable[a.expTable[o]]=o;return a.zero=new Zt(a,new Int32Array([0])),a.one=new Zt(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new J;if(n===0)return this.zero;var a=new Int32Array(t+1);return a[0]=n,new Zt(this,a)},e.PDF417_GF=new e(de.NUMBER_OF_CODEWORDS,3),e}(L0),V0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H0=function(){function r(){this.field=G0.PDF417_GF}return r.prototype.decode=function(e,t,n){for(var a,i,o=new Zt(this.field,e),s=new Int32Array(t),l=!1,c=t;c>0;c--){var d=o.evaluateAt(this.field.exp(c));s[t-c]=d,d!==0&&(l=!0)}if(!l)return 0;var h=this.field.getOne();if(n!=null)try{for(var x=V0(n),g=x.next();!g.done;g=x.next()){var p=g.value,m=this.field.exp(e.length-1-p),b=new Zt(this.field,new Int32Array([this.field.subtract(0,m),1]));h=h.multiply(b)}}catch(V){a={error:V}}finally{try{g&&!g.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}for(var _=new Zt(this.field,s),y=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),_,t),I=y[0],O=y[1],D=this.findErrorLocations(I),P=this.findErrorMagnitudes(O,I,D),c=0;c<D.length;c++){var F=e.length-1-this.field.log(D[c]);if(F<0)throw Me.getChecksumInstance();e[F]=this.field.subtract(e[F],P[c])}return D.length},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var a=e;e=t,t=a}for(var i=e,o=t,s=this.field.getZero(),l=this.field.getOne();o.getDegree()>=Math.round(n/2);){var c=i,d=s;if(i=o,s=l,i.isZero())throw Me.getChecksumInstance();o=c;for(var h=this.field.getZero(),x=i.getCoefficient(i.getDegree()),g=this.field.inverse(x);o.getDegree()>=i.getDegree()&&!o.isZero();){var p=o.getDegree()-i.getDegree(),m=this.field.multiply(o.getCoefficient(o.getDegree()),g);h=h.add(this.field.buildMonomial(p,m)),o=o.subtract(i.multiplyByMonomial(p,m))}l=h.multiply(s).subtract(d).negative()}var b=l.getCoefficient(0);if(b===0)throw Me.getChecksumInstance();var _=this.field.inverse(b),y=l.multiply(_),I=o.multiply(_);return[y,I]},r.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),a=0,i=1;i<this.field.getSize()&&a<t;i++)e.evaluateAt(i)===0&&(n[a]=this.field.inverse(i),a++);if(a!==t)throw Me.getChecksumInstance();return n},r.prototype.findErrorMagnitudes=function(e,t,n){for(var a=t.getDegree(),i=new Int32Array(a),o=1;o<=a;o++)i[a-o]=this.field.multiply(o,t.getCoefficient(o));for(var s=new Zt(this.field,i),l=n.length,c=new Int32Array(l),o=0;o<l;o++){var d=this.field.inverse(n[o]),h=this.field.subtract(0,e.evaluateAt(d)),x=this.field.inverse(s.evaluateAt(d));c[o]=this.field.multiply(h,x)}return c},r}(),Yn=function(){function r(e,t,n,a,i){e instanceof r?this.constructor_2(e):this.constructor_1(e,t,n,a,i)}return r.prototype.constructor_1=function(e,t,n,a,i){var o=t==null||n==null,s=a==null||i==null;if(o&&s)throw new T;o?(t=new W(0,a.getY()),n=new W(0,i.getY())):s&&(a=new W(e.getWidth()-1,t.getY()),i=new W(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=a,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))},r.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},r.merge=function(e,t){return e==null?t:t==null?e:new r(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},r.prototype.addMissingRows=function(e,t,n){var a=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var l=n?this.topLeft:this.topRight,c=Math.trunc(l.getY()-e);c<0&&(c=0);var d=new W(l.getX(),c);n?a=d:o=d}if(t>0){var h=n?this.bottomLeft:this.bottomRight,x=Math.trunc(h.getY()+t);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);var g=new W(h.getX(),x);n?i=g:s=g}return new r(this.image,a,i,o,s)},r.prototype.getMinX=function(){return this.minX},r.prototype.getMaxX=function(){return this.maxX},r.prototype.getMinY=function(){return this.minY},r.prototype.getMaxY=function(){return this.maxY},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getBottomRight=function(){return this.bottomRight},r}(),$0=function(){function r(e,t,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return r.prototype.getColumnCount=function(){return this.columnCount},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getRowCount=function(){return this.rowCount},r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},r}(),ra=function(){function r(){this.buffer=""}return r.form=function(e,t){var n=-1;function a(o,s,l,c,d,h){if(o==="%%")return"%";if(t[++n]!==void 0){o=c?parseInt(c.substr(1)):void 0;var x=d?parseInt(d.substr(1)):void 0,g;switch(h){case"s":g=t[n];break;case"c":g=t[n][0];break;case"f":g=parseFloat(t[n]).toFixed(o);break;case"p":g=parseFloat(t[n]).toPrecision(o);break;case"e":g=parseFloat(t[n]).toExponential(o);break;case"x":g=parseInt(t[n]).toString(x||16);break;case"d":g=parseFloat(parseInt(t[n],x||10).toPrecision(o)).toFixed(0);break}g=typeof g=="object"?JSON.stringify(g):(+g).toString(x);for(var p=parseInt(l),m=l&&l[0]+""=="0"?"0":" ";g.length<p;)g=s!==void 0?g+m:m+g;return g}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,a)},r.prototype.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.buffer+=r.form(e,t)},r.prototype.toString=function(){return this.buffer},r}(),X0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cs=function(){function r(e){this.boundingBox=new Yn(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return r.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var n=1;n<r.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(t=this.codewords[a],t!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(t=this.codewords[a],t!=null)))return t}return null},r.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},r.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},r.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.getCodewords=function(){return this.codewords},r.prototype.toString=function(){var e,t,n=new ra,a=0;try{for(var i=X0(this.codewords),o=i.next();!o.done;o=i.next()){var s=o.value;if(s==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,s.getRowNumber(),s.getValue())}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n.toString()},r.MAX_NEARBY_DISTANCE=5,r}(),W0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z0=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return i},Sr=function(){function r(){this.values=new Map}return r.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},r.prototype.getValue=function(){var e,t,n=-1,a=new Array,i=function(h,x){var g={getKey:function(){return h},getValue:function(){return x}};g.getValue()>n?(n=g.getValue(),a=[],a.push(g.getKey())):g.getValue()===n&&a.push(g.getKey())};try{for(var o=W0(this.values.entries()),s=o.next();!s.done;s=o.next()){var l=z0(s.value,2),c=l[0],d=l[1];i(c,d)}}catch(h){e={error:h}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return de.toIntArray(a)},r.prototype.getConfidence=function(e){return this.values.get(e)},r}(),Y0=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bo=function(r){Y0(e,r);function e(t,n){var a=r.call(this,t)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var t,n;try{for(var a=Bn(this.getCodewords()),i=a.next();!i.done;i=a.next()){var o=i.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,t);for(var a=this.getBoundingBox(),i=this._isLeft?a.getTopLeft():a.getTopRight(),o=this._isLeft?a.getBottomLeft():a.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=-1,d=1,h=0,x=s;x<l;x++)if(n[x]!=null){var g=n[x],p=g.getRowNumber()-c;if(p===0)h++;else if(p===1)d=Math.max(d,h),h=1,c=g.getRowNumber();else if(p<0||g.getRowNumber()>=t.getRowCount()||p>x)n[x]=null;else{var m=void 0;d>2?m=(d-2)*p:m=p;for(var b=m>=x,_=1;_<=m&&!b;_++)b=n[x-_]!=null;b?n[x]=null:(c=g.getRowNumber(),h=1)}}},e.prototype.getRowHeights=function(){var t,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var i=new Int32Array(a.getRowCount());try{for(var o=Bn(this.getCodewords()),s=o.next();!s.done;s=o.next()){var l=s.value;if(l!=null){var c=l.getRowNumber();if(c>=i.length)continue;i[c]++}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.getCodewords(),c=-1,d=o;d<s;d++)if(l[d]!=null){var h=l[d];h.setRowNumberAsRowIndicatorColumn();var x=h.getRowNumber()-c;x===0||(x===1?c=h.getRowNumber():h.getRowNumber()>=t.getRowCount()?l[d]=null:c=h.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,n,a=this.getCodewords(),i=new Sr,o=new Sr,s=new Sr,l=new Sr;try{for(var c=Bn(a),d=c.next();!d.done;d=c.next()){var h=d.value;if(h!=null){h.setRowNumberAsRowIndicatorColumn();var x=h.getValue()%30,g=h.getRowNumber();switch(this._isLeft||(g+=2),g%3){case 0:o.setValue(x*3+1);break;case 1:l.setValue(x/3),s.setValue(x%3);break;case 2:i.setValue(x+1);break}}}}catch(m){t={error:m}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}if(i.getValue().length===0||o.getValue().length===0||s.getValue().length===0||l.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<de.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>de.MAX_ROWS_IN_BARCODE)return null;var p=new $0(i.getValue()[0],o.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(a,p),p},e.prototype.removeIncorrectCodewords=function(t,n){for(var a=0;a<t.length;a++){var i=t[a];if(t[a]!=null){var o=i.getValue()%30,s=i.getRowNumber();if(s>n.getRowCount()){t[a]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(t[a]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(t[a]=null);break;case 2:o+1!==n.getColumnCount()&&(t[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+r.prototype.toString.call(this)},e}(cs),Z0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q0=function(){function r(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=de.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},r.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},r.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(t,a,n));return e},r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},r.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var i=this.detectionResultColumns[a].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var a=t[n].getRowNumber(),i=0,o=this.barcodeColumnCount+1;o>0&&i<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=r.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||e++)}return e},r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var a=t[n].getRowNumber(),i=0,o=1;o<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=r.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||e++)}return e},r.adjustRowNumberIfValid=function(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},r.prototype.adjustRowNumbers=function(e,t,n){var a,i;if(this.detectionResultColumns[e-1]!=null){var o=n[t],s=this.detectionResultColumns[e-1].getCodewords(),l=s;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var c=new Array(14);c[2]=s[t],c[3]=l[t],t>0&&(c[0]=n[t-1],c[4]=s[t-1],c[5]=l[t-1]),t>1&&(c[8]=n[t-2],c[10]=s[t-2],c[11]=l[t-2]),t<n.length-1&&(c[1]=n[t+1],c[6]=s[t+1],c[7]=l[t+1]),t<n.length-2&&(c[9]=n[t+2],c[12]=s[t+2],c[13]=l[t+2]);try{for(var d=Z0(c),h=d.next();!h.done;h=d.next()){var x=h.value;if(r.adjustRowNumber(o,x))return}}catch(g){a={error:g}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}}},r.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},r.prototype.setBoundingBox=function(e){this.boundingBox=e},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},r.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},r.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new ra,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){t.format("    |   ");continue}var i=this.detectionResultColumns[a].getCodewords()[n];if(i==null){t.format("    |   ");continue}t.format(" %3d|%3d",i.getRowNumber(),i.getValue())}t.format("%n")}return t.toString()},r}(),K0=function(){function r(e,t,n,a){this.rowNumber=r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},r.prototype.isValidRowNumber=function(e){return e!==r.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},r.prototype.getWidth=function(){return this.endX-this.startX},r.prototype.getStartX=function(){return this.startX},r.prototype.getEndX=function(){return this.endX},r.prototype.getBucket=function(){return this.bucket},r.prototype.getValue=function(){return this.value},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.setRowNumber=function(e){this.rowNumber=e},r.prototype.toString=function(){return this.rowNumber+"|"+this.value},r.BARCODE_ROW_UNKNOWN=-1,r}(),J0=function(){function r(){}return r.initialize=function(){for(var e=0;e<de.SYMBOL_TABLE.length;e++)for(var t=de.SYMBOL_TABLE[e],n=t&1,a=0;a<de.BARS_IN_MODULE;a++){for(var i=0;(t&1)===n;)i+=1,t>>=1;n=t&1,r.RATIOS_TABLE[e]||(r.RATIOS_TABLE[e]=new Array(de.BARS_IN_MODULE)),r.RATIOS_TABLE[e][de.BARS_IN_MODULE-a-1]=Math.fround(i/de.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},r.getDecodedValue=function(e){var t=r.getDecodedCodewordValue(r.sampleBitCounts(e));return t!==-1?t:r.getClosestDecodedValue(e)},r.sampleBitCounts=function(e){for(var t=fe.sum(e),n=new Int32Array(de.BARS_IN_MODULE),a=0,i=0,o=0;o<de.MODULES_IN_CODEWORD;o++){var s=t/(2*de.MODULES_IN_CODEWORD)+o*t/de.MODULES_IN_CODEWORD;i+e[a]<=s&&(i+=e[a],a++),n[a]++}return n},r.getDecodedCodewordValue=function(e){var t=r.getBitValue(e);return de.getCodeword(t)===-1?-1:t},r.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},r.getClosestDecodedValue=function(e){var t=fe.sum(e),n=new Array(de.BARS_IN_MODULE);if(t>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/t);var i=Xn.MAX_VALUE,o=-1;this.bSymbolTableReady||r.initialize();for(var s=0;s<r.RATIOS_TABLE.length;s++){for(var l=0,c=r.RATIOS_TABLE[s],d=0;d<de.BARS_IN_MODULE;d++){var h=Math.fround(c[d]-n[d]);if(l+=Math.fround(h*h),l>=i)break}l<i&&(i=l,o=de.SYMBOL_TABLE[s])}return o},r.bSymbolTableReady=!1,r.RATIOS_TABLE=new Array(de.SYMBOL_TABLE.length).map(function(e){return new Array(de.BARS_IN_MODULE)}),r}(),q0=function(){function r(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return r.prototype.getSegmentIndex=function(){return this.segmentIndex},r.prototype.setSegmentIndex=function(e){this.segmentIndex=e},r.prototype.getFileId=function(){return this.fileId},r.prototype.setFileId=function(e){this.fileId=e},r.prototype.getOptionalData=function(){return this.optionalData},r.prototype.setOptionalData=function(e){this.optionalData=e},r.prototype.isLastSegment=function(){return this.lastSegment},r.prototype.setLastSegment=function(e){this.lastSegment=e},r.prototype.getSegmentCount=function(){return this.segmentCount},r.prototype.setSegmentCount=function(e){this.segmentCount=e},r.prototype.getSender=function(){return this.sender||null},r.prototype.setSender=function(e){this.sender=e},r.prototype.getAddressee=function(){return this.addressee||null},r.prototype.setAddressee=function(e){this.addressee=e},r.prototype.getFileName=function(){return this.fileName},r.prototype.setFileName=function(e){this.fileName=e},r.prototype.getFileSize=function(){return this.fileSize},r.prototype.setFileSize=function(e){this.fileSize=e},r.prototype.getChecksum=function(){return this.checksum},r.prototype.setChecksum=function(e){this.checksum=e},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.setTimestamp=function(e){this.timestamp=e},r}(),jo=function(){function r(){}return r.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r}(),eu=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),tu=function(r){eu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="NullPointerException",e}(ct),ru=function(){function r(){}return r.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},r.prototype.writeBytesOffset=function(e,t,n){if(e==null)throw new tu;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new Jn;if(n===0)return;for(var a=0;a<n;a++)this.write(e[t+a])},r.prototype.flush=function(){},r.prototype.close=function(){},r}(),nu=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),au=function(r){nu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(ct),iu=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ou=function(r){iu(e,r);function e(t){t===void 0&&(t=32);var n=r.call(this)||this;if(n.count=0,t<0)throw new J("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var n=this.buf.length,a=n<<1;if(a-t<0&&(a=t),a<0){if(t<0)throw new au;a=le.MAX_VALUE}this.buf=Ue.copyOfUint8Array(this.buf,a)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,n,a){if(n<0||n>t.length||a<0||n+a-t.length>0)throw new Jn;this.ensureCapacity(this.count+a),_e.arraycopy(t,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Ue.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(ru),we;(function(r){r[r.ALPHA=0]="ALPHA",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.PUNCT=3]="PUNCT",r[r.ALPHA_SHIFT=4]="ALPHA_SHIFT",r[r.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(we||(we={}));function us(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Hr;function Lt(r){if(typeof Hr>"u"&&(Hr=us()),Hr===null)throw new Error("BigInt is not supported!");return Hr(r)}function su(){var r=[];r[0]=Lt(1);var e=Lt(900);r[1]=e;for(var t=2;t<16;t++)r[t]=r[t-1]*e;return r}var lu=function(){function r(){}return r.decode=function(e,t){var n=new oe(""),a=Le.ISO8859_1;n.enableDecoding(a);for(var i=1,o=e[i++],s=new q0;i<e[0];){switch(o){case r.TEXT_COMPACTION_MODE_LATCH:i=r.textCompaction(e,i,n);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:i=r.byteCompaction(o,e,a,i,n);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:i=r.numericCompaction(e,i,n);break;case r.ECI_CHARSET:Le.getCharacterSetECIByValue(e[i++]);break;case r.ECI_GENERAL_PURPOSE:i+=2;break;case r.ECI_USER_DEFINED:i++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=r.decodeMacroBlock(e,i,s);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new k;default:i--,i=r.textCompaction(e,i,n);break}if(i<e.length)o=e[i++];else throw k.getFormatInstance()}if(n.length()===0)throw k.getFormatInstance();var l=new an(null,n.toString(),null,t);return l.setOther(s),l},r.decodeMacroBlock=function(e,t,n){if(t+r.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw k.getFormatInstance();for(var a=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<r.NUMBER_OF_SEQUENCE_CODEWORDS;i++,t++)a[i]=e[t];n.setSegmentIndex(le.parseInt(r.decodeBase900toBase10(a,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new oe;t=r.textCompaction(e,t,o),n.setFileId(o.toString());var s=-1;for(e[t]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new oe;t=r.textCompaction(e,t+1,l),n.setFileName(l.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new oe;t=r.textCompaction(e,t+1,c),n.setSender(c.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new oe;t=r.textCompaction(e,t+1,d),n.setAddressee(d.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var h=new oe;t=r.numericCompaction(e,t+1,h),n.setSegmentCount(le.parseInt(h.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var x=new oe;t=r.numericCompaction(e,t+1,x),n.setTimestamp(jo.parseLong(x.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var g=new oe;t=r.numericCompaction(e,t+1,g),n.setChecksum(le.parseInt(g.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var p=new oe;t=r.numericCompaction(e,t+1,p),n.setFileSize(jo.parseLong(p.toString()));break;default:throw k.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw k.getFormatInstance()}if(s!==-1){var m=t-s;n.isLastSegment()&&m--,n.setOptionalData(Ue.copyOfRange(e,s,s+m))}return t},r.textCompaction=function(e,t,n){for(var a=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),o=0,s=!1;t<e[0]&&!s;){var l=e[t++];if(l<r.TEXT_COMPACTION_MODE_LATCH)a[o]=l/30,a[o+1]=l%30,o+=2;else switch(l){case r.TEXT_COMPACTION_MODE_LATCH:a[o++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[t++],i[o]=l,o++;break}}return r.decodeTextCompaction(a,i,o,n),t},r.decodeTextCompaction=function(e,t,n,a){for(var i=we.ALPHA,o=we.ALPHA,s=0;s<n;){var l=e[s],c="";switch(i){case we.ALPHA:if(l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case r.LL:i=we.LOWER;break;case r.ML:i=we.MIXED;break;case r.PS:o=i,i=we.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=we.ALPHA;break}break;case we.LOWER:if(l<26)c=String.fromCharCode(97+l);else switch(l){case 26:c=" ";break;case r.AS:o=i,i=we.ALPHA_SHIFT;break;case r.ML:i=we.MIXED;break;case r.PS:o=i,i=we.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=we.ALPHA;break}break;case we.MIXED:if(l<r.PL)c=r.MIXED_CHARS[l];else switch(l){case r.PL:i=we.PUNCT;break;case 26:c=" ";break;case r.LL:i=we.LOWER;break;case r.AL:i=we.ALPHA;break;case r.PS:o=i,i=we.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=we.ALPHA;break}break;case we.PUNCT:if(l<r.PAL)c=r.PUNCT_CHARS[l];else switch(l){case r.PAL:i=we.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=we.ALPHA;break}break;case we.ALPHA_SHIFT:if(i=o,l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:i=we.ALPHA;break}break;case we.PUNCT_SHIFT:if(i=o,l<r.PAL)c=r.PUNCT_CHARS[l];else switch(l){case r.PAL:i=we.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=we.ALPHA;break}break}c!==""&&a.append(c),s++}},r.byteCompaction=function(e,t,n,a,i){var o=new ou,s=0,l=0,c=!1;switch(e){case r.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),h=t[a++];a<t[0]&&!c;)switch(d[s++]=h,l=900*l+h,h=t[a++],h){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:a--,c=!0;break;default:if(s%5===0&&s>0){for(var x=0;x<6;++x)o.write(Number(Lt(l)>>Lt(8*(5-x))));l=0,s=0}break}a===t[0]&&h<r.TEXT_COMPACTION_MODE_LATCH&&(d[s++]=h);for(var g=0;g<s;g++)o.write(d[g]);break;case r.BYTE_COMPACTION_MODE_LATCH_6:for(;a<t[0]&&!c;){var p=t[a++];if(p<r.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+p;else switch(p){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:a--,c=!0;break}if(s%5===0&&s>0){for(var x=0;x<6;++x)o.write(Number(Lt(l)>>Lt(8*(5-x))));l=0,s=0}}break}return i.append(xt.decode(o.toByteArray(),n)),a},r.numericCompaction=function(e,t,n){for(var a=0,i=!1,o=new Int32Array(r.MAX_NUMERIC_CODEWORDS);t<e[0]&&!i;){var s=e[t++];if(t===e[0]&&(i=!0),s<r.TEXT_COMPACTION_MODE_LATCH)o[a]=s,a++;else switch(s){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,i=!0;break}(a%r.MAX_NUMERIC_CODEWORDS===0||s===r.NUMERIC_COMPACTION_MODE_LATCH||i)&&a>0&&(n.append(r.decodeBase900toBase10(o,a)),a=0)}return t},r.decodeBase900toBase10=function(e,t){for(var n=Lt(0),a=0;a<t;a++)n+=r.EXP900[t-a-1]*Lt(e[a]);var i=n.toString();if(i.charAt(0)!=="1")throw new k;return i.substring(1)},r.TEXT_COMPACTION_MODE_LATCH=900,r.BYTE_COMPACTION_MODE_LATCH=901,r.NUMERIC_COMPACTION_MODE_LATCH=902,r.BYTE_COMPACTION_MODE_LATCH_6=924,r.ECI_USER_DEFINED=925,r.ECI_GENERAL_PURPOSE=926,r.ECI_CHARSET=927,r.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,r.MACRO_PDF417_TERMINATOR=922,r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,r.MAX_NUMERIC_CODEWORDS=15,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,r.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,r.PL=25,r.LL=27,r.AS=27,r.ML=28,r.AL=28,r.PS=29,r.PAL=29,r.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,r.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",r.EXP900=us()?su():[],r.NUMBER_OF_SEQUENCE_CODEWORDS=2,r}(),Ar=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cu=function(){function r(){}return r.decode=function(e,t,n,a,i,o,s){for(var l=new Yn(e,t,n,a,i),c=null,d=null,h,x=!0;;x=!1){if(t!=null&&(c=r.getRowIndicatorColumn(e,l,t,!0,o,s)),a!=null&&(d=r.getRowIndicatorColumn(e,l,a,!1,o,s)),h=r.merge(c,d),h==null)throw T.getNotFoundInstance();var g=h.getBoundingBox();if(x&&g!=null&&(g.getMinY()<l.getMinY()||g.getMaxY()>l.getMaxY()))l=g;else break}h.setBoundingBox(l);var p=h.getBarcodeColumnCount()+1;h.setDetectionResultColumn(0,c),h.setDetectionResultColumn(p,d);for(var m=c!=null,b=1;b<=p;b++){var _=m?b:p-b;if(h.getDetectionResultColumn(_)===void 0){var y=void 0;_===0||_===p?y=new Bo(l,_===0):y=new cs(l),h.setDetectionResultColumn(_,y);for(var I=-1,O=I,D=l.getMinY();D<=l.getMaxY();D++){if(I=r.getStartColumn(h,_,D,m),I<0||I>l.getMaxX()){if(O===-1)continue;I=O}var P=r.detectCodeword(e,l.getMinX(),l.getMaxX(),m,I,D,o,s);P!=null&&(y.setCodeword(D,P),O=I,o=Math.min(o,P.getWidth()),s=Math.max(s,P.getWidth()))}}}return r.createDecoderResult(h)},r.merge=function(e,t){if(e==null&&t==null)return null;var n=r.getBarcodeMetadata(e,t);if(n==null)return null;var a=Yn.merge(r.adjustBoundingBox(e),r.adjustBoundingBox(t));return new Q0(n,a)},r.adjustBoundingBox=function(e){var t,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var i=r.getMax(a),o=0;try{for(var s=Ar(a),l=s.next();!l.done;l=s.next()){var c=l.value;if(o+=i-c,c>0)break}}catch(g){t={error:g}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}for(var d=e.getCodewords(),h=0;o>0&&d[h]==null;h++)o--;for(var x=0,h=a.length-1;h>=0&&(x+=i-a[h],!(a[h]>0));h--);for(var h=d.length-1;x>0&&d[h]==null;h--)x--;return e.getBoundingBox().addMissingRows(o,x,e.isLeft())},r.getMax=function(e){var t,n,a=-1;try{for(var i=Ar(e),o=i.next();!o.done;o=i.next()){var s=o.value;a=Math.max(a,s)}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},r.getBarcodeMetadata=function(e,t){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var a;return t==null||(a=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},r.getRowIndicatorColumn=function(e,t,n,a,i,o){for(var s=new Bo(t,a),l=0;l<2;l++)for(var c=l===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),h=Math.trunc(Math.trunc(n.getY()));h<=t.getMaxY()&&h>=t.getMinY();h+=c){var x=r.detectCodeword(e,0,e.getWidth(),a,d,h,i,o);x!=null&&(s.setCodeword(h,x),a?d=x.getStartX():d=x.getEndX())}return s},r.adjustCodewordCount=function(e,t){var n=t[0][1],a=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-r.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(i<1||i>de.MAX_CODEWORDS_IN_BARCODE)throw T.getNotFoundInstance();n.setValue(i)}else a[0]!==i&&n.setValue(i)},r.createDecoderResult=function(e){var t=r.createBarcodeMatrix(e);r.adjustCodewordCount(e,t);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var l=0;l<e.getBarcodeColumnCount();l++){var c=t[s][l+1].getValue(),d=s*e.getBarcodeColumnCount()+l;c.length===0?n.push(d):c.length===1?a[d]=c[0]:(o.push(d),i.push(c))}for(var h=new Array(i.length),x=0;x<h.length;x++)h[x]=i[x];return r.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,de.toIntArray(n),de.toIntArray(o),h)},r.createDecoderResultFromAmbiguousValues=function(e,t,n,a,i){for(var o=new Int32Array(a.length),s=100;s-- >0;){for(var l=0;l<o.length;l++)t[a[l]]=i[l][o[l]];try{return r.decodeCodewords(t,e,n)}catch(d){var c=d instanceof Me;if(!c)throw d}if(o.length===0)throw Me.getChecksumInstance();for(var l=0;l<o.length;l++)if(o[l]<i[l].length-1){o[l]++;break}else if(o[l]=0,l===o.length-1)throw Me.getChecksumInstance()}throw Me.getChecksumInstance()},r.createBarcodeMatrix=function(e){for(var t,n,a,i,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var l=0;l<o[s].length;l++)o[s][l]=new Sr;var c=0;try{for(var d=Ar(e.getDetectionResultColumns()),h=d.next();!h.done;h=d.next()){var x=h.value;if(x!=null)try{for(var g=(a=void 0,Ar(x.getCodewords())),p=g.next();!p.done;p=g.next()){var m=p.value;if(m!=null){var b=m.getRowNumber();if(b>=0){if(b>=o.length)continue;o[b][c].setValue(m.getValue())}}}}catch(_){a={error:_}}finally{try{p&&!p.done&&(i=g.return)&&i.call(g)}finally{if(a)throw a.error}}c++}}catch(_){t={error:_}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return o},r.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},r.getStartColumn=function(e,t,n,a){var i,o,s=a?1:-1,l=null;if(r.isValidBarcodeColumn(e,t-s)&&(l=e.getDetectionResultColumn(t-s).getCodeword(n)),l!=null)return a?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(t).getCodewordNearby(n),l!=null)return a?l.getStartX():l.getEndX();if(r.isValidBarcodeColumn(e,t-s)&&(l=e.getDetectionResultColumn(t-s).getCodewordNearby(n)),l!=null)return a?l.getEndX():l.getStartX();for(var c=0;r.isValidBarcodeColumn(e,t-s);){t-=s;try{for(var d=(i=void 0,Ar(e.getDetectionResultColumn(t).getCodewords())),h=d.next();!h.done;h=d.next()){var x=h.value;if(x!=null)return(a?x.getEndX():x.getStartX())+s*c*(x.getEndX()-x.getStartX())}}catch(g){i={error:g}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}c++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},r.detectCodeword=function(e,t,n,a,i,o,s,l){i=r.adjustCodewordStartColumn(e,t,n,a,i,o);var c=r.getModuleBitCount(e,t,n,a,i,o);if(c==null)return null;var d,h=fe.sum(c);if(a)d=i+h;else{for(var x=0;x<c.length/2;x++){var g=c[x];c[x]=c[c.length-1-x],c[c.length-1-x]=g}d=i,i=d-h}if(!r.checkCodewordSkew(h,s,l))return null;var p=J0.getDecodedValue(c),m=de.getCodeword(p);return m===-1?null:new K0(i,d,r.getCodewordBucketNumber(p),m)},r.getModuleBitCount=function(e,t,n,a,i,o){for(var s=i,l=new Int32Array(8),c=0,d=a?1:-1,h=a;(a?s<n:s>=t)&&c<l.length;)e.get(s,o)===h?(l[c]++,s+=d):(c++,h=!h);return c===l.length||s===(a?n:t)&&c===l.length-1?l:null},r.getNumberOfECCodeWords=function(e){return 2<<e},r.adjustCodewordStartColumn=function(e,t,n,a,i,o){for(var s=i,l=a?-1:1,c=0;c<2;c++){for(;(a?s>=t:s<n)&&a===e.get(s,o);){if(Math.abs(i-s)>r.CODEWORD_SKEW_SIZE)return i;s+=l}l=-l,a=!a}return s},r.checkCodewordSkew=function(e,t,n){return t-r.CODEWORD_SKEW_SIZE<=e&&e<=n+r.CODEWORD_SKEW_SIZE},r.decodeCodewords=function(e,t,n){if(e.length===0)throw k.getFormatInstance();var a=1<<t+1,i=r.correctErrors(e,n,a);r.verifyCodewordCount(e,a);var o=lu.decode(e,""+t);return o.setErrorsCorrected(i),o.setErasures(n.length),o},r.correctErrors=function(e,t,n){if(t!=null&&t.length>n/2+r.MAX_ERRORS||n<0||n>r.MAX_EC_CODEWORDS)throw Me.getChecksumInstance();return r.errorCorrection.decode(e,n,t)},r.verifyCodewordCount=function(e,t){if(e.length<4)throw k.getFormatInstance();var n=e[0];if(n>e.length)throw k.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw k.getFormatInstance()},r.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,a=t.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)t[a]++,e>>=1;return t},r.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},r.getCodewordBucketNumber_number=function(e){return r.getCodewordBucketNumber(r.getBitCountForCodeword(e))},r.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},r.toString=function(e){for(var t=new ra,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var i=e[n][a];i.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()},r.CODEWORD_SKEW_SIZE=2,r.MAX_ERRORS=3,r.MAX_EC_CODEWORDS=512,r.errorCorrection=new H0,r}(),uu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tn=function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=r.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw T.getNotFoundInstance();return n[0]},r.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return r.decode(e,t,!0)}catch(n){throw n instanceof k||n instanceof Me?T.getNotFoundInstance():n}},r.decode=function(e,t,n){var a,i,o=new Array,s=F0.detectMultiple(e,t,n);try{for(var l=uu(s.getPoints()),c=l.next();!c.done;c=l.next()){var d=c.value,h=cu.decode(s.getBits(),d[4],d[5],d[6],d[7],r.getMinCodewordWidth(d),r.getMaxCodewordWidth(d)),x=new rt(h.getText(),h.getRawBytes(),void 0,d,K.PDF_417);x.putMetadata(Qe.ERROR_CORRECTION_LEVEL,h.getECLevel());var g=h.getOther();g!=null&&x.putMetadata(Qe.PDF417_EXTRA_METADATA,g),o.push(x)}}catch(p){a={error:p}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}return o.map(function(p){return p})},r.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMinWidth=function(e,t){return e==null||t==null?le.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(r.getMaxWidth(e[0],e[4]),r.getMaxWidth(e[6],e[2])*de.MODULES_IN_CODEWORD/de.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(e[1],e[5]),r.getMaxWidth(e[7],e[3])*de.MODULES_IN_CODEWORD/de.MODULES_IN_STOP_PATTERN)))},r.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(r.getMinWidth(e[0],e[4]),r.getMinWidth(e[6],e[2])*de.MODULES_IN_CODEWORD/de.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(e[1],e[5]),r.getMinWidth(e[7],e[3])*de.MODULES_IN_CODEWORD/de.MODULES_IN_STOP_PATTERN)))},r.prototype.reset=function(){},r}(),du=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fo=function(r){du(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReaderException",e}(ct),ko=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ds=function(){function r(){}return r.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},r.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},r.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(ye.TRY_HARDER)!==void 0,n=e==null?null:e.get(ye.POSSIBLE_FORMATS),a=new Array;if(n!=null){var i=n.some(function(o){return o===K.UPC_A||o===K.UPC_E||o===K.EAN_13||o===K.EAN_8||o===K.CODABAR||o===K.CODE_39||o===K.CODE_93||o===K.CODE_128||o===K.ITF||o===K.RSS_14||o===K.RSS_EXPANDED});i&&!t&&a.push(new ar(e)),n.includes(K.QR_CODE)&&a.push(new en),n.includes(K.DATA_MATRIX)&&a.push(new qr),n.includes(K.AZTEC)&&a.push(new Kr),n.includes(K.PDF_417)&&a.push(new tn),i&&t&&a.push(new ar(e))}a.length===0&&(t||a.push(new ar(e)),a.push(new en),a.push(new qr),a.push(new Kr),a.push(new tn),t&&a.push(new ar(e))),this.readers=a},r.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var n=ko(this.readers),a=n.next();!a.done;a=n.next()){var i=a.value;i.reset()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.decodeInternal=function(e){var t,n;if(this.readers===null)throw new Fo("No readers where selected, nothing can be read.");try{for(var a=ko(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof Fo)continue}}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}throw new T("No MultiFormat Readers were able to detect the code.")},r}(),fu=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),hu=function(r){fu(e,r);function e(t,n){t===void 0&&(t=null),n===void 0&&(n=500);var a=this,i=new ds;return i.setHints(t),a=r.call(this,i,n)||this,a}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(lr),xu=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){xu(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new tn,t)||this}return e})(lr);var gu=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){gu(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new en,t)||this}return e})(lr);var Zn;(function(r){r[r.ERROR_CORRECTION=0]="ERROR_CORRECTION",r[r.CHARACTER_SET=1]="CHARACTER_SET",r[r.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",r[r.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",r[r.MIN_SIZE=4]="MIN_SIZE",r[r.MAX_SIZE=5]="MAX_SIZE",r[r.MARGIN=6]="MARGIN",r[r.PDF417_COMPACT=7]="PDF417_COMPACT",r[r.PDF417_COMPACTION=8]="PDF417_COMPACTION",r[r.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",r[r.AZTEC_LAYERS=10]="AZTEC_LAYERS",r[r.QR_VERSION=11]="QR_VERSION",r[r.GS1_FORMAT=12]="GS1_FORMAT",r[r.FORCE_C40=13]="FORCE_C40"})(Zn||(Zn={}));const $r=Zn;var fs=function(){function r(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Ut(e,Int32Array.from([1])))}return r.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],a=this.field,i=t.length;i<=e;i++){var o=n.multiply(new Ut(a,Int32Array.from([1,a.exp(i-1+a.getGeneratorBase())])));t.push(o),n=o}return t[e]},r.prototype.encode=function(e,t){if(t===0)throw new J("No error correction bytes");var n=e.length-t;if(n<=0)throw new J("No data bytes provided");var a=this.buildGenerator(t),i=new Int32Array(n);_e.arraycopy(e,0,i,0,n);var o=new Ut(this.field,i);o=o.multiplyByMonomial(t,1);for(var s=o.divide(a)[1],l=s.getCoefficients(),c=t-l.length,d=0;d<c;d++)e[n+d]=0;_e.arraycopy(l,0,e,n+c,l.length)},r}(),Ir=function(){function r(){}return r.applyMaskPenaltyRule1=function(e){return r.applyMaskPenaltyRule1Internal(e,!0)+r.applyMaskPenaltyRule1Internal(e,!1)},r.applyMaskPenaltyRule2=function(e){for(var t=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i-1;o++)for(var s=n[o],l=0;l<a-1;l++){var c=s[l];c===s[l+1]&&c===n[o+1][l]&&c===n[o+1][l+1]&&t++}return r.N2*t},r.applyMaskPenaltyRule3=function(e){for(var t=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var s=0;s<a;s++){var l=n[o];s+6<a&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(r.isWhiteHorizontal(l,s-4,s)||r.isWhiteHorizontal(l,s+7,s+11))&&t++,o+6<i&&n[o][s]===1&&n[o+1][s]===0&&n[o+2][s]===1&&n[o+3][s]===1&&n[o+4][s]===1&&n[o+5][s]===0&&n[o+6][s]===1&&(r.isWhiteVertical(n,s,o-4,o)||r.isWhiteVertical(n,s,o+7,o+11))&&t++}return t*r.N3},r.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var a=t;a<n;a++)if(e[a]===1)return!1;return!0},r.isWhiteVertical=function(e,t,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var i=n;i<a;i++)if(e[i][t]===1)return!1;return!0},r.applyMaskPenaltyRule4=function(e){for(var t=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var s=n[o],l=0;l<a;l++)s[l]===1&&t++;var c=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(t*2-c)*10/c);return d*r.N4},r.getDataMaskBit=function(e,t,n){var a,i;switch(e){case 0:a=n+t&1;break;case 1:a=n&1;break;case 2:a=t%3;break;case 3:a=(n+t)%3;break;case 4:a=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,a=(i&1)+i%3;break;case 6:i=n*t,a=(i&1)+i%3&1;break;case 7:i=n*t,a=i%3+(n+t&1)&1;break;default:throw new J("Invalid mask pattern: "+e)}return a===0},r.applyMaskPenaltyRule1Internal=function(e,t){for(var n=0,a=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<a;s++){for(var l=0,c=-1,d=0;d<i;d++){var h=t?o[s][d]:o[d][s];h===c?l++:(l>=5&&(n+=r.N1+(l-5)),l=1,c=h)}l>=5&&(n+=r.N1+(l-5))}return n},r.N1=3,r.N2=3,r.N3=40,r.N4=10,r}(),pu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vu=function(){function r(e,t){this.width=e,this.height=t;for(var n=new Array(t),a=0;a!==t;a++)n[a]=new Uint8Array(e);this.bytes=n}return r.prototype.getHeight=function(){return this.height},r.prototype.getWidth=function(){return this.width},r.prototype.get=function(e,t){return this.bytes[t][e]},r.prototype.getArray=function(){return this.bytes},r.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},r.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},r.prototype.clear=function(e){var t,n;try{for(var a=pu(this.bytes),i=a.next();!i.done;i=a.next()){var o=i.value;Ue.fill(o,e)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var i=this.bytes[n],o=t.bytes[n],s=0,l=this.width;s<l;++s)if(i[s]!==o[s])return!1;return!0},r.prototype.toString=function(){for(var e=new oe,t=0,n=this.height;t<n;++t){for(var a=this.bytes[t],i=0,o=this.width;i<o;++i)switch(a[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},r}(),Qn=function(){function r(){this.maskPattern=-1}return r.prototype.getMode=function(){return this.mode},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getVersion=function(){return this.version},r.prototype.getMaskPattern=function(){return this.maskPattern},r.prototype.getMatrix=function(){return this.matrix},r.prototype.toString=function(){var e=new oe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},r.prototype.setMode=function(e){this.mode=e},r.prototype.setECLevel=function(e){this.ecLevel=e},r.prototype.setVersion=function(e){this.version=e},r.prototype.setMaskPattern=function(e){this.maskPattern=e},r.prototype.setMatrix=function(e){this.matrix=e},r.isValidMaskPattern=function(e){return e>=0&&e<r.NUM_MASK_PATTERNS},r.NUM_MASK_PATTERNS=8,r}(),mu=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ee=function(r){mu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="WriterException",e}(ct),Lo=function(){function r(){}return r.clearMatrix=function(e){e.clear(255)},r.buildMatrix=function(e,t,n,a,i){r.clearMatrix(i),r.embedBasicPatterns(n,i),r.embedTypeInfo(t,a,i),r.maybeEmbedVersionInfo(n,i),r.embedDataBits(e,a,i)},r.embedBasicPatterns=function(e,t){r.embedPositionDetectionPatternsAndSeparators(t),r.embedDarkDotAtLeftBottomCorner(t),r.maybeEmbedPositionAdjustmentPatterns(e,t),r.embedTimingPatterns(t)},r.embedTypeInfo=function(e,t,n){var a=new Xe;r.makeTypeInfoBits(e,t,a);for(var i=0,o=a.getSize();i<o;++i){var s=a.get(a.getSize()-1-i),l=r.TYPE_INFO_COORDINATES[i],c=l[0],d=l[1];if(n.setBoolean(c,d,s),i<8){var h=n.getWidth()-i-1,x=8;n.setBoolean(h,x,s)}else{var h=8,x=n.getHeight()-7+(i-8);n.setBoolean(h,x,s)}}},r.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var n=new Xe;r.makeVersionInfoBits(e,n);for(var a=6*3-1,i=0;i<6;++i)for(var o=0;o<3;++o){var s=n.get(a);a--,t.setBoolean(i,t.getHeight()-11+o,s),t.setBoolean(t.getHeight()-11+o,i,s)}}},r.embedDataBits=function(e,t,n){for(var a=0,i=-1,o=n.getWidth()-1,s=n.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<n.getHeight();){for(var l=0;l<2;++l){var c=o-l;if(r.isEmpty(n.get(c,s))){var d=void 0;a<e.getSize()?(d=e.get(a),++a):d=!1,t!==255&&Ir.getDataMaskBit(t,c,s)&&(d=!d),n.setBoolean(c,s,d)}}s+=i}i=-i,s+=i,o-=2}if(a!==e.getSize())throw new Ee("Not all bits consumed: "+a+"/"+e.getSize())},r.findMSBSet=function(e){return 32-le.numberOfLeadingZeros(e)},r.calculateBCHCode=function(e,t){if(t===0)throw new J("0 polynomial");var n=r.findMSBSet(t);for(e<<=n-1;r.findMSBSet(e)>=n;)e^=t<<r.findMSBSet(e)-n;return e},r.makeTypeInfoBits=function(e,t,n){if(!Qn.isValidMaskPattern(t))throw new Ee("Invalid mask pattern");var a=e.getBits()<<3|t;n.appendBits(a,5);var i=r.calculateBCHCode(a,r.TYPE_INFO_POLY);n.appendBits(i,10);var o=new Xe;if(o.appendBits(r.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new Ee("should not happen but we got: "+n.getSize())},r.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var n=r.calculateBCHCode(e.getVersionNumber(),r.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new Ee("should not happen but we got: "+t.getSize())},r.isEmpty=function(e){return e===255},r.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var n=(t+1)%2;r.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),r.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}},r.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Ee;e.setNumber(8,e.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(e,t,n){for(var a=0;a<8;++a){if(!r.isEmpty(n.get(e+a,t)))throw new Ee;n.setNumber(e+a,t,0)}},r.embedVerticalSeparationPattern=function(e,t,n){for(var a=0;a<7;++a){if(!r.isEmpty(n.get(e,t+a)))throw new Ee;n.setNumber(e,t+a,0)}},r.embedPositionAdjustmentPattern=function(e,t,n){for(var a=0;a<5;++a)for(var i=r.POSITION_ADJUSTMENT_PATTERN[a],o=0;o<5;++o)n.setNumber(e+o,t+a,i[o])},r.embedPositionDetectionPattern=function(e,t,n){for(var a=0;a<7;++a)for(var i=r.POSITION_DETECTION_PATTERN[a],o=0;o<7;++o)n.setNumber(e+o,t+a,i[o])},r.embedPositionDetectionPatternsAndSeparators=function(e){var t=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,e),r.embedPositionDetectionPattern(e.getWidth()-t,0,e),r.embedPositionDetectionPattern(0,e.getWidth()-t,e);var n=8;r.embedHorizontalSeparationPattern(0,n-1,e),r.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),r.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;r.embedVerticalSeparationPattern(a,0,e),r.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),r.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},r.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],i=0,o=a.length;i!==o;i++){var s=a[i];if(s>=0)for(var l=0;l!==o;l++){var c=a[l];c>=0&&r.isEmpty(t.get(c,s))&&r.embedPositionAdjustmentPattern(c-2,s-2,t)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r}(),yu=function(){function r(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return r.prototype.getDataBytes=function(){return this.dataBytes},r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},r}(),Uo=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.calculateMaskPenalty=function(e){return Ir.applyMaskPenaltyRule1(e)+Ir.applyMaskPenaltyRule2(e)+Ir.applyMaskPenaltyRule3(e)+Ir.applyMaskPenaltyRule4(e)},r.encode=function(e,t,n){n===void 0&&(n=null);var a=r.DEFAULT_BYTE_MODE_ENCODING,i=n!==null&&n.get($r.CHARACTER_SET)!==void 0;i&&(a=n.get($r.CHARACTER_SET).toString());var o=this.chooseMode(e,a),s=new Xe;if(o===Se.BYTE&&(i||r.DEFAULT_BYTE_MODE_ENCODING!==a)){var l=Le.getCharacterSetECIByName(a);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(o,s);var c=new Xe;this.appendBytes(e,o,c,a);var d;if(n!==null&&n.get($r.QR_VERSION)!==void 0){var h=Number.parseInt(n.get($r.QR_VERSION).toString(),10);d=Qt.getVersionForNumber(h);var x=this.calculateBitsNeeded(o,s,c,d);if(!this.willFit(x,d,t))throw new Ee("Data too big for requested version")}else d=this.recommendVersion(t,o,s,c);var g=new Xe;g.appendBitArray(s);var p=o===Se.BYTE?c.getSizeInBytes():e.length;this.appendLengthInfo(p,d,o,g),g.appendBitArray(c);var m=d.getECBlocksForLevel(t),b=d.getTotalCodewords()-m.getTotalECCodewords();this.terminateBits(b,g);var _=this.interleaveWithECBytes(g,d.getTotalCodewords(),b,m.getNumBlocks()),y=new Qn;y.setECLevel(t),y.setMode(o),y.setVersion(d);var I=d.getDimensionForVersion(),O=new vu(I,I),D=this.chooseMaskPattern(_,t,d,O);return y.setMaskPattern(D),Lo.buildMatrix(_,t,d,D,O),y.setMatrix(O),y},r.recommendVersion=function(e,t,n,a){var i=this.calculateBitsNeeded(t,n,a,Qt.getVersionForNumber(1)),o=this.chooseVersion(i,e),s=this.calculateBitsNeeded(t,n,a,o);return this.chooseVersion(s,e)},r.calculateBitsNeeded=function(e,t,n,a){return t.getSize()+e.getCharacterCountBits(a)+n.getSize()},r.getAlphanumericCode=function(e){return e<r.ALPHANUMERIC_TABLE.length?r.ALPHANUMERIC_TABLE[e]:-1},r.chooseMode=function(e,t){if(t===void 0&&(t=null),Le.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Se.KANJI;for(var n=!1,a=!1,i=0,o=e.length;i<o;++i){var s=e.charAt(i);if(r.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)a=!0;else return Se.BYTE}return a?Se.ALPHANUMERIC:n?Se.NUMERIC:Se.BYTE},r.isOnlyDoubleByteKanji=function(e){var t;try{t=xt.encode(e,Le.SJIS)}catch{return!1}var n=t.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var i=t[a]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0},r.chooseMaskPattern=function(e,t,n,a){for(var i=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<Qn.NUM_MASK_PATTERNS;s++){Lo.buildMatrix(e,t,n,s,a);var l=this.calculateMaskPenalty(a);l<i&&(i=l,o=s)}return o},r.chooseVersion=function(e,t){for(var n=1;n<=40;n++){var a=Qt.getVersionForNumber(n);if(r.willFit(e,a,t))return a}throw new Ee("Data too big")},r.willFit=function(e,t,n){var a=t.getTotalCodewords(),i=t.getECBlocksForLevel(n),o=i.getTotalECCodewords(),s=a-o,l=(e+7)/8;return s>=l},r.terminateBits=function(e,t){var n=e*8;if(t.getSize()>n)throw new Ee("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var a=0;a<4&&t.getSize()<n;++a)t.appendBit(!1);var i=t.getSize()&7;if(i>0)for(var a=i;a<8;a++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),a=0;a<o;++a)t.appendBits(a&1?17:236,8);if(t.getSize()!==n)throw new Ee("Bits size does not equal capacity")},r.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,a,i,o){if(a>=n)throw new Ee("Block ID too large");var s=e%n,l=n-s,c=Math.floor(e/n),d=c+1,h=Math.floor(t/n),x=h+1,g=c-h,p=d-x;if(g!==p)throw new Ee("EC bytes mismatch");if(n!==l+s)throw new Ee("RS blocks mismatch");if(e!==(h+g)*l+(x+p)*s)throw new Ee("Total bytes mismatch");a<l?(i[0]=h,o[0]=g):(i[0]=x,o[0]=p)},r.interleaveWithECBytes=function(e,t,n,a){var i,o,s,l;if(e.getSizeInBytes()!==n)throw new Ee("Number of bits and data bytes does not match");for(var c=0,d=0,h=0,x=new Array,g=0;g<a;++g){var p=new Int32Array(1),m=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(t,n,a,g,p,m);var b=p[0],_=new Uint8Array(b);e.toBytes(8*c,_,0,b);var y=r.generateECBytes(_,m[0]);x.push(new yu(_,y)),d=Math.max(d,b),h=Math.max(h,y.length),c+=p[0]}if(n!==c)throw new Ee("Data bytes does not match offset");for(var I=new Xe,g=0;g<d;++g)try{for(var O=(i=void 0,Uo(x)),D=O.next();!D.done;D=O.next()){var P=D.value,_=P.getDataBytes();g<_.length&&I.appendBits(_[g],8)}}catch(Y){i={error:Y}}finally{try{D&&!D.done&&(o=O.return)&&o.call(O)}finally{if(i)throw i.error}}for(var g=0;g<h;++g)try{for(var F=(s=void 0,Uo(x)),V=F.next();!V.done;V=F.next()){var P=V.value,y=P.getErrorCorrectionBytes();g<y.length&&I.appendBits(y[g],8)}}catch(Y){s={error:Y}}finally{try{V&&!V.done&&(l=F.return)&&l.call(F)}finally{if(s)throw s.error}}if(t!==I.getSizeInBytes())throw new Ee("Interleaving error: "+t+" and "+I.getSizeInBytes()+" differ.");return I},r.generateECBytes=function(e,t){for(var n=e.length,a=new Int32Array(n+t),i=0;i<n;i++)a[i]=e[i]&255;new fs(lt.QR_CODE_FIELD_256).encode(a,t);for(var o=new Uint8Array(t),i=0;i<t;i++)o[i]=a[n+i];return o},r.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},r.appendLengthInfo=function(e,t,n,a){var i=n.getCharacterCountBits(t);if(e>=1<<i)throw new Ee(e+" is bigger than "+((1<<i)-1));a.appendBits(e,i)},r.appendBytes=function(e,t,n,a){switch(t){case Se.NUMERIC:r.appendNumericBytes(e,n);break;case Se.ALPHANUMERIC:r.appendAlphanumericBytes(e,n);break;case Se.BYTE:r.append8BitBytes(e,n,a);break;case Se.KANJI:r.appendKanjiBytes(e,n);break;default:throw new Ee("Invalid mode: "+t)}},r.getDigit=function(e){return e.charCodeAt(0)-48},r.isDigit=function(e){var t=r.getDigit(e);return t>=0&&t<=9},r.appendNumericBytes=function(e,t){for(var n=e.length,a=0;a<n;){var i=r.getDigit(e.charAt(a));if(a+2<n){var o=r.getDigit(e.charAt(a+1)),s=r.getDigit(e.charAt(a+2));t.appendBits(i*100+o*10+s,10),a+=3}else if(a+1<n){var o=r.getDigit(e.charAt(a+1));t.appendBits(i*10+o,7),a+=2}else t.appendBits(i,4),a++}},r.appendAlphanumericBytes=function(e,t){for(var n=e.length,a=0;a<n;){var i=r.getAlphanumericCode(e.charCodeAt(a));if(i===-1)throw new Ee;if(a+1<n){var o=r.getAlphanumericCode(e.charCodeAt(a+1));if(o===-1)throw new Ee;t.appendBits(i*45+o,11),a+=2}else t.appendBits(i,6),a++}},r.append8BitBytes=function(e,t,n){var a;try{a=xt.encode(e,n)}catch(l){throw new Ee(l)}for(var i=0,o=a.length;i!==o;i++){var s=a[i];t.appendBits(s,8)}},r.appendKanjiBytes=function(e,t){var n;try{n=xt.encode(e,Le.SJIS)}catch(h){throw new Ee(h)}for(var a=n.length,i=0;i<a;i+=2){var o=n[i]&255,s=n[i+1]&255,l=o<<8&4294967295|s,c=-1;if(l>=33088&&l<=40956?c=l-33088:l>=57408&&l<=60351&&(c=l-49472),c===-1)throw new Ee("Invalid byte sequence");var d=(c>>8)*192+(c&255);t.appendBits(d,13)}},r.appendECI=function(e,t){t.appendBits(Se.ECI.getBits(),4),t.appendBits(e.getValue(),8)},r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),r.DEFAULT_BYTE_MODE_ENCODING=Le.UTF8.getName(),r})();var wu=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){wu(e,r);function e(t,n,a,i,o,s,l,c){var d=r.call(this,s,l)||this;if(d.yuvData=t,d.dataWidth=n,d.dataHeight=a,d.left=i,d.top=o,i+s>n||o+l>a)throw new J("Crop rectangle does not fit within image data.");return c&&d.reverseHorizontal(s,l),d}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new J("Requested row is outside the image: "+t);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(t+this.top)*this.dataWidth+this.left;return _e.arraycopy(this.yuvData,i,n,0,a),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=t*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return _e.arraycopy(this.yuvData,o,i,0,a),i;for(var s=0;s<n;s++){var l=s*t;_e.arraycopy(this.yuvData,o,i,l,t),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,a,i,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(t*n),i=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var l=s*t,c=0;c<t;c++){var d=i[o+c*e.THUMBNAIL_SCALE_FACTOR]&255;a[l+c]=4278190080|d*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,n){for(var a=this.yuvData,i=0,o=this.top*this.dataWidth+this.left;i<n;i++,o+=this.dataWidth)for(var s=o+t/2,l=o,c=o+t-1;l<s;l++,c--){var d=a[l];a[l]=a[c],a[c]=d}},e.prototype.invert=function(){return new nn(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Nr);var bu=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){bu(e,r);function e(t,n,a,i,o,s,l){var c=r.call(this,n,a)||this;if(c.dataWidth=i,c.dataHeight=o,c.left=s,c.top=l,t.BYTES_PER_ELEMENT===4){for(var d=n*a,h=new Uint8ClampedArray(d),x=0;x<d;x++){var g=t[x],p=g>>16&255,m=g>>7&510,b=g&255;h[x]=(p+m+b)/4&255}c.luminances=h}else c.luminances=t;if(i===void 0&&(c.dataWidth=n),o===void 0&&(c.dataHeight=a),s===void 0&&(c.left=0),l===void 0&&(c.top=0),c.left+n>c.dataWidth||c.top+a>c.dataHeight)throw new J("Crop rectangle does not fit within image data.");return c}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new J("Requested row is outside the image: "+t);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(t+this.top)*this.dataWidth+this.left;return _e.arraycopy(this.luminances,i,n,0,a),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=t*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return _e.arraycopy(this.luminances,o,i,0,a),i;for(var s=0;s<n;s++){var l=s*t;_e.arraycopy(this.luminances,o,i,l,t),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return new e(this.luminances,a,i,this.dataWidth,this.dataHeight,this.left+t,this.top+n)},e.prototype.invert=function(){return new nn(this)},e})(Nr);var _u=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Au=function(r){_u(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Le),Cu=function(){function r(){}return r.ISO_8859_1=Le.ISO8859_1,r}(),Kn,Eu=301,Su=function(r,e){for(var t=1,n=0;n<255;n++)e[n]=t,r[t]=n,t*=2,t>=256&&(t^=Eu);return{LOG:r,ALOG:e}};Kn=Su([],[]),Kn.LOG;Kn.ALOG;var Go;(function(r){r[r.FORCE_NONE=0]="FORCE_NONE",r[r.FORCE_SQUARE=1]="FORCE_SQUARE",r[r.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Go||(Go={}));var Vo=129,hs=230,Iu=231,Nu=235,Ou=236,Tu=237,Ru=238,Du=239,Pu=240,jn=254,Mu=254,Ho="[)>05",$o="[)>06",Xo="",me=0,Ze=1,it=2,Fe=3,$e=4,tt=5,Bu=function(){function r(){}return r.prototype.getEncodingMode=function(){return me},r.prototype.encode=function(e){var t=_t.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=_t.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case tt:e.writeCodeword(Iu),e.signalEncoderChange(tt);return;case Ze:e.writeCodeword(hs),e.signalEncoderChange(Ze);return;case Fe:e.writeCodeword(Ru),e.signalEncoderChange(Fe);break;case it:e.writeCodeword(Du),e.signalEncoderChange(it);break;case $e:e.writeCodeword(Pu),e.signalEncoderChange($e);break;default:throw new Error("Illegal mode: "+a)}else _t.isExtendedASCII(n)?(e.writeCodeword(Nu),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},r.prototype.encodeASCIIDigits=function(e,t){if(_t.isDigit(e)&&_t.isDigit(t)){var n=(e-48)*10+(t-48);return n+130}throw new Error("not digits: "+e+t)},r}(),ju=function(){function r(){}return r.prototype.getEncodingMode=function(){return tt},r.prototype.encode=function(e){var t=new oe;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();t.append(n),e.pos++;var a=_t.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(me);break}}var i=t.length()-1,o=1,s=e.getCodewordCount()+i+o;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||l)if(i<=249)t.setCharAt(0,ue.getCharAt(i));else if(i<=1555)t.setCharAt(0,ue.getCharAt(Math.floor(i/250)+249)),t.insert(1,ue.getCharAt(i%250));else throw new Error("Message length not in valid ranges: "+i);for(var c=0,n=t.length();c<n;c++)e.writeCodeword(this.randomize255State(t.charAt(c).charCodeAt(0),e.getCodewordCount()+1))},r.prototype.randomize255State=function(e,t){var n=149*t%255+1,a=e+n;return a<=255?a:a-256},r}(),na=function(){function r(){}return r.prototype.getEncodingMode=function(){return Ze},r.prototype.encodeMaximal=function(e){for(var t=new oe,n=0,a=e.pos,i=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,t),t.length()%3===0&&(a=e.pos,i=t.length())}if(i!==t.length()){var s=Math.floor(t.length()/3*2),l=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l,d=Math.floor(t.length()%3);(d===2&&c!==2||d===1&&(n>3||c!==1))&&(e.pos=a)}t.length()>0&&e.writeCodeword(hs),this.handleEOD(e,t)},r.prototype.encode=function(e){for(var t=new oe;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,t),i=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+i;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var l=new oe;for(t.length()%3===2&&s!==2&&(a=this.backtrackOneCharacter(e,t,l,a));t.length()%3===1&&(a>3||s!==1);)a=this.backtrackOneCharacter(e,t,l,a);break}var c=t.length();if(c%3===0){var d=_t.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(me);break}}}this.handleEOD(e,t)},r.prototype.backtrackOneCharacter=function(e,t,n,a){var i=t.length(),o=t.toString().substring(0,i-a);t.setLengthToZero(),t.append(o),e.pos--;var s=e.getCurrentChar();return a=this.encodeChar(s,n),e.resetSymbolInfo(),a},r.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},r.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),a=t.length()%3,i=e.getCodewordCount()+n;e.updateSymbolInfo(i);var o=e.getSymbolInfo().getDataCapacity()-i;if(a===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(jn)}else if(o===1&&a===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(jn),e.pos--}else if(a===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(jn)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(me)},r.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var n=2;return n+=this.encodeChar(e-128,t),n},r.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,a=t%256,i=new oe;return i.append(n),i.append(a),i.toString()},r}(),Fu=function(){function r(){}return r.prototype.getEncodingMode=function(){return $e},r.prototype.encode=function(e){for(var t=new oe;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,t),e.pos++;var a=t.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var i=t.toString().substring(4);t.setLengthToZero(),t.append(i);var o=_t.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(me);break}}}t.append(ue.getCharAt(31)),this.handleEOD(e,t)},r.prototype.handleEOD=function(e,t){try{var n=t.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),i=e.getRemainingCharacters();if(i>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),i<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,s=this.encodeToCodewords(t.toString()),l=!e.hasMoreCharacters(),c=l&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(c=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}c?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(me)}},r.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(ue.getCharAt(e-64)):_t.illegalCharacter(ue.getCharAt(e))},r.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=t>=2?e.charAt(1).charCodeAt(0):0,i=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(a<<12)+(i<<6)+o,l=s>>16&255,c=s>>8&255,d=s&255,h=new oe;return h.append(l),t>=2&&h.append(c),t>=3&&h.append(d),h.toString()},r}(),ku=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Lu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ge=function(){function r(e,t,n,a,i,o,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=i,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=l}return r.lookup=function(e,t,n,a,i){var o,s;t===void 0&&(t=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!0);try{for(var l=Lu(Gu),c=l.next();!c.done;c=l.next()){var d=c.value;if(!(t===1&&d.rectangular)&&!(t===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(d.getSymbolWidth()>a.getWidth()||d.getSymbolHeight()>a.getHeight()))&&e<=d.dataCapacity)return d}}catch(h){o={error:h}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}if(i)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},r.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},r.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},r.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},r.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},r.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},r.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},r.prototype.getDataCapacity=function(){return this.dataCapacity},r.prototype.getErrorCodewords=function(){return this.errorCodewords},r.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},r.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},r}(),Uu=function(r){ku(e,r);function e(){return r.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(ge),Gu=[new ge(!1,3,5,8,8,1),new ge(!1,5,7,10,10,1),new ge(!0,5,7,16,6,1),new ge(!1,8,10,12,12,1),new ge(!0,10,11,14,6,2),new ge(!1,12,12,14,14,1),new ge(!0,16,14,24,10,1),new ge(!1,18,14,16,16,1),new ge(!1,22,18,18,18,1),new ge(!0,22,18,16,10,2),new ge(!1,30,20,20,20,1),new ge(!0,32,24,16,14,2),new ge(!1,36,24,22,22,1),new ge(!1,44,28,24,24,1),new ge(!0,49,28,22,14,2),new ge(!1,62,36,14,14,4),new ge(!1,86,42,16,16,4),new ge(!1,114,48,18,18,4),new ge(!1,144,56,20,20,4),new ge(!1,174,68,22,22,4),new ge(!1,204,84,24,24,4,102,42),new ge(!1,280,112,14,14,16,140,56),new ge(!1,368,144,16,16,16,92,36),new ge(!1,456,192,18,18,16,114,48),new ge(!1,576,224,20,20,16,144,56),new ge(!1,696,272,22,22,16,174,68),new ge(!1,816,336,24,24,16,136,56),new ge(!1,1050,408,18,18,36,175,68),new ge(!1,1304,496,20,20,36,163,62),new Uu],Vu=function(){function r(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(s){return s.charCodeAt(0)}),n=new oe,a=0,i=t.length;a<i;a++){var o=String.fromCharCode(t[a]&255);if(o==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new oe,this.newEncoding=-1}return r.prototype.setSymbolShape=function(e){this.shape=e},r.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},r.prototype.getMessage=function(){return this.msg},r.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},r.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCodewords=function(){return this.codewords},r.prototype.writeCodewords=function(e){this.codewords.append(e)},r.prototype.writeCodeword=function(e){this.codewords.append(e)},r.prototype.getCodewordCount=function(){return this.codewords.length()},r.prototype.getNewEncoding=function(){return this.newEncoding},r.prototype.signalEncoderChange=function(e){this.newEncoding=e},r.prototype.resetEncoderSignal=function(){this.newEncoding=-1},r.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},r.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},r.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},r.prototype.getSymbolInfo=function(){return this.symbolInfo},r.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ge.lookup(e,this.shape,this.minSize,this.maxSize,!0))},r.prototype.resetSymbolInfo=function(){this.symbolInfo=null},r}(),Hu=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$u=function(r){Hu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Fe},e.prototype.encode=function(t){for(var n=new oe;t.hasMoreCharacters();){var a=t.getCurrentChar();t.pos++,this.encodeChar(a,n);var i=n.length();if(i%3===0){this.writeNextTriplet(t,n);var o=_t.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(me);break}}}this.handleEOD(t,n)},e.prototype.encodeChar=function(t,n){switch(t){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:t>=48&&t<=57?n.append(t-48+4):t>=65&&t<=90?n.append(t-65+14):_t.illegalCharacter(ue.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,n){t.updateSymbolInfo();var a=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),i=n.length();t.pos-=i,(t.getRemainingCharacters()>1||a>1||t.getRemainingCharacters()!==a)&&t.writeCodeword(Mu),t.getNewEncoding()<0&&t.signalEncoderChange(me)},e}(na),Xu=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wu=function(r){Xu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return it},e.prototype.encodeChar=function(t,n){if(t===32)return n.append(3),1;if(t>=48&&t<=57)return n.append(t-48+4),1;if(t>=97&&t<=122)return n.append(t-97+14),1;if(t<32)return n.append(0),n.append(t),2;if(t<=47)return n.append(1),n.append(t-33),2;if(t<=64)return n.append(1),n.append(t-58+15),2;if(t>=91&&t<=95)return n.append(1),n.append(t-91+22),2;if(t===96)return n.append(2),n.append(0),2;if(t<=90)return n.append(2),n.append(t-65+1),2;if(t<=127)return n.append(2),n.append(t-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(t-128,n),a},e}(na),_t=function(){function r(){}return r.randomize253State=function(e){var t=149*e%253+1,n=Vo+t;return n<=254?n:n-254},r.encodeHighLevel=function(e,t,n,a,i){t===void 0&&(t=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!1);var o=new na,s=[new Bu,o,new Wu,new $u,new Fu,new ju],l=new Vu(e);l.setSymbolShape(t),l.setSizeConstraints(n,a),e.startsWith(Ho)&&e.endsWith(Xo)?(l.writeCodeword(Ou),l.setSkipAtEnd(2),l.pos+=Ho.length):e.startsWith($o)&&e.endsWith(Xo)&&(l.writeCodeword(Tu),l.setSkipAtEnd(2),l.pos+=$o.length);var c=me;for(i&&(o.encodeMaximal(l),c=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[c].encode(l),l.getNewEncoding()>=0&&(c=l.getNewEncoding(),l.resetEncoderSignal());var d=l.getCodewordCount();l.updateSymbolInfo();var h=l.getSymbolInfo().getDataCapacity();d<h&&c!==me&&c!==tt&&c!==$e&&l.writeCodeword("þ");var x=l.getCodewords();for(x.length()<h&&x.append(Vo);x.length()<h;)x.append(this.randomize253State(x.length()+1));return l.getCodewords().toString()},r.lookAheadTest=function(e,t,n){var a=this.lookAheadTestIntern(e,t,n);if(n===Fe&&a===Fe){for(var i=Math.min(t+3,e.length),o=t;o<i;o++)if(!this.isNativeX12(e.charCodeAt(o)))return me}else if(n===$e&&a===$e){for(var i=Math.min(t+4,e.length),o=t;o<i;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return me}return a},r.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var a;n===me?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var i=0,o=new Uint8Array(6),s=[];;){if(t+i===e.length){Ue.fill(o,0),Ue.fill(s,0);var l=this.findMinimums(a,s,le.MAX_VALUE,o),c=this.getMinimumCount(o);if(s[me]===l)return me;if(c===1){if(o[tt]>0)return tt;if(o[$e]>0)return $e;if(o[it]>0)return it;if(o[Fe]>0)return Fe}return Ze}var d=e.charCodeAt(t+i);if(i++,this.isDigit(d)?a[me]+=.5:this.isExtendedASCII(d)?(a[me]=Math.ceil(a[me]),a[me]+=2):(a[me]=Math.ceil(a[me]),a[me]++),this.isNativeC40(d)?a[Ze]+=2/3:this.isExtendedASCII(d)?a[Ze]+=8/3:a[Ze]+=4/3,this.isNativeText(d)?a[it]+=2/3:this.isExtendedASCII(d)?a[it]+=8/3:a[it]+=4/3,this.isNativeX12(d)?a[Fe]+=2/3:this.isExtendedASCII(d)?a[Fe]+=13/3:a[Fe]+=10/3,this.isNativeEDIFACT(d)?a[$e]+=3/4:this.isExtendedASCII(d)?a[$e]+=17/4:a[$e]+=13/4,this.isSpecialB256(d)?a[tt]+=4:a[tt]++,i>=4){if(Ue.fill(o,0),Ue.fill(s,0),this.findMinimums(a,s,le.MAX_VALUE,o),s[me]<this.min(s[tt],s[Ze],s[it],s[Fe],s[$e]))return me;if(s[tt]<s[me]||s[tt]+1<this.min(s[Ze],s[it],s[Fe],s[$e]))return tt;if(s[$e]+1<this.min(s[tt],s[Ze],s[it],s[Fe],s[me]))return $e;if(s[it]+1<this.min(s[tt],s[Ze],s[$e],s[Fe],s[me]))return it;if(s[Fe]+1<this.min(s[tt],s[Ze],s[$e],s[it],s[me]))return Fe;if(s[Ze]+1<this.min(s[me],s[tt],s[$e],s[it])){if(s[Ze]<s[Fe])return Ze;if(s[Ze]===s[Fe]){for(var h=t+i+1;h<e.length;){var x=e.charCodeAt(h);if(this.isX12TermSep(x))return Fe;if(!this.isNativeX12(x))break;h++}return Ze}}}}},r.min=function(e,t,n,a,i){var o=Math.min(e,Math.min(t,Math.min(n,a)));return i===void 0?o:Math.min(o,i)},r.findMinimums=function(e,t,n,a){for(var i=0;i<6;i++){var o=t[i]=Math.ceil(e[i]);n>o&&(n=o,Ue.fill(a,0)),n===o&&(a[i]=a[i]+1)}return n},r.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},r.isDigit=function(e){return e>=48&&e<=57},r.isExtendedASCII=function(e){return e>=128&&e<=255},r.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},r.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},r.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},r.isX12TermSep=function(e){return e===13||e===42||e===62},r.isNativeEDIFACT=function(e){return e>=32&&e<=94},r.isSpecialB256=function(e){return!1},r.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var n=e.length,a=t;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-t},r.illegalCharacter=function(e){var t=le.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},r}(),Fn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wo=function(){function r(e){this.charset=e,this.name=e.name}return r.prototype.canEncode=function(e){try{return xt.encode(e,this.charset)!=null}catch{return!1}},r}(),zu=function(){function r(e,t,n){var a,i,o,s,l,c;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(q){return new Wo(Au.forName(q))}),this.encoders=[];var d=[];d.push(new Wo(Cu.ISO_8859_1));for(var h=t!=null&&t.name.startsWith("UTF"),x=0;x<e.length;x++){var g=!1;try{for(var p=(a=void 0,Fn(d)),m=p.next();!m.done;m=p.next()){var b=m.value,_=e.charAt(x),y=_.charCodeAt(0);if(y===n||b.canEncode(_)){g=!0;break}}}catch(q){a={error:q}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}if(!g)try{for(var I=(o=void 0,Fn(this.ENCODERS)),O=I.next();!O.done;O=I.next()){var b=O.value;if(b.canEncode(e.charAt(x))){d.push(b),g=!0;break}}}catch(q){o={error:q}}finally{try{O&&!O.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}g||(h=!0)}if(d.length===1&&!h)this.encoders=[d[0]];else{this.encoders=[];var D=0;try{for(var P=Fn(d),F=P.next();!F.done;F=P.next()){var b=F.value;this.encoders[D++]=b}}catch(q){l={error:q}}finally{try{F&&!F.done&&(c=P.return)&&c.call(P)}finally{if(l)throw l.error}}}var V=-1;if(t!=null){for(var x=0;x<this.encoders.length;x++)if(this.encoders[x]!=null&&t.name===this.encoders[x].name){V=x;break}}this.priorityEncoderIndex=V}return r.prototype.length=function(){return this.encoders.length},r.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},r.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},r.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},r.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},r.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},r.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return xt.encode(ue.getCharAt(e),this.encoders[t].name)},r}(),Yu=3,Zu=function(){function r(e,t,n){this.fnc1=n;var a=new zu(e,t,n);if(a.length()===1)for(var i=0;i<this.bytes.length;i++){var o=e.charAt(i).charCodeAt(0);this.bytes[i]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,a,n)}return r.prototype.getFNC1Character=function(){return this.fnc1},r.prototype.length=function(){return this.bytes.length},r.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},r.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},r.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new oe,a=e;a<t;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},r.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},r.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},r.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},r.prototype.addEdge=function(e,t,n){(e[t][n.encoderIndex]==null||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},r.prototype.addEdges=function(e,t,n,a,i,o){var s=e.charAt(a).charCodeAt(0),l=0,c=t.length();t.getPriorityEncoderIndex()>=0&&(s===o||t.canEncode(s,t.getPriorityEncoderIndex()))&&(l=t.getPriorityEncoderIndex(),c=l+1);for(var d=l;d<c;d++)(s===o||t.canEncode(s,d))&&this.addEdge(n,a+1,new zo(s,t,d,i,o))},r.prototype.encodeMinimally=function(e,t,n){var a=e.length,i=new zo[a+1][t.length()];this.addEdges(e,t,i,0,null,n);for(var o=1;o<=a;o++){for(var s=0;s<t.length();s++)i[o][s]!=null&&o<a&&this.addEdges(e,t,i,o,i[o][s],n);for(var s=0;s<t.length();s++)i[o-1][s]=null}for(var l=-1,c=le.MAX_VALUE,s=0;s<t.length();s++)if(i[a][s]!=null){var d=i[a][s];d.cachedTotalSize<c&&(c=d.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var h=[],x=i[a][l];x!=null;){if(x.isFNC1())h.unshift(1e3);else for(var g=t.encode(x.c,x.encoderIndex),o=g.length-1;o>=0;o--)h.unshift(g[o]&255);var p=x.previous===null?0:x.previous.encoderIndex;p!==x.encoderIndex&&h.unshift(256+t.getECIValue(x.encoderIndex)),x=x.previous}for(var m=[],o=0;o<m.length;o++)m[o]=h[o];return m},r}(),zo=function(){function r(e,t,n,a,i){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=a,this.fnc1=i,this.c=e===i?1e3:e;var o=this.isFNC1()?1:t.encode(e,n).length,s=a===null?0:a.encoderIndex;s!==n&&(o+=Yu),a!=null&&(o+=a.cachedTotalSize),this.cachedTotalSize=o}return r.prototype.isFNC1=function(){return this.c===1e3},r}(),Qu=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();var Yo;(function(r){r[r.ASCII=0]="ASCII",r[r.C40=1]="C40",r[r.TEXT=2]="TEXT",r[r.X12=3]="X12",r[r.EDF=4]="EDF",r[r.B256=5]="B256"})(Yo||(Yo={}));(function(r){Qu(e,r);function e(t,n,a,i,o){var s=r.call(this,t,n,a)||this;return s.shape=i,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(Zu);var Ku=function(){function r(){}return r.prototype.isCompact=function(){return this.compact},r.prototype.setCompact=function(e){this.compact=e},r.prototype.getSize=function(){return this.size},r.prototype.setSize=function(e){this.size=e},r.prototype.getLayers=function(){return this.layers},r.prototype.setLayers=function(e){this.layers=e},r.prototype.getCodeWords=function(){return this.codeWords},r.prototype.setCodeWords=function(e){this.codeWords=e},r.prototype.getMatrix=function(){return this.matrix},r.prototype.setMatrix=function(e){this.matrix=e},r}(),Zo=function(){function r(){}return r.singletonList=function(e){return[e]},r.min=function(e,t){return e.sort(t)[0]},r}(),Ju=function(){function r(e){this.previous=e}return r.prototype.getPrevious=function(){return this.previous},r}(),qu=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),aa=function(r){qu(e,r);function e(t,n,a){var i=r.call(this,t)||this;return i.value=n,i.bitCount=a,i}return e.prototype.appendTo=function(t,n){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,n){return new e(this,t,n)},e.prototype.addBinaryShift=function(t,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,n)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+le.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(Ju),ed=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),td=function(r){ed(e,r);function e(t,n,a){var i=r.call(this,t,0,0)||this;return i.binaryShiftStart=n,i.binaryShiftByteCount=a,i}return e.prototype.appendTo=function(t,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):a===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(t,n){return new e(this,t,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(aa);function rd(r,e,t){return new td(r,e,t)}function Cr(r,e,t){return new aa(r,e,t)}var nd=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Gt=0,rn=1,ht=2,xs=3,Et=4,ad=new aa(null,0,0),kn=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],id=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function od(r){var e,t;try{for(var n=id(r),a=n.next();!a.done;a=n.next()){var i=a.value;Ue.fill(i,-1)}}catch(o){e={error:o}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r[Gt][Et]=0,r[rn][Et]=0,r[rn][Gt]=28,r[xs][Et]=0,r[ht][Et]=0,r[ht][Gt]=15,r}var gs=od(Ue.createInt32Array(6,6)),sd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ld=function(){function r(e,t,n,a){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=a}return r.prototype.getMode=function(){return this.mode},r.prototype.getToken=function(){return this.token},r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},r.prototype.getBitCount=function(){return this.bitCount},r.prototype.latchAndAppend=function(e,t){var n=this.bitCount,a=this.token;if(e!==this.mode){var i=kn[this.mode][e];a=Cr(a,i&65535,i>>16),n+=i>>16}var o=e===ht?4:5;return a=Cr(a,t,o),new r(a,e,0,n+o)},r.prototype.shiftAndAppend=function(e,t){var n=this.token,a=this.mode===ht?4:5;return n=Cr(n,gs[this.mode][e],a),n=Cr(n,t,5),new r(n,this.mode,0,this.bitCount+a+5)},r.prototype.addBinaryShiftChar=function(e){var t=this.token,n=this.mode,a=this.bitCount;if(this.mode===Et||this.mode===ht){var i=kn[n][Gt];t=Cr(t,i&65535,i>>16),a+=i>>16,n=Gt}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new r(t,n,this.binaryShiftByteCount+1,a+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},r.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=rd(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new r(t,this.mode,0,this.bitCount)},r.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(kn[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=r.calculateBinaryShiftCost(e)-r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},r.prototype.toBitArray=function(e){for(var t,n,a=[],i=this.endBinaryShift(e.length).token;i!==null;i=i.getPrevious())a.unshift(i);var o=new Xe;try{for(var s=sd(a),l=s.next();!l.done;l=s.next()){var c=l.value;c.appendTo(o,e)}}catch(d){t={error:d}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},r.prototype.toString=function(){return ue.format("%s bits=%d bytes=%d",nd[this.mode],this.bitCount,this.binaryShiftByteCount)},r.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},r.INITIAL_STATE=new r(ad,Gt,0,0),r}();function cd(r){var e=ue.getCharCode(" "),t=ue.getCharCode("."),n=ue.getCharCode(",");r[Gt][e]=1;for(var a=ue.getCharCode("Z"),i=ue.getCharCode("A"),o=i;o<=a;o++)r[Gt][o]=o-i+2;r[rn][e]=1;for(var s=ue.getCharCode("z"),l=ue.getCharCode("a"),o=l;o<=s;o++)r[rn][o]=o-l+2;r[ht][e]=1;for(var c=ue.getCharCode("9"),d=ue.getCharCode("0"),o=d;o<=c;o++)r[ht][o]=o-d+2;r[ht][n]=12,r[ht][t]=13;for(var h=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],x=0;x<h.length;x++)r[xs][ue.getCharCode(h[x])]=x;for(var g=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],x=0;x<g.length;x++)ue.getCharCode(g[x])>0&&(r[Et][ue.getCharCode(g[x])]=x);return r}var Ln=cd(Ue.createInt32Array(5,256)),Xr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ud=function(){function r(e){this.text=e}return r.prototype.encode=function(){for(var e=ue.getCharCode(" "),t=ue.getCharCode(`
`),n=Zo.singletonList(ld.INITIAL_STATE),a=0;a<this.text.length;a++){var i=void 0,o=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case ue.getCharCode("\r"):i=o===t?2:0;break;case ue.getCharCode("."):i=o===e?3:0;break;case ue.getCharCode(","):i=o===e?4:0;break;case ue.getCharCode(":"):i=o===e?5:0;break;default:i=0}i>0?(n=r.updateStateListForPair(n,a,i),a++):n=this.updateStateListForChar(n,a)}var s=Zo.min(n,function(l,c){return l.getBitCount()-c.getBitCount()});return s.toBitArray(this.text)},r.prototype.updateStateListForChar=function(e,t){var n,a,i=[];try{for(var o=Xr(e),s=o.next();!s.done;s=o.next()){var l=s.value;this.updateStateForChar(l,t,i)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return r.simplifyStates(i)},r.prototype.updateStateForChar=function(e,t,n){for(var a=this.text[t]&255,i=Ln[e.getMode()][a]>0,o=null,s=0;s<=Et;s++){var l=Ln[s][a];if(l>0){if(o==null&&(o=e.endBinaryShift(t)),!i||s===e.getMode()||s===ht){var c=o.latchAndAppend(s,l);n.push(c)}if(!i&&gs[e.getMode()][s]>=0){var d=o.shiftAndAppend(s,l);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||Ln[e.getMode()][a]===0){var h=e.addBinaryShiftChar(t);n.push(h)}},r.updateStateListForPair=function(e,t,n){var a,i,o=[];try{for(var s=Xr(e),l=s.next();!l.done;l=s.next()){var c=l.value;this.updateStateForPair(c,t,n,o)}}catch(d){a={error:d}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}return this.simplifyStates(o)},r.updateStateForPair=function(e,t,n,a){var i=e.endBinaryShift(t);if(a.push(i.latchAndAppend(Et,n)),e.getMode()!==Et&&a.push(i.shiftAndAppend(Et,n)),n===3||n===4){var o=i.latchAndAppend(ht,16-n).latchAndAppend(ht,1);a.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);a.push(s)}},r.simplifyStates=function(e){var t,n,a,i,o=[];try{for(var s=Xr(e),l=s.next();!l.done;l=s.next()){var c=l.value,d=!0,h=function(b){if(b.isBetterThanOrEqualTo(c))return d=!1,"break";c.isBetterThanOrEqualTo(b)&&(o=o.filter(function(_){return _!==b}))};try{for(var x=(a=void 0,Xr(o)),g=x.next();!g.done;g=x.next()){var p=g.value,m=h(p);if(m==="break")break}}catch(b){a={error:b}}finally{try{g&&!g.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}d&&o.push(c)}}catch(b){t={error:b}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},r}(),dd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.encodeBytes=function(e){return r.encode(e,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)},r.encode=function(e,t,n){var a=new ud(e).encode(),i=le.truncDivision(a.getSize()*t,100)+11,o=a.getSize()+i,s,l,c,d,h;if(n!==r.DEFAULT_AZTEC_LAYERS){if(s=n<0,l=Math.abs(n),l>(s?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS))throw new J(ue.format("Illegal value %s for layers",n));c=r.totalBitsInLayer(l,s),d=r.WORD_SIZE[l];var x=c-c%d;if(h=r.stuffBits(a,d),h.getSize()+i>x)throw new J("Data to large for user specified layer");if(s&&h.getSize()>d*64)throw new J("Data to large for user specified layer")}else{d=0,h=null;for(var g=0;;g++){if(g>r.MAX_NB_BITS)throw new J("Data too large for an Aztec code");if(s=g<=3,l=s?g+1:g,c=r.totalBitsInLayer(l,s),!(o>c)){(h==null||d!==r.WORD_SIZE[l])&&(d=r.WORD_SIZE[l],h=r.stuffBits(a,d));var x=c-c%d;if(!(s&&h.getSize()>d*64)&&h.getSize()+i<=x)break}}}var p=r.generateCheckWords(h,c,d),m=h.getSize()/d,b=r.generateModeMessage(s,l,m),_=(s?11:14)+l*4,y=new Int32Array(_),I;if(s){I=_;for(var g=0;g<y.length;g++)y[g]=g}else{I=_+1+2*le.truncDivision(le.truncDivision(_,2)-1,15);for(var O=le.truncDivision(_,2),D=le.truncDivision(I,2),g=0;g<O;g++){var P=g+le.truncDivision(g,15);y[O-g-1]=D-P-1,y[O+g]=D+P+1}}for(var F=new St(I),g=0,V=0;g<l;g++){for(var q=(l-g)*4+(s?9:12),Y=0;Y<q;Y++)for(var he=Y*2,z=0;z<2;z++)p.get(V+he+z)&&F.set(y[g*2+z],y[g*2+Y]),p.get(V+q*2+he+z)&&F.set(y[g*2+Y],y[_-1-g*2-z]),p.get(V+q*4+he+z)&&F.set(y[_-1-g*2-z],y[_-1-g*2-Y]),p.get(V+q*6+he+z)&&F.set(y[_-1-g*2-Y],y[g*2+z]);V+=q*8}if(r.drawModeMessage(F,s,I,b),s)r.drawBullsEye(F,le.truncDivision(I,2),5);else{r.drawBullsEye(F,le.truncDivision(I,2),7);for(var g=0,Y=0;g<le.truncDivision(_,2)-1;g+=15,Y+=16)for(var z=le.truncDivision(I,2)&1;z<I;z+=2)F.set(le.truncDivision(I,2)-Y,z),F.set(le.truncDivision(I,2)+Y,z),F.set(z,le.truncDivision(I,2)-Y),F.set(z,le.truncDivision(I,2)+Y)}var M=new Ku;return M.setCompact(s),M.setSize(I),M.setLayers(l),M.setCodeWords(m),M.setMatrix(F),M},r.drawBullsEye=function(e,t,n){for(var a=0;a<n;a+=2)for(var i=t-a;i<=t+a;i++)e.set(i,t-a),e.set(i,t+a),e.set(t-a,i),e.set(t+a,i);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},r.generateModeMessage=function(e,t,n){var a=new Xe;return e?(a.appendBits(t-1,2),a.appendBits(n-1,6),a=r.generateCheckWords(a,28,4)):(a.appendBits(t-1,5),a.appendBits(n-1,11),a=r.generateCheckWords(a,40,4)),a},r.drawModeMessage=function(e,t,n,a){var i=le.truncDivision(n,2);if(t)for(var o=0;o<7;o++){var s=i-3+o;a.get(o)&&e.set(s,i-5),a.get(o+7)&&e.set(i+5,s),a.get(20-o)&&e.set(s,i+5),a.get(27-o)&&e.set(i-5,s)}else for(var o=0;o<10;o++){var s=i-5+o+le.truncDivision(o,5);a.get(o)&&e.set(s,i-7),a.get(o+10)&&e.set(i+7,s),a.get(29-o)&&e.set(s,i+7),a.get(39-o)&&e.set(i-7,s)}},r.generateCheckWords=function(e,t,n){var a,i,o=e.getSize()/n,s=new fs(r.getGF(n)),l=le.truncDivision(t,n),c=r.bitsToWords(e,n,l);s.encode(c,l-o);var d=t%n,h=new Xe;h.appendBits(0,d);try{for(var x=dd(Array.from(c)),g=x.next();!g.done;g=x.next()){var p=g.value;h.appendBits(p,n)}}catch(m){a={error:m}}finally{try{g&&!g.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}return h},r.bitsToWords=function(e,t,n){var a=new Int32Array(n),i,o;for(i=0,o=e.getSize()/t;i<o;i++){for(var s=0,l=0;l<t;l++)s|=e.get(i*t+l)?1<<t-l-1:0;a[i]=s}return a},r.getGF=function(e){switch(e){case 4:return lt.AZTEC_PARAM;case 6:return lt.AZTEC_DATA_6;case 8:return lt.AZTEC_DATA_8;case 10:return lt.AZTEC_DATA_10;case 12:return lt.AZTEC_DATA_12;default:throw new J("Unsupported word size "+e)}},r.stuffBits=function(e,t){for(var n=new Xe,a=e.getSize(),i=(1<<t)-2,o=0;o<a;o+=t){for(var s=0,l=0;l<t;l++)(o+l>=a||e.get(o+l))&&(s|=1<<t-1-l);(s&i)===i?(n.appendBits(s&i,t),o--):s&i?n.appendBits(s,t):(n.appendBits(s|1,t),o--)}return n},r.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.DEFAULT_EC_PERCENT=33,r.DEFAULT_AZTEC_LAYERS=0,r.MAX_NB_BITS=32,r.MAX_NB_BITS_COMPACT=4,r.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),r})();var fd=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),hd=function(r){fd(e,r);function e(t){var n=r.call(this,t.width,t.height)||this;return n.canvas=t,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(t),n}return e.makeBufferFromCanvasImageData=function(t){var n;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(a.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,n,a){for(var i=new Uint8ClampedArray(n*a),o=0,s=0,l=t.length;o<l;o+=4,s++){var c=void 0,d=t[o+3];if(d===0)c=255;else{var h=t[o],x=t[o+1],g=t[o+2];c=306*h+601*x+117*g+512>>10}i[s]=c}return i},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new J("Requested row is outside the image: "+t);var a=this.getWidth(),i=t*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return r.prototype.crop.call(this,t,n,a,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new nn(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=t*e.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(a))*i+Math.abs(Math.sin(a))*o),l=Math.ceil(Math.abs(Math.sin(a))*i+Math.abs(Math.cos(a))*o);n.width=s,n.height=l;var c=n.getContext("2d");if(!c)throw new Error("Could not create a Canvas Context element.");return c.translate(s/2,l/2),c.rotate(a),c.drawImage(this.canvas,i/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(Nr);function ps(){return typeof navigator<"u"}function xd(){return ps()&&!!navigator.mediaDevices}function gd(){return!!(xd()&&navigator.mediaDevices.enumerateDevices)}var or=function(){return or=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},or.apply(this,arguments)},Oe=function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function s(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):a(d.value).then(s,l)}c((n=n.apply(r,e||[])).next())})},Te=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,a=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){t.label=c[1];break}if(c[0]===6&&t.label<i[1]){t.label=i[1],i=c;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(c);break}i[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(d){c=[6,d],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Un=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pd={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},cr=function(){function r(e,t,n){t===void 0&&(t=new Map),n===void 0&&(n={}),this.reader=e,this.hints=t,this.options=or(or({},pd),n)}return Object.defineProperty(r.prototype,"possibleFormats",{set:function(e){this.hints.set(ye.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),r.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},r.mediaStreamSetTorch=function(e,t){return Oe(this,void 0,void 0,function(){return Te(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return n.sent(),[2]}})})},r.mediaStreamIsTorchCompatible=function(e){var t,n,a=e.getVideoTracks();try{for(var i=Un(a),o=i.next();!o.done;o=i.next()){var s=o.value;if(r.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!1},r.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},r.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},r.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new Pe("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new Pe("element with id '".concat(e,"' must be an ").concat(t," element"));return n},r.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return r.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},r.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return r.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},r.prepareVideoElement=function(e){var t=r.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.createBinaryBitmapFromCanvas=function(e){var t=new hd(e),n=new es(t);return new qo(n)},r.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},r.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},r.createCaptureCanvas=function(e){if(!e)throw new Pe("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),n=r.getMediaElementDimensions(e),a=n.width,i=n.height;return t.style.width=a+"px",t.style.height=i+"px",t.width=a,t.height=i,t},r.tryPlayVideo=function(e){return Oe(this,void 0,void 0,function(){var t;return Te(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(r.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return t=n.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},r.createCanvasFromMediaElement=function(e){var t=r.createCaptureCanvas(e),n=t.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return r.drawImageOnCanvas(n,e),t},r.createBinaryBitmapFromMediaElem=function(e){var t=r.createCanvasFromMediaElement(e);return r.createBinaryBitmapFromCanvas(t)},r.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},r.listVideoInputDevices=function(){return Oe(this,void 0,void 0,function(){var e,t,n,a,i,o,s,l,c,d,h,x;return Te(this,function(g){switch(g.label){case 0:if(!ps())throw new Error("Can't enumerate devices, navigator is not present.");if(!gd())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=g.sent(),t=[];try{for(n=Un(e),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(s=i.deviceId||i.id,l=i.label||"Video device ".concat(t.length+1),c=i.groupId,d={deviceId:s,label:l,kind:o,groupId:c},t.push(d))}catch(p){h={error:p}}finally{try{a&&!a.done&&(x=n.return)&&x.call(n)}finally{if(h)throw h.error}}return[2,t]}})})},r.findDeviceById=function(e){return Oe(this,void 0,void 0,function(){var t;return Te(this,function(n){switch(n.label){case 0:return[4,r.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(a){return a.deviceId===e})]:[2]}})})},r.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},r.releaseAllStreams=function(){r.streamTracker.length!==0&&r.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),r.streamTracker=[]},r.playVideoOnLoadAsync=function(e,t){return Oe(this,void 0,void 0,function(){var n;return Te(this,function(a){switch(a.label){case 0:return[4,r.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(i,o){var s=setTimeout(function(){r.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",l))},t),l=function(){r.tryPlayVideo(e).then(function(c){clearTimeout(s),e.removeEventListener("canplay",l),i(c)})};e.addEventListener("canplay",l)})]}})})},r.attachStreamToVideo=function(e,t,n){return n===void 0&&(n=5e3),Oe(this,void 0,void 0,function(){var a;return Te(this,function(i){switch(i.label){case 0:return a=r.prepareVideoElement(t),r.addVideoSource(a,e),[4,r.playVideoOnLoadAsync(a,n)];case 1:return i.sent(),[2,a]}})})},r._waitImageLoad=function(e){return new Promise(function(t,n){var a=1e4,i=setTimeout(function(){r.isImageLoaded(e)||(e.removeEventListener("load",o),n())},a),o=function(){clearTimeout(i),e.removeEventListener("load",o),t()};e.addEventListener("load",o)})},r.checkCallbackFnOrThrow=function(e){if(!e)throw new Pe("`callbackFn` is a required parameter, you cannot capture results without it.")},r.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},r.prototype.decode=function(e){var t=r.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},r.prototype.decodeFromCanvas=function(e){var t=r.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},r.prototype.decodeFromImageElement=function(e){return Oe(this,void 0,void 0,function(){var t;return Te(this,function(n){switch(n.label){case 0:if(!e)throw new Pe("An image element must be provided.");return t=r.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeFromImageUrl=function(e){return Oe(this,void 0,void 0,function(){var t;return Te(this,function(n){switch(n.label){case 0:if(!e)throw new Pe("An URL must be provided.");t=r.prepareImageElement(),t.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,n.sent()];case 3:return r.destroyImageElement(t),[7];case 4:return[2]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return Oe(this,void 0,void 0,function(){var a,i;return Te(this,function(o){switch(o.label){case 0:return r.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(a,t,n)];case 3:return[2,o.sent()];case 4:throw i=o.sent(),r.disposeMediaStream(a),i;case 5:return[2]}})})},r.prototype.decodeFromStream=function(e,t,n){return Oe(this,void 0,void 0,function(){var a,i,o,s,l,c,d,h,x,g=this;return Te(this,function(p){switch(p.label){case 0:return r.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,r.attachStreamToVideo(e,t,a)];case 1:return i=p.sent(),o=function(){r.disposeMediaStream(e),r.cleanVideoSource(i)},s=this.scan(i,n,o),l=e.getVideoTracks(),c=or(or({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(m,b){return Oe(this,void 0,void 0,function(){var _,y,I,O,D,P,F;return Te(this,function(V){switch(V.label){case 0:_=b?l.filter(b):l,V.label=1;case 1:V.trys.push([1,6,7,8]),y=Un(_),I=y.next(),V.label=2;case 2:return I.done?[3,5]:(O=I.value,[4,O.applyConstraints(m)]);case 3:V.sent(),V.label=4;case 4:return I=y.next(),[3,2];case 5:return[3,8];case 6:return D=V.sent(),P={error:D},[3,8];case 7:try{I&&!I.done&&(F=y.return)&&F.call(y)}finally{if(P)throw P.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(m){return l.find(m).getConstraints()},streamVideoSettingsGet:function(m){return l.find(m).getSettings()},streamVideoCapabilitiesGet:function(m){return l.find(m).getCapabilities()}}),d=r.mediaStreamIsTorchCompatible(e),d&&(h=l==null?void 0:l.find(function(m){return r.mediaStreamIsTorchCompatibleTrack(m)}),x=function(m){return Oe(g,void 0,void 0,function(){return Te(this,function(b){switch(b.label){case 0:return[4,r.mediaStreamSetTorch(h,m)];case 1:return b.sent(),[2]}})})},c.switchTorch=x,c.stop=function(){return Oe(g,void 0,void 0,function(){return Te(this,function(m){switch(m.label){case 0:return s.stop(),[4,x(!1)];case 1:return m.sent(),[2]}})})}),[2,c]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return Oe(this,void 0,void 0,function(){var a,i;return Te(this,function(o){switch(o.label){case 0:return r.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,t,n)];case 1:return[2,o.sent()]}})})},r.prototype.decodeFromVideoElement=function(e,t){return Oe(this,void 0,void 0,function(){var n,a;return Te(this,function(i){switch(i.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new Pe("A video element must be provided.");return n=r.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,a)];case 1:return i.sent(),[2,this.scan(n,t)]}})})},r.prototype.decodeFromVideoUrl=function(e,t){return Oe(this,void 0,void 0,function(){var n,a,i,o;return Te(this,function(s){switch(s.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new Pe("An URL must be provided.");return n=r.prepareVideoElement(),n.src=e,a=function(){r.cleanVideoSource(n)},i=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,i)];case 1:return s.sent(),o=this.scan(n,t,a),[2,o]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return Oe(this,void 0,void 0,function(){var n;return Te(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,a.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return Oe(this,void 0,void 0,function(){var n,a,i;return Te(this,function(o){switch(o.label){case 0:return n=!!t,[4,r.attachStreamToVideo(e,t)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return i=o.sent(),[2,i];case 4:return n||r.cleanVideoSource(a),[7];case 5:return[2]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return Oe(this,void 0,void 0,function(){var n,a;return Te(this,function(i){switch(i.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,t)];case 1:return[2,i.sent()]}})})},r.prototype.decodeOnceFromVideoElement=function(e){return Oe(this,void 0,void 0,function(){var t,n;return Te(this,function(a){switch(a.label){case 0:if(!e)throw new Pe("A video element must be provided.");return t=r.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(t,n)];case 1:return a.sent(),[4,this.scanOneResult(t)];case 2:return[2,a.sent()]}})})},r.prototype.decodeOnceFromVideoUrl=function(e){return Oe(this,void 0,void 0,function(){var t,n;return Te(this,function(a){switch(a.label){case 0:if(!e)throw new Pe("An URL must be provided.");t=r.prepareVideoElement(),t.src=e,n=this.decodeOnceFromVideoElement(t),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return r.cleanVideoSource(t),[7];case 4:return[2]}})})},r.prototype.scanOneResult=function(e,t,n,a){var i=this;return t===void 0&&(t=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(o,s){i.scan(e,function(l,c,d){if(l){o(l),d.stop();return}if(c){if(c instanceof T&&t||c instanceof Me&&n||c instanceof k&&a)return;d.stop(),s(c)}})})},r.prototype.scan=function(e,t,n){var a=this;r.checkCallbackFnOrThrow(t);var i=r.createCaptureCanvas(e),o;try{o=i.getContext("2d",{willReadFrequently:!0})}catch{o=i.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){o=void 0,i=void 0},l=!1,c,d=function(){l=!0,clearTimeout(c),s(),n&&n()},h={stop:d},x=function(){if(!l)try{r.drawImageOnCanvas(o,e);var g=a.decodeFromCanvas(i);t(g,void 0,h),c=setTimeout(x,a.options.delayBetweenScanSuccess)}catch(_){t(void 0,_,h);var p=_ instanceof Me,m=_ instanceof k,b=_ instanceof T;if(p||m||b){c=setTimeout(x,a.options.delayBetweenScanAttempts);return}s(),n&&n(_)}};return x(),h},r.prototype._decodeOnLoadImage=function(e){return Oe(this,void 0,void 0,function(){var t;return Te(this,function(n){switch(n.label){case 0:return t=r.isImageLoaded(e),t?[3,2]:[4,r._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},r.prototype.getUserMedia=function(e){return Oe(this,void 0,void 0,function(){var t;return Te(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=n.sent(),r.streamTracker.push(t),[2,t]}})})},r.streamTracker=[],r}(),vd=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){vd(e,r);function e(t,n){return r.call(this,new Kr,t,n)||this}return e})(cr);var md=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){md(e,r);function e(t,n){return r.call(this,new ar(t),t,n)||this}return e})(cr);var yd=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){yd(e,r);function e(t,n){return r.call(this,new qr,t,n)||this}return e})(cr);var wd=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){wd(e,r);function e(t,n){var a=this,i=new ds;return i.setHints(t),a=r.call(this,i,t,n)||this,a.reader=i,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(ye.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(cr);var bd=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){bd(e,r);function e(t,n){return r.call(this,new tn,t,n)||this}return e})(cr);var _d=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qo=function(r){_d(e,r);function e(t,n){return r.call(this,new en,t,n)||this}return e}(cr);const Ko=async r=>{if(!r||r==="undefined"||r==="00000000-0000-0000-0000-000000000001")try{const{data:e,error:t}=await be.from("user_profiles").select("id").eq("role","admin").limit(1).single();return t||!e?(console.error("No admin user found:",t),null):e.id}catch(e){return console.error("Error getting admin user:",e),null}return r},Jo=["Mike","Jordan","Alex","Sarah"],Ad=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00"],Cd=["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],nf=()=>{var Ra,Da,Pa,Ma,Ba,ja,Fa,ka,La,Ua,Ga,Va,Ha,$a,Xa,Wa,za,Ya,Za,Qa,Ka,Ja,qa,ei,ti,ri,ni,ai,ii,oi,si,li,ci;const{user:r,logout:e}=ol(),[t,n]=j.useState(!1),[a,i]=j.useState(!1),[o,s]=j.useState(null),[l,c]=j.useState(null),[d,h]=j.useState(!1),[x,g]=j.useState([]),[p,m]=j.useState([]),[b,_]=j.useState("scanner"),[y,I]=j.useState({}),[O,D]=j.useState({}),[P,F]=j.useState({}),[V,q]=j.useState({}),[Y,he]=j.useState(null),[z,M]=j.useState(null),[se,We]=j.useState(!1),[Nt,gt]=j.useState(!1),[Re,ia]=j.useState([]),[Ed,oa]=j.useState(!1),[B,sn]=j.useState({code:"",selectedUserId:""}),[S,ln]=j.useState("individual"),[It,sa]=j.useState("personal"),[$,ur]=j.useState([]),[cn,vs]=j.useState(null),[At,la]=j.useState(null),[Tr,un]=j.useState(0),[Ke,ms]=j.useState(1),[Ot,ys]=j.useState(2),[Sd,Id]=j.useState(!1),[Nd,Od]=j.useState(null),[Td,Rd]=j.useState(null),[Tt,ca]=j.useState({}),[pt,ua]=j.useState(""),[dn,fn]=j.useState("dropdown"),[Dd]=j.useState(""),[Pd]=j.useState("all"),[da]=j.useState(!0),[dt,Rr]=j.useState(""),[hn,fa]=j.useState("dropdown"),[vt,xn]=j.useState(""),[dr,ha]=j.useState(""),[gn,Rt]=j.useState(null),[pn,Md]=j.useState(new Set),[ws,Bd]=j.useState(new Set),[ce,Vt]=j.useState({}),[xa,bs]=j.useState(""),[_s,vn]=j.useState(!1),[As,mn]=j.useState(!1),[Dt,yn]=j.useState(""),[Pt,wn]=j.useState(""),[Mt,fr]=j.useState("none"),[Bt,Je]=j.useState(!1),[Kt,ga]=j.useState("new"),[pa,bn]=j.useState([]),[Dr,hr]=j.useState([]),[va,ma]=j.useState(!1),[jd,Fd]=j.useState([]),[kd,Ld]=j.useState(1),[Ud]=j.useState(10),[Pr,ya]=j.useState(new Set),[Mr,wa]=j.useState({}),[Cs,_n]=j.useState(!1),[Br,An]=j.useState(null),[Ct,xr]=j.useState("all"),[ba,Es]=j.useState(""),[gr,jr]=j.useState(1),_a=6,[Ss,Aa]=j.useState(!1),[Jt,Ca]=j.useState(null),[Gd,Ea]=j.useState(!1),[Is,Ns]=j.useState([]),[Os,Vd]=j.useState([]),[Hd,$d]=j.useState(!1),[Xd,Wd]=j.useState(""),Ts=j.useRef(null),Ht=j.useRef(null),jt=j.useRef(null),Rs=j.useRef(null),Sa=j.useRef(null),Cn=j.useRef(null),ne=f=>Pr.has(f),Ae=f=>Mr[f]||null;j.useEffect(()=>{if(console.log("🔍 [SecretaryDashboard] User role check:",r==null?void 0:r.role),r&&r.role!=="secretary"){console.log("❌ [SecretaryDashboard] User is not secretary, showing error"),U.error("Δεν έχετε δικαίωμα πρόσβασης σε αυτή τη σελίδα");return}console.log("✅ [SecretaryDashboard] User is secretary, proceeding")},[r]),j.useEffect(()=>{un(At?At*4:0)},[At]),j.useEffect(()=>{En()},[]),j.useEffect(()=>{b==="membership-requests"?qt():b==="personal-training"&&(ia([]),setTimeout(()=>{Fs()},100))},[b]),j.useEffect(()=>{t&&(console.log("🎬 [UI] Video container rendering - isScanning:",t,"isVideoReady:",a,"cameraError:",o),console.log("🎬 [UI] webcamRef.current:",Ts.current))},[t,a,o]);const En=async()=>{try{const{data:f,error:w}=await be.from("scan_audit_logs").select("*").order("created_at",{ascending:!1}).limit(10);if(w)throw w;const E=(f==null?void 0:f.map(L=>L.user_id))||[],{data:A,error:C}=await be.from("user_profiles").select("user_id, first_name, last_name, email").in("user_id",E);if(C)throw C;const R=(f==null?void 0:f.map(L=>({...L,user_profiles:A==null?void 0:A.find(ee=>ee.user_id===L.user_id)})))||[];g(R)}catch(f){console.error("Error loading recent scans:",f)}},qt=async()=>{try{Je(!0);const[f,w]=await Promise.all([cl(),co()]);console.log("[SecretaryDashboard] Regular requests loaded:",(f==null?void 0:f.length)||0),console.log("[SecretaryDashboard] Ultimate requests loaded:",(w==null?void 0:w.length)||0),console.log("[SecretaryDashboard] Ultimate requests details:",w.map(A=>{var C;return{id:A.id,package:(C=A.package)==null?void 0:C.name,status:A.status}}));const E=[...f,...w];console.log("[SecretaryDashboard] Total combined requests:",E.length),m(E)}catch(f){console.error("Error loading membership requests:",f),U.error("Σφάλμα κατά τη φόρτωση των αιτημάτων")}finally{Je(!1)}},Sn=(f,w)=>{An({requestId:f,installmentNumber:w}),_n(!0)},Ds=async()=>{var f,w;if(Br){const{requestId:E,installmentNumber:A}=Br;try{const C=p.find(ee=>ee.id===E)||Is.find(ee=>ee.id===E);if(C){const ee=y[E]||{},re={};A===1?(re.installment_1_amount=parseFloat(String(ee.installment1Amount||C.installment_1_amount||0)).toString(),re.installment_1_payment_method=ee.installment1PaymentMethod||C.installment_1_payment_method||"cash",re.installment_1_due_date=ee.installment1DueDate||C.installment_1_due_date):A===2?(re.installment_2_amount=parseFloat(String(ee.installment2Amount||C.installment_2_amount||0)).toString(),re.installment_2_payment_method=ee.installment2PaymentMethod||C.installment_2_payment_method||"cash",re.installment_2_due_date=ee.installment2DueDate||C.installment_2_due_date):A===3&&(re.installment_3_amount=parseFloat(String(ee.installment3Amount||C.installment_3_amount||0)).toString(),re.installment_3_payment_method=ee.installment3PaymentMethod||C.installment_3_payment_method||"cash",re.installment_3_due_date=ee.installment3DueDate||C.installment_3_due_date);const ae=((f=C.package)==null?void 0:f.name)==="Ultimate"||((w=C.package)==null?void 0:w.name)==="Ultimate Medium",{error:G}=await be.from(ae?"ultimate_membership_requests":"membership_requests").update(re).eq("id",E);if(G){console.error("[SecretaryDashboard] Error saving values before lock:",G),U.error("Σφάλμα κατά την αποθήκευση των τιμών");return}console.log("[SecretaryDashboard] Saved values before locking:",re)}const R=await Ko(r==null?void 0:r.id),{error:L}=await be.rpc("lock_installment",{p_request_id:E,p_installment_number:A,p_locked_by:R||null});if(L){console.error(`Error locking installment ${A}:`,L),U.error(`Σφάλμα κατά το κλείδωμα της ${A}ης δόσης`);return}m(ee=>ee.map(re=>{if(re.id!==E)return re;const ae=`installment_${A}_locked`,G={...re};return G[ae]=!0,G})),U.success(`${A}η δόση κλειδώθηκε επιτυχώς με τις τρέχουσες τιμές`),await qt()}catch(C){console.error("Exception locking installment:",C),U.error("Σφάλμα κατά το κλείδωμα της δόσης")}_n(!1),An(null)}},Ps=()=>{_n(!1),An(null)},Ms=async()=>{var f,w;if(Jt){try{const E=await Ko(r==null?void 0:r.id);console.log("Deleting third installment for request:",Jt,"by user:",E);const A=p.find(L=>L.id===Jt),C=((f=A==null?void 0:A.package)==null?void 0:f.name)==="Ultimate"||((w=A==null?void 0:A.package)==null?void 0:w.name)==="Ultimate Medium",{error:R}=await be.rpc(C?"delete_ultimate_third_installment":"delete_third_installment_permanently",{p_request_id:Jt,p_deleted_by:E||null});if(R){console.error("Error deleting third installment:",R),U.error("Σφάλμα κατά τη διαγραφή της 3ης δόσης");return}qe(Jt,"deleteThirdInstallment",!0),U.success("3η δόση διαγράφηκε επιτυχώς"),await js()}catch(E){console.error("Exception deleting third installment:",E),U.error("Σφάλμα κατά τη διαγραφή της 3ης δόσης")}Aa(!1),Ca(null)}},Bs=()=>{Aa(!1),Ca(null)},Ie=(f,w)=>{const E=`installment_${w}_locked`,A=f[E]===!0;if(console.log(`[SecretaryDashboard] isInstallmentLocked check for request ${f.id}, installment ${w}: locked = ${A}, field = ${E}, value = ${f[E]}`),console.log("[SecretaryDashboard] Request data for debugging:",{id:f.id,installment_1_locked:f.installment_1_locked,installment_2_locked:f.installment_2_locked,installment_3_locked:f.installment_3_locked,ultimate_installment_1_locked:f.ultimate_installment_1_locked,ultimate_installment_2_locked:f.ultimate_installment_2_locked,ultimate_installment_3_locked:f.ultimate_installment_3_locked}),f[E]!==void 0&&f[E]!==null)return A;if(console.log(`[SecretaryDashboard] Field ${E} is undefined/null, checking old locked_installments table...`),f.locked_installments&&Array.isArray(f.locked_installments)){const C=f.locked_installments.some(R=>R.installment_number===w);return console.log("[SecretaryDashboard] Found in old table:",C),C}return!1},js=async()=>{try{Ea(!0);const f=await co();Ns(f)}catch(f){console.error("Error loading installment requests:",f),U.error("Σφάλμα κατά τη φόρτωση των αιτημάτων δόσεων")}finally{Ea(!1)}},Fs=async()=>{try{oa(!0);const{data:f,error:w}=await be.from("user_profiles").select("user_id, email, first_name, last_name, personal_training_code").order("first_name");if(w){console.error("Error loading users:",w),U.error("Σφάλμα κατά τη φόρτωση των χρηστών");return}const E=f.map(A=>({id:A.user_id,email:A.email,firstName:A.first_name,lastName:A.last_name,personalTrainingCode:A.personal_training_code||null}));ia(E)}catch(f){console.error("Exception loading users:",f),U.error("Σφάλμα κατά τη φόρτωση των χρηστών")}finally{oa(!1)}},ks=()=>{if(!z)return;const f={id:Date.now().toString(),date:new Date().toISOString().split("T")[0],startTime:"09:00",type:"personal",trainer:"Mike",notes:""},w={...z,scheduleData:{...z.scheduleData,sessions:[...z.scheduleData.sessions,f]}};M(w)},pr=(f,w,E)=>{if(!z)return;const A={...z,scheduleData:{...z.scheduleData,sessions:z.scheduleData.sessions.map(C=>C.id===f?{...C,[w]:E}:C)}};M(A)},Ls=f=>{if(!z)return;const w={...z,scheduleData:{...z.scheduleData,sessions:z.scheduleData.sessions.filter(E=>E.id!==f)}};M(w)},Us=async()=>{if(z)try{Je(!0);const{error:f}=await be.from("personal_training_schedules").update({schedule_data:z.scheduleData,updated_at:new Date().toISOString()}).eq("id",z.id);if(f){console.error("Error saving schedule:",f),U.error("Σφάλμα κατά την αποθήκευση του προγράμματος");return}U.success("Το πρόγραμμα αποθηκεύτηκε επιτυχώς!"),We(!1)}catch(f){console.error("Exception saving schedule:",f),U.error("Σφάλμα κατά την αποθήκευση του προγράμματος")}finally{Je(!1)}},Gs=f=>{const w=["user1@freegym.gr","user2@freegym.gr"],E=["PERSONAL2024","KICKBOX2024"],A=!!f.email&&w.includes(f.email),C=!!f.personalTrainingCode&&E.includes(f.personalTrainingCode);return A||C},Vs=async f=>{var w,E;try{Je(!0);const C=[...p,...Os].find(L=>L.id===f);if(((w=C==null?void 0:C.package)==null?void 0:w.name)==="Ultimate"||((E=C==null?void 0:C.package)==null?void 0:E.name)==="Ultimate Medium"){const{approveUltimateMembershipRequest:L}=await Ur(async()=>{const{approveUltimateMembershipRequest:re}=await import("./membershipApi-BWxw4nWA.js");return{approveUltimateMembershipRequest:re}},__vite__mapDeps([0,1,2]));await L(f)&&(U.success("Το Ultimate αίτημα εγκρίθηκε επιτυχώς! Δημιουργήθηκαν 2 συνδρομές: Pilates + Open Gym"),qt())}else await fl(f)&&(U.success("Το αίτημα εγκρίθηκε επιτυχώς!"),qt())}catch(A){console.error("Error approving request:",A),U.error("Σφάλμα κατά την έγκριση του αιτήματος")}finally{Je(!1)}},Hs=async f=>{const w=prompt("Παρακαλώ εισάγετε τον λόγο απόρριψης:");if(w)try{Je(!0),await hl(f,w)&&(U.success("Το αίτημα απορρίφθηκε επιτυχώς!"),qt())}catch(E){console.error("Error rejecting request:",E),U.error("Σφάλμα κατά την απόρριψη του αιτήματος")}finally{Je(!1)}},qe=(f,w,E)=>{I(A=>({...A,[f]:{...A[f],[w]:E}}))},In=(f,w)=>{F(E=>({...E,[f]:w}))},$s=async f=>{const w=P[f];if(w==="none"||!r){U.error("Παρακαλώ επιλέξτε μια κατάσταση έγκρισης");return}try{Je(!0);const E=y[f];if(!E){U.error("Δεν υπάρχουν επιλογές για αυτό το αίτημα");return}const A=p.find(R=>R.id===f);if(!A){U.error("Αίτημα δεν βρέθηκε");return}if(await bl(A.user_id,w,{oldMembersUsed:E.oldMembers||!1,kettlebellPoints:E.kettlebellPoints&&E.kettlebellPoints.trim()!==""&&parseInt(E.kettlebellPoints)||0,cashAmount:E.cashAmount&&E.cashAmount>0?E.cashAmount:0,posAmount:E.posAmount&&E.posAmount>0?E.posAmount:0,createdBy:r.id,notes:`Program options saved for membership request ${f} with ${w} status`})){if(console.log(`Program approval state saved for membership request: ${f}`),w==="pending"){const L=new Set(Pr),ee={...Mr};L.add(f),ee[f]=E,ya(L),wa(ee),U("Program Options τοποθετήθηκαν στην αναμονή - οι επιλογές παγώθηκαν",{icon:"⏳"})}else if(w==="approved"&&await Xs(f,A.user_id,E),ne(f)){const L=new Set(Pr),ee={...Mr};L.delete(f),delete ee[f],ya(L),wa(ee)}q(L=>({...L,[f]:!0})),F(L=>({...L,[f]:"none"}));const R={approved:"εγκρίθηκε και εκτελέστηκαν οι ενέργειες",rejected:"απορρίφθηκε",pending:"τοποθετήθηκε στην αναμονή"};U.success(`Program Options ${R[w]} επιτυχώς!`)}else U.error("Σφάλμα κατά την αποθήκευση των Program Options")}catch(E){console.error("Error saving request program options:",E),U.error("Σφάλμα κατά την αποθήκευση των Program Options")}finally{Je(!1)}},Xs=async(f,w,E)=>{console.log("Executing approved program actions for membership request:",f),console.log("User Options received:",E),console.log("User ID:",w);try{E.oldMembers&&(await xo(w,(r==null?void 0:r.id)||"")?console.log(`[APPROVED] Old Members marked as used for membership request: ${f}`):console.warn(`[APPROVED] Failed to mark Old Members as used for membership request: ${f}`)),E.first150Members&&(await xo(w,(r==null?void 0:r.id)||"")?console.log(`[APPROVED] First 150 Members - Old Members marked as used for membership request: ${f}`):console.warn(`[APPROVED] First 150 Members - Failed to mark Old Members as used for membership request: ${f}`),console.log(`[APPROVED] First 150 Members selected - Cash set to 45€ and POS locked for membership request: ${f}`));const A=E.kettlebellPoints&&E.kettlebellPoints.trim()!==""&&parseInt(E.kettlebellPoints)||0;A>0?await Nl(w,A,void 0,(r==null?void 0:r.id)||"")?console.log(`[APPROVED] Kettlebell Points saved for membership request: ${f}, Points: ${A}`):console.warn(`[APPROVED] Failed to save Kettlebell Points for membership request: ${f}`):console.log(`[APPROVED] Kettlebell Points set to 0 for membership request: ${f}`);const C=E.cashAmount&&E.cashAmount>0?E.cashAmount:0;console.log("Checking cash amount:",C,"Type:",typeof C),C>0?(console.log("Attempting to save cash transaction..."),await ho(w,C,"cash",void 0,(r==null?void 0:r.id)||"","Cash transaction from approved membership request")?console.log(`[APPROVED] Cash transaction saved for membership request: ${f}, Amount: €${C}`):console.warn(`[APPROVED] Failed to save Cash transaction for membership request: ${f}`)):console.log(`[APPROVED] Cash amount set to 0 for membership request: ${f}`);const R=E.posAmount&&E.posAmount>0?E.posAmount:0;console.log("Checking POS amount:",R,"Type:",typeof R),R>0?(console.log("Attempting to save POS transaction..."),await ho(w,R,"pos",void 0,(r==null?void 0:r.id)||"","POS transaction from approved membership request")?console.log(`[APPROVED] POS transaction saved for membership request: ${f}, Amount: €${R}`):console.warn(`[APPROVED] Failed to save POS transaction for membership request: ${f}`)):console.log(`[APPROVED] POS amount set to 0 for membership request: ${f}`),U.success("Έγιναν όλες οι απαραίτητες ενέργειες για το εγκεκριμένο αίτημα!")}catch(A){console.error("Error executing approved program actions for membership request:",A),U.error("Σφάλμα κατά την εκτέλεση των ενεργειών")}},Ia=()=>{try{console.log("🎥 [Camera] Starting camera initialization..."),console.log("🎥 [Camera] Current states - isScanning:",t,"isVideoReady:",a,"cameraError:",o),s(null),i(!1),n(!0),c(null),h(!1),console.log("🎥 [Camera] Initializing ZXing continuous reader..."),setTimeout(()=>{Ws()},500)}catch(f){console.error("❌ [Camera] Error starting scanning:",f);const w=f instanceof Error?f.message:"Άγνωστο σφάλμα";s(`Δεν ήταν δυνατή η έναρξη της σάρωσης: ${w}`),U.error("Δεν ήταν δυνατή η έναρξη της σάρωσης")}},$t=()=>{var f;console.log("🛑 [Camera] Stopping scanning..."),Ht.current&&(clearInterval(Ht.current),Ht.current=null),n(!1),i(!1),s(null);try{try{(f=Sa.current)==null||f.stop()}catch{}const w=jt.current,E=w==null?void 0:w.srcObject;E==null||E.getTracks().forEach(A=>A.stop()),w&&(w.srcObject=null)}catch(w){console.log("🧹 [Camera] Cleanup error:",w)}},Ws=async()=>{try{if(console.log("🔍 [QR Scanner] Starting continuous ZXing via BrowserQRCodeReader..."),!jt.current){console.log("❌ [QR Scanner] videoRef not available");return}const f=new Qo;Rs.current=f;const w=await Qo.listVideoInputDevices();console.log("🎥 [Camera] Found devices:",w.map(C=>{var R;return{id:(R=C.deviceId)==null?void 0:R.slice(-6),label:C.label}}));const E=w.find(C=>/back|rear|environment/i.test(C.label))||w[w.length-1],A=(E==null?void 0:E.deviceId)||void 0;A||console.warn("⚠️ [Camera] No camera deviceId resolved, falling back to default."),await f.decodeFromVideoDevice(A,jt.current,async(C,R,L)=>{var ee;if(Sa.current=L,C){const re=C.getText();console.log("✅ [QR Scanner] ZXing stream detected:",re);try{const ae=((ee=C==null?void 0:C.getResultPoints)==null?void 0:ee.call(C))||[];ae&&ae.length>=3?Fr(ae.map(G=>({x:G.getX?G.getX():G.x,y:G.getY?G.getY():G.y})),"rgba(16,185,129,0.9)"):Ta("rgba(16,185,129,0.9)")}catch{}await er(re),L.stop(),$t()}else R&&Date.now()%2e3<50&&console.log("ℹ️ [QR Scanner] No code in frame yet. err:",(R==null?void 0:R.name)||R)}),i(!0),Ht.current||zs()}catch(f){console.error("❌ [QR Scanner] Error starting continuous ZXing:",f),s("Αποτυχία εκκίνησης ZXing reader")}},zs=()=>{if(console.log("🔍 [QR Scanner] Starting scan loop with ZXing..."),!jt.current){console.log("❌ [QR Scanner] Video element not available");return}Ht.current&&clearInterval(Ht.current);const f=new Map;f.set(ye.POSSIBLE_FORMATS,[K.QR_CODE]);const w=new hu(f,100);w.timeBetweenDecodingAttempts=80,Ht.current=setInterval(async()=>{var E;if(!jt.current){console.log("🔍 [QR Scanner] Video element not available, stopping scan");return}try{const A=jt.current;if(!A||A.readyState<2){console.log("🔍 [QR Scanner] Video element not ready");return}const C=A.videoWidth,R=A.videoHeight;if(!C||!R){console.log("🔍 [QR Scanner] Invalid video dimensions");return}const L=document.createElement("canvas"),ee=L.getContext("2d",{willReadFrequently:!0});if(L.width=C,L.height=R,!ee){console.log("🔍 [QR Scanner] Canvas 2D context not available");return}ee.drawImage(A,0,0,C,R);const re=ee.getImageData(0,0,C,R),ae=new ImageData(new Uint8ClampedArray(re.data),re.width,re.height);console.log("🔍 [QR Scanner] Captured frame from video:",C,"x",R);try{const G=re.data;let te=0;for(let H=0;H<G.length;H+=4){const Ne=G[H],Ve=G[H+1],Ce=G[H+2],ze=Ne*.299+Ve*.587+Ce*.114|0;G[H]=ze,G[H+1]=ze,G[H+2]=ze,te+=ze}const Q=te/(G.length/4),Z=Q*.9;for(let H=0;H<G.length;H+=4){const Ne=G[H]>Z?255:0;G[H]=Ne,G[H+1]=Ne,G[H+2]=Ne}ee.putImageData(re,0,0),console.log("🔍 [QR Scanner] Applied grayscale+threshold. Avg:",Math.round(Q),"Threshold:",Math.round(Z))}catch(G){console.log("🔍 [QR Scanner] Preprocess error (grayscale/threshold):",G)}try{const te=(await Ur(()=>import("./jsQR-BZUKgwz6.js").then(Z=>Z.j),__vite__mapDeps([3,1,2]))).default;console.log("🔍 [QR Scanner] jsQR analyzing ORIGINAL (dontInvert/attemptBoth)...");const Q=["dontInvert","attemptBoth"];for(const Z of Q){const H=te(ae.data,C,R,{inversionAttempts:Z});if(H&&H.data){try{Fr([H.location.topLeftCorner,H.location.topRightCorner,H.location.bottomRightCorner,H.location.bottomLeftCorner],"rgba(16,185,129,0.9)",C,R)}catch{}console.log(`✅ [QR Scanner] jsQR ORIGINAL detected (${Z}):`,H.data),await er(H.data);return}}}catch(G){console.log("🔍 [QR Scanner] jsQR ORIGINAL error:",G)}try{const te=(await Ur(()=>import("./jsQR-BZUKgwz6.js").then(Z=>Z.j),__vite__mapDeps([3,1,2]))).default;console.log("🔍 [QR Scanner] jsQR analyzing PREPROCESSED (dontInvert/attemptBoth)...");const Q=["dontInvert","attemptBoth"];for(const Z of Q){const H=te(re.data,C,R,{inversionAttempts:Z});if(H&&H.data){try{Fr([H.location.topLeftCorner,H.location.topRightCorner,H.location.bottomRightCorner,H.location.bottomLeftCorner],"rgba(16,185,129,0.9)",C,R)}catch{}console.log(`✅ [QR Scanner] jsQR PREPROCESSED detected (${Z}):`,H.data),await er(H.data);return}}console.log("🔍 [QR Scanner] jsQR did not detect, falling back to ZXing...")}catch(G){console.log("🔍 [QR Scanner] jsQR PREPROCESSED error:",G)}try{const G=document.createElement("canvas"),te=G.getContext("2d"),Q=Math.floor(C*.6),Z=Math.floor(R*.6),H=Math.floor((C-Q)/2),Ne=Math.floor((R-Z)/2);G.width=Q,G.height=Z,te==null||te.drawImage(L,H,Ne,Q,Z,0,0,Q,Z);const Ve=new Image;await new Promise((ze,ut)=>{Ve.onload=()=>ze(),Ve.onerror=ut,Ve.src=G.toDataURL("image/png")});const Ce=await w.decodeFromImage(Ve);if(Ce&&Ce.getText){const ze=Ce.getText();try{const ut=((E=Ce==null?void 0:Ce.getResultPoints)==null?void 0:E.call(Ce))||[];ut&&ut.length>=3?Fr(ut.map(et=>({x:et.getX?et.getX():et.x,y:et.getY?et.getY():et.y})),"rgba(16,185,129,0.9)"):Ta("rgba(16,185,129,0.9)")}catch{}console.log("✅ [QR Scanner] ZXing detected from CENTER CROP image:",ze),await er(ze);return}console.log("🔍 [QR Scanner] ZXing returned empty result from center crop")}catch(G){console.log("🔍 [QR Scanner] ZXing image decode error:",G),console.log("🔍 [QR Scanner] No QR code found in this frame");try{const te=document.createElement("canvas"),Q=te.getContext("2d"),Z=Math.floor(C*.6),H=Math.floor(R*.6),Ne=Math.floor((C-Z)/2),Ve=Math.floor((R-H)/2);Q&&(te.width=512,te.height=Math.floor(512*(H/Z)),Q.drawImage(L,Ne,Ve,Z,H,0,0,te.width,te.height),console.log("🔍 [QR Scanner] Debug crop data URL:",te.toDataURL("image/png").slice(0,100)+"..."))}catch(te){console.log("🔍 [QR Scanner] Debug crop error:",te)}}try{const G=[.8,.6,.5,.4];for(const te of G){const Q=Math.max(160,Math.floor(C*te)),Z=Math.max(120,Math.floor(R*te)),H=document.createElement("canvas"),Ne=H.getContext("2d");H.width=Q,H.height=Z,Ne==null||Ne.drawImage(L,0,0,C,R,0,0,Q,Z);const Ve=new Image;await new Promise((Ce,ze)=>{Ve.onload=()=>Ce(),Ve.onerror=ze,Ve.src=H.toDataURL("image/png")});try{const Ce=await w.decodeFromImage(Ve);if(Ce&&Ce.getText){console.log(`✅ [QR Scanner] ZXing detected at scale ${te}:`,Ce.getText()),await er(Ce.getText());return}}catch{}try{const ze=(await Ur(()=>import("./jsQR-BZUKgwz6.js").then(et=>et.j),__vite__mapDeps([3,1,2]))).default,ut=Ne==null?void 0:Ne.getImageData(0,0,Q,Z);if(ut){const et=ze(ut.data,Q,Z,{inversionAttempts:"attemptBoth"});if(et&&et.data){console.log(`✅ [QR Scanner] jsQR detected at scale ${te}:`,et.data),await er(et.data);return}}}catch{}}console.log("🔍 [QR Scanner] Multi-scale attempts completed without detection")}catch(G){console.log("🔍 [QR Scanner] Multi-scale error:",G)}}catch(A){console.error("❌ [QR Scanner] Error capturing image:",A)}},1e3)},vr=async f=>{console.log("🔍 [Ultra Simple QR] Processing ultra simple QR format"),console.log("🔍 [Ultra Simple QR] QR Data:",f);const{data:w,error:E}=await be.from("qr_codes").select("*").eq("qr_token",f).eq("status","active").maybeSingle();if(console.log("🔍 [Ultra Simple QR] Database query result:",w?"Found":"Not found",E?"Error":"No error"),console.log("🔍 [Ultra Simple QR] QR Code data:",w),console.log("🔍 [Ultra Simple QR] QR Error:",E),E||!w){console.log("❌ [Ultra Simple QR] QR code validation failed"),c({success:!1,message:"Μη έγκυρο QR Code",reason:"QR Code δεν βρέθηκε ή είναι ανενεργό"}),h(!0),$t();return}const{data:A,error:C}=await be.from("user_profiles").select("id, email, first_name, last_name").eq("id",w.user_id).maybeSingle();if(console.log("🔍 [Ultra Simple QR] User profile query result:",A?"Found":"Not found",C?"Error":"No error"),console.log("🔍 [Ultra Simple QR] User profile data:",A),console.log("🔍 [Ultra Simple QR] User profile error:",C),w.expires_at&&new Date(w.expires_at)<new Date){console.log("❌ [Ultra Simple QR] QR code is expired"),c({success:!1,message:"QR Code έχει λήξει",reason:"Το QR Code έχει λήξει και δεν είναι πλέον έγκυρο"}),h(!0),$t();return}console.log("✅ [Ultra Simple QR] QR code validated successfully for user:",A==null?void 0:A.first_name,A==null?void 0:A.last_name),console.log("✅ [Ultra Simple QR] Full user profile data:",A),console.log("✅ [Ultra Simple QR] QR code data:",w),c({success:!0,message:"Επιτυχής είσοδος!",userData:{id:(A==null?void 0:A.id)||"unknown",email:(A==null?void 0:A.email)||"unknown@email.com",name:`${(A==null?void 0:A.first_name)||""} ${(A==null?void 0:A.last_name)||""}`.trim()||"Άγνωστος",category:w.category}}),h(!0),$t(),En()},Ys=async f=>{console.log("🔍 [URL QR] Processing URL QR format:",f),console.log("🔍 [URL QR] Checking if QR code exists in database...");const{data:w,error:E}=await be.from("qr_codes").select("*, user_profiles!inner(id, email, first_name, last_name)").eq("qr_token",f).eq("status","active").single();if(E||!w)console.log("🔍 [URL QR] QR code not found in database, treating as external"),c({success:!0,message:"Εξωτερικό QR Code σαρώθηκε!",userData:{id:"external",email:"External QR Code",name:"Εξωτερικό QR Code",category:"external"}});else{console.log("🔍 [URL QR] QR code found in database, processing as valid user QR");const A=w.user_profiles;c({success:!0,message:"Επιτυχής είσοδος!",userData:{id:A.id,email:A.email,name:`${A.first_name} ${A.last_name}`.trim()||"Άγνωστος",category:w.category}})}h(!0),$t(),En()},er=async f=>{try{if(console.log("🔍 [QR Process] Processing QR data:",f),console.log("🔍 [QR Process] QR data length:",f.length),console.log("🔍 [QR Process] QR data type:",typeof f),/^[A-Za-z0-9]{6,64}$/.test(f))console.log("🔍 [QR Process] Opaque short token detected"),await vr(f);else if(f.includes("__")&&f.length>36)console.log("🔍 [QR Process] Ultra simple QR format detected (userId__category__timestamp)"),console.log("🔍 [QR Process] QR Data:",f),await vr(f);else if(f.includes("_")&&f.length>36)console.log("🔍 [QR Process] Old QR format detected (userId_category_timestamp)"),console.log("🔍 [QR Process] QR Data:",f),await vr(f);else if(f.includes("-")&&f.length>36)console.log("🔍 [QR Process] Old QR format detected (userId-category-timestamp)"),console.log("🔍 [QR Process] QR Data:",f),await vr(f);else if(f.includes(":")&&f.length>50)console.log("🔍 [QR Process] Complex QR format detected (id:userId:category:timestamp:hash)"),console.log("🔍 [QR Process] QR Data:",f),await vr(f);else if(f.startsWith("https://"))console.log("🔍 [QR Process] URL format detected"),await Ys(f);else throw console.log("❌ [QR Process] Unknown QR code format"),new Error("Unknown QR code format")}catch(w){console.error("Error processing QR code:",w),c({success:!1,message:"Σφάλμα επεξεργασίας QR Code",reason:"Μη έγκυρο ή απροσδιόριστο QR Code format"}),h(!0),$t()}},Na=f=>{switch(f){case"free_gym":return"Ελεύθερο Gym";case"pilates":return"Pilates";case"personal":return"Personal Training";default:return f}},Oa=Re.filter(f=>{var w,E,A;return((w=f.firstName)==null?void 0:w.toLowerCase().includes((vt==null?void 0:vt.toLowerCase())||""))||((E=f.lastName)==null?void 0:E.toLowerCase().includes((vt==null?void 0:vt.toLowerCase())||""))||((A=f.email)==null?void 0:A.toLowerCase().includes((vt==null?void 0:vt.toLowerCase())||""))}),Zs=async()=>{if(!dt||!dr){Rt({type:"error",message:"Παρακαλώ επιλέξτε χρήστη και εισάγετε αριθμό points"});return}const f=parseInt(dr);if(f<=0){Rt({type:"error",message:"Ο αριθμός των points πρέπει να είναι μεγαλύτερος από 0"});return}try{Rt(null),Je(!0);const w=Re.find(C=>C.id===dt);if(!w){Rt({type:"error",message:"Δεν βρέθηκε ο επιλεγμένος χρήστης"});return}if(console.log("[OpenGym] Starting Open Gym action for user:",w.email,"Extra Service:",f),!await uo(dt,f,void 0,(r==null?void 0:r.id)||"")){Rt({type:"error",message:"Σφάλμα κατά την αποθήκευση των Kettlebell Points"});return}if(console.log("[OpenGym] Kettlebell Points saved successfully"),!await Qs(dt)){Rt({type:"error",message:"Σφάλμα κατά τη δημιουργία της Free Gym συνδρομής"});return}console.log("[OpenGym] Free Gym membership created successfully"),Rt({type:"success",message:`Επιτυχής εφαρμογή Open Gym για ${w.firstName} ${w.lastName}! Ενεργοποιήθηκε η 1μηνη Free Gym συνδρομή.`}),Rr(""),ha(""),xn(""),U.success(`Open Gym εφαρμογή επιτυχής για ${w.firstName} ${w.lastName}`)}catch(w){console.error("[OpenGym] Error during Open Gym action:",w),Rt({type:"error",message:"Σφάλμα κατά την εκτέλεση της ενέργειας Open Gym"})}finally{Je(!1)}},Qs=async f=>{try{const{data:w,error:E}=await be.from("membership_packages").select("id").eq("name","Free Gym").eq("is_active",!0).single();if(E||!w)return console.error("[OpenGym] Error finding Free Gym package:",E),!1;const A=new Date,C=new Date;C.setMonth(C.getMonth()+1);const{error:R}=await be.from("memberships").insert({user_id:f,package_id:w.id,start_date:A.toISOString().split("T")[0],end_date:C.toISOString().split("T")[0],is_active:!0,expires_at:C.toISOString(),source_package_name:"Open Gym"});return R?(console.error("[OpenGym] Error creating Free Gym membership:",R),!1):!0}catch(w){return console.error("[OpenGym] Exception creating Free Gym membership:",w),!1}},X=f=>Pr.has(f),mt=f=>Mr[f]||null,De=()=>(Kt==="new"?pa:Dr).sort((w,E)=>{const A=new Date(`${w.date}T${w.startTime}`),C=new Date(`${E.date}T${E.startTime}`);return A.getTime()-C.getTime()}),yt=f=>{Kt==="existing"?hr(f):bn(f)},Ks=async f=>{if(f){ma(!0);try{const{data:w}=await be.from("personal_training_schedules").select("*").eq("user_id",f).order("created_at",{ascending:!1}).limit(1);if(w&&w.length>0){const A=w[0].sessions||[];hr(A)}else hr([])}catch(w){console.error("Error loading existing sessions:",w),hr([])}finally{ma(!1)}}},Js=async()=>{if(Mt==="none"||!r){U.error("Παρακαλώ επιλέξτε μια κατάσταση έγκρισης");return}try{Je(!0);const f=S==="individual"||S==="combination"?[B.selectedUserId]:$;for(const w of f){const E=ce[w]||{},{error:A}=await be.from("personal_training_schedules").update({program_options:E,approval_status:Mt,updated_at:new Date().toISOString()}).eq("user_id",w).order("created_at",{ascending:!1}).limit(1);if(A){console.error("Error saving program options:",A),U.error(`Σφάλμα κατά την αποθήκευση επιλογών για χρήστη ${w}`);return}}U.success("Οι επιλογές προγράμματος αποθηκεύτηκαν επιτυχώς!"),fr("none"),Vt({}),gt(!1)}catch(f){console.error("Error saving program options:",f),U.error("Σφάλμα κατά την αποθήκευση των επιλογών")}finally{Je(!1)}},qs=async()=>{var w,E,A;const f=S==="individual"||S==="combination"?[B.selectedUserId]:$;if(f.length===0){U.error("Παρακαλώ επιλέξτε χρήστη/ες");return}try{Je(!0),console.log("[SECRETARY] Starting to create personal training program..."),console.log("[SECRETARY] User type:",It);for(const C of f){const R=Re.find(te=>te.id===C);if(!R){U.error(`Δεν βρέθηκε ο χρήστης με ID: ${C}`);continue}console.log("[SECRETARY] Selected user:",R.firstName,R.lastName,"ID:",R.id),console.log("[SECRETARY] Secretary user ID:",r==null?void 0:r.id);let L=[];if(S==="group")if(It==="paspartu"){const te=Tt[R.id]||[];te.length>0?L=te.map((Q,Z)=>({id:`group-session-${Z+1}`,date:Q.date,startTime:Q.startTime,endTime:Q.endTime,type:"personal",trainer:Q.trainer||"Mike",room:Q.room||"Αίθουσα Mike",notes:`Group Paspartu Session ${Z+1} - ${Q.notes||""}`})):(L=De().map(Z=>({id:Z.id,date:Z.date,startTime:Z.startTime,type:Z.type,trainer:Z.trainer||"Mike",room:Z.room||"Αίθουσα Mike",notes:Z.notes+" (Group Paspartu)"})),console.log(`[SECRETARY] Using ${L.length} current sessions for Group Paspartu user: ${R.email}`))}else L=[];else S==="combination"?L=De().slice(0,Ke).map(Q=>({id:Q.id,date:Q.date,startTime:Q.startTime,type:Q.type,trainer:Q.trainer||"Mike",room:Q.room||"Αίθουσα Mike",notes:Q.notes+" (Personal - Συνδυασμός)"})):L=De().map(Q=>({id:Q.id,date:Q.date,startTime:Q.startTime,type:Q.type,trainer:Q.trainer||"Mike",room:Q.room||"Αίθουσα Mike",notes:Q.notes}));const ee={user_id:R.id,trainer_name:S==="group"?"Mike":((w=L[0])==null?void 0:w.trainer)||"Mike",month:new Date().getMonth()+1,year:new Date().getFullYear(),schedule_data:{sessions:L,notes:S==="group"?"Group program - Οι σεσίες θα προστεθούν μέσω του Group Assignment Interface":S==="combination"?`Combination program - ${Ke} Personal + ${Ot} Group sessions`:"",trainer:S==="group"?"Mike":((E=L[0])==null?void 0:E.trainer)||"Mike",specialInstructions:S==="group"?"Ομαδικό πρόγραμμα - Οι λεπτομέρειες των σεσίων διαχειρίζονται ξεχωριστά":S==="combination"?`Συνδυασμένο πρόγραμμα - Περιλαμβάνει ${Ke} ατομικές σεσίες και ${Ot} ομαδικές σεσίες`:"",groupRoomSize:S==="group"||S==="combination"?parseInt(cn):null,weeklyFrequency:S==="group"||S==="combination"?At:null,monthlyTotal:S==="group"||S==="combination"?Tr:null,combinationPersonalSessions:S==="combination"?Ke:null,combinationGroupSessions:S==="combination"?Ot:null},status:"accepted",created_by:r==null?void 0:r.id,user_type:It,is_flexible:It==="paspartu",training_type:S,group_room_size:S==="group"||S==="combination"?parseInt(cn):null,weekly_frequency:S==="group"||S==="combination"?At:null,monthly_total:S==="group"||S==="combination"?Tr:null};console.log("[SECRETARY] Schedule payload:",ee),console.log("[SECRETARY] Inserting schedule into personal_training_schedules...");const{data:re,error:ae}=await be.from("personal_training_schedules").insert(ee).select().single();if(ae)throw console.error("[SECRETARY] Schedule insertion error:",ae),ae;if(console.log("[SECRETARY] Schedule inserted successfully for user:",R.email),S==="combination"&&L.length>0){console.log("[SECRETARY] Creating group_sessions for combination individual sessions...",L);const te=L.map(H=>{const Ne=H.startTime,[Ve,Ce]=Ne.split(":").map(Number),ut=`${((Ve+1)%24).toString().padStart(2,"0")}:${Ce.toString().padStart(2,"0")}`;return{session_date:H.date,start_time:H.startTime,end_time:ut,trainer:H.trainer,room:H.room||"Αίθουσα Mike",group_type:null,notes:H.notes+" (Individual - Combination Program)"}});console.log("[SECRETARY] Individual group sessions to insert:",te);const{data:Q,error:Z}=await be.from("group_sessions").insert(te.map(H=>({program_id:re.id,user_id:R.id,session_date:H.session_date,start_time:H.start_time,end_time:H.end_time,trainer:H.trainer,room:H.room,group_type:H.group_type,notes:H.notes,is_active:!0,created_by:(r==null?void 0:r.id)||""})));Z?(console.error("[SECRETARY] Error creating group_sessions for combination individual sessions:",Z),console.error("[SECRETARY] Error details:",{message:Z.message,details:Z.details,hint:Z.hint,code:Z.code}),U.error("Σφάλμα κατά τη δημιουργία των ατομικών σεσίων του συνδυασμού")):(console.log("[SECRETARY] Created group_sessions for combination individual sessions:",Q),console.log("[SECRETARY] Individual sessions created successfully"))}else console.log("[SECRETARY] Skipping individual sessions creation:",{trainingType:S,scheduleSessionsLength:L.length,willCreate:S==="combination"&&L.length>0});const G=ce[R.id];if(G&&(G.oldMembers&&(await _l(R.id,(r==null?void 0:r.id)||"")?console.log("[SECRETARY] Old Members marked as used for user:",R.email):console.warn("[SECRETARY] Failed to mark Old Members as used for user:",R.email)),G.kettlebellPoints&&parseInt(G.kettlebellPoints)>0&&(await uo(R.id,parseInt(G.kettlebellPoints),re.id,(r==null?void 0:r.id)||"")?console.log("[SECRETARY] Kettlebell Points saved for user:",R.email,"Points:",G.kettlebellPoints):console.warn("[SECRETARY] Failed to save Kettlebell Points for user:",R.email))),It==="paspartu"){console.log("[SECRETARY] Handling Paspartu user - replacing old schedule and managing deposits...");const{error:te}=await be.rpc("replace_paspartu_schedule",{p_user_id:R.id,p_new_schedule_id:re.id});te?(console.error("[SECRETARY] Error replacing old Paspartu schedule:",te),console.warn("[SECRETARY] Failed to replace old schedule, but new schedule was created successfully")):console.log("[SECRETARY] Old Paspartu schedule replaced successfully for user:",R.email);let Q=5,Z=0;S==="combination"?(Z=Ke+Ot,console.log(`[SECRETARY] Combination Paspartu: ${Ke} personal + ${Ot} group = ${Z} used deposits`)):S==="individual"?(Z=0,console.log("[SECRETARY] Individual Paspartu: Credit 5 lessons, no deduction (original behavior)")):S==="group"&&(Z=0,console.log("[SECRETARY] Group Paspartu: Credit 5 lessons, no deduction (same as Individual)")),Z>Q&&(console.warn(`[SECRETARY] Warning: Used deposits (${Z}) exceeds total deposits (${Q}). Setting to max.`),Z=Q);const{error:H}=await be.rpc("reset_lesson_deposit_for_new_program",{p_user_id:R.id,p_total_lessons:Q,p_created_by:r==null?void 0:r.id});if(H)console.error("[SECRETARY] Lesson deposit reset error:",H),console.warn("[SECRETARY] Failed to reset lesson deposit, but schedule was created successfully");else if(console.log(`[SECRETARY] Lesson deposit reset successfully for Paspartu user: ${R.email}`),console.log(`[SECRETARY] Deposits: ${Q} total, ${Z} will be used, ${Q-Z} remaining`),Z>0){const{error:Ne}=await be.from("lesson_deposits").update({used_lessons:Z}).eq("user_id",R.id).eq("is_active",!0);Ne?(console.error("[SECRETARY] Error updating used deposits:",Ne),console.warn("[SECRETARY] Failed to update used deposits, but schedule was created successfully")):console.log(`[SECRETARY] Updated used deposits to ${Z} for user: ${R.email}`)}}console.log(`[SECRETARY] Successfully created program for user: ${R.email}`)}if((S==="group"||S==="combination")&&f.length>0&&Object.keys(Tt).length>0){console.log("[SECRETARY] Creating group sessions for selected slots:",Tt);for(const C of f){const R=Tt[C];if(R&&R.length>0){const{data:L}=await be.from("personal_training_schedules").select("id").eq("user_id",C).in("training_type",["group","combination"]).order("created_at",{ascending:!1}).limit(1);if(L&&L.length>0){const ee=L[0].id,re=R.map(G=>({session_date:G.date,start_time:G.startTime,end_time:G.endTime,trainer:G.trainer,room:G.room,group_type:G.groupType,notes:G.notes||"Group session created by secretary"})),ae=await Al(C,ee,re,(r==null?void 0:r.id)||"");if(ae.success){if(console.log(`[SECRETARY] Created ${ae.createdCount} group sessions for user ${C}`),ae.blockedSessions&&ae.blockedSessions.length>0){const G=ae.blockedSessions.length,te=ae.createdCount||0;U.error(`Δημιουργήθηκαν ${te} σεσίες, αλλά ${G} σεσίες αποκλείστηκαν λόγω γεμάτου capacity. Λεπτομέρειες: ${ae.blockedSessions.slice(0,2).join(", ")}${G>2?"...":""}`)}}else console.error("[SECRETARY] Error creating group sessions:",ae.error),(A=ae.error)!=null&&A.includes("capacity")?U.error(`Δεν μπορούν να δημιουργηθούν σεσίες: ${ae.error}`):U.error(`Σφάλμα δημιουργίας σεσίων: ${ae.error}`)}}}U.success("Το ομαδικό πρόγραμμα και οι αναθέσεις δημιουργήθηκαν επιτυχώς!")}else if((S==="group"||S==="combination")&&f.length>0)U(`Το ${S==="combination"?"συνδυασμένο":"ομαδικό"} πρόγραμμα δημιουργήθηκε. ${S==="combination"?"Μπορείτε να κάνετε ομαδικές αναθέσεις αργότερα από το Group Programs Overview.":"Μπορείτε να κάνετε αναθέσεις αργότερα από το Group Programs Overview."}`,{icon:"ℹ️"});else{const C=f.map(re=>{const ae=Re.find(G=>G.id===re);return ae?`${ae.firstName} ${ae.lastName}`:re}).join(", "),R=S==="individual"?"Ατομικό":S==="combination"?"Συνδυασμένο":"Ομαδικό",L=It==="paspartu"?"Paspartu":"Personal",ee=S==="individual"||S==="combination"?"τον χρήστη":"τους χρήστες";U.success(`Το πρόγραμμα ${R} ${L} Training δημιουργήθηκε επιτυχώς για ${ee}: ${C}!`)}gt(!1),sn({code:"",selectedUserId:""}),ur([]),bn([]),hr([]),Vt({}),fr("none"),ca({}),vs(null),la(null),un(0),ua(""),fn("dropdown")}catch(C){console.error("[SECRETARY] Error creating program:",C),U.error("Σφάλμα κατά τη δημιουργία του προγράμματος")}finally{Je(!1)}},Ta=f=>{const w=Cn.current;if(!w)return;const E=w.getContext("2d");E&&(E.strokeStyle=f,E.lineWidth=3,E.strokeRect(8,8,w.width-16,w.height-16))},Fr=(f,w,E,A)=>{const C=Cn.current,R=jt.current;if(!C||!R||!(f!=null&&f.length))return;const L=C.getContext("2d");if(!L)return;const ee=E?C.width/E:1,re=A?C.height/A:1;L.clearRect(0,0,C.width,C.height),L.beginPath(),L.strokeStyle=w,L.lineWidth=3,f.forEach((ae,G)=>{const te=ae.x*ee,Q=ae.y*re;G===0?L.moveTo(te,Q):L.lineTo(te,Q)}),L.closePath(),L.stroke()},el=()=>{h(!1),c(null)};return!r||r.role!=="secretary"?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx(sl,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Δεν έχετε δικαίωμα πρόσβασης"}),u.jsx("p",{className:"text-gray-600",children:"Αυτή η σελίδα είναι διαθέσιμη μόνο για γραμματεία"})]})}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:[u.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 shadow-2xl border-b border-gray-700",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"flex justify-between items-center py-6",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("img",{src:"/logo.png",alt:"Get Fit Logo",className:"h-32 w-32 rounded-lg object-contain"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Secretary Dashboard"}),u.jsx("p",{className:"text-gray-300 mt-1",children:b==="scanner"?"🔍 Σαρώστε QR codes για είσοδο/έξοδο":b==="membership-requests"?"📋 Διαχείριση αιτημάτων συνδρομών":b==="users-information"?"👥 Πληροφορίες χρηστών":b==="personal-training"?"💪 Διαχείριση προγραμμάτων Personal Training":"💳 Διαχείριση δόσεων για πακέτα Ultimate"})]})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[b==="membership-requests"&&u.jsxs("button",{onClick:qt,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[u.jsx(zr,{className:"h-4 w-4"}),u.jsx("span",{className:"font-medium",children:"Ανανέωση"})]}),u.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-xl hover:from-gray-700 hover:to-gray-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[u.jsx(rr,{className:"h-4 w-4"}),u.jsx("span",{className:"font-medium",children:"Αποσύνδεση"})]})]})]}),u.jsx("div",{className:"border-t border-gray-600",children:u.jsxs("nav",{className:"flex space-x-2 p-2",children:[u.jsx("button",{onClick:()=>_("scanner"),className:`py-4 px-6 rounded-xl font-medium text-sm transition-all duration-200 transform hover:scale-105 ${b==="scanner"?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-lg border-2 border-blue-400":"text-gray-300 hover:text-white hover:bg-gray-700 border-2 border-transparent"}`,children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Nn,{className:"h-5 w-5"}),u.jsx("span",{children:"🔍 QR Scanner"})]})}),u.jsx("button",{onClick:()=>_("membership-requests"),className:`py-4 px-6 rounded-xl font-medium text-sm transition-all duration-200 transform hover:scale-105 ${b==="membership-requests"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg border-2 border-green-400":"text-gray-300 hover:text-white hover:bg-gray-700 border-2 border-transparent"}`,children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(kr,{className:"h-5 w-5"}),u.jsx("span",{children:"📋 Αιτήματα Συνδρομών"})]})}),u.jsx("button",{onClick:()=>_("users-information"),className:`py-4 px-6 rounded-xl font-medium text-sm transition-all duration-200 transform hover:scale-105 ${b==="users-information"?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg border-2 border-purple-400":"text-gray-300 hover:text-white hover:bg-gray-700 border-2 border-transparent"}`,children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-purple-400 text-lg",children:"👥"}),u.jsx("span",{children:"Χρήστες"})]})}),u.jsx("button",{onClick:()=>_("personal-training"),className:`py-4 px-6 rounded-xl font-medium text-sm transition-all duration-200 transform hover:scale-105 ${b==="personal-training"?"bg-gradient-to-r from-pink-600 to-pink-700 text-white shadow-lg border-2 border-pink-400":"text-gray-300 hover:text-white hover:bg-gray-700 border-2 border-transparent"}`,children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-pink-400 text-lg",children:"💪"}),u.jsx("span",{children:"Personal Training"})]})})]})})]})}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:b==="scanner"?u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-8",children:[u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl shadow-2xl border border-gray-600 p-6 backdrop-blur-sm",children:[u.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[u.jsx("span",{className:"text-2xl mr-2",children:"🔍"}),"QR Code Scanner"]}),u.jsx("div",{className:"space-y-4",children:t?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",style:{aspectRatio:"16/9",minHeight:"200px"},"data-scanning":t?"true":"false",children:[u.jsx("canvas",{ref:Cn,className:"absolute inset-0 w-full h-full pointer-events-none"}),u.jsx("video",{ref:jt,className:"w-full h-full object-contain bg-black",playsInline:!0,muted:!0,autoPlay:!0}),!a&&!o&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800",children:u.jsxs("div",{className:"text-center text-white",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),u.jsx("p",{className:"text-sm",children:"Φόρτωση κάμερας..."})]})}),o&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900 bg-opacity-90",children:u.jsxs("div",{className:"text-center text-white p-4",children:[u.jsx(Lr,{className:"h-12 w-12 mx-auto mb-4 text-red-300"}),u.jsx("p",{className:"text-sm font-medium mb-2",children:"Σφάλμα κάμερας"}),u.jsx("p",{className:"text-xs text-red-200",children:o})]})}),a&&!o&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute inset-0 border-2 border-blue-500 rounded-lg pointer-events-none",children:u.jsx("div",{className:"absolute top-2 left-2 right-2 bg-blue-500 text-white text-center py-1 rounded text-sm",children:"Σαρώστε QR Code εδώ"})}),u.jsxs("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-75 text-white text-xs p-2 rounded",children:["Camera Status: ",a?"Ready":"Loading"]})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>$t(),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[u.jsx(Lr,{className:"h-4 w-4 inline mr-2"}),"Σταματήστε σάρωση"]}),o&&u.jsxs("button",{onClick:Ia,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(On,{className:"h-4 w-4 inline mr-2"}),"Δοκιμάστε ξανά"]})]})]}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-full p-4 w-20 h-20 mx-auto mb-4 shadow-lg",children:u.jsx(On,{className:"h-12 w-12 text-white"})}),u.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Ξεκινήστε τη σάρωση"}),u.jsx("p",{className:"text-gray-300 mb-6",children:"Πατήστε το κουμπί για να ανοίξετε την κάμερα"}),u.jsxs("button",{onClick:()=>{console.log("🎯 [UI] Start scanning button clicked"),Ia()},className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 font-medium",children:[u.jsx(On,{className:"h-5 w-5 inline mr-2"}),"Ξεκινήστε σάρωση"]})]})})]}),u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl shadow-2xl border border-gray-600 p-6 backdrop-blur-sm",children:[u.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[u.jsx("span",{className:"text-2xl mr-2",children:"📋"}),"Πρόσφατες σαρώσεις"]}),x.length===0?u.jsxs("div",{className:"text-center py-8",children:[u.jsx("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-full p-3 w-16 h-16 mx-auto mb-4 shadow-lg",children:u.jsx(Nn,{className:"h-10 w-10 text-gray-300"})}),u.jsx("p",{className:"text-gray-300",children:"Δεν υπάρχουν πρόσφατες σαρώσεις"})]}):u.jsx("div",{className:"space-y-3",children:x.map((f,w)=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-700 to-gray-800 rounded-xl border border-gray-600 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-102",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:`p-3 rounded-full shadow-lg ${f.status==="approved"?"bg-gradient-to-r from-green-500 to-green-600":"bg-gradient-to-r from-red-500 to-red-600"}`,children:f.status==="approved"?u.jsx(Hn,{className:"h-5 w-5 text-white"}):u.jsx(Lr,{className:"h-5 w-5 text-white"})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-white",children:f.user_profiles?`${f.user_profiles.first_name} ${f.user_profiles.last_name}`:"Άγνωστος"}),u.jsxs("p",{className:"text-sm text-gray-300",children:[Na(f.category)," • ",f.scan_type]})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-sm text-gray-300",children:new Date(f.created_at).toLocaleTimeString("el-GR")}),u.jsx("p",{className:`text-xs font-medium px-2 py-1 rounded-full ${f.status==="approved"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:f.status==="approved"?"Εγκεκριμένο":"Απορριφθέν"})]})]},w))})]})]}):b==="membership-requests"?u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl shadow-2xl border border-gray-600 p-6 backdrop-blur-sm",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center",children:[u.jsx("span",{className:"text-3xl mr-3",children:"📋"}),"Αιτήματα Συνδρομών"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"hidden md:flex items-center gap-2",onClick:()=>jr(1),children:[u.jsx("button",{onClick:()=>xr("all"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors border ${Ct==="all"?"bg-gray-700 text-white border-gray-500":"bg-gray-800 text-gray-300 hover:text-white border-gray-700"}`,children:"Όλα"}),u.jsx("button",{onClick:()=>xr("Open Gym"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors border ${Ct==="Open Gym"?"bg-blue-700 text-white border-blue-500":"bg-gray-800 text-gray-300 hover:text-white border-gray-700"}`,children:"Open Gym"}),u.jsx("button",{onClick:()=>xr("Pilates"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors border ${Ct==="Pilates"?"bg-purple-700 text-white border-purple-500":"bg-gray-800 text-gray-300 hover:text-white border-gray-700"}`,children:"Pilates"}),u.jsx("button",{onClick:()=>xr("Ultimate"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors border ${Ct==="Ultimate"?"bg-orange-700 text-white border-orange-500":"bg-gray-800 text-gray-300 hover:text-white border-gray-700"}`,children:"Ultimate"}),u.jsx("button",{onClick:()=>xr("Installments"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors border ${Ct==="Installments"?"bg-amber-700 text-white border-amber-500":"bg-gray-800 text-gray-300 hover:text-white border-gray-700"}`,children:"Δόσεις"})]}),u.jsx("input",{type:"text",value:ba,onChange:f=>{jr(1),Es(f.target.value)},placeholder:"Αναζήτηση χρήστη...",className:"px-3 py-2 rounded-lg text-sm bg-gray-800 text-gray-200 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),Bt?u.jsxs("div",{className:"text-center py-8",children:[u.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-400 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-300 font-medium",children:"Φόρτωση αιτημάτων..."})]}):p.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-purple-600 rounded-full p-4 w-20 h-20 mx-auto mb-4 shadow-lg",children:u.jsx(kr,{className:"h-12 w-12 text-white"})}),u.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Δεν υπάρχουν αιτήματα"}),u.jsx("p",{className:"text-gray-300",children:"Δεν υπάρχουν αιτήματα συνδρομών για επεξεργασία"})]}):u.jsxs("div",{className:"space-y-4",children:[p.filter(f=>{var A;const w=!!f.has_installments;if(!(Ct==="Installments"&&w)){if(!(f.status==="pending"||f.status==="approved"&&ne(f.id)||f.status==="rejected"&&ne(f.id)))return!1}if(Ct==="all")return!0;if(Ct==="Installments")return!!f.has_installments;const E=(((A=f.package)==null?void 0:A.name)||"").trim();return Ct==="Open Gym"?E==="Free Gym":E===Ct}).filter(f=>{var A,C;const w=ba.trim().toLowerCase();return w?`${((A=f.user)==null?void 0:A.first_name)||""} ${((C=f.user)==null?void 0:C.last_name)||""}`.trim().toLowerCase().includes(w):!0}).slice((gr-1)*_a,gr*_a).map(f=>{var w,E,A,C,R,L,ee,re,ae,G,te,Q,Z,H,Ne,Ve,Ce,ze,ut,et,ui,di,fi,hi,xi,gi,pi,vi,mi,yi,wi,bi,_i,Ai,Ci,Ei,Si,Ii,Ni,Oi,Ti,Ri,Di,Pi,Mi,Bi,ji,Fi,ki,Li,Ui,Gi,Vi,Hi,$i,Xi,Wi,zi,Yi,Zi,Qi,Ki,Ji,qi,eo,to,ro,no,ao;return u.jsxs("div",{className:"bg-gradient-to-r from-gray-700 to-gray-800 border border-gray-600 rounded-2xl p-6 hover:from-gray-600 hover:to-gray-700 transition-all duration-200 shadow-lg hover:shadow-2xl transform hover:scale-102",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[u.jsx("div",{className:"flex-shrink-0",children:(w=f.user)!=null&&w.profile_photo?u.jsxs("div",{className:"w-12 h-12 rounded-xl overflow-hidden shadow-lg border-2 border-blue-400",children:[u.jsx("img",{src:f.user.profile_photo,alt:`${(E=f.user)==null?void 0:E.first_name} ${(A=f.user)==null?void 0:A.last_name}`,className:"w-full h-full object-cover",onError:ie=>{ie.currentTarget.style.display="none";const Be=ie.currentTarget.nextElementSibling;Be&&(Be.style.display="flex")}}),u.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center hidden",children:u.jsx(Wr,{className:"h-6 w-6 text-white"})})]}):u.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:u.jsx(Wr,{className:"h-6 w-6 text-white"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-white text-lg",children:(C=f.user)!=null&&C.first_name&&((R=f.user)!=null&&R.last_name)?`${f.user.first_name} ${f.user.last_name}`:"Άγνωστος χρήστης"}),u.jsx("p",{className:"text-sm text-gray-300",children:((L=f.user)==null?void 0:L.email)||"Δεν υπάρχει email"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500/20 to-blue-600/20 rounded-lg p-3 border border-blue-500/30",children:[u.jsx(kr,{className:"h-5 w-5 text-blue-400"}),u.jsxs("span",{className:"text-sm text-gray-200",children:[u.jsx("span",{className:"font-medium text-blue-300",children:"Πακέτο:"})," ",((ee=f.package)==null?void 0:ee.name)||"Άγνωστο πακέτο"]})]}),u.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-purple-500/20 to-purple-600/20 rounded-lg p-3 border border-purple-500/30",children:[u.jsx(Vn,{className:"h-5 w-5 text-purple-400"}),u.jsxs("span",{className:"text-sm text-gray-200",children:[u.jsx("span",{className:"font-medium text-purple-300",children:"Διάρκεια:"})," ",ul(f.duration_type)]})]}),u.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-green-500/20 to-green-600/20 rounded-lg p-3 border border-green-500/30",children:[u.jsx(Il,{className:"h-5 w-5 text-green-400"}),u.jsxs("span",{className:"text-sm text-gray-200",children:[u.jsx("span",{className:"font-medium text-green-300",children:"Τιμή:"})," ",dl(f.requested_price)]})]})]}),f.classes_count&&f.classes_count>0&&u.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-pink-500/20 to-pink-600/20 border border-pink-500/30 rounded-xl",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-2xl",children:"🧘"}),u.jsxs("span",{className:"text-sm font-medium text-pink-300",children:["Μαθήματα Pilates: ",f.classes_count]})]})}),f.has_installments&&u.jsxs("div",{className:"mt-6 bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-orange-200 rounded-2xl shadow-xl overflow-hidden",children:[u.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 px-6 py-4",children:u.jsxs("h4",{className:"text-xl font-bold text-white flex items-center",children:[u.jsx(kr,{className:"h-6 w-6 mr-3"}),"Διαχείριση Δόσεων - ",((re=f.package)==null?void 0:re.name)||"Συνδρομής"]})}),u.jsx("div",{className:"p-6",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-orange-100 p-5 hover:shadow-xl transition-all duration-200",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h5",{className:"text-lg font-bold text-orange-800 flex items-center",children:[u.jsx("span",{className:"w-8 h-8 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"1"}),"1η Δόση"]}),Ie(f,1)&&u.jsxs("div",{className:"flex items-center text-orange-600 text-sm font-medium",children:[u.jsx(Xt,{className:"h-4 w-4 mr-1"}),"Κλειδωμένη"]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"💰 Ποσό (€)"}),u.jsx("input",{type:"number",value:((ae=y[f.id])==null?void 0:ae.installment1Amount)||f.installment_1_amount||"",onChange:ie=>qe(f.id,"installment1Amount",ie.target.value),placeholder:"0.00",disabled:Ie(f,1),className:`w-full p-3 border-2 rounded-xl focus:ring-2 transition-all ${Ie(f,1)?"border-orange-300 bg-orange-50 text-orange-600 cursor-not-allowed":"border-gray-200 focus:border-orange-400 focus:ring-orange-200 hover:border-orange-300"}`})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"💳 Τρόπος Πληρωμής"}),u.jsxs("select",{value:((G=y[f.id])==null?void 0:G.installment1PaymentMethod)||f.installment_1_payment_method||"cash",onChange:ie=>qe(f.id,"installment1PaymentMethod",ie.target.value),disabled:Ie(f,1),className:`w-full p-3 border-2 rounded-xl focus:ring-2 transition-all ${Ie(f,1)?"border-orange-300 bg-orange-50 text-orange-600 cursor-not-allowed":"border-gray-200 focus:border-orange-400 focus:ring-orange-200 hover:border-orange-300"}`,children:[u.jsx("option",{value:"cash",children:"💰 Μετρητά"}),u.jsx("option",{value:"pos",children:"💳 POS"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"📅 Ημερομηνία Πληρωμής"}),u.jsx("input",{type:"date",value:((te=y[f.id])==null?void 0:te.installment1DueDate)||f.installment_1_due_date||"",onChange:ie=>qe(f.id,"installment1DueDate",ie.target.value),disabled:Ie(f,1),className:`w-full p-3 border-2 rounded-xl focus:ring-2 transition-all ${Ie(f,1)?"border-orange-300 bg-orange-50 text-orange-600 cursor-not-allowed":"border-gray-200 focus:border-orange-400 focus:ring-orange-200 hover:border-orange-300"}`})]}),u.jsx("div",{className:"pt-3 border-t border-gray-100",children:u.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",checked:Ie(f,1),onChange:()=>Sn(f.id,1),className:"w-5 h-5 text-orange-600 border-2 border-gray-300 rounded focus:ring-orange-500 focus:ring-2 transition-all group-hover:border-orange-400"}),u.jsxs("span",{className:"text-sm font-medium text-gray-700 flex items-center group-hover:text-orange-600 transition-colors",children:[u.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Κλείδωμα Δόσης"]})]})})]})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-orange-100 p-5 hover:shadow-xl transition-all duration-200",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h5",{className:"text-lg font-bold text-orange-800 flex items-center",children:[u.jsx("span",{className:"w-8 h-8 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"2"}),"2η Δόση"]}),Ie(f,2)&&u.jsxs("div",{className:"flex items-center text-orange-600 text-sm font-medium",children:[u.jsx(Xt,{className:"h-4 w-4 mr-1"}),"Κλειδωμένη"]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"💰 Ποσό (€)"}),u.jsx("input",{type:"number",value:((Q=y[f.id])==null?void 0:Q.installment2Amount)||f.installment_2_amount||"",onChange:ie=>qe(f.id,"installment2Amount",ie.target.value),placeholder:"0.00",disabled:Ie(f,2),className:`w-full p-3 border-2 rounded-xl focus:ring-2 transition-all ${Ie(f,2)?"border-orange-300 bg-orange-50 text-orange-600 cursor-not-allowed":"border-gray-200 focus:border-orange-400 focus:ring-orange-200 hover:border-orange-300"}`})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"💳 Τρόπος Πληρωμής"}),u.jsxs("select",{value:((Z=y[f.id])==null?void 0:Z.installment2PaymentMethod)||f.installment_2_payment_method||"cash",onChange:ie=>qe(f.id,"installment2PaymentMethod",ie.target.value),disabled:Ie(f,2),className:`w-full p-3 border-2 rounded-xl focus:ring-2 transition-all ${Ie(f,2)?"border-orange-300 bg-orange-50 text-orange-600 cursor-not-allowed":"border-gray-200 focus:border-orange-400 focus:ring-orange-200 hover:border-orange-300"}`,children:[u.jsx("option",{value:"cash",children:"💰 Μετρητά"}),u.jsx("option",{value:"pos",children:"💳 POS"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"📅 Ημερομηνία Πληρωμής"}),u.jsx("input",{type:"date",value:((H=y[f.id])==null?void 0:H.installment2DueDate)||f.installment_2_due_date||"",onChange:ie=>qe(f.id,"installment2DueDate",ie.target.value),disabled:Ie(f,2),className:`w-full p-3 border-2 rounded-xl focus:ring-2 transition-all ${Ie(f,2)?"border-orange-300 bg-orange-50 text-orange-600 cursor-not-allowed":"border-gray-200 focus:border-orange-400 focus:ring-orange-200 hover:border-orange-300"}`})]}),u.jsx("div",{className:"pt-3 border-t border-gray-100",children:u.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",checked:Ie(f,2),onChange:()=>Sn(f.id,2),className:"w-5 h-5 text-orange-600 border-2 border-gray-300 rounded focus:ring-orange-500 focus:ring-2 transition-all group-hover:border-orange-400"}),u.jsxs("span",{className:"text-sm font-medium text-gray-700 flex items-center group-hover:text-orange-600 transition-colors",children:[u.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Κλείδωμα Δόσης"]})]})})]})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-orange-100 p-5 hover:shadow-xl transition-all duration-200",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h5",{className:"text-lg font-bold text-orange-800 flex items-center",children:[u.jsx("span",{className:"w-8 h-8 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"3"}),"3η Δόση"]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[Ie(f,3)&&u.jsxs("div",{className:"flex items-center text-orange-600 text-sm font-medium",children:[u.jsx(Xt,{className:"h-4 w-4 mr-1"}),"Κλειδωμένη"]}),(((Ne=y[f.id])==null?void 0:Ne.deleteThirdInstallment)||f.third_installment_deleted)&&u.jsxs("div",{className:"flex items-center text-red-600 text-sm font-medium",children:[u.jsx(br,{className:"h-4 w-4 mr-1"}),"Διαγραμμένη"]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"💰 Ποσό (€)"}),u.jsx("input",{type:"number",value:((Ve=y[f.id])==null?void 0:Ve.installment3Amount)||f.installment_3_amount||"",onChange:ie=>qe(f.id,"installment3Amount",ie.target.value),placeholder:"0.00",disabled:Ie(f,3)||((Ce=y[f.id])==null?void 0:Ce.deleteThirdInstallment)||f.third_installment_deleted,className:`w-full p-3 border-2 rounded-xl focus:ring-2 transition-all ${Ie(f,3)?"border-orange-300 bg-orange-50 text-orange-600 cursor-not-allowed":(ze=y[f.id])!=null&&ze.deleteThirdInstallment||f.third_installment_deleted?"border-red-300 bg-red-50 text-red-600 cursor-not-allowed":"border-gray-200 focus:border-orange-400 focus:ring-orange-200 hover:border-orange-300"}`})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"💳 Τρόπος Πληρωμής"}),u.jsxs("select",{value:((ut=y[f.id])==null?void 0:ut.installment3PaymentMethod)||f.installment_3_payment_method||"cash",onChange:ie=>qe(f.id,"installment3PaymentMethod",ie.target.value),disabled:Ie(f,3)||((et=y[f.id])==null?void 0:et.deleteThirdInstallment)||f.third_installment_deleted,className:`w-full p-3 border-2 rounded-xl focus:ring-2 transition-all ${Ie(f,3)?"border-orange-300 bg-orange-50 text-orange-600 cursor-not-allowed":(ui=y[f.id])!=null&&ui.deleteThirdInstallment||f.third_installment_deleted?"border-red-300 bg-red-50 text-red-600 cursor-not-allowed":"border-gray-200 focus:border-orange-400 focus:ring-orange-200 hover:border-orange-300"}`,children:[u.jsx("option",{value:"cash",children:"💰 Μετρητά"}),u.jsx("option",{value:"pos",children:"💳 POS"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"📅 Ημερομηνία Πληρωμής"}),u.jsx("input",{type:"date",value:((di=y[f.id])==null?void 0:di.installment3DueDate)||f.installment_3_due_date||"",onChange:ie=>qe(f.id,"installment3DueDate",ie.target.value),disabled:Ie(f,3)||((fi=y[f.id])==null?void 0:fi.deleteThirdInstallment)||f.third_installment_deleted,className:`w-full p-3 border-2 rounded-xl focus:ring-2 transition-all ${Ie(f,3)?"border-orange-300 bg-orange-50 text-orange-600 cursor-not-allowed":(hi=y[f.id])!=null&&hi.deleteThirdInstallment||f.third_installment_deleted?"border-red-300 bg-red-50 text-red-600 cursor-not-allowed":"border-gray-200 focus:border-orange-400 focus:ring-orange-200 hover:border-orange-300"}`})]}),u.jsx("div",{className:"pt-3 border-t border-gray-100",children:u.jsxs("label",{className:`flex items-center space-x-3 ${(xi=y[f.id])!=null&&xi.deleteThirdInstallment||f.third_installment_deleted?"cursor-not-allowed opacity-50":"cursor-pointer group"}`,children:[u.jsx("input",{type:"checkbox",checked:Ie(f,3),onChange:()=>Sn(f.id,3),disabled:((gi=y[f.id])==null?void 0:gi.deleteThirdInstallment)||f.third_installment_deleted,className:"w-5 h-5 text-orange-600 border-2 border-gray-300 rounded focus:ring-orange-500 focus:ring-2 transition-all group-hover:border-orange-400"}),u.jsxs("span",{className:"text-sm font-medium text-gray-700 flex items-center group-hover:text-orange-600 transition-colors",children:[u.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Κλείδωμα Δόσης"]})]})})]})]})]})})]}),u.jsxs("div",{className:"mt-4 text-sm text-gray-300 bg-gray-600/30 rounded-lg p-3",children:[u.jsx("span",{className:"font-medium text-gray-200",children:"📅 Ημερομηνία αίτησης:"})," ",new Date(f.created_at).toLocaleDateString("el-GR")]})]}),(!f.has_installments||f.status==="pending")&&u.jsx("div",{className:"flex flex-col space-y-3 ml-4",children:V[f.id]?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>Vs(f.id),className:"px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl transform hover:scale-105",children:[u.jsx(so,{className:"h-4 w-4 inline mr-2"}),"✅ Έγκριση"]}),u.jsxs("button",{onClick:()=>{prompt("Λόγος απόρριψης:")&&Hs(f.id)},className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl transform hover:scale-105",children:[u.jsx(rr,{className:"h-4 w-4 inline mr-2"}),"❌ Απόρριψη"]})]}):u.jsxs("div",{className:"flex flex-col space-y-2",children:[u.jsx("div",{className:"px-6 py-3 bg-gray-600 text-gray-300 rounded-xl text-sm font-medium shadow-lg cursor-not-allowed opacity-75",children:u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-2",children:"🔒"}),"Κουμπιά Έγκριση/Απόρριψη"]})}),u.jsx("p",{className:"text-xs text-gray-400 text-center max-w-32",children:"Αποθηκεύστε πρώτα τα Program Options για να εμφανιστούν τα κουμπιά έγκρισης/απόρριψης"})]})}),f.has_installments&&(f.status==="approved"||f.status==="rejected")&&u.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:`w-3 h-3 rounded-full ${f.status==="approved"?"bg-green-500":"bg-red-500"}`}),u.jsx("span",{className:`text-lg font-semibold ${f.status==="approved"?"text-green-600":"text-red-600"}`,children:f.status==="approved"?"✅ Εγκεκριμένο":"❌ Απορριφθέν"})]}),u.jsx("div",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-2 rounded-lg",children:"💳 Διαχείριση δόσεων διαθέσιμη"})]})]}),(f.status==="pending"||f.status==="approved"&&ne(f.id)||f.status==="rejected"&&ne(f.id))&&u.jsxs("div",{className:`mt-6 p-6 rounded-2xl border shadow-lg ${ne(f.id)?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border-yellow-500/30":"bg-gradient-to-r from-purple-500/20 to-pink-500/20 border-purple-500/30"}`,children:[u.jsxs("h5",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[u.jsx("span",{className:"text-2xl mr-2",children:"⚙️"}),"Program Options",ne(f.id)&&u.jsx("span",{className:"ml-2 text-yellow-400",children:"🔒"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx("div",{className:`p-3 rounded-lg border ${ne(f.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:u.jsx("button",{onClick:()=>{var ie;if(ne(f.id)){U("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}qe(f.id,"oldMembers",!((ie=y[f.id])!=null&&ie.oldMembers))},className:`w-full p-3 rounded-lg text-left transition-colors ${(pi=y[f.id])!=null&&pi.oldMembers||(vi=Ae(f.id))!=null&&vi.oldMembers?"bg-green-100 text-green-800 border-2 border-green-300":ne(f.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"font-medium",children:[ne(f.id)&&"🔒 ","👴 Παλαιά μέλη"]}),(((mi=y[f.id])==null?void 0:mi.oldMembers)||((yi=Ae(f.id))==null?void 0:yi.oldMembers))&&u.jsx("span",{className:"text-green-600",children:"✓"})]})})}),(()=>{var ot,mr,yr,wr;const ie=((ot=y[f.id])==null?void 0:ot.oldMembers)||((mr=Ae(f.id))==null?void 0:mr.oldMembers),Be=((yr=y[f.id])==null?void 0:yr.first150Members)===!1||((wr=Ae(f.id))==null?void 0:wr.first150Members)===!1;return ie&&!Be})()&&u.jsxs("div",{className:`p-3 rounded-lg border ${ne(f.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[u.jsxs("div",{className:"mb-3 text-xs text-gray-600 bg-blue-50 p-2 rounded-lg border border-blue-200",children:[u.jsx("span",{className:"font-medium",children:"ℹ️ Πληροφορίες:"})," Ισχύει μόνο για τα πρώτα 150 παλιά μέλη του γυμναστηρίου με τιμή 45€ ετήσιος (προσφορά), τα οποία εμφανίζονται στην καρτέλα Ταμείο"]}),u.jsx("button",{onClick:()=>{if(ne(f.id)){U("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}I(ie=>{var mr,yr,wr,io,oo;const Be={...ie},ot=!((mr=Be[f.id])!=null&&mr.first150Members);return Be[f.id]={...Be[f.id],first150Members:ot,cash:ot?!0:((yr=Be[f.id])==null?void 0:yr.cash)||!1,cashAmount:ot?45:(wr=Be[f.id])==null?void 0:wr.cashAmount,pos:ot?!1:((io=Be[f.id])==null?void 0:io.pos)||!1,posAmount:ot?0:(oo=Be[f.id])==null?void 0:oo.posAmount},Be})},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 relative shadow-lg ${(wi=y[f.id])!=null&&wi.first150Members||(bi=Ae(f.id))!=null&&bi.first150Members?"bg-orange-500 text-white hover:bg-orange-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx("span",{children:"🏆 Πρώτα 150 Μέλη"}),(((_i=y[f.id])==null?void 0:_i.first150Members)||((Ai=Ae(f.id))==null?void 0:Ai.first150Members))&&u.jsx("span",{className:"text-orange-200",children:"✓"}),ne(f.id)&&u.jsx("span",{className:"text-yellow-600",children:"🔒"})]})})]}),u.jsxs("div",{className:`p-3 rounded-lg border ${ne(f.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[ne(f.id)&&"🔒 ","🏋️ Kettlebell Points"]}),u.jsx("input",{type:"number",value:ne(f.id)?((Ci=Ae(f.id))==null?void 0:Ci.kettlebellPoints)||"":((Ei=y[f.id])==null?void 0:Ei.kettlebellPoints)||"",onChange:ie=>{ne(f.id)||qe(f.id,"kettlebellPoints",ie.target.value)},placeholder:"Εισάγετε πόντους",className:`w-full p-2 border rounded-lg ${ne(f.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,disabled:ne(f.id)})]}),u.jsxs("div",{className:`p-3 rounded-lg border ${ne(f.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[u.jsx("button",{onClick:()=>{var ie,Be,ot;if(ne(f.id)){U("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}if((ie=y[f.id])!=null&&ie.first150Members||(Be=Ae(f.id))!=null&&Be.first150Members){U('Το Μετρητά είναι κλειδωμένο όταν είναι επιλεγμένο το "Πρώτα 150 Μέλη"',{icon:"🔒"});return}qe(f.id,"cash",!((ot=y[f.id])!=null&&ot.cash))},className:`w-full p-3 rounded-lg text-left transition-colors ${(Si=y[f.id])!=null&&Si.first150Members||(Ii=Ae(f.id))!=null&&Ii.first150Members?"bg-gray-100 text-gray-500 border-2 border-gray-300 cursor-not-allowed":(Ni=y[f.id])!=null&&Ni.cash||(Oi=Ae(f.id))!=null&&Oi.cash?"bg-green-100 text-green-800 border-2 border-green-300":ne(f.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,disabled:ne(f.id)||((Ti=y[f.id])==null?void 0:Ti.first150Members)||((Ri=Ae(f.id))==null?void 0:Ri.first150Members),children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"font-medium",children:[ne(f.id)&&"🔒 ",(((Di=y[f.id])==null?void 0:Di.first150Members)||((Pi=Ae(f.id))==null?void 0:Pi.first150Members))&&"🔒 ","💰 Μετρητά"]}),(((Mi=y[f.id])==null?void 0:Mi.cash)||((Bi=Ae(f.id))==null?void 0:Bi.cash))&&!((ji=y[f.id])!=null&&ji.first150Members||(Fi=Ae(f.id))!=null&&Fi.first150Members)&&u.jsx("span",{className:"text-green-600",children:"✓"})]})}),(((ki=y[f.id])==null?void 0:ki.cash)||((Li=Ae(f.id))==null?void 0:Li.cash))&&!((Ui=y[f.id])!=null&&Ui.first150Members||(Gi=Ae(f.id))!=null&&Gi.first150Members)&&u.jsxs("div",{className:"mt-2",children:[u.jsx("input",{type:"number",value:ne(f.id)?((Vi=Ae(f.id))==null?void 0:Vi.cashAmount)||"":((Hi=y[f.id])==null?void 0:Hi.cashAmount)||"",onChange:ie=>{ne(f.id)||qe(f.id,"cashAmount",parseFloat(ie.target.value)||0)},placeholder:"Ποσό σε €",className:`w-full p-2 border rounded-lg ${ne(f.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500"}`,disabled:ne(f.id)}),u.jsx("button",{onClick:()=>{ne(f.id)},className:`mt-2 w-full px-3 py-1 text-sm rounded-lg ${ne(f.id)?"bg-yellow-200 text-yellow-700 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,disabled:ne(f.id),children:"✓ Επιλογή"})]})]}),u.jsxs("div",{className:`p-3 rounded-lg border ${ne(f.id)?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[u.jsx("button",{onClick:()=>{var ie,Be,ot;if(ne(f.id)){U("Οι επιλογές είναι παγωμένες - αλλάξτε status για να τις τροποποιήσετε",{icon:"🔒"});return}if((ie=y[f.id])!=null&&ie.first150Members||(Be=Ae(f.id))!=null&&Be.first150Members){U('Το POS είναι κλειδωμένο όταν είναι επιλεγμένο το "Πρώτα 150 Μέλη"',{icon:"🔒"});return}qe(f.id,"pos",!((ot=y[f.id])!=null&&ot.pos))},className:`w-full p-3 rounded-lg text-left transition-colors ${($i=y[f.id])!=null&&$i.pos||(Xi=Ae(f.id))!=null&&Xi.pos?"bg-blue-100 text-blue-800 border-2 border-blue-300":ne(f.id)?"bg-yellow-100 text-yellow-700 border-2 border-yellow-300 cursor-not-allowed":(Wi=y[f.id])!=null&&Wi.first150Members||(zi=Ae(f.id))!=null&&zi.first150Members?"bg-gray-100 text-gray-500 border-2 border-gray-300 cursor-not-allowed":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,disabled:ne(f.id)||((Yi=y[f.id])==null?void 0:Yi.first150Members)||((Zi=Ae(f.id))==null?void 0:Zi.first150Members),children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"font-medium",children:[ne(f.id)&&"🔒 ",(((Qi=y[f.id])==null?void 0:Qi.first150Members)||((Ki=Ae(f.id))==null?void 0:Ki.first150Members))&&"🔒 ","💳 POS"]}),(((Ji=y[f.id])==null?void 0:Ji.pos)||((qi=Ae(f.id))==null?void 0:qi.pos))&&u.jsx("span",{className:"text-blue-600",children:"✓"})]})}),(((eo=y[f.id])==null?void 0:eo.pos)||((to=Ae(f.id))==null?void 0:to.pos))&&u.jsxs("div",{className:"mt-2",children:[u.jsx("input",{type:"number",value:ne(f.id)?((ro=Ae(f.id))==null?void 0:ro.posAmount)||"":((no=y[f.id])==null?void 0:no.posAmount)||"",onChange:ie=>{ne(f.id)||qe(f.id,"posAmount",parseFloat(ie.target.value)||0)},placeholder:"Ποσό σε €",className:`w-full p-2 border rounded-lg ${ne(f.id)?"bg-yellow-100 border-yellow-300 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,disabled:ne(f.id)}),u.jsx("button",{onClick:()=>{ne(f.id)},className:`mt-2 w-full px-3 py-1 text-sm rounded-lg ${ne(f.id)?"bg-yellow-200 text-yellow-700 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:ne(f.id),children:"✓ Επιλογή"})]})]})]}),u.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[u.jsx("button",{onClick:()=>In(f.id,"approved"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${P[f.id]==="approved"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:"✅ Έγκριση"}),u.jsx("button",{onClick:()=>In(f.id,"rejected"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${P[f.id]==="rejected"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:"❌ Απόρριψη"}),u.jsx("button",{onClick:()=>In(f.id,"pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${P[f.id]==="pending"?"bg-yellow-600 text-white":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"}`,children:"⏳ Αναμονή"}),u.jsxs("button",{onClick:()=>$s(f.id),disabled:Bt||P[f.id]==="none",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[Bt?u.jsx(lo,{className:"h-4 w-4 animate-spin mr-2"}):u.jsx(Tn,{className:"h-4 w-4 mr-2"}),"Αποθήκευση Program Options"]}),P[f.id]==="none"&&u.jsx("p",{className:"text-sm text-gray-400 mt-2 text-center w-full",children:"Επιλέξτε Έγκριση, Απόρριψη ή Αναμονή για να αποθηκεύσετε τα Program Options"})]})]})]},`${f.id}-${((ao=f.package)==null?void 0:ao.name)||"pkg"}`)}),u.jsxs("div",{className:"flex items-center justify-center gap-3 pt-2",children:[u.jsx("button",{onClick:()=>jr(f=>Math.max(1,f-1)),disabled:gr===1,className:`px-4 py-2 rounded-lg text-sm font-medium border ${gr===1?"opacity-50 cursor-not-allowed bg-gray-700 text-gray-300 border-gray-600":"bg-gray-800 text-gray-200 hover:text-white border-gray-700"}`,children:"Προηγούμενο"}),u.jsxs("span",{className:"text-gray-300 text-sm",children:["Σελίδα ",gr]}),u.jsx("button",{onClick:()=>jr(f=>f+1),className:"px-4 py-2 rounded-lg text-sm font-medium border bg-gray-800 text-gray-200 hover:text-white border-gray-700",children:"Επόμενη"})]})]})]}):b==="users-information"?u.jsx(Ol,{}):b==="personal-training"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-4 sm:p-6 text-white mb-4 sm:mb-6",children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-2",children:"💪 Personal Training Πρόγραμμα"}),u.jsx("p",{className:"text-purple-100 text-sm sm:text-base",children:"Διαχείριση προγραμμάτων προπόνησης"})]}),u.jsxs("button",{onClick:()=>gt(!0),className:"flex items-center space-x-2 sm:space-x-3 px-4 sm:px-6 py-2 sm:py-3 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg text-sm sm:text-base",children:[u.jsx(Gn,{className:"h-4 w-4 sm:h-5 sm:w-5"}),u.jsx("span",{children:"🏋️‍♂️ Δημιουργία Προγράμματος"})]})]})}),Y&&z&&!Gs({email:Y.email,personalTrainingCode:Y.personalTrainingCode})&&u.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border-2 border-blue-200 rounded-xl shadow-xl p-4 sm:p-8",id:"schedule-editor",children:[u.jsxs("div",{className:"flex flex-col space-y-4 sm:space-y-0 sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8",children:[u.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 sm:p-6 rounded-xl shadow-lg flex-1 sm:flex-none",children:[u.jsxs("h3",{className:"text-lg sm:text-2xl font-bold mb-1 sm:mb-2",children:["🏋️‍♂️ Πρόγραμμα για ",Y.firstName," ",Y.lastName]}),u.jsxs("p",{className:"text-blue-100 text-sm sm:text-lg",children:["📅 ",Cd[z.month-1]," ",z.year]})]}),u.jsx("div",{className:"flex flex-wrap gap-2 sm:space-x-2 sm:gap-0",children:se?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:ks,className:"flex items-center space-x-1 px-3 py-2 bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors text-sm",children:[u.jsx(fo,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Προσθήκη Σεσίας"}),u.jsx("span",{className:"sm:hidden",children:"Προσθήκη"})]}),u.jsxs("button",{onClick:Us,className:"flex items-center space-x-1 px-3 py-2 bg-primary-100 text-primary-700 rounded-md hover:bg-primary-200 transition-colors text-sm",children:[u.jsx(Tn,{className:"h-4 w-4"}),u.jsx("span",{children:"Αποθήκευση"})]}),u.jsx("button",{onClick:()=>We(!1),className:"flex items-center space-x-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-sm",children:u.jsx("span",{children:"Ακύρωση"})})]}):u.jsxs("button",{onClick:()=>We(!0),className:"flex items-center space-x-1 px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors text-sm",children:[u.jsx(ll,{className:"h-4 w-4"}),u.jsx("span",{children:"Επεξεργασία"})]})})]}),u.jsx("div",{className:"space-y-3 sm:space-y-4",children:z.scheduleData.sessions.sort((f,w)=>{const E=new Date(`${f.date}T${f.startTime}`),A=new Date(`${w.date}T${w.startTime}`);return E.getTime()-A.getTime()}).map(f=>u.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 sm:gap-4",children:[u.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[u.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Ημέρα"}),se?u.jsx("input",{type:"date",value:f.date,onChange:w=>pr(f.id,"date",w.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",lang:"el"}):u.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:new Date(f.date).toLocaleDateString("el-GR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Ώρα Έναρξης"}),se?u.jsx("select",{value:f.startTime,onChange:w=>pr(f.id,"startTime",w.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:Ad.map(w=>u.jsx("option",{value:w,children:w},w))}):u.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:f.startTime})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Τύπος"}),se?u.jsxs("select",{value:f.type,onChange:w=>pr(f.id,"type",w.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:[u.jsx("option",{value:"personal",children:"Personal Training"}),u.jsx("option",{value:"kickboxing",children:"Kick Boxing"}),u.jsx("option",{value:"combo",children:"Combo"})]}):u.jsx("p",{className:"text-xs sm:text-sm text-gray-900 capitalize",children:f.type})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Προπονητής"}),se?u.jsx("select",{value:f.trainer,onChange:w=>pr(f.id,"trainer",w.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:Jo.map(w=>u.jsx("option",{value:w,children:w},w))}):u.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:f.trainer})]}),u.jsx("div",{className:"flex items-end sm:col-span-2 lg:col-span-1",children:se&&u.jsxs("button",{onClick:()=>Ls(f.id),className:"flex items-center space-x-1 px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors text-sm w-full sm:w-auto",children:[u.jsx(br,{className:"h-4 w-4"}),u.jsx("span",{children:"Διαγραφή"})]})})]}),f.notes&&u.jsxs("div",{className:"mt-3",children:[u.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Σημειώσεις"}),se?u.jsx("input",{type:"text",value:f.notes,onChange:w=>pr(f.id,"notes",w.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",placeholder:"Σημειώσεις για τη σέσια"}):u.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:f.notes})]})]},f.id))}),u.jsxs("div",{className:"mt-4 sm:mt-6",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Γενικές Σημειώσεις"}),se?u.jsx("textarea",{value:z.scheduleData.notes||"",onChange:f=>{const w={...z,scheduleData:{...z.scheduleData,notes:f.target.value}};M(w)},className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",rows:3,placeholder:"Γενικές σημειώσεις για το πρόγραμμα..."}):u.jsx("p",{className:"text-sm text-gray-900",children:z.scheduleData.notes||"Δεν υπάρχουν σημειώσεις"})]})]}),Y&&!z&&u.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 border-2 border-yellow-200 rounded-xl shadow-xl p-4 sm:p-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-4xl mb-4",children:"📅"}),u.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"Δεν βρέθηκε πρόγραμμα"}),u.jsxs("p",{className:"text-gray-600 mb-4",children:["Ο χρήστης ",Y.firstName," ",Y.lastName," δεν έχει δημιουργημένο πρόγραμμα Personal Training."]}),u.jsx("button",{onClick:()=>gt(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Δημιουργία Νέου Προγράμματος"})]})}),u.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl shadow-lg border-2 border-orange-200",children:u.jsxs("div",{className:"p-4 sm:p-6",children:[u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6",children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg sm:text-2xl font-bold text-orange-800 mb-2",children:"🏋️‍♂️ Open Gym"}),u.jsx("p",{className:"text-orange-600 text-sm sm:text-base",children:"Διαχείριση εξτρα υπηρεσιών και Free Gym συνδρομών"})]})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-200",children:[u.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:["👤 Επιλογή Χρήστη",u.jsxs("span",{className:"ml-2 text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded",children:["Selected: ",dt?"✅":"❌"]})]}),u.jsxs("div",{className:"flex space-x-3 mb-4",children:[u.jsx("button",{type:"button",onClick:()=>fa("dropdown"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${hn==="dropdown"?"bg-orange-600 text-white shadow-lg":"bg-white text-orange-600 border-2 border-orange-200 hover:border-orange-400"}`,children:"📋 Dropdown"}),u.jsx("button",{type:"button",onClick:()=>fa("search"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${hn==="search"?"bg-orange-600 text-white shadow-lg":"bg-white text-orange-600 border-2 border-orange-200 hover:border-orange-400"}`,children:"🔍 Αναζήτηση"})]}),hn==="dropdown"?u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:dt,onChange:f=>Rr(f.target.value),children:[u.jsx("option",{value:"",children:"-- Επιλέξτε χρήστη --"}),Re.map(f=>u.jsxs("option",{value:f.id,children:[f.firstName," ",f.lastName," (",f.email,")"]},f.id))]}):u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 placeholder-gray-400",placeholder:"🔍 Αναζήτηση με όνομα ή email...",value:vt,onChange:f=>xn(f.target.value)}),vt&&u.jsx("div",{className:"max-h-48 overflow-y-auto border-2 border-orange-200 rounded-xl bg-white shadow-lg",children:Oa.length>0?Oa.map(f=>u.jsxs("div",{className:`p-4 hover:bg-orange-50 cursor-pointer border-b border-orange-100 last:border-b-0 transition-all duration-200 ${dt===f.id?"bg-orange-100 border-l-4 border-l-orange-500":""}`,onClick:()=>{Rr(f.id),xn("")},children:[u.jsxs("div",{className:"font-semibold text-gray-900",children:[f.firstName," ",f.lastName]}),u.jsx("div",{className:"text-sm text-gray-600",children:f.email})]},f.id)):u.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Δεν βρέθηκαν χρήστες"})})]}),dt&&u.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3",children:u.jsx("span",{className:"text-white text-sm font-bold",children:"✓"})}),u.jsxs("div",{children:[u.jsxs("div",{className:"font-semibold text-gray-900",children:[(Ra=Re.find(f=>f.id===dt))==null?void 0:Ra.firstName," ",(Da=Re.find(f=>f.id===dt))==null?void 0:Da.lastName]}),u.jsx("div",{className:"text-sm text-gray-600",children:(Pa=Re.find(f=>f.id===dt))==null?void 0:Pa.email})]}),u.jsx("button",{onClick:()=>Rr(""),className:"ml-auto text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(rr,{className:"h-4 w-4"})})]})})]}),u.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-200",children:[u.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Εξτρά Υπηρεσία"}),u.jsx("input",{type:"number",min:"0",step:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Εισάγετε αριθμό...",value:dr,onChange:f=>ha(f.target.value)})]}),u.jsx("div",{className:"flex justify-center",children:u.jsx("button",{onClick:Zs,disabled:!dt||!dr||parseInt(dr)<=0,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-200 font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-orange-500 disabled:hover:to-red-500",children:"🏋️‍♂️ Εφαρμογή Open Gym"})}),gn&&u.jsx("div",{className:`p-3 rounded-lg text-sm font-medium ${gn.type==="success"?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:gn.message})]})]})}),da&&u.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl shadow-lg border-2 border-green-200",children:u.jsx("div",{className:"p-4 sm:p-6",children:u.jsx(yl,{featureEnabled:da})})})]}):null}),Nt&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-2 sm:p-4",children:u.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:[u.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-t-xl sm:rounded-t-2xl p-4 sm:p-6 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"text-lg sm:text-2xl font-bold mb-1 sm:mb-2",children:"🏋️‍♂️ Δημιουργία Προγράμματος"}),u.jsx("p",{className:"text-purple-100 text-sm sm:text-base",children:"Δημιουργήστε νέο πρόγραμμα Personal Training"})]}),u.jsx("button",{onClick:()=>gt(!1),className:"text-white/80 hover:text-white hover:bg-white/20 rounded-full p-2 transition-all duration-200 flex-shrink-0 ml-2",children:u.jsx(rr,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]})}),u.jsx("div",{className:"p-4 sm:p-8",children:u.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[u.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 sm:p-6 border border-indigo-200",children:[u.jsx("label",{className:"block text-base sm:text-lg font-bold text-indigo-800 mb-3 sm:mb-4 flex items-center",children:"🏋️‍♂️ Τύπος Προπόνησης"}),u.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[u.jsx("button",{type:"button",onClick:()=>ln("individual"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${S==="individual"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"👤 Ατομικό"}),u.jsx("button",{type:"button",onClick:()=>ln("group"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${S==="group"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"👥 Group"}),u.jsx("button",{type:"button",onClick:()=>ln("combination"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${S==="combination"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"🔀 Συνδυασμός"})]})]}),u.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-4 sm:p-6 border border-blue-200",children:[u.jsx("label",{className:"block text-base sm:text-lg font-bold text-blue-800 mb-3 sm:mb-4 flex items-center",children:"👥 Τύπος Χρήστη"}),u.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[u.jsx("button",{type:"button",onClick:()=>sa("personal"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${It==="personal"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🏋️‍♂️ Personal User"}),S!=="combination"&&u.jsx("button",{type:"button",onClick:()=>sa("paspartu"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${It==="paspartu"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🎯 Paspartu User"})]}),u.jsx("div",{className:"mt-3 text-sm text-blue-700",children:S==="combination"?u.jsx("span",{children:"📋 Combination Training: Μόνο Personal Users - κλειδωμένο πρόγραμμα με συγκεκριμένες ώρες"}):It==="personal"?u.jsx("span",{children:"📋 Personal Users: Παίρνουν κλειδωμένο πρόγραμμα με συγκεκριμένες ώρες"}):u.jsx("span",{children:"💳 Paspartu Users: Παίρνουν 5 μαθήματα και επιλέγουν ελεύθερα τις ώρες"})})]}),S==="combination"&&u.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 sm:p-6 border border-purple-200",children:[u.jsx("label",{className:"block text-base sm:text-lg font-bold text-purple-800 mb-3 sm:mb-4 flex items-center",children:"🔀 Διαμόρφωση Συνδυασμού"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[u.jsx("label",{className:"block text-sm font-bold text-purple-700 mb-2",children:"👤 Ατομικές Σεσίες"}),u.jsx("select",{value:Ke,onChange:f=>ms(parseInt(f.target.value)),className:"w-full px-3 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[1,2,3,4,5,6,7,8,9,10].map(f=>u.jsxs("option",{value:f,children:[f," σεσίες"]},f))})]}),u.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[u.jsx("label",{className:"block text-sm font-bold text-purple-700 mb-2",children:"👥 Ομαδικές Σεσίες"}),u.jsx("select",{value:Ot,onChange:f=>ys(parseInt(f.target.value)),className:"w-full px-3 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[1,2,3,4,5].map(f=>u.jsxs("option",{value:f,children:[f," ",f===1?"φορά":"φορές","/εβδομάδα"]},f))})]})]}),u.jsxs("div",{className:"mt-3 text-sm text-purple-700 bg-purple-100 p-3 rounded-lg",children:[u.jsx("strong",{children:"📊 Σύνολο:"})," ",Ke," ατομικές σεσίες + ",Ot," ",Ot===1?"φορά":"φορές","/εβδομάδα ομαδικές"]})]}),u.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:[u.jsxs("label",{className:"block text-lg font-bold text-blue-800 mb-4 flex items-center",children:["👤 ",S==="individual"?"Επιλογή Χρήστη":S==="combination"?"Επιλογή Χρήστη (Συνδυασμός)":"Επιλογή Χρηστών (Group)",(S==="individual"||S==="combination")&&u.jsxs("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded",children:["Selected: ",B.selectedUserId?"✅":"❌"]})]}),u.jsxs("div",{className:"flex space-x-3 mb-4",children:[u.jsx("button",{type:"button",onClick:()=>fn("dropdown"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${dn==="dropdown"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"📋 Dropdown"}),u.jsx("button",{type:"button",onClick:()=>fn("search"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${dn==="search"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🔍 Αναζήτηση"})]}),dn==="dropdown"?S==="individual"||S==="combination"?u.jsxs("select",{className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700",value:B.selectedUserId,onChange:f=>{sn({...B,selectedUserId:f.target.value})},children:[u.jsx("option",{value:"",children:"-- Επιλέξτε χρήστη --"}),Re.length>0?Re.map(f=>u.jsxs("option",{value:f.id,children:[f.firstName," ",f.lastName," (",f.email,")"]},f.id)):u.jsx("option",{value:"",disabled:!0,children:"Δεν υπάρχουν χρήστες"})]}):u.jsx("div",{className:"max-h-48 overflow-y-auto border-2 border-blue-200 rounded-xl bg-white",children:Re.length>0?Re.map(f=>u.jsx("div",{className:`p-3 hover:bg-blue-50 cursor-pointer border-b border-blue-100 last:border-b-0 transition-all duration-200 ${$.includes(f.id)?"bg-blue-100 border-l-4 border-l-blue-500":""}`,onClick:()=>{$.includes(f.id)?ur(w=>w.filter(E=>E!==f.id)):ur(w=>[...w,f.id])},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:$.includes(f.id),onChange:()=>{},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),u.jsxs("div",{children:[u.jsxs("div",{className:"font-semibold text-gray-900",children:[f.firstName," ",f.lastName]}),u.jsx("div",{className:"text-sm text-gray-600",children:f.email})]})]})},f.id)):u.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Δεν υπάρχουν χρήστες"})}):u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{type:"text",className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700 placeholder-gray-400",placeholder:"🔍 Αναζήτηση με όνομα ή email...",value:pt,onChange:f=>ua(f.target.value)}),pt&&u.jsx("div",{className:"max-h-48 overflow-y-auto border-2 border-blue-200 rounded-xl bg-white shadow-lg",children:Re.filter(f=>{var w,E,A;return((w=f.firstName)==null?void 0:w.toLowerCase().includes((pt==null?void 0:pt.toLowerCase())||""))||((E=f.lastName)==null?void 0:E.toLowerCase().includes((pt==null?void 0:pt.toLowerCase())||""))||((A=f.email)==null?void 0:A.toLowerCase().includes((pt==null?void 0:pt.toLowerCase())||""))}).map(f=>u.jsxs("div",{className:`p-4 hover:bg-blue-50 cursor-pointer border-b border-blue-100 last:border-b-0 transition-all duration-200 ${S==="individual"||S==="combination"?B.selectedUserId===f.id?"bg-blue-100 border-l-4 border-l-blue-500":"":$.includes(f.id)?"bg-blue-100 border-l-4 border-l-blue-500":""}`,onClick:()=>{S==="individual"||S==="combination"?sn({...B,selectedUserId:f.id}):$.includes(f.id)?ur(w=>w.filter(E=>E!==f.id)):ur(w=>[...w,f.id])},children:[S==="group"&&u.jsx("input",{type:"checkbox",checked:$.includes(f.id),onChange:()=>{},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),u.jsxs("div",{className:"font-semibold text-gray-900",children:[f.firstName," ",f.lastName]}),u.jsx("div",{className:"text-sm text-gray-600",children:f.email})]},f.id))})]}),(S==="individual"||S==="combination"?B.selectedUserId:$.length>0)&&u.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3",children:u.jsx("span",{className:"text-white text-sm",children:"✓"})}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-sm font-bold text-green-800",children:["✅ ",S==="individual"||S==="combination"?"Επιλεγμένος:":"Επιλεγμένοι:"]}),S==="individual"||S==="combination"?u.jsxs("div",{className:"text-xs text-green-600",children:[(Ma=Re.find(f=>f.id===B.selectedUserId))==null?void 0:Ma.firstName," ",(Ba=Re.find(f=>f.id===B.selectedUserId))==null?void 0:Ba.lastName," (",(ja=Re.find(f=>f.id===B.selectedUserId))==null?void 0:ja.email,")"]}):u.jsxs("div",{className:"text-xs text-green-600",children:[$.map(f=>{const w=Re.find(E=>E.id===f);return w?`${w.firstName} ${w.lastName}`:"Άγνωστος"}).join(", ")," (",$.length," χρήστες)"]})]})]})})]}),(S==="individual"||S==="combination"?B.selectedUserId:$.length>0)&&u.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 sm:p-6 border border-purple-200 mt-4",children:[u.jsx("h4",{className:"text-lg sm:text-xl font-bold text-purple-800 mb-4 sm:mb-6 flex items-center",children:"⚙️ Επιλογές Προγράμματος"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[!(S==="individual"||S==="combination"?pn.has(B.selectedUserId):$.some(f=>pn.has(f)))&&u.jsx("div",{className:`rounded-lg p-4 border ${(S==="individual"||S==="combination"?X(B.selectedUserId):$.some(f=>X(f)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:u.jsx("button",{type:"button",onClick:()=>{const f=S==="individual"||S==="combination"?[B.selectedUserId]:$;if(f.some(E=>X(E))){U("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Vt(E=>{const A={...E};return f.forEach(C=>{var L,ee,re,ae,G,te;const R=!((L=A[C])!=null&&L.oldMembers);A[C]={...A[C],oldMembers:R,first150Members:R?(ee=A[C])==null?void 0:ee.first150Members:!1,cash:R?(re=A[C])==null?void 0:re.cash:!1,pos:R?(ae=A[C])==null?void 0:ae.pos:!1,cashAmount:R?(G=A[C])==null?void 0:G.cashAmount:void 0,posAmount:R?(te=A[C])==null?void 0:te.posAmount:void 0}}),A})},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 relative shadow-lg ${(S==="individual"||S==="combination")&&B.selectedUserId?X(B.selectedUserId)?(Fa=mt(B.selectedUserId))!=null&&Fa.oldMembers?"bg-green-500 text-white":"bg-blue-500 text-white":(ka=ce[B.selectedUserId])!=null&&ka.oldMembers?"bg-green-500 text-white hover:bg-green-600":"bg-blue-500 text-white hover:bg-blue-600":$.some(f=>{var w;return(w=ce[f])==null?void 0:w.oldMembers})?"bg-green-500 text-white hover:bg-green-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx("span",{children:"👴 Παλαιά μέλη"}),((S==="individual"||S==="combination")&&B.selectedUserId?X(B.selectedUserId)?(La=mt(B.selectedUserId))==null?void 0:La.oldMembers:(Ua=ce[B.selectedUserId])==null?void 0:Ua.oldMembers:$.some(f=>{var w;return(w=ce[f])==null?void 0:w.oldMembers}))&&u.jsx("span",{className:"text-green-200",children:"✓"}),(S==="individual"?X(B.selectedUserId):$.some(f=>X(f)))&&u.jsx("span",{className:"text-yellow-600",children:"🔒"})]})})}),(()=>{const f=S==="individual"||S==="combination"?[B.selectedUserId]:$,w=f.some(C=>{var R;return(R=ce[C])==null?void 0:R.oldMembers}),E=f.some(C=>pn.has(C)||ws.has(C)),A=f.some(C=>{var R;return((R=ce[C])==null?void 0:R.oldMembers)===!1});return w&&!E&&!A})()&&u.jsxs("div",{className:`rounded-lg p-4 border ${(S==="individual"||S==="combination"?X(B.selectedUserId):$.some(f=>X(f)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[u.jsxs("div",{className:"mb-3 text-xs text-gray-600 bg-blue-50 p-2 rounded-lg border border-blue-200",children:[u.jsx("span",{className:"font-medium",children:"ℹ️ Πληροφορίες:"})," Ισχύει μόνο για τα πρώτα 150 παλιά μέλη του γυμναστηρίου με τιμή 45€ ετήσιος (προσφορά), τα οποία εμφανίζονται στην καρτέλα Ταμείο"]}),u.jsx("button",{type:"button",onClick:()=>{const f=S==="individual"||S==="combination"?[B.selectedUserId]:$;if(f.some(E=>X(E))){U("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Vt(E=>{const A={...E};return f.forEach(C=>{var L,ee,re,ae,G;const R=!((L=A[C])!=null&&L.first150Members);A[C]={...A[C],first150Members:R,cash:R?!0:((ee=A[C])==null?void 0:ee.cash)||!1,cashAmount:R?45:(re=A[C])==null?void 0:re.cashAmount,pos:R?!1:((ae=A[C])==null?void 0:ae.pos)||!1,posAmount:R?0:(G=A[C])==null?void 0:G.posAmount}}),A})},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 relative shadow-lg ${(S==="individual"||S==="combination")&&B.selectedUserId?X(B.selectedUserId)?(Ga=mt(B.selectedUserId))!=null&&Ga.first150Members?"bg-orange-500 text-white":"bg-blue-500 text-white":(Va=ce[B.selectedUserId])!=null&&Va.first150Members?"bg-orange-500 text-white hover:bg-orange-600":"bg-blue-500 text-white hover:bg-blue-600":$.some(f=>{var w;return(w=ce[f])==null?void 0:w.first150Members})?"bg-orange-500 text-white hover:bg-orange-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx("span",{children:"🏆 Πρώτα 150 Μέλη"}),((S==="individual"||S==="combination")&&B.selectedUserId?X(B.selectedUserId)?(Ha=mt(B.selectedUserId))==null?void 0:Ha.first150Members:($a=ce[B.selectedUserId])==null?void 0:$a.first150Members:$.some(f=>{var w;return(w=ce[f])==null?void 0:w.first150Members}))&&u.jsx("span",{className:"text-orange-200",children:"✓"}),(S==="individual"?X(B.selectedUserId):$.some(f=>X(f)))&&u.jsx("span",{className:"text-yellow-600",children:"🔒"})]})})]}),u.jsxs("div",{className:`rounded-lg p-4 border ${(S==="individual"||S==="combination"?X(B.selectedUserId):$.some(f=>X(f)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["🏋️‍♂️ Kettlebell Points",(S==="individual"||S==="combination"?X(B.selectedUserId):$.some(f=>X(f)))&&u.jsx("span",{className:"text-yellow-600 ml-2",children:"🔒"})]}),u.jsx("input",{type:"number",value:(S==="individual"||S==="combination")&&B.selectedUserId&&X(B.selectedUserId)?((Xa=mt(B.selectedUserId))==null?void 0:Xa.kettlebellPoints)||"":xa,onChange:f=>{const w=S==="individual"?[B.selectedUserId]:$;if(w.some(A=>X(A))){U("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}bs(f.target.value),Vt(A=>{const C={...A};return w.forEach(R=>{C[R]={...C[R],kettlebellPoints:f.target.value||""}}),C})},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${(S==="individual"?X(B.selectedUserId):$.some(f=>X(f)))?"border-yellow-300 bg-yellow-50 focus:ring-yellow-500":"border-gray-300 focus:ring-purple-500 focus:border-purple-500"}`,placeholder:"Εισάγετε αριθμό...",disabled:S==="individual"||S==="combination"?X(B.selectedUserId):$.some(f=>X(f))})]}),u.jsxs("div",{className:`rounded-lg p-4 border ${(S==="individual"||S==="combination"?X(B.selectedUserId):$.some(f=>X(f)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["💰 Μετρητά (€)",(S==="individual"||S==="combination"?X(B.selectedUserId):$.some(f=>X(f)))&&u.jsx("span",{className:"text-yellow-600 ml-2",children:"🔒"})]}),_s?u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"number",step:"0.01",min:"0",value:(S==="individual"||S==="combination")&&B.selectedUserId?X(B.selectedUserId)?((Qa=(Za=mt(B.selectedUserId))==null?void 0:Za.cashAmount)==null?void 0:Qa.toString())||"":(Ka=ce[B.selectedUserId])!=null&&Ka.first150Members?"45":Dt:$.some(f=>{var w;return(w=ce[f])==null?void 0:w.first150Members})?"45":Dt,onChange:f=>{const w=S==="individual"||S==="combination"?[B.selectedUserId]:$;if(w.some(C=>X(C))){U("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}if(w.some(C=>{var R;return(R=ce[C])==null?void 0:R.first150Members})){U('Το πεδίο Μετρητά είναι κλειδωμένο όταν είναι επιλεγμένο "Πρώτα 150 Μέλη"',{icon:"🔒"});return}yn(f.target.value)},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${(S==="individual"?X(B.selectedUserId)||(Ja=ce[B.selectedUserId])!=null&&Ja.first150Members:$.some(f=>X(f))||$.some(f=>{var w;return(w=ce[f])==null?void 0:w.first150Members}))?"border-orange-300 bg-orange-50 focus:ring-orange-500":"border-gray-300 focus:ring-green-500 focus:border-green-500"}`,placeholder:"Εισάγετε ποσό σε €...",autoFocus:!0,disabled:S==="individual"||S==="combination"?X(B.selectedUserId)||((qa=ce[B.selectedUserId])==null?void 0:qa.first150Members):$.some(f=>X(f))||$.some(f=>{var w;return(w=ce[f])==null?void 0:w.first150Members})}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{type:"button",onClick:()=>{const f=S==="individual"||S==="combination"?[B.selectedUserId]:$;if(f.some(E=>X(E))){U("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Vt(E=>{const A={...E};return f.forEach(C=>{const R=Dt&&parseFloat(Dt)>0?parseFloat(Dt):0;A[C]={...A[C],cash:R>0,cashAmount:R}}),A}),Dt&&parseFloat(Dt)>0?U.success(`Μετρητά €${Dt} προστέθηκαν! Θα αποθηκευτούν με το Save.`):U.success("Μετρητά μηδενίστηκαν! Θα αποθηκευτεί με το Save."),vn(!1),yn("")},className:`flex-1 px-3 py-2 text-white rounded-lg transition-colors text-sm ${(S==="individual"||S==="combination")&&B.selectedUserId?X(B.selectedUserId)?(ei=mt(B.selectedUserId))!=null&&ei.cash?"bg-green-600 cursor-not-allowed":"bg-yellow-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700":$.some(f=>X(f))?"bg-yellow-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,disabled:S==="individual"||S==="combination"?X(B.selectedUserId):$.some(f=>X(f)),children:"✓ Επιλογή"}),u.jsx("button",{type:"button",onClick:()=>{vn(!1),yn("")},className:"flex-1 px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:"Ακύρωση"})]})]}):u.jsx("button",{type:"button",onClick:()=>{const f=S==="individual"||S==="combination"?[B.selectedUserId]:$;if(f.some(A=>X(A))){U("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}if(f.some(A=>{var C;return(C=ce[A])==null?void 0:C.first150Members})){U('Το πεδίο Μετρητά είναι κλειδωμένο όταν είναι επιλεγμένο "Πρώτα 150 Μέλη"',{icon:"🔒"});return}vn(!0)},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 shadow-lg ${(S==="individual"||S==="combination")&&B.selectedUserId?X(B.selectedUserId)?(Wa=mt(B.selectedUserId))!=null&&Wa.cash?"bg-green-500 text-white cursor-not-allowed":"bg-yellow-500 text-white cursor-not-allowed":(za=ce[B.selectedUserId])!=null&&za.first150Members?"bg-orange-500 text-white cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600":$.some(f=>X(f))?"bg-yellow-500 text-white cursor-not-allowed":$.some(f=>{var w;return(w=ce[f])==null?void 0:w.first150Members})?"bg-orange-500 text-white cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,disabled:S==="individual"||S==="combination"?X(B.selectedUserId)||((Ya=ce[B.selectedUserId])==null?void 0:Ya.first150Members):$.some(f=>X(f))||$.some(f=>{var w;return(w=ce[f])==null?void 0:w.first150Members}),children:"💰 Μετρητά"})]}),u.jsxs("div",{className:`rounded-lg p-4 border ${(S==="individual"||S==="combination"?X(B.selectedUserId):$.some(f=>X(f)))?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["💳 POS (€)",(S==="individual"||S==="combination"?X(B.selectedUserId):$.some(f=>X(f)))&&u.jsx("span",{className:"text-yellow-600 ml-2",children:"🔒"})]}),As?u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"number",step:"0.01",min:"0",value:(S==="individual"||S==="combination")&&B.selectedUserId?X(B.selectedUserId)?((ii=(ai=mt(B.selectedUserId))==null?void 0:ai.posAmount)==null?void 0:ii.toString())||"":(oi=ce[B.selectedUserId])!=null&&oi.first150Members?"0":Pt:$.some(f=>{var w;return(w=ce[f])==null?void 0:w.first150Members})?"0":Pt,onChange:f=>{const w=S==="individual"||S==="combination"?[B.selectedUserId]:$;if(w.some(C=>X(C))){U("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}if(w.some(C=>{var R;return(R=ce[C])==null?void 0:R.first150Members})){U('Το πεδίο POS είναι κλειδωμένο όταν είναι επιλεγμένο "Πρώτα 150 Μέλη"',{icon:"🔒"});return}wn(f.target.value)},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${(S==="individual"?X(B.selectedUserId)||(si=ce[B.selectedUserId])!=null&&si.first150Members:$.some(f=>X(f))||$.some(f=>{var w;return(w=ce[f])==null?void 0:w.first150Members}))?"border-orange-300 bg-orange-50 focus:ring-orange-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Εισάγετε ποσό σε €...",autoFocus:!0,disabled:S==="individual"||S==="combination"?X(B.selectedUserId)||((li=ce[B.selectedUserId])==null?void 0:li.first150Members):$.some(f=>X(f))||$.some(f=>{var w;return(w=ce[f])==null?void 0:w.first150Members})}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{type:"button",onClick:()=>{const f=S==="individual"||S==="combination"?[B.selectedUserId]:$;if(f.some(E=>X(E))){U("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}Vt(E=>{const A={...E};return f.forEach(C=>{const R=Pt&&parseFloat(Pt)>0?parseFloat(Pt):0;A[C]={...A[C],pos:R>0,posAmount:R}}),A}),Pt&&parseFloat(Pt)>0?U.success(`POS €${Pt} προστέθηκε! Θα αποθηκευτεί με το Save.`):U.success("POS μηδενίστηκε! Θα αποθηκευτεί με το Save."),mn(!1),wn("")},className:`flex-1 px-3 py-2 text-white rounded-lg transition-colors text-sm ${(S==="individual"||S==="combination")&&B.selectedUserId?X(B.selectedUserId)?(ci=mt(B.selectedUserId))!=null&&ci.pos?"bg-blue-600 cursor-not-allowed":"bg-yellow-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700":$.some(f=>X(f))?"bg-yellow-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,disabled:S==="individual"||S==="combination"?X(B.selectedUserId):$.some(f=>X(f)),children:"✓ Επιλογή"}),u.jsx("button",{type:"button",onClick:()=>{mn(!1),wn("")},className:"flex-1 px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:"Ακύρωση"})]})]}):u.jsx("button",{type:"button",onClick:()=>{const f=S==="individual"||S==="combination"?[B.selectedUserId]:$;if(f.some(A=>X(A))){U("Οι επιλογές είναι παγωμένες - αλλάξτε το status για να τις τροποποιήσετε",{icon:"🔒"});return}if(f.some(A=>{var C;return(C=ce[A])==null?void 0:C.first150Members})){U('Το πεδίο POS είναι κλειδωμένο όταν είναι επιλεγμένο "Πρώτα 150 Μέλη"',{icon:"🔒"});return}mn(!0)},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 shadow-lg ${(S==="individual"||S==="combination")&&B.selectedUserId?X(B.selectedUserId)?(ti=mt(B.selectedUserId))!=null&&ti.pos?"bg-blue-500 text-white cursor-not-allowed":"bg-yellow-500 text-white cursor-not-allowed":(ri=ce[B.selectedUserId])!=null&&ri.first150Members?"bg-orange-500 text-white cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600":$.some(f=>X(f))?"bg-yellow-500 text-white cursor-not-allowed":$.some(f=>{var w;return(w=ce[f])==null?void 0:w.first150Members})?"bg-orange-500 text-white cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,disabled:S==="individual"||S==="combination"?X(B.selectedUserId)||((ni=ce[B.selectedUserId])==null?void 0:ni.first150Members):$.some(f=>X(f))||$.some(f=>{var w;return(w=ce[f])==null?void 0:w.first150Members}),children:"💳 POS"})]}),u.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:u.jsx("button",{type:"button",onClick:()=>{fr("approved")},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${Mt==="approved"?"bg-green-600 text-white shadow-lg":"bg-green-500 text-white hover:bg-green-600 shadow-lg"}`,children:"✅ Έγκριση"})}),u.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:u.jsx("button",{type:"button",onClick:()=>{fr("rejected")},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${Mt==="rejected"?"bg-red-600 text-white shadow-lg":"bg-red-500 text-white hover:bg-red-600 shadow-lg"}`,children:"❌ Απόρριψη"})}),u.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:u.jsx("button",{type:"button",onClick:()=>{fr("pending")},className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${Mt==="pending"?"bg-yellow-600 text-white shadow-lg":"bg-yellow-500 text-white hover:bg-yellow-600 shadow-lg"}`,children:"⏳ Στην Αναμονή"})}),u.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-4 border border-purple-200",children:[u.jsx("button",{type:"button",onClick:Js,disabled:Mt==="none"||Bt,className:`w-full px-6 py-4 rounded-lg font-bold text-lg transition-all duration-200 ${Mt==="none"||Bt?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:from-purple-700 hover:to-indigo-700 shadow-lg hover:shadow-xl"}`,children:Bt?u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(lo,{className:"h-5 w-5 animate-spin"}),u.jsx("span",{children:"Αποθήκευση..."})]}):u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(Tn,{className:"h-5 w-5"}),u.jsx("span",{children:"💾 Αποθήκευση Program Options"})]})}),Mt==="none"&&u.jsx("p",{className:"text-sm text-gray-600 mt-2 text-center",children:"Επιλέξτε Έγκριση, Απόρριψη ή Στην Αναμονή για να αποθηκεύσετε"})]})]})]}),(S==="group"&&$.length>0||S==="combination"&&B.selectedUserId)&&u.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 sm:p-6 border border-orange-200 mt-4",children:[u.jsxs("h4",{className:"text-lg sm:text-xl font-bold text-orange-800 mb-4 sm:mb-6 flex items-center",children:["🏠 ",S==="combination"?"Επιλογές Ομαδικής Αίθουσας (για Group Sessions)":"Επιλογές Ομαδικής Αίθουσας"]}),u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{children:u.jsxs("div",{children:[u.jsx("label",{className:"block text-base font-semibold text-orange-700 mb-3",children:"Πόσες φορές την εβδομάδα θα παρακολουθούν οι χρήστες;"}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[1,2,3,4,5].map(f=>u.jsx("button",{type:"button",onClick:()=>la(f),className:`p-3 rounded-lg border-2 transition-all duration-200 ${At===f?"bg-orange-600 text-white border-orange-600 shadow-lg":"bg-white text-orange-600 border-orange-300 hover:border-orange-500"}`,children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-xl font-bold",children:f}),u.jsxs("div",{className:"text-xs opacity-75",children:[f===1?"φορά":"φορές","/εβδομάδα"]})]})},f))})]})}),cn&&At&&u.jsx("div",{className:"bg-orange-100 border border-orange-300 rounded-lg p-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-sm font-medium text-orange-700 mb-1",children:"Μηνιαίο Σύνολο"}),u.jsxs("div",{className:"text-2xl font-bold text-orange-800",children:[Tr," συνεδρίες/μήνα"]}),u.jsxs("div",{className:"text-xs text-orange-600 mt-1",children:["(",At," φορές/εβδομάδα × 4 εβδομάδες)"]})]})}),At&&u.jsx(wl,{selectedGroupRoom:"3",weeklyFrequency:At,monthlyTotal:Tr,selectedUserIds:S==="combination"?[B.selectedUserId]:$,onSlotsChange:ca})]})]}),S!=="group"&&u.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-4 sm:p-6 border border-orange-200",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[u.jsxs("h4",{className:"text-lg sm:text-xl font-bold text-orange-800 flex items-center",children:["🏋️‍♂️ Προσωποποιημένο Πρόγραμμα",S==="combination"&&u.jsx("span",{className:"ml-2 text-sm bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"Personal Sessions"})]}),u.jsxs("div",{className:`text-sm px-3 py-2 rounded-lg ${S==="combination"&&De().length>Ke?"bg-red-100 text-red-700 border border-red-300":"text-gray-600 bg-gray-100"}`,children:["📊 Σύνολο: ",De().length," σεσίας",S==="combination"&&u.jsxs("span",{className:`ml-2 ${De().length>Ke?"text-red-600":"text-purple-600"}`,children:["(",Ke," θα χρησιμοποιηθούν)",De().length>Ke&&u.jsx("span",{className:"ml-1 font-bold",children:"⚠️ Περισσότερες από όσες θα χρησιμοποιηθούν!"})]})]})]}),u.jsx("div",{className:"mb-4 sm:mb-6",children:u.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[u.jsx("div",{className:"flex items-center space-x-2",children:u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Φίλτρο Σεσιών:"})}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{onClick:()=>{ga("new"),pa.length===0&&bn([{id:"tmp-1",date:`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}-${String(new Date().getDate()).padStart(2,"0")}`,startTime:"18:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:""}])},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${Kt==="new"?"bg-blue-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"🆕 Νέες Σεσίες"}),u.jsxs("button",{onClick:()=>{ga("existing"),(S==="individual"||S==="combination")&&B.selectedUserId&&Ks(B.selectedUserId)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${Kt==="existing"?"bg-green-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:!B.selectedUserId,children:["📚 Υπάρχουσες Σεσίες",va&&u.jsx("span",{className:"ml-2",children:"⏳"})]})]}),Kt==="existing"&&Dr.length>0&&u.jsxs("div",{className:"text-sm text-green-600 bg-green-100 px-3 py-1 rounded-lg",children:["✅ ",Dr.length," υπάρχουσες σεσίες φορτώθηκαν"]}),Kt==="existing"&&Dr.length===0&&!va&&u.jsx("div",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-lg",children:"ℹ️ Δεν βρέθηκαν υπάρχουσες σεσίες"})]})}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-gray-300 overflow-hidden",children:[u.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 border-b-2 border-gray-400",children:u.jsxs("div",{className:`grid gap-0 text-sm font-bold text-gray-800 ${S==="individual"?"grid-cols-6":"grid-cols-7"}`,children:[u.jsx("div",{className:"col-span-1 text-center py-3 border-r border-gray-300 bg-gray-200",children:"#"}),u.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"📅 Ημερομηνία"}),u.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"🕐 Έναρξη"}),u.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"💪 Τύπος"}),u.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"🏠 Αίθουσα"}),S!=="individual"&&u.jsx("div",{className:"col-span-1 py-3 px-2 border-r border-gray-300",children:"👥 Group"}),u.jsx("div",{className:"col-span-1 py-3 px-2",children:"👨‍🏫 Προπονητής"})]})}),u.jsx("div",{className:"divide-y divide-gray-300",children:De().map((f,w)=>u.jsxs("div",{className:`grid gap-0 hover:bg-blue-50 transition-colors ${S==="individual"?"grid-cols-6":"grid-cols-7"}`,children:[u.jsxs("div",{className:"col-span-1 flex items-center justify-center space-x-2 py-3 border-r border-gray-300 bg-gray-50",children:[u.jsx("span",{className:"text-sm font-bold text-gray-700",children:w+1}),u.jsxs("div",{className:"flex flex-col space-y-1",children:[u.jsx("button",{onClick:()=>yt(De().filter((E,A)=>A!==w)),className:"text-red-600 hover:text-red-800 p-1 text-xs bg-red-100 rounded hover:bg-red-200",title:"Διαγραφή Σέσιας",children:u.jsx(br,{className:"h-3 w-3"})}),u.jsx("button",{onClick:()=>{const E=De(),A={...f,id:`tmp-${Date.now()}`};yt([...E.slice(0,w+1),A,...E.slice(w+1)])},className:"text-blue-600 hover:text-blue-800 p-1 text-xs bg-blue-100 rounded hover:bg-blue-200",title:"Αντιγραφή Σέσιας",children:u.jsx(fo,{className:"h-3 w-3"})})]})]}),u.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:u.jsx("input",{type:"date",className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:f.date,onChange:E=>{const A=De();yt(A.map((C,R)=>R===w?{...C,date:E.target.value}:C))},lang:"el"})}),u.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:u.jsx("input",{type:"time",className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:f.startTime,onChange:E=>{const A=De();yt(A.map((C,R)=>R===w?{...C,startTime:E.target.value}:C))}})}),u.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:u.jsxs("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:f.type,onChange:E=>{const A=De();yt(A.map((C,R)=>R===w?{...C,type:E.target.value}:C))},children:[u.jsx("option",{value:"personal",children:"Προσωπική"}),u.jsx("option",{value:"kickboxing",children:"Kick Boxing"}),u.jsx("option",{value:"combo",children:"Combo"})]})}),u.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:u.jsxs("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:f.room,onChange:E=>{const A=De();yt(A.map((C,R)=>R===w?{...C,room:E.target.value}:C))},children:[u.jsx("option",{value:"Αίθουσα Mike",children:"Αίθουσα Mike"}),u.jsx("option",{value:"Αίθουσα Jordan",children:"Αίθουσα Jordan"})]})}),S!=="individual"&&u.jsx("div",{className:"col-span-1 p-2 border-r border-gray-300",children:S==="combination"?u.jsx("div",{className:"w-full px-2 py-2 text-sm border-2 border-gray-200 rounded bg-gray-100 text-gray-600 font-medium",children:"🔒 1 άτομο (Ατομική)"}):u.jsxs("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:f.group||"",onChange:E=>{const A=De();yt(A.map((C,R)=>R===w?{...C,group:E.target.value}:C))},children:[u.jsx("option",{value:"",children:"Επιλέξτε Group"}),u.jsx("option",{value:"2ΑτομαGroup",children:"2ΑτομαGroup"}),u.jsx("option",{value:"3ΑτομαGroup",children:"3ΑτομαGroup"}),u.jsx("option",{value:"6ΑτομαGroup",children:"6ΑτομαGroup"})]})}),u.jsx("div",{className:"col-span-1 p-2",children:u.jsx("select",{className:"w-full px-2 py-2 text-sm border-2 border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:f.trainer,onChange:E=>{const A=De();yt(A.map((C,R)=>R===w?{...C,trainer:E.target.value}:C))},children:Jo.map(E=>u.jsx("option",{value:E,children:E},E))})})]},f.id))})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mt-4 space-y-3 sm:space-y-0",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[u.jsx("button",{type:"button",className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-medium flex items-center justify-center",onClick:()=>{var w;const f=De();if(S==="combination"&&f.length>=Ke){U.error(`Για συνδυασμένο πρόγραμμα μπορείτε να έχετε μέγιστο ${Ke} ατομικές σεσίες`);return}yt([...f,{id:`tmp-${Date.now()}`,date:`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}-${String(new Date().getDate()).padStart(2,"0")}`,startTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:S==="combination"?void 0:"2ΑτομαGroup",notes:((w=f[0])==null?void 0:w.notes)||""}])},children:"➕ Προσθήκη Σέσιας"}),u.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium flex items-center justify-center",onClick:()=>{var E;const f=De();if(S==="combination"&&f.length>=Ke){U.error(`Για συνδυασμένο πρόγραμμα μπορείτε να έχετε μέγιστο ${Ke} ατομικές σεσίες`);return}const w={id:`tmp-${Date.now()}`,date:`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}-${String(new Date().getDate()).padStart(2,"0")}`,startTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",group:"2ΑτομαGroup",notes:((E=f[0])==null?void 0:E.notes)||""};yt([...f,w])},children:"📋 Αντιγραφή Τελευταίας"}),De().length>1&&u.jsx("button",{type:"button",className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium flex items-center justify-center",onClick:()=>{const f=De();yt(f.slice(0,-1))},children:"➖ Διαγραφή Τελευταίας"})]}),u.jsx("div",{className:"text-center sm:text-right",children:u.jsx("div",{className:"text-xs text-gray-500",children:"💡 Κάντε κλικ στα κελιά για επεξεργασία • Χρησιμοποιήστε τα κουμπιά για διαχείριση"})})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4 mt-8 pt-6 border-t border-gray-200",children:[u.jsx("button",{onClick:()=>gt(!1),className:"flex-1 px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 transition-all duration-200 font-semibold shadow-lg",children:"❌ Ακύρωση"}),u.jsx("button",{onClick:()=>{if(console.log("[SecretaryDashboard] Button clicked - trainingType:",S,"selectedUserId:",B.selectedUserId),S==="individual"&&!B.selectedUserId){U.error("Παρακαλώ επιλέξτε χρήστη για ατομικό πρόγραμμα");return}if(S==="group"&&$.length===0){U.error("Παρακαλώ επιλέξτε χρήστες για ομαδικό πρόγραμμα");return}if(S==="combination"&&!B.selectedUserId){U.error("Παρακαλώ επιλέξτε χρήστη για συνδυασμένο πρόγραμμα");return}if(S==="group"){if(!Tt||Object.keys(Tt).length===0){U.error("Παρακαλώ προσθέστε τουλάχιστον μία σεσία");return}}else if(De().length===0){U.error("Παρακαλώ προσθέστε τουλάχιστον μία σεσία");return}if(S==="combination"&&(!Tt||Object.keys(Tt).length===0)){U.error("Για συνδυασμένο πρόγραμμα χρειάζονται και ομαδικές σεσίες");return}qs()},className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-200 font-semibold shadow-lg flex items-center justify-center",disabled:Bt,children:Bt?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Δημιουργία..."]}):u.jsx(u.Fragment,{children:"✅ Δημιουργία Προγράμματος"})})]})]})})]})}),d&&l&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:`mx-auto flex items-center justify-center h-16 w-16 rounded-full mb-4 ${l.success?"bg-green-100":"bg-red-100"}`,children:l.success?u.jsx(Hn,{className:"h-8 w-8 text-green-600"}):u.jsx(Lr,{className:"h-8 w-8 text-red-600"})}),u.jsx("h3",{className:`text-lg font-semibold mb-2 ${l.success?"text-green-900":"text-red-900"}`,children:l.message}),l.userData&&u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx(Wr,{className:"h-4 w-4 text-gray-600"}),u.jsx("span",{className:"font-medium",children:l.userData.name})]}),u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx(Gn,{className:"h-4 w-4 text-gray-600"}),u.jsx("span",{className:"text-sm text-gray-600",children:l.userData.email})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Nn,{className:"h-4 w-4 text-gray-600"}),u.jsx("span",{className:"text-sm text-gray-600",children:Na(l.userData.category)})]})]}),l.reason&&u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:l.reason}),u.jsx("button",{onClick:el,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Κλείσιμο"})]})})}),Cs&&Br&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Xt,{className:"h-8 w-8 text-orange-600"})}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Κλείδωμα Δόσης"}),u.jsxs("p",{className:"text-gray-600 mb-6",children:["Είστε σίγουροι ότι θέλετε να κλειδώσετε την ",Br.installmentNumber,"η δόση;",u.jsx("br",{}),u.jsx("span",{className:"text-orange-600 font-semibold",children:"Αυτή η ενέργεια είναι μόνιμη!"})]}),u.jsxs("div",{className:"flex space-x-4",children:[u.jsx("button",{onClick:Ps,className:"flex-1 px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-xl hover:from-gray-700 hover:to-gray-800 transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:"❌ Cancel"}),u.jsxs("button",{onClick:Ds,className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-xl hover:from-orange-700 hover:to-orange-800 transition-all duration-200 font-medium shadow-lg hover:shadow-xl flex items-center justify-center space-x-2",children:[u.jsx(so,{className:"h-4 w-4"}),u.jsx("span",{children:"✅ Yes, Lock"})]})]})]})})}),Ss&&Jt&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(br,{className:"h-8 w-8 text-red-600"})}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Διαγραφή 3ης Δόσης"}),u.jsxs("p",{className:"text-gray-600 mb-6",children:["Είστε σίγουροι ότι θέλετε να διαγράψετε την 3η δόση;",u.jsx("br",{}),u.jsx("span",{className:"text-red-600 font-semibold",children:"Αυτή η ενέργεια είναι μόνιμη!"})]}),u.jsxs("div",{className:"flex space-x-4",children:[u.jsx("button",{onClick:Bs,className:"flex-1 px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-xl hover:from-gray-700 hover:to-gray-800 transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:"❌ Cancel"}),u.jsxs("button",{onClick:Ms,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all duration-200 font-medium shadow-lg hover:shadow-xl flex items-center justify-center space-x-2",children:[u.jsx(br,{className:"h-4 w-4"}),u.jsx("span",{children:"✅ Yes, Delete"})]})]})]})})})]})};export{nf as default};
