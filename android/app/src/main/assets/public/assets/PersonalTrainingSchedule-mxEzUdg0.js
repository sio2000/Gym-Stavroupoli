const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/groupTrainingCalendarApi-C4SB04po.js","assets/index-ZmRz_kF8.js","assets/index-CL_ZVhm7.css"])))=>i.map(i=>d[i]);
import{d as le,s as c,u as oe,r as d,z as w,j as e,A as ie,n as p,U as E,M as q,b as j,E as M,e as de,D as J,T as ce,_ as me}from"./index-ZmRz_kF8.js";import{a as ge,j as xe,c as ue,f as he}from"./groupAssignmentApi-DZJLlsCI.js";import{B as Y}from"./book-open-BgqSIjuL.js";import{Z as pe}from"./zap-GrzeXRr3.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),fe=async(a,t)=>{var y,B,L,h,C,_,v,z,G,N;try{console.log("[UserBookingDisplayAPI] Fetching user bookings with room data...",{userId:a,scheduleId:t});let g=c.from("lesson_bookings").select(`
        id,
        session_id,
        booking_date,
        booking_time,
        trainer_name,
        room,
        status,
        schedule_id,
        user_profiles!lesson_bookings_user_id_fkey(
          user_id,
          first_name,
          last_name,
          email
        ),
        personal_training_schedules!lesson_bookings_schedule_id_fkey(
          training_type,
          user_type,
          group_room_size
        )
      `).eq("user_id",a).eq("status","booked").order("booking_date",{ascending:!0}).order("booking_time",{ascending:!0});t&&(g=g.eq("schedule_id",t));const{data:f,error:T}=await g;if(T)return console.error("[UserBookingDisplayAPI] Error fetching user bookings:",T),[];if(!f||f.length===0)return console.log("[UserBookingDisplayAPI] No bookings found for user"),[];console.log("[UserBookingDisplayAPI] Found user bookings:",f.length);const k=[];for(const l of f)try{const I=((y=l.personal_training_schedules)==null?void 0:y.training_type)==="individual",F=((B=l.personal_training_schedules)==null?void 0:B.training_type)==="group"&&((L=l.personal_training_schedules)==null?void 0:L.user_type)==="paspartu",W=((h=l.personal_training_schedules)==null?void 0:h.training_type)==="group"&&((C=l.personal_training_schedules)==null?void 0:C.user_type)==="personal";let m,x;if(I)m="individual",x=1;else if(F)m="group-paspartu",x=((_=l.personal_training_schedules)==null?void 0:_.group_room_size)||3;else if(W)m="group-personal",x=((v=l.personal_training_schedules)==null?void 0:v.group_room_size)||3;else continue;if(m==="group-paspartu"||m==="group-personal")try{const{data:b,error:A}=await c.from("group_sessions").select("group_type").eq("session_date",l.booking_date).eq("start_time",l.booking_time).eq("trainer",l.trainer_name).eq("room",l.room).eq("is_active",!0).limit(1).single();!A&&b&&(x=b.group_type||x,console.log("[UserBookingDisplayAPI] Found corresponding session, using capacity:",x))}catch{console.log("[UserBookingDisplayAPI] No corresponding session found, using fallback capacity:",x)}const{data:u,error:H}=await c.from("lesson_bookings").select("id").eq("booking_date",l.booking_date).eq("booking_time",l.booking_time).eq("trainer_name",l.trainer_name).eq("room",l.room).eq("status","booked");let R=1;if(!H&&u&&(R=u.length),m==="group-paspartu"||m==="group-personal"){const{data:b,error:A}=await c.from("group_sessions").select("id").eq("session_date",l.booking_date).eq("start_time",l.booking_time).eq("trainer",l.trainer_name).eq("room",l.room).eq("is_active",!0);!A&&b&&(R+=b.length)}const O={id:l.id,session_id:l.session_id,booking_date:l.booking_date,booking_time:l.booking_time,trainer_name:l.trainer_name,room:l.room,status:l.status,room_name:l.room||null,participants_count:R,capacity:x,session_type:m,user_name:`${((z=l.user_profiles)==null?void 0:z.first_name)||""} ${((G=l.user_profiles)==null?void 0:G.last_name)||""}`.trim(),user_email:((N=l.user_profiles)==null?void 0:N.email)||""};k.push(O),console.log("[UserBookingDisplayAPI] Processed booking:",{id:l.id,date:l.booking_date,time:l.booking_time,room:l.room,sessionType:m,capacity:x,participantsCount:R})}catch(I){console.error("[UserBookingDisplayAPI] Error processing booking:",l.id,I)}return console.log("[UserBookingDisplayAPI] Processed bookings with room data:",k.length),k}catch(g){return console.error("[UserBookingDisplayAPI] Error fetching user bookings with room data:",g),[]}},we=()=>{console.log("[PersonalTrainingSchedule] Component rendering");const{user:a}=oe();console.log("[PersonalTrainingSchedule] User from useAuth:",a==null?void 0:a.email,"ID:",a==null?void 0:a.id);const[t,y]=d.useState(null),[B,L]=d.useState([]),[h,C]=d.useState([]),[_,v]=d.useState(!0),[z,G]=d.useState(!1),[N,g]=d.useState(!1),f=d.useRef(!1),[T,k]=d.useState(null),[l,I]=d.useState(null),[F,W]=d.useState({}),[m,x]=d.useState([]),[u,H]=d.useState(!0),R=["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"];d.useEffect(()=>{if(console.log("[PersonalTrainingSchedule] ===== USEEFFECT TRIGGERED ====="),console.log("[PersonalTrainingSchedule] User:",a==null?void 0:a.email,"ID:",a==null?void 0:a.id),console.log("[PersonalTrainingSchedule] User object:",a),console.log("[PersonalTrainingSchedule] hasLoadedRef.current:",f.current),console.log("[PersonalTrainingSchedule] isLoading:",N),console.log("[PersonalTrainingSchedule] loading state:",_),T&&(console.log("[PersonalTrainingSchedule] Clearing existing timeout"),clearTimeout(T),k(null)),!a){console.log("[PersonalTrainingSchedule] No user, resetting hasLoadedRef and stopping loading"),f.current=!1,v(!1);return}if(f.current){console.log("[PersonalTrainingSchedule] Already loaded for this user, skipping");return}console.log("[PersonalTrainingSchedule] Starting load for user:",a.email),f.current=!0,O(),console.log("[PersonalTrainingSchedule] Setting 10 second timeout");const s=setTimeout(()=>{console.warn("[PersonalTrainingSchedule] Load timeout reached, stopping loading"),v(!1),g(!1)},1e4);return k(s),()=>{console.log("[PersonalTrainingSchedule] useEffect cleanup"),s&&clearTimeout(s)}},[a]);const O=async()=>{if(console.log("[PersonalTrainingSchedule] ===== LOADING STARTED ====="),console.log("[PersonalTrainingSchedule] User ID:",a==null?void 0:a.id),console.log("[PersonalTrainingSchedule] User email:",a==null?void 0:a.email),N){console.log("[PersonalTrainingSchedule] Already loading, skipping...");return}g(!0);try{if(v(!0),!(a!=null&&a.id)){console.error("[PersonalTrainingSchedule] No user ID found"),w.error("Δεν βρέθηκε χρήστης. Κάντε επανασύνδεση."),y(null);return}console.log("[PersonalTrainingSchedule] Querying personal_training_schedules...");const{data:s,error:o}=await c.from("personal_training_schedules").select("id,user_id,month,year,schedule_data,status,created_by,created_at,updated_at,trainer_name,accepted_at,declined_at,training_type,group_room_size,weekly_frequency,user_type,is_flexible").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(1);if(console.log("[PersonalTrainingSchedule] Query result - data:",s,"error:",o),o){console.error("[PersonalTrainingSchedule] Query error:",o),w.error(`Σφάλμα βάσης δεδομένων: ${o.message}`),y(null);return}if(s&&s.length>0){console.log("[PersonalTrainingSchedule] Found schedule data:",s[0]);const r=s[0],n={id:r.id,userId:r.user_id,month:r.month,year:r.year,scheduleData:r.schedule_data,status:r.status,createdBy:r.created_by,createdAt:r.created_at,updatedAt:r.updated_at,acceptedAt:r.accepted_at,declinedAt:r.declined_at,trainingType:r.training_type,groupRoomSize:r.group_room_size,weeklyFrequency:r.weekly_frequency,userType:r.user_type,isFlexible:r.is_flexible};if(console.log("[PersonalTrainingSchedule] Loaded schedule:",n),console.log("[PersonalTrainingSchedule] Schedule details for combination check:",{trainingType:n.trainingType,userType:n.userType,id:n.id,status:n.status,fullObject:n}),n.trainingType==="group")try{const i=await ge(a.id,n.id);L(i),console.log("[PersonalTrainingSchedule] Loaded group assignments:",i)}catch(i){console.error("[PersonalTrainingSchedule] Error loading group assignments:",i)}if(console.log("[PersonalTrainingSchedule] Checking group sessions condition...",{trainingType:n.trainingType,userType:n.userType,isGroup:n.trainingType==="group",isCombination:n.trainingType==="combination",isPersonal:n.userType==="personal",isCombinationProgram:n.trainingType==="combination"&&n.userType==="personal",isPureGroupProgram:n.trainingType==="group"}),n.trainingType==="combination"&&n.userType==="personal"||n.trainingType==="group")try{console.log("[PersonalTrainingSchedule] Loading group sessions...",{userId:a.id,programId:n.id,programType:n.trainingType,userType:n.userType});const i=await xe(a.id,n.id);C(i),console.log("[PersonalTrainingSchedule] Loaded group sessions:",i),console.log("[PersonalTrainingSchedule] Group sessions count:",i.length)}catch(i){console.error("[PersonalTrainingSchedule] Error loading group sessions:",i)}else console.log("[PersonalTrainingSchedule] Not a group or combination program, skipping group sessions load");if(n.status==="pending")try{const i=new Date().toISOString(),{error:P}=await c.from("personal_training_schedules").update({status:"accepted",accepted_at:i,updated_at:i}).eq("id",n.id);P?console.error("[PersonalTrainingSchedule] Auto-accept update error:",P):(n.status="accepted",n.acceptedAt=i,n.updatedAt=i)}catch(i){console.error("[PersonalTrainingSchedule] Auto-accept exception:",i)}y(n),n.userType==="paspartu"&&await A(a.id,n.id),u&&(n.trainingType==="group"||n.trainingType==="combination"&&n.userType==="paspartu")&&await b(a.id,n.id)}else console.log("[PersonalTrainingSchedule] No schedule found for user"),y(null)}catch(s){console.error("[PersonalTrainingSchedule] Exception while loading schedule:",s),w.error("Σφάλμα κατά τη φόρτωση του προγράμματος"),y(null)}finally{console.log("[PersonalTrainingSchedule] ===== LOADING COMPLETED ====="),v(!1),g(!1),T&&(clearTimeout(T),k(null))}},b=async(s,o)=>{try{console.log("[PersonalTrainingSchedule] Loading user bookings with room data...");const r=await fe(s,o);x(r),console.log("[PersonalTrainingSchedule] Loaded bookings with room data:",r.length)}catch(r){console.error("[PersonalTrainingSchedule] Error loading bookings with room data:",r)}},A=async(s,o)=>{try{let{data:r,error:n}=await c.from("lesson_deposits").select("total_lessons, used_lessons, remaining_lessons").eq("user_id",s).single();if(n||!r){try{await c.rpc("reset_lesson_deposit_for_new_program",{p_user_id:s,p_total_lessons:5,p_created_by:s})}catch(D){console.warn("[PersonalTrainingSchedule] RPC reset_lesson_deposit_for_new_program failed or not available",D)}r=(await c.from("lesson_deposits").select("total_lessons, used_lessons, remaining_lessons").eq("user_id",s).single()).data}r&&I(r);const{data:i,error:P}=await c.from("lesson_bookings").select("id, session_id, status").eq("user_id",s).eq("schedule_id",o).in("status",["booked","completed"]);if(!P&&i){const S={};i.forEach(D=>{S[D.session_id]=D}),W(S)}}catch(r){console.error("[PersonalTrainingSchedule] Paspartu context load error:",r)}},K=async s=>{const{data:o}=await c.from("lesson_deposits").select("total_lessons, used_lessons, remaining_lessons").eq("user_id",s).single();return o},$=()=>l?(l.remaining_lessons||0)>0:!1,se=s=>u?m.find(r=>r.session_id===s.id||r.booking_date===s.date&&r.booking_time===s.startTime+":00"&&r.trainer_name===s.trainer):null,re=async s=>{if(!(!(a!=null&&a.id)||!t)){if(!$()){w.error("Δεν έχετε διαθέσιμα μαθήματα (Paspartu).");return}if(F[s.id]){w("Έχει ήδη γίνει κράτηση για αυτή τη σεσία.");return}try{g(!0);const{validateIndividualPaspartuBooking:o}=await me(async()=>{const{validateIndividualPaspartuBooking:Z}=await import("./groupTrainingCalendarApi-C4SB04po.js");return{validateIndividualPaspartuBooking:Z}},__vite__mapDeps([0,1,2])),r=await o(s.date,s.startTime+":00",s.trainer,s.room||"Αίθουσα Mike",a.id,t.id);if(!r.canBook){w.error(r.error||"This session is already full. Please choose another available time slot.");return}const n=await K(a.id),i=(n==null?void 0:n.remaining_lessons)??null,{error:P}=await c.from("lesson_bookings").insert({user_id:a.id,schedule_id:t.id,session_id:s.id,booking_date:s.date,booking_time:s.startTime+":00",trainer_name:s.trainer,room:s.room||null,status:"booked"});if(P)throw P;const S=await K(a.id),D=(S==null?void 0:S.remaining_lessons)??null;if(i!==null&&D!==null&&i===D){const Z=((n==null?void 0:n.used_lessons)||0)+1,{error:X}=await c.rpc("update_lesson_deposit_manual",{p_user_id:a.id,p_used_lessons:Z});X&&console.warn("[PersonalTrainingSchedule] RPC manual deposit update failed:",X)}await A(a.id,t.id),u&&await b(a.id,t.id),w.success("Η κράτηση καταχωρήθηκε!")}catch(o){console.error("[PersonalTrainingSchedule] Book paspartu error:",o),w.error("Σφάλμα κατά την κράτηση.")}finally{g(!1)}}},Q=s=>{switch(s){case"personal":return e.jsx(M,{className:"h-5 w-5 text-blue-600"});case"kickboxing":return e.jsx(pe,{className:"h-5 w-5 text-red-600"});case"combo":return e.jsx(ce,{className:"h-5 w-5 text-green-600"});default:return e.jsx(M,{className:"h-5 w-5 text-gray-600"})}},V=s=>{switch(s){case"personal":return"Personal Training";case"kickboxing":return"Kick Boxing";case"combo":return"Combo Training";default:return s}},ae=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-green-100 text-green-800";case"declined":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},te=s=>{switch(s){case"pending":return"Εκκρεμεί Απόφαση";case"accepted":return"Αποδεκτό";case"declined":return"Απορρίφθηκε";default:return s}},ne=s=>{if(!s)return new Date(NaN);if(/^\d{4}-\d{2}-\d{2}$/.test(s)){const[r,n,i]=s.split("-").map(Number);return new Date(r,n-1,i,12,0,0,0)}const o=s.match(/^(\d{4}-\d{2}-\d{2})/);if(o){const[r,n,i]=o[1].split("-").map(Number);return new Date(r,n-1,i,12,0,0,0)}return new Date(s)},U=s=>ne(s).toLocaleDateString("el-GR",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return console.log("[PersonalTrainingSchedule] Rendering - loading:",_,"user:",a==null?void 0:a.email,"schedule:",!!t),_?(console.log("[PersonalTrainingSchedule] Rendering loading screen"),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Φόρτωση προγράμματος..."}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["User: ",(a==null?void 0:a.email)||"No user"]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Loading state: ",_?"true":"false"]})]})})):t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-2xl shadow-2xl border border-purple-200 p-8 mb-8 transform hover:scale-105 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:["🏋️‍♀️ Πρόγραμμα Personal Training",t.trainingType==="group"&&t.userType==="paspartu"&&e.jsxs("span",{className:"ml-2 text-xl text-yellow-300 animate-pulse",children:["(👥 Ομαδικό - ",t.groupRoomSize," άτομα)"]}),t.trainingType==="combination"&&t.userType==="personal"&&e.jsx("span",{className:"ml-2 text-xl text-yellow-300 animate-pulse",children:"(👥 Ομαδικό)"})]}),e.jsxs("p",{className:"text-blue-100 mt-2 text-lg flex items-center gap-2",children:["📅 ",R[t.month-1]," ",t.year,t.trainingType==="group"&&t.weeklyFrequency&&e.jsxs("span",{className:"ml-2 text-yellow-300 font-semibold",children:["• ",t.weeklyFrequency," φορές/εβδομάδα"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[t.trainingType==="group"&&e.jsx("span",{className:"px-4 py-2 rounded-full text-sm font-bold bg-gradient-to-r from-yellow-400 to-orange-400 text-white shadow-lg animate-bounce",children:"👥 Group Training"}),e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-bold shadow-lg ${ae(t.status)}`,children:te(t.status)})]})]})}),t.trainingType==="group"&&B.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-2xl shadow-xl border border-blue-200 p-8 mb-8 transform hover:scale-102 transition-all duration-300",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full",children:e.jsx(p,{className:"h-6 w-6 text-white"})}),"🎯 Οι Ομαδικές σας Θέσεις"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:B.map((s,o)=>e.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 rounded-xl p-6 border-2 border-blue-200 shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300 transform",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-blue-900 text-lg flex items-center gap-2",children:["📅 ",ue(s.dayOfWeek)]}),e.jsxs("p",{className:"text-lg text-blue-700 font-semibold flex items-center gap-2 mt-1",children:["🕐 ",he(s.startTime)]})]}),e.jsxs("span",{className:"px-3 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white text-sm font-bold rounded-full shadow-md animate-pulse",children:["👥 ",s.groupType," άτομα"]})]}),e.jsxs("div",{className:"space-y-3 text-sm text-blue-700",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-blue-100 rounded-lg p-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-full",children:e.jsx(E,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"font-semibold",children:["🏃‍♂️ Προπονητής: ",s.trainer]})]}),s.room&&e.jsxs("div",{className:"flex items-center gap-3 bg-green-100 rounded-lg p-3",children:[e.jsx("div",{className:"p-2 bg-green-500 rounded-full",children:e.jsx(q,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"font-semibold",children:["📍 ",s.room]})]})]}),s.notes&&e.jsx("div",{className:"mt-4 text-sm text-blue-600 bg-gradient-to-r from-yellow-100 to-orange-100 rounded-lg p-4 border border-yellow-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-lg",children:"💬"}),e.jsx("span",{className:"font-medium",children:s.notes})]})})]},s.id))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-2xl shadow-xl border border-green-200 p-8 mb-8 transform hover:scale-102 transition-all duration-300",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full",children:e.jsx(j,{className:"h-6 w-6 text-white"})}),t.trainingType==="combination"&&t.userType==="personal"?"📅 Προγραμματισμένες Σεσίες":"🎯 Προγραμματισμένες Σεσίες"]}),t.trainingType==="combination"&&t.userType==="personal"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full",children:e.jsx(p,{className:"h-5 w-5 text-white"})}),"👥 Ομαδικές Σεσίες (",h.length,")"]}),h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-4 bg-gray-200 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(j,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-lg font-medium",children:"Δεν υπάρχουν ομαδικές σεσίες για αυτό το πρόγραμμα."})]}):e.jsx("div",{className:"space-y-4",children:h.map((s,o)=>e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-6 hover:shadow-xl hover:scale-105 transition-all duration-300 transform",children:e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:e.jsx(p,{className:"h-7 w-7 text-white"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg flex items-center gap-2",children:"👥 Ομαδική Σεσίες"}),e.jsxs("span",{className:"px-3 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white text-sm font-bold rounded-full shadow-md",children:["🕐 ",s.start_time.substring(0,5)]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("div",{className:"p-2 bg-green-500 rounded-full",children:e.jsx(j,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"font-semibold text-gray-700",children:["📅 ",U(s.session_date)]})]}),e.jsxs("div",{className:"flex items-center space-x-3 bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-full",children:e.jsx(E,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"font-semibold text-gray-700",children:["🏃‍♂️ ",s.trainer]})]})]}),e.jsxs("div",{className:"space-y-3",children:[s.room&&e.jsxs("div",{className:"flex items-center space-x-3 bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("div",{className:"p-2 bg-purple-500 rounded-full",children:e.jsx(q,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"font-semibold text-gray-700",children:["📍 ",s.room]})]}),e.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-lg p-3 border border-green-200",children:[e.jsx("div",{className:"p-2 bg-green-500 rounded-full",children:e.jsx(Y,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"font-bold text-green-700",children:"✅ Προγραμματισμένη"})]})]})]})]})]})},s.id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full",children:e.jsx(M,{className:"h-5 w-5 text-white"})}),"💪 Ατομικές Σεσίες"]}),t.scheduleData.sessions.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-4 bg-gray-200 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(M,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-lg font-medium",children:"Δεν υπάρχουν ατομικές σεσίες για αυτό το πρόγραμμα."})]}):e.jsx("div",{className:"space-y-4",children:t.scheduleData.sessions.map(s=>e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 hover:shadow-xl hover:scale-105 transition-all duration-300 transform",children:e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center shadow-lg",children:Q(s.type)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg flex items-center gap-2",children:V(s.type)}),e.jsxs("span",{className:"px-3 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white text-sm font-bold rounded-full shadow-md",children:["🕐 ",s.startTime]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("div",{className:"p-2 bg-green-500 rounded-full",children:e.jsx(j,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"font-semibold text-gray-700",children:["📅 ",U(s.date)]})]}),e.jsxs("div",{className:"flex items-center space-x-3 bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-full",children:e.jsx(E,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"font-semibold text-gray-700",children:["🏃‍♂️ ",s.trainer]})]})]}),e.jsxs("div",{className:"space-y-3",children:[s.room&&e.jsxs("div",{className:"flex items-center space-x-3 bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("div",{className:"p-2 bg-purple-500 rounded-full",children:e.jsx(q,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"font-semibold text-gray-700",children:["📍 ",s.room]})]}),s.notes&&e.jsxs("div",{className:"flex items-start space-x-3 bg-gradient-to-r from-yellow-100 to-orange-100 rounded-lg p-3 border border-yellow-200",children:[e.jsx("div",{className:"p-2 bg-yellow-500 rounded-full",children:e.jsx(ee,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"font-medium text-gray-700",children:s.notes})]})]})]})]})]})},s.id))})]})]}):t.userType==="paspartu"?t.scheduleData.sessions.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-6 bg-gray-200 rounded-full w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:e.jsx(j,{className:"h-12 w-12 text-gray-400"})}),e.jsx("p",{className:"text-xl font-medium",children:"Δεν υπάρχουν προτάσεις σεσιών από τον προπονητή."})]}):e.jsxs("div",{className:"space-y-6",children:[l&&e.jsx("div",{className:"mb-6 text-lg font-bold text-blue-700 bg-gradient-to-r from-blue-100 to-indigo-100 border-2 border-blue-200 rounded-xl p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full",children:e.jsx("span",{className:"text-white text-xl",children:"💳"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:"Υπόλοιπο Μαθημάτων: "}),e.jsx("span",{className:"text-3xl text-indigo-600",children:l.remaining_lessons}),e.jsxs("span",{className:"text-xl",children:[" από ",l.total_lessons]})]})]})}),t.scheduleData.sessions.map(s=>{const o=!!F[s.id];return e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-6 hover:shadow-xl hover:scale-105 transition-all duration-300 transform",children:[e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-lg",children:Q(s.type)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-gray-900 text-lg flex items-center gap-3",children:[V(s.type),e.jsx("span",{className:"inline-flex items-center text-sm px-3 py-2 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white font-bold shadow-md animate-pulse",children:"💡 Πρόταση για κράτηση"})]}),e.jsxs("span",{className:"px-3 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-sm font-bold rounded-full shadow-md",children:["🕐 ",s.startTime]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("div",{className:"p-2 bg-green-500 rounded-full",children:e.jsx(j,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"font-semibold text-gray-700",children:["📅 ",U(s.date)]})]}),e.jsxs("div",{className:"flex items-center space-x-3 bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-full",children:e.jsx(E,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"font-semibold text-gray-700",children:["🏃‍♂️ ",s.trainer]})]})]}),e.jsxs("div",{className:"space-y-3",children:[s.room&&e.jsxs("div",{className:"flex items-center space-x-3 bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("div",{className:"p-2 bg-purple-500 rounded-full",children:e.jsx(q,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"font-semibold text-gray-700",children:["📍 ",s.room]})]}),u&&t.trainingType==="group"&&e.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-purple-100 to-pink-100 rounded-lg p-3 border border-purple-200",children:[e.jsx("div",{className:"p-2 bg-purple-500 rounded-full",children:e.jsx(p,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"font-bold text-purple-700",children:["👥 Ομαδικό μάθημα: ",t.groupRoomSize||3," άτομα"]})]}),o&&u&&(()=>{const r=se(s);return r?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-lg p-3 border border-blue-200",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-full",children:e.jsx(q,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"font-bold text-blue-700",children:["🏠 Room: ",r.room_name||"Not assigned yet"]})]}),e.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-lg p-3 border border-green-200",children:[e.jsx("div",{className:"p-2 bg-green-500 rounded-full",children:e.jsx(p,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"font-bold text-green-700",children:["👥 Participants: ",r.participants_count,"/",r.capacity]}),r.participants_count>=r.capacity&&e.jsx("span",{className:"text-xs px-3 py-1 bg-red-500 text-white rounded-full font-bold animate-pulse",children:"🔴 Full"})]})]}):null})()]})]})]})]}),e.jsx("div",{className:"mt-6 flex items-center justify-end space-x-3",children:o?e.jsx("span",{className:"px-6 py-3 rounded-xl text-sm font-bold bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg animate-pulse",children:"✅ Κλείστηκε"}):e.jsx("button",{disabled:!$()||N,onClick:()=>re(s),className:`px-6 py-3 rounded-xl text-white text-sm font-bold shadow-lg transition-all duration-300 transform hover:scale-105 ${$()&&!N?"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600":"bg-gray-400 cursor-not-allowed"}`,children:N?"⏳ Φόρτωση...":"Κράτηση"})})]},s.id)})]}):t.scheduleData.sessions.length===0&&h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(j,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"Δεν υπάρχουν προγραμματισμένες σεσίες"})]}):e.jsxs("div",{className:"space-y-4",children:[t.trainingType==="group"&&h.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[e.jsx(p,{className:"h-4 w-4 mr-2 text-blue-600"}),"Ομαδικές Σεσίες (",h.length,")"]}),e.jsx("div",{className:"space-y-3",children:h.map(s=>e.jsx("div",{className:"border border-blue-200 rounded-lg p-4 hover:bg-blue-50 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(p,{className:"h-5 w-5 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Ομαδική Σεσίες"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.start_time.substring(0,5)})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{children:U(s.session_date)})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:s.trainer})]}),s.room&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{children:"📍"}),e.jsx("span",{children:s.room})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{children:"Προγραμματισμένη"})]}),u&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-purple-600",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["Ομαδικό μάθημα: ",s.group_type||t.groupRoomSize||3," άτομα"]})]}),u&&(()=>{const o=m.find(r=>r.booking_date===s.session_date&&r.booking_time===s.start_time&&r.trainer_name===s.trainer&&r.room===s.room);return o?e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["Room: ",o.room_name||"Not assigned yet"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-600",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["Participants: ",o.participants_count,"/",o.capacity]}),o.participants_count>=o.capacity&&e.jsx("span",{className:"text-xs px-2 py-1 bg-red-100 text-red-700 rounded-full",children:"Full"})]})]}):null})()]})]})]})},s.id))})]}),t.scheduleData.sessions.map(s=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:Q(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:V(s.type)}),e.jsx("span",{className:"text-sm text-gray-500",children:s.startTime})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{children:U(s.date)})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:s.trainer})]}),s.room&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{children:"📍"}),e.jsx("span",{children:s.room})]}),u&&t.trainingType==="group"&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-purple-600",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["Ομαδικό μάθημα: ",t.groupRoomSize||3," άτομα"]})]}),s.notes&&e.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600 mt-2",children:[e.jsx(ee,{className:"h-4 w-4 mt-0.5"}),e.jsx("span",{children:s.notes})]})]})]})]})},s.id))]})]}),(t.scheduleData.notes||t.scheduleData.specialInstructions)&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Πληροφορίες Προγράμματος"}),e.jsxs("div",{className:"space-y-4",children:[t.scheduleData.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Σημειώσεις"}),e.jsx("p",{className:"text-gray-600",children:t.scheduleData.notes})]}),t.scheduleData.specialInstructions&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Ειδικές Οδηγίες"}),e.jsx("p",{className:"text-gray-600",children:t.scheduleData.specialInstructions})]})]})]}),t.status==="accepted"&&e.jsx("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 border-2 border-green-300 rounded-2xl p-8 shadow-xl",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full shadow-lg",children:e.jsx(de,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-green-900 text-2xl mb-2",children:"🎉 Πρόγραμμα Αποδεκτό!"}),e.jsx("p",{className:"text-green-700 text-lg",children:"Το πρόγραμμα έχει γίνει αποδεκτό! Θα λάβετε ειδοποιήσεις για τις προπονήσεις σας."})]})]})}),t.status==="declined"&&e.jsx("div",{className:"bg-gradient-to-r from-red-100 to-pink-100 border-2 border-red-300 rounded-2xl p-8 shadow-xl",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-red-500 to-pink-500 rounded-full shadow-lg",children:e.jsx(J,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-red-900 text-2xl mb-2",children:"⚠️ Πρόγραμμα Απορριφθέν"}),e.jsx("p",{className:"text-red-700 text-lg",children:"Παρακαλώ περάστε από το γυμναστήριο για να συζητήσουμε τις ώρες που σας βολεύουν."})]})]})}),z&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm",children:e.jsx("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl border border-gray-200 transform animate-scale-in",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-6 bg-gradient-to-r from-red-500 to-pink-500 rounded-full w-20 h-20 mx-auto mb-6 shadow-lg",children:e.jsx(J,{className:"h-12 w-12 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"⚠️ Πρόγραμμα Απορρίφθηκε"}),e.jsx("p",{className:"text-gray-600 mb-8 text-lg",children:"Παρακαλώ περάστε από το γυμναστήριο για να συζητήσουμε τις ώρες που σας βολεύουν."}),e.jsx("button",{onClick:()=>G(!1),className:"px-8 py-4 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-xl hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 transform hover:scale-105 font-bold text-lg shadow-lg",children:"👍 Κατάλαβα"})]})})})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ie,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Δεν βρέθηκε πρόγραμμα"}),e.jsx("p",{className:"text-gray-600",children:"Δεν υπάρχει διαθέσιμο πρόγραμμα Personal Training για εσάς."})]})})};export{we as default};
