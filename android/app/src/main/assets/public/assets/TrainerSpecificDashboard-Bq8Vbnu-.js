import{d as re,s as L,r as i,z as j,j as e,A as Se,X as _e,C as Te,M as De,n as se,y as Ae,T as Ce,b as ee,B as oe,D as de}from"./index-ZmRz_kF8.js";import{t as xe}from"./date-D_3Ba85T.js";import{getGroupTrainingCalendarEvents as ke}from"./groupTrainingCalendarApi-C4SB04po.js";import{C as ge,a as ue}from"./chevron-right-Dd30DhYX.js";import{R as Ee}from"./refresh-cw-bL_ilMEE.js";import{T as $e}from"./trending-up-Di7KrMAq.js";import{A as Pe}from"./award-DLKJNSqY.js";import{P as Me}from"./plus-BG5DWusa.js";import{S as me}from"./search-DgEtpkkJ.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=re("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=re("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=re("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Ue=async()=>{try{console.log("[AbsenceAPI] Getting all users from user_profiles");const{data:r,error:l}=await L.from("user_profiles").select("user_id, first_name, last_name, email, profile_photo").not("first_name","is",null).not("last_name","is",null).order("first_name",{ascending:!0});if(l)throw console.error("[AbsenceAPI] Error getting all users:",l),l;return console.log(`[AbsenceAPI] Found ${(r==null?void 0:r.length)||0} active users`),r||[]}catch(r){throw console.error("[AbsenceAPI] Exception getting all users:",r),r}},Fe=async r=>{try{console.log(`[AbsenceAPI] Getting users for trainer: ${r}`);const{data:l,error:h}=await L.rpc("get_trainer_users",{trainer_name_param:r});if(h)throw console.error("[AbsenceAPI] Error getting trainer users:",h),h;return console.log(`[AbsenceAPI] Found ${(l==null?void 0:l.length)||0} users for trainer ${r}`),l||[]}catch(l){throw console.error("[AbsenceAPI] Exception getting trainer users:",l),l}},Re=async(r,l)=>{try{console.log(`[AbsenceAPI] Getting absences for user: ${r}, trainer: ${l}`);const{data:h,error:f}=await L.rpc("get_user_absences",{user_id_param:r,trainer_name_param:l});if(f)throw console.error("[AbsenceAPI] Error getting user absences:",f),f;return console.log(`[AbsenceAPI] Found ${(h==null?void 0:h.length)||0} absences for user ${r}`),h||[]}catch(h){throw console.error("[AbsenceAPI] Exception getting user absences:",h),h}},Oe=async(r,l,h,f,I,U,N,u)=>{try{console.log(`[AbsenceAPI] Adding absence for user: ${r}, trainer: ${l}`);const{error:a}=await L.rpc("add_absence",{user_id_param:r,trainer_name_param:l,session_id_param:h,session_date_param:f,session_time_param:I,absence_type_param:U,reason_param:N||null,notes_param:u||null});if(a)throw console.error("[AbsenceAPI] Error adding absence:",a),a;console.log("[AbsenceAPI] Absence added successfully")}catch(a){throw console.error("[AbsenceAPI] Exception adding absence:",a),a}},ze=async r=>{try{console.log(`[AbsenceAPI] Deleting absence: ${r}`);const{error:l}=await L.rpc("delete_absence",{absence_id_param:r});if(l)throw console.error("[AbsenceAPI] Error deleting absence:",l),l;console.log("[AbsenceAPI] Absence deleted successfully")}catch(l){throw console.error("[AbsenceAPI] Exception deleting absence:",l),l}},Ge=({trainerName:r,featureEnabled:l=!0})=>{const[h,f]=i.useState(()=>new Date),[I,U]=i.useState([]),[N,u]=i.useState(!1),[a,q]=i.useState(null),[K,T]=i.useState(!1),[F,g]=i.useState(!1),y=h.getMonth()+1,w=h.getFullYear(),k=i.useCallback(async()=>{if(l){u(!0);try{const n=`${w}-${y.toString().padStart(2,"0")}-01`,x=xe(new Date(w,y,0));console.log("[TrainerMonthlyCalendar] Loading events for trainer:",r,{startDate:n,endDate:x});const b=(await ke(n,x)).events.filter(d=>(d.trainer||"").trim().toLowerCase()===(r||"").trim().toLowerCase()),_=b.sort((d,o)=>{const O=new Date(d.start).getTime(),E=new Date(o.start).getTime();return O-E});U(_),console.log("[TrainerMonthlyCalendar] Loaded events for trainer:",b.length)}catch(n){console.error("[TrainerMonthlyCalendar] Error loading events:",n),j.error("Î‘Ï€Î¿Ï„Ï…Ï‡Î¯Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚ Î·Î¼ÎµÏÎ¿Î»Î¿Î³Î¯Î¿Ï…")}finally{u(!1)}}},[w,y,l,r]);i.useEffect(()=>{k()},[k]);const J=()=>{f(n=>new Date(n.getFullYear(),n.getMonth()-1,1))},G=()=>{f(n=>new Date(n.getFullYear(),n.getMonth()+1,1))},te=()=>{f(new Date)},Q=n=>{const x=xe(n);return I.filter(m=>m.start.startsWith(x)).sort((m,b)=>{const _=new Date(m.start).getTime(),d=new Date(b.start).getTime();return _-d})},P=(n,x)=>{const m=n/x*100;return m===0?"text-gray-600":m<=50?"text-green-700":m<100?"text-yellow-700":"text-red-700"},v=(n,x)=>{const m=n/x*100;return m===0?"bg-gray-100":m<=50?"bg-green-200":m<100?"bg-yellow-200":"bg-red-200"},D=(n,x)=>n>=x,S=async n=>{try{u(!0),console.log("[TrainerMonthlyCalendar] Event clicked:",n),q(n),T(!0)}catch(x){console.error("[TrainerMonthlyCalendar] Error loading event details:",x),j.error("Failed to load event details")}finally{u(!1)}},R=async()=>{g(!0);try{await k(),j.success("Î—Î¼ÎµÏÎ¿Î»ÏŒÎ³Î¹Î¿ Î±Î½Î±Î½ÎµÏÎ¸Î·ÎºÎµ")}catch(n){console.error("[TrainerMonthlyCalendar] Error refreshing:",n),j.error("Î‘Ï€Î¿Ï„Ï…Ï‡Î¯Î± Î±Î½Î±Î½Î­Ï‰ÏƒÎ·Ï‚ Î·Î¼ÎµÏÎ¿Î»Î¿Î³Î¯Î¿Ï…")}finally{g(!1)}},B=()=>{const n=new Date(w,y,0).getDate(),x=new Date(w,y-1,1).getDay(),m=[];for(let b=0;b<x;b++)m.push(e.jsx("div",{className:"min-h-32 bg-gray-50 rounded-lg"},`empty-${b}`));for(let b=1;b<=n;b++){const _=new Date(w,y-1,b),d=Q(_);m.push(e.jsxs("div",{className:"min-h-32 bg-white border border-gray-200 rounded-lg p-2 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1 flex-shrink-0",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:b}),d.length>0&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full",children:d.length})]}),e.jsx("div",{className:"space-y-1 flex-grow",children:d.map((o,O)=>{const E=D(o.participants_count,o.capacity);return e.jsx("div",{onClick:()=>S(o),className:`rounded-lg cursor-pointer hover:opacity-90 transition-all duration-200 ${v(o.participants_count,o.capacity)} border border-opacity-20 shadow-sm hover:shadow-md p-2`,title:"Click to view session details",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-sm text-gray-800 mb-1",children:o.start.split("T")[1].substring(0,5)}),e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx("span",{className:"text-lg",children:o.capacity===1?"ğŸ‘¤":o.capacity===2?"ğŸ‘¥ğŸ‘¥":o.capacity===3?"ğŸ‘¥ğŸ‘¥ğŸ‘¥":o.capacity===6?"ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥":o.capacity===10?"ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥":"ğŸ‘¥"}),e.jsxs("span",{className:"text-xs font-bold text-gray-700",children:[o.participants_count,"/",o.capacity]})]}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:o.capacity===1?"1 Î¬Ï„Î¿Î¼Î¿ (Individual)":o.capacity===2?"2 Î¬Ï„Î¿Î¼Î±":o.capacity===3?"3 Î¬Ï„Î¿Î¼Î±":o.capacity===6?"6 Î¬Ï„Î¿Î¼Î±":o.capacity===10?"10 Î¬Ï„Î¿Î¼Î±":`${o.capacity} Î¬Ï„Î¿Î¼Î±`}),E&&e.jsx("div",{className:"text-xs text-red-600 font-bold mt-1",children:"ğŸ”’ Î“Î•ÎœÎ‘Î¤ÎŸ"})]})},O)})})]},b))}return m};return l?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:"ğŸ“…"}),e.jsxs("span",{children:["Personal Training - ÎœÎ·Î½Î¹Î±Î¯Î¿ Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î± - Î ÏÎ¿Ï€Î¿Î½Î·Ï„Î®Ï‚ ",r.toUpperCase()]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ÎœÎ·Î½Î¹Î±Î¯Î± Ï€ÏÎ¿Î²Î¿Î»Î® -"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Î•Î»ÎµÏÎ¸ÎµÏÎ±"})]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"ÎœÎ¹ÏƒÎ¬"})]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Î“ÎµÎ¼Î¬Ï„Î±"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:J,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",disabled:N,children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:te,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",disabled:N,children:"Î£Î®Î¼ÎµÏÎ±"}),e.jsxs("button",{onClick:R,className:"px-3 py-1 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-1",disabled:N||F,children:[F?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(Ee,{className:"h-4 w-4"}),e.jsx("span",{children:"Î‘Î½Î±Î½Î­Ï‰ÏƒÎ·"})]}),e.jsx("button",{onClick:G,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",disabled:N,children:e.jsx(ue,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:new Date(w,y-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})})})]}),e.jsx("div",{className:"p-4 sm:p-6",children:N?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading calendar events..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["ÎšÏ…ÏÎ¹Î±ÎºÎ®","Î”ÎµÏ…Ï„Î­ÏÎ±","Î¤ÏÎ¯Ï„Î·","Î¤ÎµÏ„Î¬ÏÏ„Î·","Î Î­Î¼Ï€Ï„Î·","Î Î±ÏÎ±ÏƒÎºÎµÏ…Î®","Î£Î¬Î²Î²Î±Ï„Î¿"].map(n=>e.jsx("div",{className:"text-center text-sm font-bold text-gray-700 py-3 bg-gray-100 rounded-lg",children:n},n))}),e.jsx("div",{className:"grid grid-cols-7 gap-2 auto-rows-min",children:B()})]})}),K&&a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Î›ÎµÏ€Ï„Î¿Î¼Î­ÏÎµÎ¹ÎµÏ‚ Î£ÎµÏƒÎ¯Î±Ï‚"}),e.jsx("button",{onClick:()=>T(!1),className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Te,{className:"h-4 w-4 text-gray-600"}),e.jsxs("span",{className:"font-medium",children:[new Date(a.start).toLocaleDateString("el-GR")," ÏƒÏ„Î¹Ï‚ ",a.start.split("T")[1].substring(0,5)]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(De,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{children:a.room})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"h-4 w-4 text-gray-600"}),e.jsxs("span",{children:["Î ÏÎ¿Ï€Î¿Î½Î·Ï„Î®Ï‚: ",a.trainer]})]})]}),e.jsxs("div",{className:`rounded-lg p-4 ${D(a.participants_count,a.capacity)?"bg-red-50 border border-red-200":"bg-blue-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-medium text-lg",children:"Î§Ï‰ÏÎ·Ï„Î¹ÎºÏŒÏ„Î·Ï„Î± ÎœÎ±Î¸Î®Î¼Î±Ï„Î¿Ï‚"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:a.capacity===1?"ğŸ‘¤":a.capacity===2?"ğŸ‘¥ğŸ‘¥":a.capacity===3?"ğŸ‘¥ğŸ‘¥ğŸ‘¥":a.capacity===6?"ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥":a.capacity===10?"ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥ğŸ‘¥":"ğŸ‘¥"}),e.jsxs("span",{className:`px-3 py-2 rounded-full text-lg font-bold ${v(a.participants_count,a.capacity)} ${P(a.participants_count,a.capacity)}`,children:[a.participants_count,"/",a.capacity]}),D(a.participants_count,a.capacity)&&e.jsx("span",{className:"text-sm text-red-600 font-bold bg-red-100 px-3 py-2 rounded-lg",children:"ğŸ”’ Î“Î•ÎœÎ‘Î¤ÎŸ"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-800 mb-2",children:a.capacity===1?"Individual Training - 1 Î¬Ï„Î¿Î¼Î¿":a.capacity===2?"ÎœÎ¬Î¸Î·Î¼Î± Î³Î¹Î± 2 Î¬Ï„Î¿Î¼Î±":a.capacity===3?"ÎœÎ¬Î¸Î·Î¼Î± Î³Î¹Î± 3 Î¬Ï„Î¿Î¼Î±":a.capacity===6?"ÎœÎ¬Î¸Î·Î¼Î± Î³Î¹Î± 6 Î¬Ï„Î¿Î¼Î±":a.capacity===10?"ÎœÎ¬Î¸Î·Î¼Î± Î³Î¹Î± 10 Î¬Ï„Î¿Î¼Î±":`ÎœÎ¬Î¸Î·Î¼Î± Î³Î¹Î± ${a.capacity} Î¬Ï„Î¿Î¼Î±`}),e.jsx("div",{className:"text-sm text-gray-600",children:a.participants_count===0?"ÎšÎ±Î½Î­Î½Î±Ï‚ ÏƒÏ…Î¼Î¼ÎµÏ„Î­Ï‡Ï‰Î½":a.participants_count===1?"1 ÏƒÏ…Î¼Î¼ÎµÏ„Î­Ï‡Ï‰Î½":`${a.participants_count} ÏƒÏ…Î¼Î¼ÎµÏ„Î­Ï‡Î¿Î½Ï„ÎµÏ‚`})]}),D(a.participants_count,a.capacity)&&e.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-100 p-3 rounded-lg",children:"âš ï¸ Î‘Ï…Ï„ÏŒ Ï„Î¿ Î¼Î¬Î¸Î·Î¼Î± ÎµÎ¯Î½Î±Î¹ Î³ÎµÎ¼Î¬Ï„Î¿. Î”ÎµÎ½ ÎµÏ€Î¹Ï„ÏÎ­Ï€Î¿Î½Ï„Î±Î¹ Î½Î­ÎµÏ‚ ÎºÏÎ±Ï„Î®ÏƒÎµÎ¹Ï‚."})]}),a.participants.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Î£Ï…Î¼Î¼ÎµÏ„Î­Ï‡Î¿Î½Ï„ÎµÏ‚"}),e.jsx("div",{className:"space-y-2",children:a.participants.map((n,x)=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-medium",children:n.name.split(" ").map(m=>m[0]).join("").toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:n.name}),e.jsx("div",{className:"text-xs text-gray-600",children:n.email})]})]},x))})]})]})]})})})]}):e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"text-yellow-800",children:"Î¤Î¿ Î—Î¼ÎµÏÎ¿Î»ÏŒÎ³Î¹Î¿ Î ÏÎ¿Ï€ÏŒÎ½Î·ÏƒÎ·Ï‚ ÎµÎ¯Î½Î±Î¹ Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î¿"})]})})},Ve=({trainerName:r})=>{var le,ie;const[l,h]=i.useState("schedule"),[f,I]=i.useState([]),[U,N]=i.useState(!1),[u,a]=i.useState([]),[q,K]=i.useState([]),[T,F]=i.useState({}),[g,y]=i.useState(null),[w,k]=i.useState(""),[J,G]=i.useState(new Set),[te,Q]=i.useState(1),[P,v]=i.useState(1),D=9,[S,R]=i.useState(""),[B,n]=i.useState(!1),[x,m]=i.useState(""),[b,_]=i.useState(!1),[d,o]=i.useState({sessionId:"",sessionDate:"",sessionTime:"",absenceType:"absent",reason:"",notes:""}),O=async()=>{try{N(!0),console.log("[TrainerSpecificDashboard] Loading schedule data for trainer:",r);const{data:s,error:t}=await L.from("personal_training_schedules").select("*").order("created_at",{ascending:!1});if(t){console.error("[TrainerSpecificDashboard] Error loading schedules:",t),j.error("Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î· Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Ï‰Î½ Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î¬Ï„Ï‰Î½");return}const c=(s==null?void 0:s.filter(p=>{var C;return p.trainer_name===r?!0:(((C=p.schedule_data)==null?void 0:C.sessions)||[]).some($=>$.trainer===r)}))||[];console.log("[TrainerSpecificDashboard] Found schedules for trainer:",c.length),console.log("[TrainerSpecificDashboard] All schedules:",s),console.log("[TrainerSpecificDashboard] All schedules length:",(s==null?void 0:s.length)||0),console.log("[TrainerSpecificDashboard] Filtered trainer schedules:",c),console.log("[TrainerSpecificDashboard] Trainer name for filtering:",r),c.length>0&&(console.log("[TrainerSpecificDashboard] First schedule properties:",Object.keys(c[0])),console.log("[TrainerSpecificDashboard] First schedule user_id:",c[0].user_id),console.log("[TrainerSpecificDashboard] First schedule user_id type:",typeof c[0].user_id)),I(c)}catch(s){console.error("[TrainerSpecificDashboard] Exception loading schedule data:",s),j.error("Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î· Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Ï‰Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½")}finally{N(!1)}};i.useEffect(()=>{O()},[r]);const E=i.useMemo(()=>{console.log("[TrainerSpecificDashboard] ===== TRAINER SESSIONS USEMEMO ====="),console.log("[TrainerSpecificDashboard] trainerName:",r),console.log("[TrainerSpecificDashboard] realSchedules:",f),console.log("[TrainerSpecificDashboard] trainerUsers:",u);const s=[];return f.forEach((t,c)=>{var A,C;console.log(`[TrainerSpecificDashboard] Processing schedule ${c}:`,t),console.log("[TrainerSpecificDashboard] Schedule data property:",t.schedule_data),console.log("[TrainerSpecificDashboard] Schedule data sessions:",(A=t.schedule_data)==null?void 0:A.sessions);const p=((C=t.schedule_data)==null?void 0:C.sessions)||[];console.log("[TrainerSpecificDashboard] Sessions array length:",p.length),p.forEach(($,we)=>{if(console.log(`[TrainerSpecificDashboard] Processing session ${we}:`,$),console.log("[TrainerSpecificDashboard] Session trainer:",$.trainer),console.log("[TrainerSpecificDashboard] Looking for trainer:",r),console.log("[TrainerSpecificDashboard] Match:",$.trainer===r),$.trainer===r){console.log("[TrainerSpecificDashboard] Schedule user_id:",t.user_id),console.log("[TrainerSpecificDashboard] Schedule properties:",Object.keys(t)),console.log("[TrainerSpecificDashboard] Available trainerUsers:",u.map(z=>({user_id:z.user_id,name:`${z.first_name} ${z.last_name}`})));const M=u.find(z=>z.user_id===t.user_id);console.log("[TrainerSpecificDashboard] Found user for schedule:",M);const Ne=M?`${M.first_name} ${M.last_name}`:"Î†Î³Î½Ï‰ÏƒÏ„Î¿Ï‚ Î§ÏÎ®ÏƒÏ„Î·Ï‚",ve=M?M.email:"",ce={...$,userId:t.user_id,userName:Ne,userEmail:ve,scheduleId:t.id,status:t.status};console.log("[TrainerSpecificDashboard] Adding session:",ce),s.push(ce)}})}),console.log("[TrainerSpecificDashboard] Final allSessions:",s),console.log("[TrainerSpecificDashboard] ===== TRAINER SESSIONS USEMEMO COMPLETE ====="),s},[f,r,u]),V=i.useMemo(()=>x?E.filter(t=>{try{const c=new Date(t.date);if(isNaN(c.getTime()))return console.log("[TrainerSpecificDashboard] Invalid date:",t.date),!1;const p=c.toISOString().split("T")[0],A=c.getFullYear()+"-"+String(c.getMonth()+1).padStart(2,"0")+"-"+String(c.getDate()).padStart(2,"0");return p===x||A===x}catch(c){return console.error("[TrainerSpecificDashboard] Error parsing session date:",t.date,c),!1}}):E,[E,x]);i.useEffect(()=>{Q(1),m(""),v(1),R("")},[r]);const Y=i.useMemo(()=>{if(!S.trim())return u;const s=S.toLowerCase();return u.filter(t=>t.first_name.toLowerCase().includes(s)||t.last_name.toLowerCase().includes(s)||t.email.toLowerCase().includes(s)||`${t.first_name} ${t.last_name}`.toLowerCase().includes(s))},[u,S]),H=Math.ceil(Y.length/D),Z=(P-1)*D,ae=Z+D,W=Y.slice(Z,ae),ne=i.useMemo(()=>{const s=V.length,t=new Set(V.map(c=>c.userId)).size;return{totalLessons:s,totalParticipants:t}},[V]),be=async()=>{try{console.log("[TrainerSpecificDashboard] Loading all users for search");const s=await Ue();K(s),console.log(`[TrainerSpecificDashboard] Loaded ${s.length} total users for search`)}catch(s){console.error("[TrainerSpecificDashboard] Error loading all users:",s),j.error("Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î· Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Ï‰Î½ Ï‡ÏÎ·ÏƒÏ„ÏÎ½")}},pe=async()=>{if(r)try{console.log(`[TrainerSpecificDashboard] Loading users for trainer: ${r}`);const s=await Fe(r);a(s),console.log(`[TrainerSpecificDashboard] Loaded ${s.length} users for ${r}`)}catch(s){console.error("[TrainerSpecificDashboard] Error loading trainer users:",s),j.error("Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î· Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Ï‰Î½ Ï‡ÏÎ·ÏƒÏ„ÏÎ½")}},X=async s=>{if(r)try{const t=await Re(s,r);F(c=>({...c,[s]:t}))}catch(t){console.error("[TrainerSpecificDashboard] Error loading user absences:",t),j.error("Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î· Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Ï‰Î½ Î±Ï€Î¿Ï…ÏƒÎ¹ÏÎ½")}},fe=async()=>{if(!(!g||!r))try{console.log("[TrainerSpecificDashboard] Adding absence for user:",g),await Oe(g,r,d.sessionId,d.sessionDate,d.sessionTime,d.absenceType,d.reason,d.notes),j.success("Î— Î±Ï€Î¿Ï…ÏƒÎ¯Î± ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ®Î¸Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚"),_(!1),y(null),k(""),o({sessionId:"",sessionDate:"",sessionTime:"",absenceType:"absent",reason:"",notes:""}),setTimeout(async()=>{await X(g)},500)}catch(s){console.error("[TrainerSpecificDashboard] Error adding absence:",s),j.error("Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ ÎºÎ±Ï„Î±Ï‡ÏÏÎ·ÏƒÎ· Ï„Î·Ï‚ Î±Ï€Î¿Ï…ÏƒÎ¯Î±Ï‚")}},ye=async s=>{try{console.log("[TrainerSpecificDashboard] Deleting absence:",s),await ze(s),j.success("Î— Î±Ï€Î¿Ï…ÏƒÎ¯Î± Î´Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚"),g&&await X(g)}catch(t){console.error("[TrainerSpecificDashboard] Error deleting absence:",t),j.error("Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î· Î´Î¹Î±Î³ÏÎ±Ï†Î® Ï„Î·Ï‚ Î±Ï€Î¿Ï…ÏƒÎ¯Î±Ï‚")}};i.useEffect(()=>{r&&(pe(),be(),G(new Set),F({}))},[r]),i.useEffect(()=>{if(W.length>0&&!B){const s=W.filter(t=>!J.has(t.user_id));s.length>0&&(n(!0),(async()=>{const c=s.map(p=>X(p.user_id));await Promise.all(c),G(p=>{const A=new Set(p);return s.forEach(C=>A.add(C.user_id)),A}),n(!1)})())}},[W,r]);const je=[{id:"schedule",name:"ÎœÎ·Î½Î¹Î±Î¯Î¿ Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î±",icon:ee},{id:"attendance",name:"Î£ÏÏƒÏ„Î·Î¼Î± Î‘Ï€Î¿Ï…ÏƒÎ¹ÏÎ½",icon:oe}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200/50 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between py-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Ae,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Î Î¯Î½Î±ÎºÎ±Ï‚ Î•Î»Î­Î³Ï‡Î¿Ï…"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:r})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{className:"hidden sm:flex items-center space-x-2 px-3 py-2 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Online"})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 hover:shadow-xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Î£ÏÎ½Î¿Î»Î¿ ÎœÎ±Î¸Î·Î¼Î¬Ï„Ï‰Î½"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ne.totalLessons}),e.jsxs("p",{className:"text-xs text-green-600 font-medium mt-1 flex items-center",children:[e.jsx($e,{className:"h-3 w-3 mr-1"}),"+12% Î±Ï€ÏŒ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿ Î¼Î®Î½Î±"]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center",children:e.jsx(Le,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 hover:shadow-xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Î£Ï…Î½Î¿Î»Î¹ÎºÎ¿Î¯ Î£Ï…Î¼Î¼ÎµÏ„Î­Ï‡Î¿Î½Ï„ÎµÏ‚"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ne.totalParticipants}),e.jsxs("p",{className:"text-xs text-blue-600 font-medium mt-1 flex items-center",children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),"Î•Î½ÎµÏÎ³Î¿Î¯ Ï‡ÏÎ®ÏƒÏ„ÎµÏ‚"]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:e.jsx(se,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 hover:shadow-xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Î‘Ï€ÏŒÎ´Î¿ÏƒÎ·"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"94%"}),e.jsxs("p",{className:"text-xs text-purple-600 font-medium mt-1 flex items-center",children:[e.jsx(Ce,{className:"h-3 w-3 mr-1"}),"Î•Î¾Î±Î¹ÏÎµÏ„Î¹ÎºÎ®"]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(Pe,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 mb-8 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200/50",children:e.jsx("nav",{className:"flex space-x-1 p-2",children:je.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>h(s.id),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl font-medium text-sm transition-all duration-200 ${l===s.id?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg transform scale-105":"text-gray-600 hover:text-gray-900 hover:bg-gray-100/50"}`,children:[e.jsx(t,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:s.name})]},s.id)})})}),l==="schedule"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Personal Training - ÎœÎ·Î½Î¹Î±Î¯Î¿ Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î±"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Î ÏÎ¿Î²Î¿Î»Î® Ï‰ÏÎ¿Î»Î¿Î³Î¯Î¿Ï… Ï€ÏÎ¿Ï€Î¿Î½Î·Ï„ÏÎ½ Î³Î¹Î± ÏŒÎ»Î¿ Ï„Î¿Î½ Î¼Î®Î½Î±"})]}),U&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500 bg-blue-50 px-3 py-2 rounded-lg mt-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Ï‡ÏÎ®ÏƒÏ„Î·â€¦ Î‘Ï…Ï„ÏŒ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î´Î¹Î±ÏÎºÎ­ÏƒÎµÎ¹ Î»Î¯Î³Î± Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±."]})]}),e.jsx(Ge,{trainerName:r,featureEnabled:!0})]}),l==="attendance"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Î£ÏÏƒÏ„Î·Î¼Î± Î‘Ï€Î¿Ï…ÏƒÎ¹ÏÎ½ Personal Training"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î±Ï€Î¿Ï…ÏƒÎ¹ÏÎ½ ÎºÎ±Î¹ Ï€Î±ÏÎ¿Ï…ÏƒÎ¯Î±Ï‚"})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[B&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500 bg-blue-50 px-3 py-2 rounded-lg",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î±Ï€Î¿Ï…ÏƒÎ¹ÏÎ½..."]}),e.jsxs("button",{onClick:()=>_(!0),className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-medium hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(Me,{className:"h-5 w-5"}),e.jsx("span",{children:"Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î‘Ï€Î¿Ï…ÏƒÎ¯Î±Ï‚"})]})]})]}),e.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("label",{htmlFor:"searchUsers",className:"block text-sm font-medium text-gray-700 mb-2",children:"Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î§ÏÎ·ÏƒÏ„ÏÎ½"}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"searchUsers",type:"text",value:S,onChange:s=>{R(s.target.value),v(1)},placeholder:"Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î¼Îµ ÏŒÎ½Î¿Î¼Î± Î® email...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50 backdrop-blur-sm"})]})]}),S&&e.jsx("button",{onClick:()=>{R(""),v(1)},className:"px-4 py-3 text-sm bg-red-100 text-red-700 rounded-xl hover:bg-red-200 transition-colors font-medium",children:"ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚"})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:W.map(s=>e.jsx("div",{className:`bg-white/60 backdrop-blur-sm rounded-2xl p-4 sm:p-6 shadow-lg border cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-[1.02] ${g===s.user_id?"border-blue-500 bg-blue-50/80 ring-2 ring-blue-200":"border-white/20 hover:border-gray-300"}`,onClick:()=>{y(s.user_id),X(s.user_id)},children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-2xl overflow-hidden flex items-center justify-center shadow-lg",children:s.profile_photo?e.jsx("img",{src:s.profile_photo,alt:`${s.first_name} ${s.last_name}`,className:"w-full h-full object-cover",onError:t=>{const c=t.target;c.style.display="none";const p=c.parentElement;p&&(p.innerHTML=`<div class="w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
                                  <span class="text-white font-semibold text-lg">${s.first_name.charAt(0)}${s.last_name.charAt(0)}</span>
                                </div>`)}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-semibold text-lg",children:[s.first_name.charAt(0),s.last_name.charAt(0)]})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate mb-1",children:[s.first_name," ",s.last_name]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate mb-3",children:s.email}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Î•Î½ÎµÏÎ³ÏŒÏ‚"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[e.jsx(oe,{className:"h-3 w-3"}),e.jsxs("span",{children:[T[s.user_id]?T[s.user_id].length:0," Î±Ï€Î¿Ï…ÏƒÎ¯ÎµÏ‚"]})]})]}),s.next_session_date&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600 mb-1",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsx("span",{className:"font-medium",children:"Î•Ï€ÏŒÎ¼ÎµÎ½Î· ÏƒÎ­ÏƒÎ¹Î±"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(s.next_session_date).toLocaleDateString("el-GR")}),e.jsxs("p",{className:"text-xs text-gray-600",children:[s.next_session_time," - ",s.next_session_type]})]})]})]})},s.user_id))}),H>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-8 p-6 bg-white/60 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20",children:[e.jsx("div",{className:"flex items-center text-sm text-gray-700 mb-4 sm:mb-0",children:e.jsxs("span",{className:"font-medium",children:["Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· ",Z+1,"-",Math.min(ae,Y.length)," Î±Ï€ÏŒ ",Y.length," Ï‡ÏÎ®ÏƒÏ„ÎµÏ‚",S&&` (Ï†Î¹Î»Ï„ÏÎ±ÏÎ¹ÏƒÎ¼Î­Î½Î¿Î¹ Î³Î¹Î± "${S}")`]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>v(s=>Math.max(s-1,1)),disabled:P===1,className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-gray-600 bg-white/80 border border-gray-300 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{children:"Î ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î·"})]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(H,5)},(s,t)=>{const c=t+1;return e.jsx("button",{onClick:()=>v(c),className:`px-4 py-2 text-sm font-medium rounded-xl transition-all duration-200 ${P===c?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"text-gray-700 bg-white/80 border border-gray-300 hover:bg-gray-50"}`,children:c},c)})}),e.jsxs("button",{onClick:()=>v(s=>Math.min(s+1,H)),disabled:P===H,className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-gray-600 bg-white/80 border border-gray-300 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:[e.jsx("span",{children:"Î•Ï€ÏŒÎ¼ÎµÎ½Î·"}),e.jsx(ue,{className:"h-4 w-4"})]})]})]}),g&&e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-pink-600 rounded-xl flex items-center justify-center",children:e.jsx(he,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ Î‘Ï€Î¿Ï…ÏƒÎ¹ÏÎ½"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[(le=u.find(s=>s.user_id===g))==null?void 0:le.first_name," ",(ie=u.find(s=>s.user_id===g))==null?void 0:ie.last_name]})]})]}),e.jsx("button",{onClick:()=>y(null),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(de,{className:"h-5 w-5"})})]}),T[g]&&T[g].length>0?e.jsx("div",{className:"space-y-4",children:T[g].map(s=>e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-gray-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl flex items-center justify-center",children:e.jsx(ee,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:new Date(s.session_date).toLocaleDateString("el-GR")}),e.jsx("span",{className:"text-sm text-gray-600",children:s.session_time})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsx("span",{children:s.reason||"Î§Ï‰ÏÎ¯Ï‚ Î±Î¹Ï„Î¯Î±"}),s.notes&&e.jsxs("span",{className:"text-gray-500",children:["â€¢ ",s.notes]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-xl ${s.absence_type==="absent"?"bg-red-100 text-red-800 border border-red-200":s.absence_type==="late"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:s.absence_type==="absent"?"Î‘Ï€ÏÎ½":s.absence_type==="late"?"ÎšÎ±Î¸Ï…ÏƒÏ„Î­ÏÎ·ÏƒÎ·":"Î”Î¹ÎºÎ±Î¹Î¿Î»Î¿Î³Î·Î¼Î­Î½Î¿Ï‚"}),e.jsx("button",{onClick:()=>ye(s.id),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Î”Î¹Î±Î³ÏÎ±Ï†Î®",children:e.jsx(de,{className:"h-4 w-4"})})]})]})},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-100 to-green-200 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(Ie,{className:"h-10 w-10 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î±Ï€Î¿Ï…ÏƒÎ¯ÎµÏ‚"}),e.jsx("p",{className:"text-gray-600",children:"ÎŸ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Î´ÎµÎ½ Î­Ï‡ÎµÎ¹ ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ·Î¼Î­Î½ÎµÏ‚ Î±Ï€Î¿Ï…ÏƒÎ¯ÎµÏ‚"})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl border border-white/20",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-pink-600 rounded-xl flex items-center justify-center",children:e.jsx(he,{className:"h-5 w-5 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î‘Ï€Î¿Ï…ÏƒÎ¯Î±Ï‚"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Î§ÏÎ®ÏƒÏ„Î·Ï‚"}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Ï‡ÏÎ®ÏƒÏ„Î·...",value:w||"",onChange:s=>{k(s.target.value),y("")},className:"w-full border border-gray-300 rounded-xl pl-10 pr-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),w&&e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-xl bg-white shadow-lg",children:q.filter(s=>`${s.first_name} ${s.last_name}`.toLowerCase().includes(w.toLowerCase())||s.email.toLowerCase().includes(w.toLowerCase())).map(s=>e.jsxs("div",{onClick:()=>{y(s.user_id),k(`${s.first_name} ${s.last_name}`)},className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[s.first_name," ",s.last_name]}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]},s.user_id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±"}),e.jsx("input",{type:"date",value:d.sessionDate,onChange:s=>o(t=>({...t,sessionDate:s.target.value})),className:"w-full border border-gray-300 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ÎÏÎ±"}),e.jsx("input",{type:"time",value:d.sessionTime,onChange:s=>o(t=>({...t,sessionTime:s.target.value})),className:"w-full border border-gray-300 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Î¤ÏÏ€Î¿Ï‚ Î‘Ï€Î¿Ï…ÏƒÎ¯Î±Ï‚"}),e.jsxs("select",{value:d.absenceType,onChange:s=>o(t=>({...t,absenceType:s.target.value})),className:"w-full border border-gray-300 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"absent",children:"Î‘Ï€ÏÎ½"}),e.jsx("option",{value:"late",children:"ÎšÎ±Î¸Ï…ÏƒÏ„Î­ÏÎ·ÏƒÎ·"}),e.jsx("option",{value:"excused",children:"Î”Î¹ÎºÎ±Î¹Î¿Î»Î¿Î³Î·Î¼Î­Î½Î¿Ï‚"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Î‘Î¹Ï„Î¯Î±"}),e.jsx("input",{type:"text",value:d.reason,onChange:s=>o(t=>({...t,reason:s.target.value})),className:"w-full border border-gray-300 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÎ® Î±Î¹Ï„Î¯Î±"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚"}),e.jsx("textarea",{value:d.notes,onChange:s=>o(t=>({...t,notes:s.target.value})),className:"w-full border border-gray-300 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÎ­Ï‚ ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[e.jsx("button",{onClick:()=>_(!1),className:"px-6 py-3 text-gray-600 border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200 font-medium",children:"Î‘ÎºÏÏÏ‰ÏƒÎ·"}),e.jsx("button",{onClick:fe,disabled:!g||!d.sessionDate||!d.sessionTime,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:"Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î‘Ï€Î¿Ï…ÏƒÎ¯Î±Ï‚"})]})]})})]})]})]})]})};export{Ve as default};
